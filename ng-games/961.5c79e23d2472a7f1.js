(self.webpackChunkng_games=self.webpackChunkng_games||[]).push([[961],{2961:($t,At,rt)=>{"use strict";rt.d(At,{a:()=>F});var nt=rt(8977),A=rt(7579),J=rt(136),at=rt(5e3),vt=rt(2313);const G=["gameContainer"];let F=(()=>{class W{constructor(Q){this.titleService=Q,this.ngUnsubscribe=new A.x,this.destroying=!1,this.appBgColor=0,this.appBgAlpha=1}ngOnInit(){this.titleService.setTitle(this.title||J.X)}ngAfterContentInit(){setTimeout(()=>this.init())}ngOnDestroy(){this.destroying=!0,this.ngUnsubscribe.next(),this.ngUnsubscribe.complete(),this.app.ticker.remove(this.tickerLoop),this.app.stage.destroy({baseTexture:!0,children:!0,texture:!0}),this.app.destroy(!0,{baseTexture:!0,children:!0,texture:!0})}init(){var Q;(null===(Q=this.gameContainerRef)||void 0===Q?void 0:Q.nativeElement)&&(this.screenBox=this.gameContainerRef.nativeElement.getBoundingClientRect(),this.app=new nt.MxU({height:this.screenBox.height-5,width:this.screenBox.width-10,backgroundColor:this.appBgColor,backgroundAlpha:this.appBgAlpha}),this.gameContainerRef.nativeElement.appendChild(this.app.view),this.gameContainer=new nt.W20,this.app.stage.addChild(this.gameContainer),this.app.ticker.add(this.tickerLoop.bind(this)))}tickerLoop(Q){}}return W.\u0275fac=function(Q){return new(Q||W)(at.Y36(vt.Dx))},W.\u0275dir=at.lG2({type:W,viewQuery:function(Q,Rt){if(1&Q&&at.Gf(G,7),2&Q){let bt;at.iGM(bt=at.CRH())&&(Rt.gameContainerRef=bt.first)}}}),W})()},6617:($t,At,rt)=>{"use strict";rt.d(At,{iw:()=>xt,T$:()=>at,V0:()=>J,mr:()=>Ft,yl:()=>ut,lg:()=>vt,Vi:()=>nt,I2:()=>G,UN:()=>zt,A7:()=>Ut,WB:()=>bt,G5:()=>Ct,cB:()=>Pt,N3:()=>A,oT:()=>Z,aH:()=>Q,sp:()=>F,vK:()=>W,Nt:()=>Rt});var nt=(()=>{return(R=nt||(nt={}))[R.WEBGL_LEGACY=0]="WEBGL_LEGACY",R[R.WEBGL=1]="WEBGL",R[R.WEBGL2=2]="WEBGL2",nt;var R})(),A=(()=>{return(R=A||(A={}))[R.UNKNOWN=0]="UNKNOWN",R[R.WEBGL=1]="WEBGL",R[R.CANVAS=2]="CANVAS",A;var R})(),J=(()=>{return(R=J||(J={}))[R.COLOR=16384]="COLOR",R[R.DEPTH=256]="DEPTH",R[R.STENCIL=1024]="STENCIL",J;var R})(),at=(()=>{return(R=at||(at={}))[R.NORMAL=0]="NORMAL",R[R.ADD=1]="ADD",R[R.MULTIPLY=2]="MULTIPLY",R[R.SCREEN=3]="SCREEN",R[R.OVERLAY=4]="OVERLAY",R[R.DARKEN=5]="DARKEN",R[R.LIGHTEN=6]="LIGHTEN",R[R.COLOR_DODGE=7]="COLOR_DODGE",R[R.COLOR_BURN=8]="COLOR_BURN",R[R.HARD_LIGHT=9]="HARD_LIGHT",R[R.SOFT_LIGHT=10]="SOFT_LIGHT",R[R.DIFFERENCE=11]="DIFFERENCE",R[R.EXCLUSION=12]="EXCLUSION",R[R.HUE=13]="HUE",R[R.SATURATION=14]="SATURATION",R[R.COLOR=15]="COLOR",R[R.LUMINOSITY=16]="LUMINOSITY",R[R.NORMAL_NPM=17]="NORMAL_NPM",R[R.ADD_NPM=18]="ADD_NPM",R[R.SCREEN_NPM=19]="SCREEN_NPM",R[R.NONE=20]="NONE",R[R.SRC_OVER=0]="SRC_OVER",R[R.SRC_IN=21]="SRC_IN",R[R.SRC_OUT=22]="SRC_OUT",R[R.SRC_ATOP=23]="SRC_ATOP",R[R.DST_OVER=24]="DST_OVER",R[R.DST_IN=25]="DST_IN",R[R.DST_OUT=26]="DST_OUT",R[R.DST_ATOP=27]="DST_ATOP",R[R.ERASE=26]="ERASE",R[R.SUBTRACT=28]="SUBTRACT",R[R.XOR=29]="XOR",at;var R})(),vt=(()=>{return(R=vt||(vt={}))[R.POINTS=0]="POINTS",R[R.LINES=1]="LINES",R[R.LINE_LOOP=2]="LINE_LOOP",R[R.LINE_STRIP=3]="LINE_STRIP",R[R.TRIANGLES=4]="TRIANGLES",R[R.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",R[R.TRIANGLE_FAN=6]="TRIANGLE_FAN",vt;var R})(),G=(()=>{return(R=G||(G={}))[R.RGBA=6408]="RGBA",R[R.RGB=6407]="RGB",R[R.RG=33319]="RG",R[R.RED=6403]="RED",R[R.RGBA_INTEGER=36249]="RGBA_INTEGER",R[R.RGB_INTEGER=36248]="RGB_INTEGER",R[R.RG_INTEGER=33320]="RG_INTEGER",R[R.RED_INTEGER=36244]="RED_INTEGER",R[R.ALPHA=6406]="ALPHA",R[R.LUMINANCE=6409]="LUMINANCE",R[R.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",R[R.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",R[R.DEPTH_STENCIL=34041]="DEPTH_STENCIL",G;var R})(),F=(()=>{return(R=F||(F={}))[R.TEXTURE_2D=3553]="TEXTURE_2D",R[R.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",R[R.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",R[R.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",R[R.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",R[R.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",R[R.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",R[R.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",R[R.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",F;var R})(),W=(()=>{return(R=W||(W={}))[R.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",R[R.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",R[R.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",R[R.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",R[R.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",R[R.UNSIGNED_INT=5125]="UNSIGNED_INT",R[R.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",R[R.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",R[R.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",R[R.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",R[R.BYTE=5120]="BYTE",R[R.SHORT=5122]="SHORT",R[R.INT=5124]="INT",R[R.FLOAT=5126]="FLOAT",R[R.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",R[R.HALF_FLOAT=36193]="HALF_FLOAT",W;var R})(),Z=(()=>{return(R=Z||(Z={}))[R.FLOAT=0]="FLOAT",R[R.INT=1]="INT",R[R.UINT=2]="UINT",Z;var R})(),Q=(()=>{return(R=Q||(Q={}))[R.NEAREST=0]="NEAREST",R[R.LINEAR=1]="LINEAR",Q;var R})(),Rt=(()=>{return(R=Rt||(Rt={}))[R.CLAMP=33071]="CLAMP",R[R.REPEAT=10497]="REPEAT",R[R.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",Rt;var R})(),bt=(()=>{return(R=bt||(bt={}))[R.OFF=0]="OFF",R[R.POW2=1]="POW2",R[R.ON=2]="ON",R[R.ON_MANUAL=3]="ON_MANUAL",bt;var R})(),xt=(()=>{return(R=xt||(xt={}))[R.NPM=0]="NPM",R[R.UNPACK=1]="UNPACK",R[R.PMA=2]="PMA",R[R.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",R[R.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",R[R.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",R[R.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",xt;var R})(),ut=(()=>{return(R=ut||(ut={}))[R.NO=0]="NO",R[R.YES=1]="YES",R[R.AUTO=2]="AUTO",R[R.BLEND=0]="BLEND",R[R.CLEAR=1]="CLEAR",R[R.BLIT=2]="BLIT",ut;var R})(),zt=(()=>{return(R=zt||(zt={}))[R.AUTO=0]="AUTO",R[R.MANUAL=1]="MANUAL",zt;var R})(),Pt=(()=>{return(R=Pt||(Pt={})).LOW="lowp",R.MEDIUM="mediump",R.HIGH="highp",Pt;var R})(),Ut=(()=>{return(R=Ut||(Ut={}))[R.NONE=0]="NONE",R[R.SCISSOR=1]="SCISSOR",R[R.STENCIL=2]="STENCIL",R[R.SPRITE=3]="SPRITE",Ut;var R})(),Ct=(()=>{return(R=Ct||(Ct={}))[R.NONE=0]="NONE",R[R.LOW=2]="LOW",R[R.MEDIUM=4]="MEDIUM",R[R.HIGH=8]="HIGH",Ct;var R})(),Ft=(()=>{return(R=Ft||(Ft={}))[R.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",R[R.ARRAY_BUFFER=34962]="ARRAY_BUFFER",R[R.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",Ft;var R})()},5989:($t,At,rt)=>{"use strict";rt.d(At,{VL:()=>Pt,a$:()=>ci,JZ:()=>Qi,Bv:()=>tn,Ie:()=>di,lW:()=>st,qm:()=>ut,wn:()=>ye,ZX:()=>Tt,bO:()=>fe,$r:()=>Er,ud:()=>jt,TI:()=>B,Th:()=>Ne,ex:()=>mr,ZM:()=>We,xE:()=>b,UX:()=>Jr,oo:()=>Qt,Rv:()=>_i,e6:()=>ar,Y9:()=>Zi,kP:()=>Se});var nt=rt(5593),A=rt(6617),J=rt(7567),at=rt(91),vt=rt(5768),G=rt(477);nt.X.PREFER_ENV=J.tq.any?A.Vi.WEBGL:A.Vi.WEBGL2,nt.X.STRICT_TEXTURE_CACHE=!1;var F=[];function W(f,n){if(!f)return null;var a="";if("string"==typeof f){var o=/\.(\w{3,4})(?:$|\?|#)/i.exec(f);o&&(a=o[1].toLowerCase())}for(var u=F.length-1;u>=0;--u){var d=F[u];if(d.test&&d.test(f,a))return new d(f,n)}throw new Error("Unrecognized source type to auto-detect Resource")}var Z=function(f,n){return(Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var u in o)o.hasOwnProperty(u)&&(a[u]=o[u])})(f,n)};function Q(f,n){function a(){this.constructor=f}Z(f,n),f.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}var Rt=function(){return Rt=Object.assign||function(n){for(var o,a=arguments,u=1,d=arguments.length;u<d;u++)for(var p in o=a[u])Object.prototype.hasOwnProperty.call(o,p)&&(n[p]=o[p]);return n},Rt.apply(this,arguments)},xt=function(){function f(n,a){void 0===n&&(n=0),void 0===a&&(a=0),this._width=n,this._height=a,this.destroyed=!1,this.internal=!1,this.onResize=new at.R("setRealSize"),this.onUpdate=new at.R("update"),this.onError=new at.R("onError")}return f.prototype.bind=function(n){this.onResize.add(n),this.onUpdate.add(n),this.onError.add(n),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},f.prototype.unbind=function(n){this.onResize.remove(n),this.onUpdate.remove(n),this.onError.remove(n)},f.prototype.resize=function(n,a){(n!==this._width||a!==this._height)&&(this._width=n,this._height=a,this.onResize.emit(n,a))},Object.defineProperty(f.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),f.prototype.update=function(){this.destroyed||this.onUpdate.emit()},f.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(f.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),f.prototype.style=function(n,a,o){return!1},f.prototype.dispose=function(){},f.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},f.test=function(n,a){return!1},f}(),ut=function(f){function n(a,o){var u=this,d=o||{},p=d.width,S=d.height;if(!p||!S)throw new Error("BufferResource width or height invalid");return(u=f.call(this,p,S)||this).data=a,u}return Q(n,f),n.prototype.upload=function(a,o,u){var d=a.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.alphaMode===A.iw.UNPACK);var p=o.realWidth,S=o.realHeight;return u.width===p&&u.height===S?d.texSubImage2D(o.target,0,0,0,p,S,o.format,u.type,this.data):(u.width=p,u.height=S,d.texImage2D(o.target,0,u.internalFormat,p,S,0,o.format,u.type,this.data)),!0},n.prototype.dispose=function(){this.data=null},n.test=function(a){return a instanceof Float32Array||a instanceof Uint8Array||a instanceof Uint32Array},n}(xt),zt={scaleMode:A.aH.NEAREST,format:A.I2.RGBA,alphaMode:A.iw.NPM},Pt=function(f){function n(a,o){void 0===a&&(a=null),void 0===o&&(o=null);var u=f.call(this)||this,d=(o=o||{}).alphaMode,p=o.mipmap,S=o.anisotropicLevel,P=o.scaleMode,V=o.width,q=o.height,ot=o.wrapMode,dt=o.format,Dt=o.type,Gt=o.target,kt=o.resolution;return a&&!(a instanceof xt)&&((a=W(a,o.resourceOptions)).internal=!0),u.resolution=kt||nt.X.RESOLUTION,u.width=Math.round((V||0)*u.resolution)/u.resolution,u.height=Math.round((q||0)*u.resolution)/u.resolution,u._mipmap=void 0!==p?p:nt.X.MIPMAP_TEXTURES,u.anisotropicLevel=void 0!==S?S:nt.X.ANISOTROPIC_LEVEL,u._wrapMode=ot||nt.X.WRAP_MODE,u._scaleMode=void 0!==P?P:nt.X.SCALE_MODE,u.format=dt||A.I2.RGBA,u.type=Dt||A.vK.UNSIGNED_BYTE,u.target=Gt||A.sp.TEXTURE_2D,u.alphaMode=void 0!==d?d:A.iw.UNPACK,u.uid=(0,J.hQ)(),u.touched=0,u.isPowerOfTwo=!1,u._refreshPOT(),u._glTextures={},u.dirtyId=0,u.dirtyStyleId=0,u.cacheId=null,u.valid=V>0&&q>0,u.textureCacheIds=[],u.destroyed=!1,u.resource=null,u._batchEnabled=0,u._batchLocation=0,u.parentTextureArray=null,u.setResource(a),u}return Q(n,f),Object.defineProperty(n.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"mipmap",{get:function(){return this._mipmap},set:function(a){this._mipmap!==a&&(this._mipmap=a,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(a){this._scaleMode!==a&&(this._scaleMode=a,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(a){this._wrapMode!==a&&(this._wrapMode=a,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),n.prototype.setStyle=function(a,o){var u;return void 0!==a&&a!==this.scaleMode&&(this.scaleMode=a,u=!0),void 0!==o&&o!==this.mipmap&&(this.mipmap=o,u=!0),u&&this.dirtyStyleId++,this},n.prototype.setSize=function(a,o,u){return this.setRealSize(a*(u=u||this.resolution),o*u,u)},n.prototype.setRealSize=function(a,o,u){return this.resolution=u||this.resolution,this.width=Math.round(a)/this.resolution,this.height=Math.round(o)/this.resolution,this._refreshPOT(),this.update(),this},n.prototype._refreshPOT=function(){this.isPowerOfTwo=(0,J.wv)(this.realWidth)&&(0,J.wv)(this.realHeight)},n.prototype.setResolution=function(a){var o=this.resolution;return o===a||(this.resolution=a,this.valid&&(this.width=Math.round(this.width*o)/a,this.height=Math.round(this.height*o)/a,this.emit("update",this)),this._refreshPOT()),this},n.prototype.setResource=function(a){if(this.resource===a)return this;if(this.resource)throw new Error("Resource can be set only once");return a.bind(this),this.resource=a,this},n.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},n.prototype.onError=function(a){this.emit("error",this,a)},n.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete J.V8[this.cacheId],delete J.kN[this.cacheId],this.cacheId=null),this.dispose(),n.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},n.prototype.dispose=function(){this.emit("dispose",this)},n.prototype.castToBaseTexture=function(){return this},n.from=function(a,o,u){void 0===u&&(u=nt.X.STRICT_TEXTURE_CACHE);var d="string"==typeof a,p=null;d?p=a:(a._pixiId||(a._pixiId=(o&&o.pixiIdPrefix||"pixiid")+"_"+(0,J.hQ)()),p=a._pixiId);var P=J.V8[p];if(d&&u&&!P)throw new Error('The cacheId "'+p+'" does not exist in BaseTextureCache.');return P||((P=new n(a,o)).cacheId=p,n.addToCache(P,p)),P},n.fromBuffer=function(a,o,u,d){a=a||new Float32Array(o*u*4);var p=new ut(a,{width:o,height:u}),S=a instanceof Float32Array?A.vK.FLOAT:A.vK.UNSIGNED_BYTE;return new n(p,Object.assign(zt,d||{width:o,height:u,type:S}))},n.addToCache=function(a,o){o&&(-1===a.textureCacheIds.indexOf(o)&&a.textureCacheIds.push(o),J.V8[o]&&console.warn("BaseTexture added to the cache with an id ["+o+"] that already had an entry"),J.V8[o]=a)},n.removeFromCache=function(a){if("string"==typeof a){var o=J.V8[a];if(o){var u=o.textureCacheIds.indexOf(a);return u>-1&&o.textureCacheIds.splice(u,1),delete J.V8[a],o}}else if(a&&a.textureCacheIds){for(var d=0;d<a.textureCacheIds.length;++d)delete J.V8[a.textureCacheIds[d]];return a.textureCacheIds.length=0,a}return null},n._globalBatch=0,n}(J.vp),Ut=function(f){function n(a,o){var u=this,d=o||{};(u=f.call(this,d.width,d.height)||this).items=[],u.itemDirtyIds=[];for(var P=0;P<a;P++){var V=new Pt;u.items.push(V),u.itemDirtyIds.push(-2)}return u.length=a,u._load=null,u.baseTexture=null,u}return Q(n,f),n.prototype.initFromArray=function(a,o){for(var u=0;u<this.length;u++)!a[u]||(a[u].castToBaseTexture?this.addBaseTextureAt(a[u].castToBaseTexture(),u):this.addResourceAt(a[u]instanceof xt?a[u]:W(a[u],o),u))},n.prototype.dispose=function(){for(var a=0,o=this.length;a<o;a++)this.items[a].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},n.prototype.addResourceAt=function(a,o){if(!this.items[o])throw new Error("Index "+o+" is out of bounds");return a.valid&&!this.valid&&this.resize(a.width,a.height),this.items[o].setResource(a),this},n.prototype.bind=function(a){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");f.prototype.bind.call(this,a);for(var o=0;o<this.length;o++)this.items[o].parentTextureArray=a,this.items[o].on("update",a.update,a)},n.prototype.unbind=function(a){f.prototype.unbind.call(this,a);for(var o=0;o<this.length;o++)this.items[o].parentTextureArray=null,this.items[o].off("update",a.update,a)},n.prototype.load=function(){var a=this;if(this._load)return this._load;var u=this.items.map(function(d){return d.resource}).filter(function(d){return d}).map(function(d){return d.load()});return this._load=Promise.all(u).then(function(){var d=a.items[0];return a.resize(d.realWidth,d.realHeight),Promise.resolve(a)}),this._load},n}(xt),Ct=function(f){function n(a,o){var P,V,u=this,d=o||{},p=d.width,S=d.height;return Array.isArray(a)?(P=a,V=a.length):V=a,u=f.call(this,V,{width:p,height:S})||this,P&&u.initFromArray(P,o),u}return Q(n,f),n.prototype.addBaseTextureAt=function(a,o){if(!a.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(a.resource,o),this},n.prototype.bind=function(a){f.prototype.bind.call(this,a),a.target=A.sp.TEXTURE_2D_ARRAY},n.prototype.upload=function(a,o,u){var d=this,p=d.length,S=d.itemDirtyIds,P=d.items,V=a.gl;u.dirtyId<0&&V.texImage3D(V.TEXTURE_2D_ARRAY,0,u.internalFormat,this._width,this._height,p,0,o.format,u.type,null);for(var q=0;q<p;q++){var ot=P[q];S[q]<ot.dirtyId&&(S[q]=ot.dirtyId,ot.valid&&V.texSubImage3D(V.TEXTURE_2D_ARRAY,0,0,0,q,ot.resource.width,ot.resource.height,1,o.format,u.type,ot.resource.source))}return!0},n}(Ut),Ft=function(f){function n(a){var o=this;return(o=f.call(this,a.naturalWidth||a.videoWidth||a.width,a.naturalHeight||a.videoHeight||a.height)||this).source=a,o.noSubImage=!1,o}return Q(n,f),n.crossOrigin=function(a,o,u){void 0===u&&0!==o.indexOf("data:")?a.crossOrigin=(0,J.Qq)(o):!1!==u&&(a.crossOrigin="string"==typeof u?u:"anonymous")},n.prototype.upload=function(a,o,u,d){var p=a.gl,S=o.realWidth,P=o.realHeight;return d=d||this.source,p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.alphaMode===A.iw.UNPACK),this.noSubImage||o.target!==p.TEXTURE_2D||u.width!==S||u.height!==P?(u.width=S,u.height=P,p.texImage2D(o.target,0,u.internalFormat,o.format,u.type,d)):p.texSubImage2D(p.TEXTURE_2D,0,0,0,o.format,u.type,d),!0},n.prototype.update=function(){if(!this.destroyed){var a=this.source;this.resize(a.naturalWidth||a.videoWidth||a.width,a.naturalHeight||a.videoHeight||a.height),f.prototype.update.call(this)}},n.prototype.dispose=function(){this.source=null},n}(xt),R=function(f){function n(a){return f.call(this,a)||this}return Q(n,f),n.test=function(a){var o=self.OffscreenCanvas;return!!(o&&a instanceof o)||self.HTMLCanvasElement&&a instanceof HTMLCanvasElement},n}(Ft),Kt=function(f){function n(a,o){var u=this,d=o||{},p=d.width,S=d.height,P=d.autoLoad,V=d.linkBaseTexture;if(a&&a.length!==n.SIDES)throw new Error("Invalid length. Got "+a.length+", expected 6");u=f.call(this,6,{width:p,height:S})||this;for(var q=0;q<n.SIDES;q++)u.items[q].target=A.sp.TEXTURE_CUBE_MAP_POSITIVE_X+q;return u.linkBaseTexture=!1!==V,a&&u.initFromArray(a,o),!1!==P&&u.load(),u}return Q(n,f),n.prototype.bind=function(a){f.prototype.bind.call(this,a),a.target=A.sp.TEXTURE_CUBE_MAP},n.prototype.addBaseTextureAt=function(a,o,u){if(void 0===u&&(u=this.linkBaseTexture),!this.items[o])throw new Error("Index "+o+" is out of bounds");if(!this.linkBaseTexture||a.parentTextureArray||Object.keys(a._glTextures).length>0){if(!a.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(a.resource,o)}else a.target=A.sp.TEXTURE_CUBE_MAP_POSITIVE_X+o,a.parentTextureArray=this.baseTexture,this.items[o]=a;return a.valid&&!this.valid&&this.resize(a.realWidth,a.realHeight),this.items[o]=a,this},n.prototype.upload=function(a,o,u){for(var d=this.itemDirtyIds,p=0;p<n.SIDES;p++){var S=this.items[p];d[p]<S.dirtyId&&(S.valid&&S.resource?(S.resource.upload(a,S,u),d[p]=S.dirtyId):d[p]<-1&&(a.gl.texImage2D(S.target,0,u.internalFormat,o.realWidth,o.realHeight,0,o.format,u.type,null),d[p]=-1))}return!0},n.test=function(a){return Array.isArray(a)&&a.length===n.SIDES},n.SIDES=6,n}(Ut),se=function(f){function n(a,o){var u=this;if(o=o||{},!(a instanceof HTMLImageElement)){var d=new Image;Ft.crossOrigin(d,a,o.crossorigin),d.src=a,a=d}return u=f.call(this,a)||this,!a.complete&&!!u._width&&!!u._height&&(u._width=0,u._height=0),u.url=a.src,u._process=null,u.preserveBitmap=!1,u.createBitmap=(void 0!==o.createBitmap?o.createBitmap:nt.X.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,u.alphaMode="number"==typeof o.alphaMode?o.alphaMode:null,u.bitmap=null,u._load=null,!1!==o.autoLoad&&u.load(),u}return Q(n,f),n.prototype.load=function(a){var o=this;return this._load||(void 0!==a&&(this.createBitmap=a),this._load=new Promise(function(u,d){var p=o.source;o.url=p.src;var S=function(){o.destroyed||(p.onload=null,p.onerror=null,o.resize(p.width,p.height),o._load=null,u(o.createBitmap?o.process():o))};p.complete&&p.src?S():(p.onload=S,p.onerror=function(P){d(P),o.onError.emit(P)})})),this._load},n.prototype.process=function(){var a=this,o=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!self.createImageBitmap)return Promise.resolve(this);var u=self.createImageBitmap;return this._process=fetch(o.src,{mode:o.crossOrigin&&"anonymous"!==o.crossOrigin?"no-cors":"cors"}).then(function(p){return p.blob()}).then(function(p){return u(p,0,0,o.width,o.height,{premultiplyAlpha:a.alphaMode===A.iw.UNPACK?"premultiply":"none"})}).then(function(p){return a.destroyed?Promise.reject():(a.bitmap=p,a.update(),a._process=null,Promise.resolve(a))}),this._process},n.prototype.upload=function(a,o,u){if("number"==typeof this.alphaMode&&(o.alphaMode=this.alphaMode),!this.createBitmap)return f.prototype.upload.call(this,a,o,u);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(f.prototype.upload.call(this,a,o,u,this.bitmap),!this.preserveBitmap){var d=!0,p=o._glTextures;for(var S in p){var P=p[S];if(P!==u&&P.dirtyId!==o.dirtyId){d=!1;break}}d&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},n.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,f.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},n.test=function(a){return"string"==typeof a||a instanceof HTMLImageElement},n}(Ft),U=function(f){function n(a,o){var u=this;return o=o||{},(u=f.call(this,document.createElement("canvas"))||this)._width=0,u._height=0,u.svg=a,u.scale=o.scale||1,u._overrideWidth=o.width,u._overrideHeight=o.height,u._resolve=null,u._crossorigin=o.crossorigin,u._load=null,!1!==o.autoLoad&&u.load(),u}return Q(n,f),n.prototype.load=function(){var a=this;return this._load||(this._load=new Promise(function(o){if(a._resolve=function(){a.resize(a.source.width,a.source.height),o(a)},n.SVG_XML.test(a.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");a.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(a.svg)))}a._loadSvg()})),this._load},n.prototype._loadSvg=function(){var a=this,o=new Image;Ft.crossOrigin(o,this.svg,this._crossorigin),o.src=this.svg,o.onerror=function(u){!a._resolve||(o.onerror=null,a.onError.emit(u))},o.onload=function(){if(a._resolve){var u=o.width,d=o.height;if(!u||!d)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var p=u*a.scale,S=d*a.scale;(a._overrideWidth||a._overrideHeight)&&(p=a._overrideWidth||a._overrideHeight/d*u,S=a._overrideHeight||a._overrideWidth/u*d),p=Math.round(p),S=Math.round(S);var P=a.source;P.width=p,P.height=S,P._pixiId="canvas_"+(0,J.hQ)(),P.getContext("2d").drawImage(o,0,0,u,d,0,0,p,S),a._resolve(),a._resolve=null}}},n.getSize=function(a){var o=n.SVG_SIZE.exec(a),u={};return o&&(u[o[1]]=Math.round(parseFloat(o[3])),u[o[5]]=Math.round(parseFloat(o[7]))),u},n.prototype.dispose=function(){f.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},n.test=function(a,o){return"svg"===o||"string"==typeof a&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(a)||"string"==typeof a&&n.SVG_XML.test(a)},n.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,n.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,n}(Ft),v=function(f){function n(a,o){var u=this;if(o=o||{},!(a instanceof HTMLVideoElement)){var d=document.createElement("video");d.setAttribute("preload","auto"),d.setAttribute("webkit-playsinline",""),d.setAttribute("playsinline",""),"string"==typeof a&&(a=[a]),Ft.crossOrigin(d,a[0].src||a[0],o.crossorigin);for(var S=0;S<a.length;++S){var P=document.createElement("source"),V=a[S],q=V.src,ot=V.mime,dt=(q=q||a[S]).split("?").shift().toLowerCase(),Dt=dt.substr(dt.lastIndexOf(".")+1);ot=ot||n.MIME_TYPES[Dt]||"video/"+Dt,P.src=q,P.type=ot,d.appendChild(P)}a=d}return(u=f.call(this,a)||this).noSubImage=!0,u._autoUpdate=!0,u._isConnectedToTicker=!1,u._updateFPS=o.updateFPS||0,u._msToNextUpdate=0,u.autoPlay=!1!==o.autoPlay,u._load=null,u._resolve=null,u._onCanPlay=u._onCanPlay.bind(u),u._onError=u._onError.bind(u),!1!==o.autoLoad&&u.load(),u}return Q(n,f),n.prototype.update=function(a){this.destroyed||(this._msToNextUpdate=Math.floor(this._msToNextUpdate-vt.vB.shared.elapsedMS*this.source.playbackRate),(!this._updateFPS||this._msToNextUpdate<=0)&&(f.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))},n.prototype.load=function(){var a=this;if(this._load)return this._load;var o=this.source;return(o.readyState===o.HAVE_ENOUGH_DATA||o.readyState===o.HAVE_FUTURE_DATA)&&o.width&&o.height&&(o.complete=!0),o.addEventListener("play",this._onPlayStart.bind(this)),o.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(o.addEventListener("canplay",this._onCanPlay),o.addEventListener("canplaythrough",this._onCanPlay),o.addEventListener("error",this._onError,!0)),this._load=new Promise(function(u){a.valid?u(a):(a._resolve=u,o.load())}),this._load},n.prototype._onError=function(a){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(a)},n.prototype._isSourcePlaying=function(){var a=this.source;return a.currentTime>0&&!1===a.paused&&!1===a.ended&&a.readyState>2},n.prototype._isSourceReady=function(){var a=this.source;return 3===a.readyState||4===a.readyState},n.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(vt.vB.shared.add(this.update,this),this._isConnectedToTicker=!0)},n.prototype._onPlayStop=function(){this._isConnectedToTicker&&(vt.vB.shared.remove(this.update,this),this._isConnectedToTicker=!1)},n.prototype._onCanPlay=function(){var a=this.source;a.removeEventListener("canplay",this._onCanPlay),a.removeEventListener("canplaythrough",this._onCanPlay);var o=this.valid;this.resize(a.videoWidth,a.videoHeight),!o&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&a.play()},n.prototype.dispose=function(){this._isConnectedToTicker&&(vt.vB.shared.remove(this.update,this),this._isConnectedToTicker=!1);var a=this.source;a&&(a.removeEventListener("error",this._onError,!0),a.pause(),a.src="",a.load()),f.prototype.dispose.call(this)},Object.defineProperty(n.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(a){a!==this._autoUpdate&&(this._autoUpdate=a,!this._autoUpdate&&this._isConnectedToTicker?(vt.vB.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(vt.vB.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(a){a!==this._updateFPS&&(this._updateFPS=a)},enumerable:!1,configurable:!0}),n.test=function(a,o){return self.HTMLVideoElement&&a instanceof HTMLVideoElement||n.TYPES.indexOf(o)>-1},n.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],n.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},n}(Ft),N=function(f){function n(a){return f.call(this,a)||this}return Q(n,f),n.test=function(a){return!!self.createImageBitmap&&a instanceof ImageBitmap},n}(Ft);F.push(se,N,R,v,U,ut,Kt,Ct);var y={__proto__:null,Resource:xt,BaseImageResource:Ft,INSTALLED:F,autoDetectResource:W,AbstractMultiResource:Ut,ArrayResource:Ct,BufferResource:ut,CanvasResource:R,CubeResource:Kt,ImageResource:se,SVGResource:U,VideoResource:v,ImageBitmapResource:N},j=function(f){function n(){return null!==f&&f.apply(this,arguments)||this}return Q(n,f),n.prototype.upload=function(a,o,u){var d=a.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.alphaMode===A.iw.UNPACK);var p=o.realWidth,S=o.realHeight;return u.width===p&&u.height===S?d.texSubImage2D(o.target,0,0,0,p,S,o.format,u.type,this.data):(u.width=p,u.height=S,d.texImage2D(o.target,0,u.internalFormat,p,S,0,o.format,u.type,this.data)),!0},n}(ut),Y=function(){function f(n,a){this.width=Math.round(n||100),this.height=Math.round(a||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new at.R("disposeFramebuffer"),this.multisample=A.G5.NONE}return Object.defineProperty(f.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),f.prototype.addColorTexture=function(n,a){return void 0===n&&(n=0),this.colorTextures[n]=a||new Pt(null,{scaleMode:A.aH.NEAREST,resolution:1,mipmap:A.WB.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},f.prototype.addDepthTexture=function(n){return this.depthTexture=n||new Pt(new j(null,{width:this.width,height:this.height}),{scaleMode:A.aH.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:A.WB.OFF,format:A.I2.DEPTH_COMPONENT,type:A.vK.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},f.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},f.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},f.prototype.resize=function(n,a){if(n=Math.round(n),a=Math.round(a),n!==this.width||a!==this.height){this.width=n,this.height=a,this.dirtyId++,this.dirtySize++;for(var o=0;o<this.colorTextures.length;o++){var u=this.colorTextures[o];u.setSize(n/(d=u.resolution),a/d)}var d;this.depthTexture&&this.depthTexture.setSize(n/(d=this.depthTexture.resolution),a/d)}},f.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},f.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},f}(),Et=function(f){function n(a){var o=this;if("number"==typeof a){var u=arguments[0],d=arguments[1],p=arguments[2],S=arguments[3];a={width:u,height:d,scaleMode:p,resolution:S}}return a.width=a.width||100,a.height=a.height||100,a.multisample=void 0!==a.multisample?a.multisample:A.G5.NONE,(o=f.call(this,null,a)||this).mipmap=A.WB.OFF,o.valid=!0,o.clearColor=[0,0,0,0],o.framebuffer=new Y(o.realWidth,o.realHeight).addColorTexture(0,o),o.framebuffer.multisample=a.multisample,o.maskStack=[],o.filterStack=[{}],o}return Q(n,f),n.prototype.resize=function(a,o){this.framebuffer.resize(a*this.resolution,o*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},n.prototype.dispose=function(){this.framebuffer.dispose(),f.prototype.dispose.call(this)},n.prototype.destroy=function(){f.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},n}(Pt),wt=function(){function f(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return f.prototype.set=function(n,a,o){var u=a.width,d=a.height;if(o){var p=n.width/2/u,S=n.height/2/d,P=n.x/u+p,V=n.y/d+S;o=G.Lv.add(o,G.Lv.NW),this.x0=P+p*G.Lv.uX(o),this.y0=V+S*G.Lv.uY(o),o=G.Lv.add(o,2),this.x1=P+p*G.Lv.uX(o),this.y1=V+S*G.Lv.uY(o),o=G.Lv.add(o,2),this.x2=P+p*G.Lv.uX(o),this.y2=V+S*G.Lv.uY(o),o=G.Lv.add(o,2),this.x3=P+p*G.Lv.uX(o),this.y3=V+S*G.Lv.uY(o)}else this.x0=n.x/u,this.y0=n.y/d,this.x1=(n.x+n.width)/u,this.y1=n.y/d,this.x2=(n.x+n.width)/u,this.y2=(n.y+n.height)/d,this.x3=n.x/u,this.y3=(n.y+n.height)/d;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},f.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},f}(),m=new wt,b=function(f){function n(a,o,u,d,p,S){var P=f.call(this)||this;if(P.noFrame=!1,o||(P.noFrame=!0,o=new G.Ae(0,0,1,1)),a instanceof n&&(a=a.baseTexture),P.baseTexture=a,P._frame=o,P.trim=d,P.valid=!1,P._uvs=m,P.uvMatrix=null,P.orig=u||o,P._rotate=Number(p||0),!0===p)P._rotate=2;else if(P._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return P.defaultAnchor=S?new G.E9(S.x,S.y):new G.E9(0,0),P._updateID=0,P.textureCacheIds=[],a.valid?P.noFrame?a.valid&&P.onBaseTextureUpdated(a):P.frame=o:a.once("loaded",P.onBaseTextureUpdated,P),P.noFrame&&a.on("update",P.onBaseTextureUpdated,P),P}return Q(n,f),n.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},n.prototype.onBaseTextureUpdated=function(a){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=a.width,this._frame.height=a.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},n.prototype.destroy=function(a){if(this.baseTexture){if(a){var o=this.baseTexture.resource;o&&o.url&&J.kN[o.url]&&n.removeFromCache(o.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,n.removeFromCache(this),this.textureCacheIds=null},n.prototype.clone=function(){var a=this._frame.clone(),o=this._frame===this.orig?a:this.orig.clone(),u=new n(this.baseTexture,!this.noFrame&&a,o,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(u._frame=a),u},n.prototype.updateUvs=function(){this._uvs===m&&(this._uvs=new wt),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},n.from=function(a,o,u){void 0===o&&(o={}),void 0===u&&(u=nt.X.STRICT_TEXTURE_CACHE);var d="string"==typeof a,p=null;d?p=a:a instanceof Pt?(a.cacheId||(a.cacheId=(o&&o.pixiIdPrefix||"pixiid")+"-"+(0,J.hQ)(),Pt.addToCache(a,a.cacheId)),p=a.cacheId):(a._pixiId||(a._pixiId=(o&&o.pixiIdPrefix||"pixiid")+"_"+(0,J.hQ)()),p=a._pixiId);var P=J.kN[p];if(d&&u&&!P)throw new Error('The cacheId "'+p+'" does not exist in TextureCache.');return P||a instanceof Pt?!P&&a instanceof Pt&&(P=new n(a),n.addToCache(P,p)):(o.resolution||(o.resolution=(0,J.fL)(a)),(P=new n(new Pt(a,o))).baseTexture.cacheId=p,Pt.addToCache(P.baseTexture,p),n.addToCache(P,p)),P},n.fromURL=function(a,o){var u=Object.assign({autoLoad:!1},null==o?void 0:o.resourceOptions),d=n.from(a,Object.assign({resourceOptions:u},o),!1),p=d.baseTexture.resource;return d.baseTexture.valid?Promise.resolve(d):p.load().then(function(){return Promise.resolve(d)})},n.fromBuffer=function(a,o,u,d){return new n(Pt.fromBuffer(a,o,u,d))},n.fromLoader=function(a,o,u,d){var p=new Pt(a,Object.assign({scaleMode:nt.X.SCALE_MODE,resolution:(0,J.fL)(o)},d)),S=p.resource;S instanceof se&&(S.url=o);var P=new n(p);return u||(u=o),Pt.addToCache(P.baseTexture,u),n.addToCache(P,u),u!==o&&(Pt.addToCache(P.baseTexture,o),n.addToCache(P,o)),P.baseTexture.valid?Promise.resolve(P):new Promise(function(V){P.baseTexture.once("loaded",function(){return V(P)})})},n.addToCache=function(a,o){o&&(-1===a.textureCacheIds.indexOf(o)&&a.textureCacheIds.push(o),J.kN[o]&&console.warn("Texture added to the cache with an id ["+o+"] that already had an entry"),J.kN[o]=a)},n.removeFromCache=function(a){if("string"==typeof a){var o=J.kN[a];if(o){var u=o.textureCacheIds.indexOf(a);return u>-1&&o.textureCacheIds.splice(u,1),delete J.kN[a],o}}else if(a&&a.textureCacheIds){for(var d=0;d<a.textureCacheIds.length;++d)J.kN[a.textureCacheIds[d]]===a&&delete J.kN[a.textureCacheIds[d]];return a.textureCacheIds.length=0,a}return null},Object.defineProperty(n.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"frame",{get:function(){return this._frame},set:function(a){this._frame=a,this.noFrame=!1;var o=a.x,u=a.y,d=a.width,p=a.height,S=o+d>this.baseTexture.width,P=u+p>this.baseTexture.height;if(S||P)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: X: "+o+" + "+d+" = "+(o+d)+" > "+this.baseTexture.width+" "+(S&&P?"and":"or")+" Y: "+u+" + "+p+" = "+(u+p)+" > "+this.baseTexture.height);this.valid=d&&p&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=a),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rotate",{get:function(){return this._rotate},set:function(a){this._rotate=a,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),n.prototype.castToBaseTexture=function(){return this.baseTexture},n}(J.vp);function H(f){f.destroy=function(){},f.on=function(){},f.once=function(){},f.emit=function(){}}b.EMPTY=new b(new Pt),H(b.EMPTY),H(b.EMPTY.baseTexture),b.WHITE=function(){var f=document.createElement("canvas");f.width=16,f.height=16;var n=f.getContext("2d");return n.fillStyle="white",n.fillRect(0,0,16,16),new b(new Pt(new R(f)))}(),H(b.WHITE),H(b.WHITE.baseTexture);var B=function(f){function n(a,o){var u=f.call(this,a,o)||this;return u.valid=!0,u.filterFrame=null,u.filterPoolKey=null,u.updateUvs(),u}return Q(n,f),Object.defineProperty(n.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(a){this.framebuffer.multisample=a},enumerable:!1,configurable:!0}),n.prototype.resize=function(a,o,u){void 0===u&&(u=!0);var d=this.baseTexture.resolution,p=Math.round(a*d)/d,S=Math.round(o*d)/d;this.valid=p>0&&S>0,this._frame.width=this.orig.width=p,this._frame.height=this.orig.height=S,u&&this.baseTexture.resize(p,S),this.updateUvs()},n.prototype.setResolution=function(a){var o=this.baseTexture;o.resolution!==a&&(o.setResolution(a),this.resize(o.width,o.height,!1))},n.create=function(a){for(var o=arguments,u=[],d=1;d<arguments.length;d++)u[d-1]=o[d];return"number"==typeof a&&((0,J.a1)("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),a={width:a,height:u[0],scaleMode:u[1],resolution:u[2]}),new n(new Et(a))},n}(b),L=function(){function f(n){this.texturePool={},this.textureOptions=n||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return f.prototype.createTexture=function(n,a,o){void 0===o&&(o=A.G5.NONE);var u=new Et(Object.assign({width:n,height:a,resolution:1,multisample:o},this.textureOptions));return new B(u)},f.prototype.getOptimalTexture=function(n,a,o,u){var d;void 0===o&&(o=1),void 0===u&&(u=A.G5.NONE),n=Math.ceil(n*o),a=Math.ceil(a*o),this.enableFullScreen&&n===this._pixelsWidth&&a===this._pixelsHeight?d=u>1?-u:-1:(d=((65535&(n=(0,J.a9)(n)))<<16|65535&(a=(0,J.a9)(a)))>>>0,u>1&&(d+=4294967296*u)),this.texturePool[d]||(this.texturePool[d]=[]);var p=this.texturePool[d].pop();return p||(p=this.createTexture(n,a,u)),p.filterPoolKey=d,p.setResolution(o),p},f.prototype.getFilterTexture=function(n,a,o){var u=this.getOptimalTexture(n.width,n.height,a||n.resolution,o||A.G5.NONE);return u.filterFrame=n.filterFrame,u},f.prototype.returnTexture=function(n){var a=n.filterPoolKey;n.filterFrame=null,this.texturePool[a].push(n)},f.prototype.returnFilterTexture=function(n){this.returnTexture(n)},f.prototype.clear=function(n){if(n=!1!==n)for(var a in this.texturePool){var o=this.texturePool[a];if(o)for(var u=0;u<o.length;u++)o[u].destroy(!0)}this.texturePool={}},f.prototype.setScreenSize=function(n){if(n.width!==this._pixelsWidth||n.height!==this._pixelsHeight){for(var a in this.enableFullScreen=n.width>0&&n.height>0,this.texturePool)if(Number(a)<0){var o=this.texturePool[a];if(o)for(var u=0;u<o.length;u++)o[u].destroy(!0);this.texturePool[a]=[]}this._pixelsWidth=n.width,this._pixelsHeight=n.height}},f.SCREEN_KEY=-1,f}(),w=function(){function f(n,a,o,u,d,p,S){void 0===a&&(a=0),void 0===o&&(o=!1),void 0===u&&(u=A.vK.FLOAT),this.buffer=n,this.size=a,this.normalized=o,this.type=u,this.stride=d,this.start=p,this.instance=S}return f.prototype.destroy=function(){this.buffer=null},f.from=function(n,a,o,u,d){return new f(n,a,o,u,d)},f}(),$=0,st=function(){function f(n,a,o){void 0===a&&(a=!0),void 0===o&&(o=!1),this.data=n||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=o,this.static=a,this.id=$++,this.disposeRunner=new at.R("disposeBuffer")}return f.prototype.update=function(n){n instanceof Array&&(n=new Float32Array(n)),this.data=n||this.data,this._updateID++},f.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},f.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(f.prototype,"index",{get:function(){return this.type===A.mr.ELEMENT_ARRAY_BUFFER},set:function(n){this.type=n?A.mr.ELEMENT_ARRAY_BUFFER:A.mr.ARRAY_BUFFER},enumerable:!1,configurable:!0}),f.from=function(n){return n instanceof Array&&(n=new Float32Array(n)),new f(n)},f}(),ct={Float32Array,Uint32Array,Int32Array,Uint8Array},k={5126:4,5123:2,5121:1},gt=0,mt={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},Tt=function(){function f(n,a){void 0===n&&(n=[]),void 0===a&&(a={}),this.buffers=n,this.indexBuffer=null,this.attributes=a,this.glVertexArrayObjects={},this.id=gt++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new at.R("disposeGeometry"),this.refCount=0}return f.prototype.addAttribute=function(n,a,o,u,d,p,S,P){if(void 0===o&&(o=0),void 0===u&&(u=!1),void 0===P&&(P=!1),!a)throw new Error("You must pass a buffer when creating an attribute");a instanceof st||(a instanceof Array&&(a=new Float32Array(a)),a=new st(a));var V=n.split("|");if(V.length>1){for(var q=0;q<V.length;q++)this.addAttribute(V[q],a,o,u,d);return this}var ot=this.buffers.indexOf(a);return-1===ot&&(this.buffers.push(a),ot=this.buffers.length-1),this.attributes[n]=new w(ot,o,u,d,p,S,P),this.instanced=this.instanced||P,this},f.prototype.getAttribute=function(n){return this.attributes[n]},f.prototype.getBuffer=function(n){return this.buffers[this.getAttribute(n).buffer]},f.prototype.addIndex=function(n){return n instanceof st||(n instanceof Array&&(n=new Uint16Array(n)),n=new st(n)),n.type=A.mr.ELEMENT_ARRAY_BUFFER,this.indexBuffer=n,-1===this.buffers.indexOf(n)&&this.buffers.push(n),this},f.prototype.getIndex=function(){return this.indexBuffer},f.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var u,n=[],a=[],o=new st;for(u in this.attributes){var d=this.attributes[u];n.push(this.buffers[d.buffer].data),a.push(d.size*k[d.type]/4),d.buffer=0}for(o.data=function(f,n){for(var a=0,o=0,u={},d=0;d<f.length;d++)o+=n[d],a+=f[d].length;var p=new ArrayBuffer(4*a),S=null,P=0;for(d=0;d<f.length;d++){var V=n[d],q=f[d],ot=(0,J.u7)(q);u[ot]||(u[ot]=new ct[ot](p)),S=u[ot];for(var dt=0;dt<q.length;dt++)S[(dt/V|0)*o+P+dt%V]=q[dt];P+=V}return new Float32Array(p)}(n,a),u=0;u<this.buffers.length;u++)this.buffers[u]!==this.indexBuffer&&this.buffers[u].destroy();return this.buffers=[o],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},f.prototype.getSize=function(){for(var n in this.attributes){var a=this.attributes[n];return this.buffers[a.buffer].data.length/(a.stride/4||a.size)}return 0},f.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},f.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},f.prototype.clone=function(){for(var n=new f,a=0;a<this.buffers.length;a++)n.buffers[a]=new st(this.buffers[a].data.slice(0));for(var a in this.attributes){var o=this.attributes[a];n.attributes[a]=new w(o.buffer,o.size,o.normalized,o.type,o.stride,o.start,o.instance)}return this.indexBuffer&&(n.indexBuffer=n.buffers[this.buffers.indexOf(this.indexBuffer)],n.indexBuffer.type=A.mr.ELEMENT_ARRAY_BUFFER),n},f.merge=function(n){for(var p,a=new f,o=[],u=[],d=[],S=0;S<n.length;S++){p=n[S];for(var P=0;P<p.buffers.length;P++)u[P]=u[P]||0,u[P]+=p.buffers[P].data.length,d[P]=0}for(S=0;S<p.buffers.length;S++)o[S]=new(mt[(0,J.u7)(p.buffers[S].data)])(u[S]),a.buffers[S]=new st(o[S]);for(S=0;S<n.length;S++)for(p=n[S],P=0;P<p.buffers.length;P++)o[P].set(p.buffers[P].data,d[P]),d[P]+=p.buffers[P].data.length;if(a.attributes=p.attributes,p.indexBuffer){a.indexBuffer=a.buffers[p.buffers.indexOf(p.indexBuffer)],a.indexBuffer.type=A.mr.ELEMENT_ARRAY_BUFFER;var V=0,q=0,ot=0,dt=0;for(S=0;S<p.buffers.length;S++)if(p.buffers[S]!==p.indexBuffer){dt=S;break}for(var S in p.attributes){var Dt=p.attributes[S];(0|Dt.buffer)===dt&&(q+=Dt.size*k[Dt.type]/4)}for(S=0;S<n.length;S++){var Gt=n[S].indexBuffer.data;for(P=0;P<Gt.length;P++)a.indexBuffer.data[P+ot]+=V;V+=n[S].buffers[dt].data.length/q,ot+=Gt.length}}return a},f}(),pt=function(f){function n(){var a=f.call(this)||this;return a.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),a}return Q(n,f),n}(Tt),jt=function(f){function n(){var a=f.call(this)||this;return a.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),a.uvs=new Float32Array([0,0,1,0,1,1,0,1]),a.vertexBuffer=new st(a.vertices),a.uvBuffer=new st(a.uvs),a.addAttribute("aVertexPosition",a.vertexBuffer).addAttribute("aTextureCoord",a.uvBuffer).addIndex([0,1,2,0,2,3]),a}return Q(n,f),n.prototype.map=function(a,o){var u=0,d=0;return this.uvs[0]=u,this.uvs[1]=d,this.uvs[2]=u+o.width/a.width,this.uvs[3]=d,this.uvs[4]=u+o.width/a.width,this.uvs[5]=d+o.height/a.height,this.uvs[6]=u,this.uvs[7]=d+o.height/a.height,d=o.y,this.vertices[0]=u=o.x,this.vertices[1]=d,this.vertices[2]=u+o.width,this.vertices[3]=d,this.vertices[4]=u+o.width,this.vertices[5]=d+o.height,this.vertices[6]=u,this.vertices[7]=d+o.height,this.invalidate(),this},n.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},n}(Tt),oe=0,Qt=function(){function f(n,a,o){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=oe++,this.static=!!a,this.ubo=!!o,n instanceof st?(this.buffer=n,this.buffer.type=A.mr.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=n,this.ubo&&(this.buffer=new st(new Float32Array(1)),this.buffer.type=A.mr.UNIFORM_BUFFER,this.autoManage=!0))}return f.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},f.prototype.add=function(n,a,o){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[n]=new f(a,o)},f.from=function(n,a,o){return new f(n,a,o)},f.uboFrom=function(n,a){return new f(n,null==a||a,!0)},f}(),ue=function(){function f(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=A.G5.NONE,this.sourceFrame=new G.Ae,this.destinationFrame=new G.Ae,this.bindingSourceFrame=new G.Ae,this.bindingDestinationFrame=new G.Ae,this.filters=[],this.transform=null}return f.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},f}(),de=[new G.E9,new G.E9,new G.E9,new G.E9],be=new G.y3,Me=function(){function f(n){this.renderer=n,this.defaultFilterStack=[{}],this.texturePool=new L,this.texturePool.setScreenSize(n.view),this.statePool=[],this.quad=new pt,this.quadUv=new jt,this.tempRect=new G.Ae,this.activeState={},this.globalUniforms=new Qt({outputFrame:new G.Ae,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return f.prototype.push=function(n,a){for(var o,u,d=this.renderer,p=this.defaultFilterStack,S=this.statePool.pop()||new ue,P=this.renderer.renderTexture,V=a[0].resolution,q=a[0].multisample,ot=a[0].padding,dt=a[0].autoFit,Dt=null===(o=a[0].legacy)||void 0===o||o,Gt=1;Gt<a.length;Gt++){var kt=a[Gt];V=Math.min(V,kt.resolution),q=Math.min(q,kt.multisample),ot=this.useMaxPadding?Math.max(ot,kt.padding):ot+kt.padding,dt=dt&&kt.autoFit,Dt=Dt||null===(u=kt.legacy)||void 0===u||u}if(1===p.length&&(this.defaultFilterStack[0].renderTexture=P.current),p.push(S),S.resolution=V,S.multisample=q,S.legacy=Dt,S.target=n,S.sourceFrame.copyFrom(n.filterArea||n.getBounds(!0)),S.sourceFrame.pad(ot),dt){var It=this.tempRect.copyFrom(P.sourceFrame);d.projection.transform&&this.transformAABB(be.copyFrom(d.projection.transform).invert(),It),S.sourceFrame.fit(It)}this.roundFrame(S.sourceFrame,P.current?P.current.resolution:d.resolution,P.sourceFrame,P.destinationFrame,d.projection.transform),S.renderTexture=this.getOptimalFilterTexture(S.sourceFrame.width,S.sourceFrame.height,V,q),S.filters=a,S.destinationFrame.width=S.renderTexture.width,S.destinationFrame.height=S.renderTexture.height;var ne=this.tempRect;ne.x=0,ne.y=0,ne.width=S.sourceFrame.width,ne.height=S.sourceFrame.height,S.renderTexture.filterFrame=S.sourceFrame,S.bindingSourceFrame.copyFrom(P.sourceFrame),S.bindingDestinationFrame.copyFrom(P.destinationFrame),S.transform=d.projection.transform,d.projection.transform=null,P.bind(S.renderTexture,S.sourceFrame,ne),d.framebuffer.clear(0,0,0,0)},f.prototype.pop=function(){var n=this.defaultFilterStack,a=n.pop(),o=a.filters;this.activeState=a;var u=this.globalUniforms.uniforms;u.outputFrame=a.sourceFrame,u.resolution=a.resolution;var d=u.inputSize,p=u.inputPixel,S=u.inputClamp;if(d[0]=a.destinationFrame.width,d[1]=a.destinationFrame.height,d[2]=1/d[0],d[3]=1/d[1],p[0]=Math.round(d[0]*a.resolution),p[1]=Math.round(d[1]*a.resolution),p[2]=1/p[0],p[3]=1/p[1],S[0]=.5*p[2],S[1]=.5*p[3],S[2]=a.sourceFrame.width*d[2]-.5*p[2],S[3]=a.sourceFrame.height*d[3]-.5*p[3],a.legacy){var P=u.filterArea;P[0]=a.destinationFrame.width,P[1]=a.destinationFrame.height,P[2]=a.sourceFrame.x,P[3]=a.sourceFrame.y,u.filterClamp=u.inputClamp}this.globalUniforms.update();var V=n[n.length-1];if(this.renderer.framebuffer.blit(),1===o.length)o[0].apply(this,a.renderTexture,V.renderTexture,A.yl.BLEND,a),this.returnFilterTexture(a.renderTexture);else{var q=a.renderTexture,ot=this.getOptimalFilterTexture(q.width,q.height,a.resolution);ot.filterFrame=q.filterFrame;var dt=0;for(dt=0;dt<o.length-1;++dt){1===dt&&a.multisample>1&&((ot=this.getOptimalFilterTexture(q.width,q.height,a.resolution)).filterFrame=q.filterFrame),o[dt].apply(this,q,ot,A.yl.CLEAR,a);var Dt=q;q=ot,ot=Dt}o[dt].apply(this,q,V.renderTexture,A.yl.BLEND,a),dt>1&&a.multisample>1&&this.returnFilterTexture(a.renderTexture),this.returnFilterTexture(q),this.returnFilterTexture(ot)}a.clear(),this.statePool.push(a)},f.prototype.bindAndClear=function(n,a){void 0===a&&(a=A.yl.CLEAR);var o=this.renderer,u=o.renderTexture,d=o.state;if(this.renderer.projection.transform=n===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.activeState.transform:null,n&&n.filterFrame){var p=this.tempRect;p.x=0,p.y=0,p.width=n.filterFrame.width,p.height=n.filterFrame.height,u.bind(n,n.filterFrame,p)}else n!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?u.bind(n):this.renderer.renderTexture.bind(n,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);(a===A.yl.CLEAR||a===A.yl.BLIT&&(1&d.stateId||this.forceClear))&&this.renderer.framebuffer.clear(0,0,0,0)},f.prototype.applyFilter=function(n,a,o,u){var d=this.renderer;d.state.set(n.state),this.bindAndClear(o,u),n.uniforms.uSampler=a,n.uniforms.filterGlobals=this.globalUniforms,d.shader.bind(n),n.legacy=!!n.program.attributeData.aTextureCoord,n.legacy?(this.quadUv.map(a._frame,a.filterFrame),d.geometry.bind(this.quadUv),d.geometry.draw(A.lg.TRIANGLES)):(d.geometry.bind(this.quad),d.geometry.draw(A.lg.TRIANGLE_STRIP))},f.prototype.calculateSpriteMatrix=function(n,a){var o=this.activeState,u=o.sourceFrame,d=o.destinationFrame,p=a._texture.orig,S=n.set(d.width,0,0,d.height,u.x,u.y),P=a.worldTransform.copyTo(G.y3.TEMP_MATRIX);return P.invert(),S.prepend(P),S.scale(1/p.width,1/p.height),S.translate(a.anchor.x,a.anchor.y),S},f.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},f.prototype.getOptimalFilterTexture=function(n,a,o,u){return void 0===o&&(o=1),void 0===u&&(u=A.G5.NONE),this.texturePool.getOptimalTexture(n,a,o,u)},f.prototype.getFilterTexture=function(n,a,o){if("number"==typeof n){var u=n;n=a,a=u}var d=this.texturePool.getOptimalTexture((n=n||this.activeState.renderTexture).width,n.height,a||n.resolution,o||A.G5.NONE);return d.filterFrame=n.filterFrame,d},f.prototype.returnFilterTexture=function(n){this.texturePool.returnTexture(n)},f.prototype.emptyPool=function(){this.texturePool.clear(!0)},f.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},f.prototype.transformAABB=function(n,a){var o=de[0],u=de[1],d=de[2],p=de[3];o.set(a.left,a.top),u.set(a.left,a.bottom),d.set(a.right,a.top),p.set(a.right,a.bottom),n.apply(o,o),n.apply(u,u),n.apply(d,d),n.apply(p,p);var S=Math.min(o.x,u.x,d.x,p.x),P=Math.min(o.y,u.y,d.y,p.y),V=Math.max(o.x,u.x,d.x,p.x),q=Math.max(o.y,u.y,d.y,p.y);a.x=S,a.y=P,a.width=V-S,a.height=q-P},f.prototype.roundFrame=function(n,a,o,u,d){if(d){var p=d.a,P=d.c,V=d.d;if((Math.abs(d.b)>1e-4||Math.abs(P)>1e-4)&&(Math.abs(p)>1e-4||Math.abs(V)>1e-4))return}(d=d?be.copyFrom(d):be.identity()).translate(-o.x,-o.y).scale(u.width/o.width,u.height/o.height).translate(u.x,u.y),this.transformAABB(d,n),n.ceil(a),this.transformAABB(d.invert(),n)},f}(),fe=function(){function f(n){this.renderer=n}return f.prototype.flush=function(){},f.prototype.destroy=function(){this.renderer=null},f.prototype.start=function(){},f.prototype.stop=function(){this.flush()},f.prototype.render=function(n){},f}(),Ve=function(){function f(n){this.renderer=n,this.emptyRenderer=new fe(n),this.currentRenderer=this.emptyRenderer}return f.prototype.setObjectRenderer=function(n){this.currentRenderer!==n&&(this.currentRenderer.stop(),this.currentRenderer=n,this.currentRenderer.start())},f.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},f.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},f.prototype.copyBoundTextures=function(n,a){for(var o=this.renderer.texture.boundTextures,u=a-1;u>=0;--u)n[u]=o[u]||null,n[u]&&(n[u]._batchLocation=u)},f.prototype.boundArray=function(n,a,o,u){for(var d=n.elements,p=n.ids,S=n.count,P=0,V=0;V<S;V++){var q=d[V],ot=q._batchLocation;if(ot>=0&&ot<u&&a[ot]===q)p[V]=ot;else for(;P<u;){var dt=a[P];if(!dt||dt._batchEnabled!==o||dt._batchLocation!==P){p[V]=P,q._batchLocation=P,a[P]=q;break}P++}}},f.prototype.destroy=function(){this.renderer=null},f}(),Ge=0,He=function(){function f(n){this.renderer=n,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),n.view.addEventListener("webglcontextlost",this.handleContextLost,!1),n.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(f.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),f.prototype.contextChange=function(n){this.gl=n,this.renderer.gl=n,this.renderer.CONTEXT_UID=Ge++,n.isContextLost()&&n.getExtension("WEBGL_lose_context")&&n.getExtension("WEBGL_lose_context").restoreContext()},f.prototype.initFromContext=function(n){this.gl=n,this.validateContext(n),this.renderer.gl=n,this.renderer.CONTEXT_UID=Ge++,this.renderer.runners.contextChange.emit(n)},f.prototype.initFromOptions=function(n){var a=this.createContext(this.renderer.view,n);this.initFromContext(a)},f.prototype.createContext=function(n,a){var o;if(nt.X.PREFER_ENV>=A.Vi.WEBGL2&&(o=n.getContext("webgl2",a)),o)this.webGLVersion=2;else if(this.webGLVersion=1,!(o=n.getContext("webgl",a)||n.getContext("experimental-webgl",a)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=o,this.getExtensions(),this.gl},f.prototype.getExtensions=function(){var n=this.gl,a={anisotropicFiltering:n.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:n.getExtension("OES_texture_float_linear"),s3tc:n.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:n.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:n.getExtension("WEBGL_compressed_texture_etc"),etc1:n.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:n.getExtension("WEBGL_compressed_texture_atc"),astc:n.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,a,{drawBuffers:n.getExtension("WEBGL_draw_buffers"),depthTexture:n.getExtension("WEBGL_depth_texture"),loseContext:n.getExtension("WEBGL_lose_context"),vertexArrayObject:n.getExtension("OES_vertex_array_object")||n.getExtension("MOZ_OES_vertex_array_object")||n.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:n.getExtension("OES_element_index_uint"),floatTexture:n.getExtension("OES_texture_float"),floatTextureLinear:n.getExtension("OES_texture_float_linear"),textureHalfFloat:n.getExtension("OES_texture_half_float"),textureHalfFloatLinear:n.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,a,{colorBufferFloat:n.getExtension("EXT_color_buffer_float")})},f.prototype.handleContextLost=function(n){n.preventDefault()},f.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},f.prototype.destroy=function(){var n=this.renderer.view;this.renderer=null,n.removeEventListener("webglcontextlost",this.handleContextLost),n.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},f.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},f.prototype.validateContext=function(n){var a=n.getContextAttributes(),o="WebGL2RenderingContext"in self&&n instanceof self.WebGL2RenderingContext;o&&(this.webGLVersion=2),a.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var u=o||!!n.getExtension("OES_element_index_uint");this.supports.uint32Indices=u,u||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},f}(),Di=function(n){this.framebuffer=n,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=A.G5.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0},bi=new G.Ae,Pr=function(){function f(n){this.renderer=n,this.managedFramebuffers=[],this.unknownFramebuffer=new Y(10,10),this.msaaSamples=null}return f.prototype.contextChange=function(){var n=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new G.Ae,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var a=this.renderer.context.extensions.drawBuffers,o=this.renderer.context.extensions.depthTexture;nt.X.PREFER_ENV===A.Vi.WEBGL_LEGACY&&(a=null,o=null),a?n.drawBuffers=function(u){return a.drawBuffersWEBGL(u)}:(this.hasMRT=!1,n.drawBuffers=function(){}),o||(this.writeDepthTexture=!1)}else this.msaaSamples=n.getInternalformatParameter(n.RENDERBUFFER,n.RGBA8,n.SAMPLES)},f.prototype.bind=function(n,a,o){void 0===o&&(o=0);var u=this.gl;if(n){var d=n.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(n);this.current!==n&&(this.current=n,u.bindFramebuffer(u.FRAMEBUFFER,d.framebuffer)),d.mipLevel!==o&&(n.dirtyId++,n.dirtyFormat++,d.mipLevel=o),d.dirtyId!==n.dirtyId&&(d.dirtyId=n.dirtyId,d.dirtyFormat!==n.dirtyFormat?(d.dirtyFormat=n.dirtyFormat,d.dirtySize=n.dirtySize,this.updateFramebuffer(n,o)):d.dirtySize!==n.dirtySize&&(d.dirtySize=n.dirtySize,this.resizeFramebuffer(n)));for(var p=0;p<n.colorTextures.length;p++){var S=n.colorTextures[p];this.renderer.texture.unbind(S.parentTextureArray||S)}if(n.depthTexture&&this.renderer.texture.unbind(n.depthTexture),a){var q=(P=a.width>>o)/a.width;this.setViewport(a.x*q,a.y*q,P,a.height>>o)}else{var P;this.setViewport(0,0,P=n.width>>o,n.height>>o)}}else this.current&&(this.current=null,u.bindFramebuffer(u.FRAMEBUFFER,null)),a?this.setViewport(a.x,a.y,a.width,a.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},f.prototype.setViewport=function(n,a,o,u){var d=this.viewport;n=Math.round(n),a=Math.round(a),o=Math.round(o),u=Math.round(u),(d.width!==o||d.height!==u||d.x!==n||d.y!==a)&&(d.x=n,d.y=a,d.width=o,d.height=u,this.gl.viewport(n,a,o,u))},Object.defineProperty(f.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),f.prototype.clear=function(n,a,o,u,d){void 0===d&&(d=A.V0.COLOR|A.V0.DEPTH);var p=this.gl;p.clearColor(n,a,o,u),p.clear(d)},f.prototype.initFramebuffer=function(n){var o=new Di(this.gl.createFramebuffer());return o.multisample=this.detectSamples(n.multisample),n.glFramebuffers[this.CONTEXT_UID]=o,this.managedFramebuffers.push(n),n.disposeRunner.add(this),o},f.prototype.resizeFramebuffer=function(n){var a=this.gl,o=n.glFramebuffers[this.CONTEXT_UID];o.msaaBuffer&&(a.bindRenderbuffer(a.RENDERBUFFER,o.msaaBuffer),a.renderbufferStorageMultisample(a.RENDERBUFFER,o.multisample,a.RGBA8,n.width,n.height)),o.stencil&&(a.bindRenderbuffer(a.RENDERBUFFER,o.stencil),o.msaaBuffer?a.renderbufferStorageMultisample(a.RENDERBUFFER,o.multisample,a.DEPTH24_STENCIL8,n.width,n.height):a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,n.width,n.height));var u=n.colorTextures,d=u.length;a.drawBuffers||(d=Math.min(d,1));for(var p=0;p<d;p++){var S=u[p];this.renderer.texture.bind(S.parentTextureArray||S,0)}n.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(n.depthTexture,0)},f.prototype.updateFramebuffer=function(n,a){var o=this.gl,u=n.glFramebuffers[this.CONTEXT_UID],d=n.colorTextures,p=d.length;o.drawBuffers||(p=Math.min(p,1)),u.multisample>1&&this.canMultisampleFramebuffer(n)?(u.msaaBuffer=u.msaaBuffer||o.createRenderbuffer(),o.bindRenderbuffer(o.RENDERBUFFER,u.msaaBuffer),o.renderbufferStorageMultisample(o.RENDERBUFFER,u.multisample,o.RGBA8,n.width,n.height),o.framebufferRenderbuffer(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.RENDERBUFFER,u.msaaBuffer)):u.msaaBuffer&&(o.deleteRenderbuffer(u.msaaBuffer),u.msaaBuffer=null,u.blitFramebuffer&&(u.blitFramebuffer.dispose(),u.blitFramebuffer=null));for(var S=[],P=0;P<p;P++){var V=d[P],q=V.parentTextureArray||V;this.renderer.texture.bind(q,0),(0!==P||!u.msaaBuffer)&&(o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0+P,V.target,q._glTextures[this.CONTEXT_UID].texture,a),S.push(o.COLOR_ATTACHMENT0+P))}if(S.length>1&&o.drawBuffers(S),n.depthTexture&&this.writeDepthTexture){var dt=n.depthTexture;this.renderer.texture.bind(dt,0),o.framebufferTexture2D(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.TEXTURE_2D,dt._glTextures[this.CONTEXT_UID].texture,a)}!n.stencil&&!n.depth||n.depthTexture&&this.writeDepthTexture?u.stencil&&(o.deleteRenderbuffer(u.stencil),u.stencil=null):(u.stencil=u.stencil||o.createRenderbuffer(),o.bindRenderbuffer(o.RENDERBUFFER,u.stencil),u.msaaBuffer?o.renderbufferStorageMultisample(o.RENDERBUFFER,u.multisample,o.DEPTH24_STENCIL8,n.width,n.height):o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_STENCIL,n.width,n.height),o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,u.stencil))},f.prototype.canMultisampleFramebuffer=function(n){return 1!==this.renderer.context.webGLVersion&&n.colorTextures.length<=1&&!n.depthTexture},f.prototype.detectSamples=function(n){var a=this.msaaSamples,o=A.G5.NONE;if(n<=1||null===a)return o;for(var u=0;u<a.length;u++)if(a[u]<=n){o=a[u];break}return 1===o&&(o=A.G5.NONE),o},f.prototype.blit=function(n,a,o){var u=this,d=u.current,S=u.gl;if(2===u.renderer.context.webGLVersion&&d){var V=d.glFramebuffers[u.CONTEXT_UID];if(V){if(!n){if(!V.msaaBuffer)return;var q=d.colorTextures[0];if(!q)return;V.blitFramebuffer||(V.blitFramebuffer=new Y(d.width,d.height),V.blitFramebuffer.addColorTexture(0,q)),(n=V.blitFramebuffer).colorTextures[0]!==q&&(n.colorTextures[0]=q,n.dirtyId++,n.dirtyFormat++),(n.width!==d.width||n.height!==d.height)&&(n.width=d.width,n.height=d.height,n.dirtyId++,n.dirtySize++)}a||((a=bi).width=d.width,a.height=d.height),o||(o=a);var ot=a.width===o.width&&a.height===o.height;this.bind(n),S.bindFramebuffer(S.READ_FRAMEBUFFER,V.framebuffer),S.blitFramebuffer(a.x,a.y,a.width,a.height,o.x,o.y,o.width,o.height,S.COLOR_BUFFER_BIT,ot?S.NEAREST:S.LINEAR)}}},f.prototype.disposeFramebuffer=function(n,a){var o=n.glFramebuffers[this.CONTEXT_UID],u=this.gl;if(o){delete n.glFramebuffers[this.CONTEXT_UID];var d=this.managedFramebuffers.indexOf(n);d>=0&&this.managedFramebuffers.splice(d,1),n.disposeRunner.remove(this),a||(u.deleteFramebuffer(o.framebuffer),o.msaaBuffer&&u.deleteRenderbuffer(o.msaaBuffer),o.stencil&&u.deleteRenderbuffer(o.stencil)),o.blitFramebuffer&&o.blitFramebuffer.dispose()}},f.prototype.disposeAll=function(n){var a=this.managedFramebuffers;this.managedFramebuffers=[];for(var o=0;o<a.length;o++)this.disposeFramebuffer(a[o],n)},f.prototype.forceStencil=function(){var n=this.current;if(n){var a=n.glFramebuffers[this.CONTEXT_UID];if(a&&!a.stencil){n.stencil=!0;var o=n.width,u=n.height,d=this.gl,p=d.createRenderbuffer();d.bindRenderbuffer(d.RENDERBUFFER,p),a.msaaBuffer?d.renderbufferStorageMultisample(d.RENDERBUFFER,a.multisample,d.DEPTH24_STENCIL8,o,u):d.renderbufferStorage(d.RENDERBUFFER,d.DEPTH_STENCIL,o,u),a.stencil=p,d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,p)}}},f.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new G.Ae},f.prototype.destroy=function(){this.renderer=null},f}(),ur={5126:4,5123:2,5121:1},Xr=function(){function f(n){this.renderer=n,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return f.prototype.contextChange=function(){this.disposeAll(!0);var n=this.gl=this.renderer.gl,a=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==a.webGLVersion){var o=this.renderer.context.extensions.vertexArrayObject;nt.X.PREFER_ENV===A.Vi.WEBGL_LEGACY&&(o=null),o?(n.createVertexArray=function(){return o.createVertexArrayOES()},n.bindVertexArray=function(d){return o.bindVertexArrayOES(d)},n.deleteVertexArray=function(d){return o.deleteVertexArrayOES(d)}):(this.hasVao=!1,n.createVertexArray=function(){return null},n.bindVertexArray=function(){return null},n.deleteVertexArray=function(){return null})}if(2!==a.webGLVersion){var u=n.getExtension("ANGLE_instanced_arrays");u?(n.vertexAttribDivisor=function(d,p){return u.vertexAttribDivisorANGLE(d,p)},n.drawElementsInstanced=function(d,p,S,P,V){return u.drawElementsInstancedANGLE(d,p,S,P,V)},n.drawArraysInstanced=function(d,p,S,P){return u.drawArraysInstancedANGLE(d,p,S,P)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===a.webGLVersion||!!a.extensions.uint32ElementIndex},f.prototype.bind=function(n,a){a=a||this.renderer.shader.shader;var o=this.gl,u=n.glVertexArrayObjects[this.CONTEXT_UID],d=!1;u||(this.managedGeometries[n.id]=n,n.disposeRunner.add(this),n.glVertexArrayObjects[this.CONTEXT_UID]=u={},d=!0);var p=u[a.program.id]||this.initGeometryVao(n,a,d);this._activeGeometry=n,this._activeVao!==p&&(this._activeVao=p,this.hasVao?o.bindVertexArray(p):this.activateVao(n,a.program)),this.updateBuffers()},f.prototype.reset=function(){this.unbind()},f.prototype.updateBuffers=function(){for(var n=this._activeGeometry,a=this.renderer.buffer,o=0;o<n.buffers.length;o++)a.update(n.buffers[o])},f.prototype.checkCompatibility=function(n,a){var o=n.attributes,u=a.attributeData;for(var d in u)if(!o[d])throw new Error('shader and geometry incompatible, geometry missing the "'+d+'" attribute')},f.prototype.getSignature=function(n,a){var o=n.attributes,u=a.attributeData,d=["g",n.id];for(var p in o)u[p]&&d.push(p,u[p].location);return d.join("-")},f.prototype.initGeometryVao=function(n,a,o){void 0===o&&(o=!0);var u=this.gl,d=this.CONTEXT_UID,p=this.renderer.buffer,S=a.program;S.glPrograms[d]||this.renderer.shader.generateProgram(a),this.checkCompatibility(n,S);var P=this.getSignature(n,S),V=n.glVertexArrayObjects[this.CONTEXT_UID],q=V[P];if(q)return V[S.id]=q,q;var ot=n.buffers,dt=n.attributes,Dt={},Gt={};for(var kt in ot)Dt[kt]=0,Gt[kt]=0;for(var kt in dt)!dt[kt].size&&S.attributeData[kt]?dt[kt].size=S.attributeData[kt].size:dt[kt].size||console.warn("PIXI Geometry attribute '"+kt+"' size cannot be determined (likely the bound shader does not have the attribute)"),Dt[dt[kt].buffer]+=dt[kt].size*ur[dt[kt].type];for(var kt in dt){var It=dt[kt],ne=It.size;void 0===It.stride&&(It.stride=Dt[It.buffer]===ne*ur[It.type]?0:Dt[It.buffer]),void 0===It.start&&(It.start=Gt[It.buffer],Gt[It.buffer]+=ne*ur[It.type])}q=u.createVertexArray(),u.bindVertexArray(q);for(var ce=0;ce<ot.length;ce++){var ve=ot[ce];p.bind(ve),o&&ve._glBuffers[d].refCount++}return this.activateVao(n,S),this._activeVao=q,V[S.id]=q,V[P]=q,q},f.prototype.disposeGeometry=function(n,a){var o;if(this.managedGeometries[n.id]){delete this.managedGeometries[n.id];var u=n.glVertexArrayObjects[this.CONTEXT_UID],d=this.gl,p=n.buffers,S=null===(o=this.renderer)||void 0===o?void 0:o.buffer;if(n.disposeRunner.remove(this),u){if(S)for(var P=0;P<p.length;P++){var V=p[P]._glBuffers[this.CONTEXT_UID];V&&(V.refCount--,0===V.refCount&&!a&&S.dispose(p[P],a))}if(!a)for(var q in u)if("g"===q[0]){var ot=u[q];this._activeVao===ot&&this.unbind(),d.deleteVertexArray(ot)}delete n.glVertexArrayObjects[this.CONTEXT_UID]}}},f.prototype.disposeAll=function(n){for(var a=Object.keys(this.managedGeometries),o=0;o<a.length;o++)this.disposeGeometry(this.managedGeometries[a[o]],n)},f.prototype.activateVao=function(n,a){var o=this.gl,u=this.CONTEXT_UID,d=this.renderer.buffer,p=n.buffers,S=n.attributes;n.indexBuffer&&d.bind(n.indexBuffer);var P=null;for(var V in S){var q=S[V],ot=p[q.buffer],dt=ot._glBuffers[u];if(a.attributeData[V]){P!==dt&&(d.bind(ot),P=dt);var Dt=a.attributeData[V].location;if(o.enableVertexAttribArray(Dt),o.vertexAttribPointer(Dt,q.size,q.type||o.FLOAT,q.normalized,q.stride,q.start),q.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");o.vertexAttribDivisor(Dt,1)}}}},f.prototype.draw=function(n,a,o,u){var d=this.gl,p=this._activeGeometry;if(p.indexBuffer){var S=p.indexBuffer.data.BYTES_PER_ELEMENT,P=2===S?d.UNSIGNED_SHORT:d.UNSIGNED_INT;2===S||4===S&&this.canUseUInt32ElementIndex?p.instanced?d.drawElementsInstanced(n,a||p.indexBuffer.data.length,P,(o||0)*S,u||1):d.drawElements(n,a||p.indexBuffer.data.length,P,(o||0)*S):console.warn("unsupported index buffer type: uint32")}else p.instanced?d.drawArraysInstanced(n,o,a||p.getSize(),u||1):d.drawArrays(n,o,a||p.getSize());return this},f.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},f.prototype.destroy=function(){this.renderer=null},f}(),Mi=function(){function f(n){void 0===n&&(n=null),this.type=A.A7.NONE,this.autoDetect=!0,this.maskObject=n||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=nt.X.FILTER_MULTISAMPLE,this.enabled=!0,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._target=null}return Object.defineProperty(f.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(n){n?this._filters?this._filters[0]=n:this._filters=[n]:this._filters=null},enumerable:!1,configurable:!0}),f.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=A.A7.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},f.prototype.copyCountersOrReset=function(n){n?(this._stencilCounter=n._stencilCounter,this._scissorCounter=n._scissorCounter,this._scissorRect=n._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},f}();function kr(f,n,a){var o=f.createShader(n);return f.shaderSource(o,a),f.compileShader(o),o}function Vr(f,n){var a=f.getShaderSource(n).split("\n").map(function(V,q){return q+": "+V}),o=f.getShaderInfoLog(n),u=o.split("\n"),d={},p=u.map(function(V){return parseFloat(V.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(V){return!(!V||d[V]||(d[V]=!0,0))}),S=[""];p.forEach(function(V){a[V-1]="%c"+a[V-1]+"%c",S.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var P=a.join("\n");S[0]=P,console.error(o),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,S),console.groupEnd()}function lr(f){for(var n=new Array(f),a=0;a<n.length;a++)n[a]=!1;return n}function fr(f,n){switch(f){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*n);case"vec3":return new Float32Array(3*n);case"vec4":return new Float32Array(4*n);case"ivec2":return new Int32Array(2*n);case"ivec3":return new Int32Array(3*n);case"ivec4":return new Int32Array(4*n);case"uvec2":return new Uint32Array(2*n);case"uvec3":return new Uint32Array(3*n);case"uvec4":return new Uint32Array(4*n);case"bool":return!1;case"bvec2":return lr(2*n);case"bvec3":return lr(3*n);case"bvec4":return lr(4*n);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var cr,Wr={},Ze=Wr;function $e(f,n,a){if("precision"!==f.substring(0,9)){var o=n;return n===A.cB.HIGH&&a!==A.cB.HIGH&&(o=A.cB.MEDIUM),"precision "+o+" float;\n"+f}return a!==A.cB.HIGH&&"precision highp"===f.substring(0,15)?f.replace("precision highp","precision mediump"):f}var dr={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function jr(f){return dr[f]}var et=null,Qe={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function zr(f,n){if(!et){var a=Object.keys(Qe);et={};for(var o=0;o<a.length;++o){var u=a[o];et[f[u]]=Qe[u]}}return et[n]}var Je,Ye=[{test:function(f){return"float"===f.type&&1===f.size},code:function(f){return'\n            if(uv["'+f+'"] !== ud["'+f+'"].value)\n            {\n                ud["'+f+'"].value = uv["'+f+'"]\n                gl.uniform1f(ud["'+f+'"].location, uv["'+f+'"])\n            }\n            '}},{test:function(f){return("sampler2D"===f.type||"samplerCube"===f.type||"sampler2DArray"===f.type)&&1===f.size&&!f.isArray},code:function(f){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+f+'"], t);\n\n            if(ud["'+f+'"].value !== t)\n            {\n                ud["'+f+'"].value = t;\n                gl.uniform1i(ud["'+f+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(f,n){return"mat3"===f.type&&1===f.size&&void 0!==n.a},code:function(f){return'\n            gl.uniformMatrix3fv(ud["'+f+'"].location, false, uv["'+f+'"].toArray(true));\n            '},codeUbo:function(f){return"\n                var "+f+"_matrix = uv."+f+".toArray(true);\n\n                data[offset] = "+f+"_matrix[0];\n                data[offset+1] = "+f+"_matrix[1];\n                data[offset+2] = "+f+"_matrix[2];\n        \n                data[offset + 4] = "+f+"_matrix[3];\n                data[offset + 5] = "+f+"_matrix[4];\n                data[offset + 6] = "+f+"_matrix[5];\n        \n                data[offset + 8] = "+f+"_matrix[6];\n                data[offset + 9] = "+f+"_matrix[7];\n                data[offset + 10] = "+f+"_matrix[8];\n            "}},{test:function(f,n){return"vec2"===f.type&&1===f.size&&void 0!==n.x},code:function(f){return'\n                cv = ud["'+f+'"].value;\n                v = uv["'+f+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+f+'"].location, v.x, v.y);\n                }'},codeUbo:function(f){return"\n                v = uv."+f+";\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            "}},{test:function(f){return"vec2"===f.type&&1===f.size},code:function(f){return'\n                cv = ud["'+f+'"].value;\n                v = uv["'+f+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+f+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(f,n){return"vec4"===f.type&&1===f.size&&void 0!==n.width},code:function(f){return'\n                cv = ud["'+f+'"].value;\n                v = uv["'+f+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+f+'"].location, v.x, v.y, v.width, v.height)\n                }'},codeUbo:function(f){return"\n                    v = uv."+f+";\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                "}},{test:function(f){return"vec4"===f.type&&1===f.size},code:function(f){return'\n                cv = ud["'+f+'"].value;\n                v = uv["'+f+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+f+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],Kr={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Ni={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},qr=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Oe(f){for(var n="",a=0;a<f;++a)a>0&&(n+="\nelse "),a<f-1&&(n+="if(test == "+a+".0){}");return n}var Ci=0,vr={},Er=function(){function f(n,a,o){void 0===o&&(o="pixi-shader"),this.id=Ci++,this.vertexSrc=n||f.defaultVertexSrc,this.fragmentSrc=a||f.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(o=o.replace(/\s+/g,"-"),vr[o]?(vr[o]++,o+="-"+vr[o]):vr[o]=1,this.vertexSrc="#define SHADER_NAME "+o+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+o+"\n"+this.fragmentSrc,this.vertexSrc=$e(this.vertexSrc,nt.X.PRECISION_VERTEX,A.cB.HIGH),this.fragmentSrc=$e(this.fragmentSrc,nt.X.PRECISION_FRAGMENT,function(){if(!cr){cr=A.cB.MEDIUM;var f=function(){if(Ze===Wr||Ze&&Ze.isContextLost()){var f=document.createElement("canvas"),n=void 0;nt.X.PREFER_ENV>=A.Vi.WEBGL2&&(n=f.getContext("webgl2",{})),n||((n=f.getContext("webgl",{})||f.getContext("experimental-webgl",{}))?n.getExtension("WEBGL_draw_buffers"):n=null),Ze=n}return Ze}();if(f&&f.getShaderPrecisionFormat){var n=f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.HIGH_FLOAT);cr=n.precision?A.cB.HIGH:A.cB.MEDIUM}}return cr}())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(f,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(f,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),f.from=function(n,a,o){var u=n+a,d=J.GG[u];return d||(J.GG[u]=d=new f(n,a,o)),d},f}(),mr=function(){function f(n,a){this.uniformBindCount=0,this.program=n,this.uniformGroup=a?a instanceof Qt?a:new Qt(a):new Qt({})}return f.prototype.checkUniformExists=function(n,a){if(a.uniforms[n])return!0;for(var o in a.uniforms){var u=a.uniforms[o];if(u.group&&this.checkUniformExists(n,u))return!0}return!1},f.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(f.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),f.from=function(n,a,o){return new f(Er.from(n,a),o)},f}(),We=function(){function f(){this.data=0,this.blendMode=A.T$.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(f.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(n){!!(1&this.data)!==n&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(n){!!(2&this.data)!==n&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(n){!!(4&this.data)!==n&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(n){!!(8&this.data)!==n&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(n){!!(32&this.data)!==n&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(n){!!(16&this.data)!==n&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"blendMode",{get:function(){return this._blendMode},set:function(n){this.blend=n!==A.T$.NONE,this._blendMode=n},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(n){this.offsets=!!n,this._polygonOffset=n},enumerable:!1,configurable:!0}),f.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},f.for2d=function(){var n=new f;return n.depthTest=!1,n.blend=!0,n},f}(),ye=function(f){function n(a,o,u){var d=this,p=Er.from(a||n.defaultVertexSrc,o||n.defaultFragmentSrc);return(d=f.call(this,p,u)||this).padding=0,d.resolution=nt.X.FILTER_RESOLUTION,d.multisample=nt.X.FILTER_MULTISAMPLE,d.enabled=!0,d.autoFit=!0,d.state=new We,d}return Q(n,f),n.prototype.apply=function(a,o,u,d,p){a.applyFilter(this,o,u,d)},Object.defineProperty(n.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(a){this.state.blendMode=a},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"resolution",{get:function(){return this._resolution},set:function(a){this._resolution=a},enumerable:!1,configurable:!0}),Object.defineProperty(n,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),n}(mr),Qr=new G.y3,Jr=function(){function f(n,a){this._texture=n,this.mapCoord=new G.y3,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===a?.5:a,this.isSimple=!1}return Object.defineProperty(f.prototype,"texture",{get:function(){return this._texture},set:function(n){this._texture=n,this._textureID=-1},enumerable:!1,configurable:!0}),f.prototype.multiplyUvs=function(n,a){void 0===a&&(a=n);for(var o=this.mapCoord,u=0;u<n.length;u+=2){var d=n[u],p=n[u+1];a[u]=d*o.a+p*o.c+o.tx,a[u+1]=d*o.b+p*o.d+o.ty}return a},f.prototype.update=function(n){var a=this._texture;if(!a||!a.valid||!n&&this._textureID===a._updateID)return!1;this._textureID=a._updateID,this._updateID++;var o=a._uvs;this.mapCoord.set(o.x1-o.x0,o.y1-o.y0,o.x3-o.x0,o.y3-o.y0,o.x0,o.y0);var u=a.orig,d=a.trim;d&&(Qr.set(u.width/d.width,0,0,u.height/d.height,-d.x/d.width,-d.y/d.height),this.mapCoord.append(Qr));var p=a.baseTexture,S=this.uClampFrame,P=this.clampMargin/p.resolution,V=this.clampOffset;return S[0]=(a._frame.x+P+V)/p.width,S[1]=(a._frame.y+P+V)/p.height,S[2]=(a._frame.x+a._frame.width-P+V)/p.width,S[3]=(a._frame.y+a._frame.height-P+V)/p.height,this.uClampOffset[0]=V/p.realWidth,this.uClampOffset[1]=V/p.realHeight,this.isSimple=a._frame.width===p.width&&a._frame.height===p.height&&0===a.rotate,!0},f}(),ti=function(f){function n(a,o,u){var d=this,p=null;return"string"!=typeof a&&void 0===o&&void 0===u&&(p=a,a=void 0,o=void 0,u=void 0),(d=f.call(this,a||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",o||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",u)||this).maskSprite=p,d.maskMatrix=new G.y3,d}return Q(n,f),Object.defineProperty(n.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(a){this._maskSprite=a,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),n.prototype.apply=function(a,o,u,d){var p=this._maskSprite,S=p._texture;!S.valid||(S.uvMatrix||(S.uvMatrix=new Jr(S,0)),S.uvMatrix.update(),this.uniforms.npmAlpha=S.baseTexture.alphaMode?0:1,this.uniforms.mask=S,this.uniforms.otherMatrix=a.calculateSpriteMatrix(this.maskMatrix,p).prepend(S.uvMatrix.mapCoord),this.uniforms.alpha=p.worldAlpha,this.uniforms.maskClamp=S.uvMatrix.uClampFrame,a.applyFilter(this,o,u,d))},n}(ye),ei=function(){function f(n){this.renderer=n,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return f.prototype.setMaskStack=function(n){this.maskStack=n,this.renderer.scissor.setMaskStack(n),this.renderer.stencil.setMaskStack(n)},f.prototype.push=function(n,a){var o=a;if(!o.isMaskData){var u=this.maskDataPool.pop()||new Mi;u.pooled=!0,u.maskObject=a,o=u}if(o.copyCountersOrReset(0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null),o.autoDetect&&this.detect(o),o._target=n,o.type!==A.A7.SPRITE&&this.maskStack.push(o),o.enabled)switch(o.type){case A.A7.SCISSOR:this.renderer.scissor.push(o);break;case A.A7.STENCIL:this.renderer.stencil.push(o);break;case A.A7.SPRITE:o.copyCountersOrReset(null),this.pushSpriteMask(o)}o.type===A.A7.SPRITE&&this.maskStack.push(o)},f.prototype.pop=function(n){var a=this.maskStack.pop();if(a&&a._target===n){if(a.enabled)switch(a.type){case A.A7.SCISSOR:this.renderer.scissor.pop();break;case A.A7.STENCIL:this.renderer.stencil.pop(a.maskObject);break;case A.A7.SPRITE:this.popSpriteMask(a)}if(a.reset(),a.pooled&&this.maskDataPool.push(a),0!==this.maskStack.length){var o=this.maskStack[this.maskStack.length-1];o.type===A.A7.SPRITE&&o._filters&&(o._filters[0].maskSprite=o.maskObject)}}},f.prototype.detect=function(n){n.type=n.maskObject.isSprite?A.A7.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(n)?A.A7.SCISSOR:A.A7.STENCIL},f.prototype.pushSpriteMask=function(n){var a,o,u=n.maskObject,d=n._target,p=n._filters;p||(p=this.alphaMaskPool[this.alphaMaskIndex])||(p=this.alphaMaskPool[this.alphaMaskIndex]=[new ti]);var V,q,S=this.renderer,P=S.renderTexture;if(P.current){var ot=P.current;V=n.resolution||ot.resolution,q=null!==(a=n.multisample)&&void 0!==a?a:ot.multisample}else V=n.resolution||S.resolution,q=null!==(o=n.multisample)&&void 0!==o?o:S.multisample;p[0].resolution=V,p[0].multisample=q,p[0].maskSprite=u;var dt=d.filterArea;d.filterArea=u.getBounds(!0),S.filter.push(d,p),d.filterArea=dt,n._filters||this.alphaMaskIndex++},f.prototype.popSpriteMask=function(n){this.renderer.filter.pop(),n._filters?n._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},f.prototype.destroy=function(){this.renderer=null},f}(),Yt=function(){function f(n){this.renderer=n,this.maskStack=[],this.glConst=0}return f.prototype.getStackLength=function(){return this.maskStack.length},f.prototype.setMaskStack=function(n){var a=this.renderer.gl,o=this.getStackLength();this.maskStack=n;var u=this.getStackLength();u!==o&&(0===u?a.disable(this.glConst):(a.enable(this.glConst),this._useCurrent()))},f.prototype._useCurrent=function(){},f.prototype.destroy=function(){this.renderer=null,this.maskStack=null},f}(),Jt=new G.y3,Ht=function(f){function n(a){var o=f.call(this,a)||this;return o.glConst=WebGLRenderingContext.SCISSOR_TEST,o}return Q(n,f),n.prototype.getStackLength=function(){var a=this.maskStack[this.maskStack.length-1];return a?a._scissorCounter:0},n.prototype.calcScissorRect=function(a){if(!a._scissorRectLocal){var o=a._scissorRect,u=a.maskObject,d=this.renderer,p=d.renderTexture;u.renderable=!0;var S=u.getBounds();this.roundFrameToPixels(S,p.current?p.current.resolution:d.resolution,p.sourceFrame,p.destinationFrame,d.projection.transform),u.renderable=!1,o&&S.fit(o),a._scissorRectLocal=S}},n.isMatrixRotated=function(a){if(!a)return!1;var o=a.a,d=a.c,p=a.d;return(Math.abs(a.b)>1e-4||Math.abs(d)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(p)>1e-4)},n.prototype.testScissor=function(a){var o=a.maskObject;if(!o.isFastRect||!o.isFastRect()||n.isMatrixRotated(o.worldTransform)||n.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(a);var u=a._scissorRectLocal;return u.width>0&&u.height>0},n.prototype.roundFrameToPixels=function(a,o,u,d,p){n.isMatrixRotated(p)||((p=p?Jt.copyFrom(p):Jt.identity()).translate(-u.x,-u.y).scale(d.width/u.width,d.height/u.height).translate(d.x,d.y),this.renderer.filter.transformAABB(p,a),a.fit(d),a.x=Math.round(a.x*o),a.y=Math.round(a.y*o),a.width=Math.round(a.width*o),a.height=Math.round(a.height*o))},n.prototype.push=function(a){a._scissorRectLocal||this.calcScissorRect(a);var o=this.renderer.gl;a._scissorRect||o.enable(o.SCISSOR_TEST),a._scissorCounter++,a._scissorRect=a._scissorRectLocal,this._useCurrent()},n.prototype.pop=function(){var a=this.renderer.gl;this.getStackLength()>0?this._useCurrent():a.disable(a.SCISSOR_TEST)},n.prototype._useCurrent=function(){var a=this.maskStack[this.maskStack.length-1]._scissorRect;this.renderer.gl.scissor(a.x,this.renderer.renderTexture.current?a.y:this.renderer.height-a.height-a.y,a.width,a.height)},n}(Yt),er=function(f){function n(a){var o=f.call(this,a)||this;return o.glConst=WebGLRenderingContext.STENCIL_TEST,o}return Q(n,f),n.prototype.getStackLength=function(){var a=this.maskStack[this.maskStack.length-1];return a?a._stencilCounter:0},n.prototype.push=function(a){var o=a.maskObject,u=this.renderer.gl,d=a._stencilCounter;0===d&&(this.renderer.framebuffer.forceStencil(),u.clearStencil(0),u.clear(u.STENCIL_BUFFER_BIT),u.enable(u.STENCIL_TEST)),a._stencilCounter++,u.colorMask(!1,!1,!1,!1),u.stencilFunc(u.EQUAL,d,4294967295),u.stencilOp(u.KEEP,u.KEEP,u.INCR),o.renderable=!0,o.render(this.renderer),this.renderer.batch.flush(),o.renderable=!1,this._useCurrent()},n.prototype.pop=function(a){var o=this.renderer.gl;0===this.getStackLength()?o.disable(o.STENCIL_TEST):(o.colorMask(!1,!1,!1,!1),o.stencilOp(o.KEEP,o.KEEP,o.DECR),a.renderable=!0,a.render(this.renderer),this.renderer.batch.flush(),a.renderable=!1,this._useCurrent())},n.prototype._useCurrent=function(){var a=this.renderer.gl;a.colorMask(!0,!0,!0,!0),a.stencilFunc(a.EQUAL,this.getStackLength(),4294967295),a.stencilOp(a.KEEP,a.KEEP,a.KEEP)},n}(Yt),yr=function(){function f(n){this.renderer=n,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new G.y3,this.transform=null}return f.prototype.update=function(n,a,o,u){this.destinationFrame=n||this.destinationFrame||this.defaultFrame,this.sourceFrame=a||this.sourceFrame||n,this.calculateProjection(this.destinationFrame,this.sourceFrame,o,u),this.transform&&this.projectionMatrix.append(this.transform);var d=this.renderer;d.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,d.globalUniforms.update(),d.shader.shader&&d.shader.syncUniformGroup(d.shader.shader.uniforms.globals)},f.prototype.calculateProjection=function(n,a,o,u){var d=this.projectionMatrix,p=u?-1:1;d.identity(),d.a=1/a.width*2,d.d=p*(1/a.height*2),d.tx=-1-a.x*d.a,d.ty=-p-a.y*d.d},f.prototype.setTransform=function(n){},f.prototype.destroy=function(){this.renderer=null},f}(),Ie=new G.Ae,rr=new G.Ae,ri=function(){function f(n){this.renderer=n,this.clearColor=n._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new G.Ae,this.destinationFrame=new G.Ae,this.viewportFrame=new G.Ae}return f.prototype.bind=function(n,a,o){void 0===n&&(n=null);var d,p,S,u=this.renderer;this.current=n,n?(S=(d=n.baseTexture).resolution,a||(Ie.width=n.frame.width,Ie.height=n.frame.height,a=Ie),o||(rr.x=n.frame.x,rr.y=n.frame.y,rr.width=a.width,rr.height=a.height,o=rr),p=d.framebuffer):(S=u.resolution,a||(Ie.width=u.screen.width,Ie.height=u.screen.height,a=Ie),o||((o=Ie).width=a.width,o.height=a.height));var P=this.viewportFrame;P.x=o.x*S,P.y=o.y*S,P.width=o.width*S,P.height=o.height*S,n||(P.y=u.view.height-(P.y+P.height)),P.ceil(),this.renderer.framebuffer.bind(p,P),this.renderer.projection.update(o,a,S,!p),this.renderer.mask.setMaskStack(n?d.maskStack:this.defaultMaskStack),this.sourceFrame.copyFrom(a),this.destinationFrame.copyFrom(o)},f.prototype.clear=function(n,a){n=this.current?n||this.current.baseTexture.clearColor:n||this.clearColor;var o=this.destinationFrame,u=this.current?this.current.baseTexture:this.renderer.screen,d=o.width!==u.width||o.height!==u.height;if(d){var p=this.viewportFrame,S=p.x,P=p.y,V=p.width,q=p.height;S=Math.round(S),P=Math.round(P),V=Math.round(V),q=Math.round(q),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(S,P,V,q)}this.renderer.framebuffer.clear(n[0],n[1],n[2],n[3],a),d&&this.renderer.scissor.pop()},f.prototype.resize=function(){this.bind(null)},f.prototype.reset=function(){this.bind(null)},f.prototype.destroy=function(){this.renderer=null},f}();function Ui(f,n,a,o,u){a.buffer.update(u)}var Nr={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},ii={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};var gr=function(){function f(n,a){this.program=n,this.uniformData=a,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return f.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},f}();var Sr=0,Rr={textureCount:0,uboCount:0},nr=function(){function f(n){this.destroyed=!1,this.renderer=n,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=Sr++}return f.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof Je)return Je;try{var f=new Function("param1","param2","param3","return param1[param2] === param3;");Je=!0===f({a:"b"},"a","b")}catch(n){Je=!1}return Je}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},f.prototype.contextChange=function(n){this.gl=n,this.reset()},f.prototype.bind=function(n,a){n.uniforms.globals=this.renderer.globalUniforms;var o=n.program,u=o.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(n);return this.shader=n,this.program!==o&&(this.program=o,this.gl.useProgram(u.program)),a||(Rr.textureCount=0,Rr.uboCount=0,this.syncUniformGroup(n.uniformGroup,Rr)),u},f.prototype.setUniforms=function(n){var a=this.shader.program;a.syncUniforms(a.glPrograms[this.renderer.CONTEXT_UID].uniformData,n,this.renderer)},f.prototype.syncUniformGroup=function(n,a){var o=this.getGlProgram();(!n.static||n.dirtyId!==o.uniformDirtyGroups[n.id])&&(o.uniformDirtyGroups[n.id]=n.dirtyId,this.syncUniforms(n,o,a))},f.prototype.syncUniforms=function(n,a,o){(n.syncUniforms[this.shader.program.id]||this.createSyncGroups(n))(a.uniformData,n.uniforms,this.renderer,o)},f.prototype.createSyncGroups=function(n){var a=this.getSignature(n,this.shader.program.uniformData,"u");return this.cache[a]||(this.cache[a]=function(f,n){var a,o=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(var u in f.uniforms){var d=n[u];if(d){for(var p=f.uniforms[u],S=!1,P=0;P<Ye.length;P++)if(Ye[P].test(d,p)){o.push(Ye[P].code(u,p)),S=!0;break}if(!S){var q=(1===d.size?Kr:Ni)[d.type].replace("location",'ud["'+u+'"].location');o.push('\n            cu = ud["'+u+'"];\n            cv = cu.value;\n            v = uv["'+u+'"];\n            '+q+";")}}else(null===(a=f.uniforms[u])||void 0===a?void 0:a.group)&&o.push(f.uniforms[u].ubo?"\n                        renderer.shader.syncUniformBufferGroup(uv."+u+", '"+u+"');\n                    ":"\n                        renderer.shader.syncUniformGroup(uv."+u+", syncData);\n                    ")}return new Function("ud","uv","renderer","syncData",o.join("\n"))}(n,this.shader.program.uniformData)),n.syncUniforms[this.shader.program.id]=this.cache[a],n.syncUniforms[this.shader.program.id]},f.prototype.syncUniformBufferGroup=function(n,a){var o=this.getGlProgram();if(!n.static||0!==n.dirtyId||!o.uniformGroups[n.id]){n.dirtyId=0;var u=o.uniformGroups[n.id]||this.createSyncBufferGroup(n,o,a);n.buffer.update(),u(o.uniformData,n.uniforms,this.renderer,Rr,n.buffer)}this.renderer.buffer.bindBufferBase(n.buffer,o.uniformBufferBindings[a])},f.prototype.createSyncBufferGroup=function(n,a,o){var u=this.renderer.gl;this.renderer.buffer.bind(n.buffer);var d=this.gl.getUniformBlockIndex(a.program,o);a.uniformBufferBindings[o]=this.shader.uniformBindCount,u.uniformBlockBinding(a.program,d,this.shader.uniformBindCount),this.shader.uniformBindCount++;var p=this.getSignature(n,this.shader.program.uniformData,"ubo"),S=this._uboCache[p];if(S||(S=this._uboCache[p]=function(f,n){if(!f.autoManage)return{size:0,syncFunc:Ui};for(var a=function(f,n){var a=[];for(var o in f)n[o]&&a.push(n[o]);return a.sort(function(u,d){return u.index-d.index}),a}(f.uniforms,n),o=function(f){for(var n=f.map(function(P){return{data:P,offset:0,dataLen:0,dirty:0}}),a=0,o=0,u=0,d=0;d<n.length;d++){var p=n[d];if(a=ii[p.data.type],p.data.size>1&&(a=Math.max(a,16)*p.data.size),p.dataLen=a,o%a!=0&&o<16){var S=o%a%16;o+=S,u+=S}o+a>16?(u=16*Math.ceil(u/16),p.offset=u,u+=a,o=a):(p.offset=u,o+=a,u+=a)}return{uboElements:n,size:u=16*Math.ceil(u/16)}}(a),u=o.uboElements,d=o.size,p=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "],S=0;S<u.length;S++){for(var P=u[S],V=f.uniforms[P.data.name],q=P.data.name,ot=!1,dt=0;dt<Ye.length;dt++){var Dt=Ye[dt];if(Dt.codeUbo&&Dt.test(P.data,V)){p.push("offset = "+P.offset/4+";",Ye[dt].codeUbo(P.data.name,V)),ot=!0;break}}if(!ot)if(P.data.size>1){var Gt=jr(P.data.type),kt=Math.max(ii[P.data.type]/16,1),It=Gt/kt;p.push("\n                cv = ud."+q+".value;\n                v = uv."+q+";\n                offset = "+P.offset/4+";\n\n                t = 0;\n\n                for(var i=0; i < "+P.data.size*kt+"; i++)\n                {\n                    for(var j = 0; j < "+It+"; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += "+(4-It%4)%4+";\n                }\n\n                ")}else p.push("\n                cv = ud."+q+".value;\n                v = uv."+q+";\n                offset = "+P.offset/4+";\n                "+Nr[P.data.type]+";\n                ")}return p.push("\n       renderer.buffer.update(buffer);\n    "),{size:d,syncFunc:new Function("ud","uv","renderer","syncData","buffer",p.join("\n"))}}(n,this.shader.program.uniformData)),n.autoManage){var P=new Float32Array(S.size/4);n.buffer.update(P)}return a.uniformGroups[n.id]=S.syncFunc,a.uniformGroups[n.id]},f.prototype.getSignature=function(n,a,o){var u=n.uniforms,d=[o+"-"];for(var p in u)d.push(p),a[p]&&d.push(a[p].type);return d.join("-")},f.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},f.prototype.generateProgram=function(n){var o=n.program,u=function(f,n){var a=kr(f,f.VERTEX_SHADER,n.vertexSrc),o=kr(f,f.FRAGMENT_SHADER,n.fragmentSrc),u=f.createProgram();if(f.attachShader(u,a),f.attachShader(u,o),f.linkProgram(u),f.getProgramParameter(u,f.LINK_STATUS)||function(f,n,a,o){f.getProgramParameter(n,f.LINK_STATUS)||(f.getShaderParameter(a,f.COMPILE_STATUS)||Vr(f,a),f.getShaderParameter(o,f.COMPILE_STATUS)||Vr(f,o),console.error("PixiJS Error: Could not initialize shader."),""!==f.getProgramInfoLog(n)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",f.getProgramInfoLog(n)))}(f,u,a,o),n.attributeData=function(f,n){for(var a={},o=n.getProgramParameter(f,n.ACTIVE_ATTRIBUTES),u=0;u<o;u++){var d=n.getActiveAttrib(f,u);if(0!==d.name.indexOf("gl_")){var p=zr(n,d.type),S={type:p,name:d.name,size:jr(p),location:n.getAttribLocation(f,d.name)};a[d.name]=S}}return a}(u,f),n.uniformData=function(f,n){for(var a={},o=n.getProgramParameter(f,n.ACTIVE_UNIFORMS),u=0;u<o;u++){var d=n.getActiveUniform(f,u),p=d.name.replace(/\[.*?\]$/,""),S=!!d.name.match(/\[.*?\]$/),P=zr(n,d.type);a[p]={name:p,index:u,type:P,size:d.size,isArray:S,value:fr(P,d.size)}}return a}(u,f),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(n.vertexSrc)){var d=Object.keys(n.attributeData);d.sort(function(q,ot){return q>ot?1:-1});for(var p=0;p<d.length;p++)n.attributeData[d[p]].location=p,f.bindAttribLocation(u,p,d[p]);f.linkProgram(u)}f.deleteShader(a),f.deleteShader(o);var S={};for(var p in n.uniformData){var P=n.uniformData[p];S[p]={location:f.getUniformLocation(u,p),value:fr(P.type,P.size)}}return new gr(u,S)}(this.gl,o);return o.glPrograms[this.renderer.CONTEXT_UID]=u,u},f.prototype.reset=function(){this.program=null,this.shader=null},f.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},f}(),oi=function(){function f(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=A.T$.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new We,this.defaultState.blend=!0}return f.prototype.contextChange=function(n){this.gl=n,this.blendModes=function(f,n){return void 0===n&&(n=[]),n[A.T$.NORMAL]=[f.ONE,f.ONE_MINUS_SRC_ALPHA],n[A.T$.ADD]=[f.ONE,f.ONE],n[A.T$.MULTIPLY]=[f.DST_COLOR,f.ONE_MINUS_SRC_ALPHA,f.ONE,f.ONE_MINUS_SRC_ALPHA],n[A.T$.SCREEN]=[f.ONE,f.ONE_MINUS_SRC_COLOR,f.ONE,f.ONE_MINUS_SRC_ALPHA],n[A.T$.OVERLAY]=[f.ONE,f.ONE_MINUS_SRC_ALPHA],n[A.T$.DARKEN]=[f.ONE,f.ONE_MINUS_SRC_ALPHA],n[A.T$.LIGHTEN]=[f.ONE,f.ONE_MINUS_SRC_ALPHA],n[A.T$.COLOR_DODGE]=[f.ONE,f.ONE_MINUS_SRC_ALPHA],n[A.T$.COLOR_BURN]=[f.ONE,f.ONE_MINUS_SRC_ALPHA],n[A.T$.HARD_LIGHT]=[f.ONE,f.ONE_MINUS_SRC_ALPHA],n[A.T$.SOFT_LIGHT]=[f.ONE,f.ONE_MINUS_SRC_ALPHA],n[A.T$.DIFFERENCE]=[f.ONE,f.ONE_MINUS_SRC_ALPHA],n[A.T$.EXCLUSION]=[f.ONE,f.ONE_MINUS_SRC_ALPHA],n[A.T$.HUE]=[f.ONE,f.ONE_MINUS_SRC_ALPHA],n[A.T$.SATURATION]=[f.ONE,f.ONE_MINUS_SRC_ALPHA],n[A.T$.COLOR]=[f.ONE,f.ONE_MINUS_SRC_ALPHA],n[A.T$.LUMINOSITY]=[f.ONE,f.ONE_MINUS_SRC_ALPHA],n[A.T$.NONE]=[0,0],n[A.T$.NORMAL_NPM]=[f.SRC_ALPHA,f.ONE_MINUS_SRC_ALPHA,f.ONE,f.ONE_MINUS_SRC_ALPHA],n[A.T$.ADD_NPM]=[f.SRC_ALPHA,f.ONE,f.ONE,f.ONE],n[A.T$.SCREEN_NPM]=[f.SRC_ALPHA,f.ONE_MINUS_SRC_COLOR,f.ONE,f.ONE_MINUS_SRC_ALPHA],n[A.T$.SRC_IN]=[f.DST_ALPHA,f.ZERO],n[A.T$.SRC_OUT]=[f.ONE_MINUS_DST_ALPHA,f.ZERO],n[A.T$.SRC_ATOP]=[f.DST_ALPHA,f.ONE_MINUS_SRC_ALPHA],n[A.T$.DST_OVER]=[f.ONE_MINUS_DST_ALPHA,f.ONE],n[A.T$.DST_IN]=[f.ZERO,f.SRC_ALPHA],n[A.T$.DST_OUT]=[f.ZERO,f.ONE_MINUS_SRC_ALPHA],n[A.T$.DST_ATOP]=[f.ONE_MINUS_DST_ALPHA,f.SRC_ALPHA],n[A.T$.XOR]=[f.ONE_MINUS_DST_ALPHA,f.ONE_MINUS_SRC_ALPHA],n[A.T$.SUBTRACT]=[f.ONE,f.ONE,f.ONE,f.ONE,f.FUNC_REVERSE_SUBTRACT,f.FUNC_ADD],n}(n),this.set(this.defaultState),this.reset()},f.prototype.set=function(n){if(this.stateId!==(n=n||this.defaultState).data){for(var a=this.stateId^n.data,o=0;a;)1&a&&this.map[o].call(this,!!(n.data&1<<o)),a>>=1,o++;this.stateId=n.data}for(o=0;o<this.checks.length;o++)this.checks[o](this,n)},f.prototype.forceState=function(n){n=n||this.defaultState;for(var a=0;a<this.map.length;a++)this.map[a].call(this,!!(n.data&1<<a));for(a=0;a<this.checks.length;a++)this.checks[a](this,n);this.stateId=n.data},f.prototype.setBlend=function(n){this.updateCheck(f.checkBlendMode,n),this.gl[n?"enable":"disable"](this.gl.BLEND)},f.prototype.setOffset=function(n){this.updateCheck(f.checkPolygonOffset,n),this.gl[n?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},f.prototype.setDepthTest=function(n){this.gl[n?"enable":"disable"](this.gl.DEPTH_TEST)},f.prototype.setDepthMask=function(n){this.gl.depthMask(n)},f.prototype.setCullFace=function(n){this.gl[n?"enable":"disable"](this.gl.CULL_FACE)},f.prototype.setFrontFace=function(n){this.gl.frontFace(this.gl[n?"CW":"CCW"])},f.prototype.setBlendMode=function(n){if(n!==this.blendMode){this.blendMode=n;var a=this.blendModes[n],o=this.gl;2===a.length?o.blendFunc(a[0],a[1]):o.blendFuncSeparate(a[0],a[1],a[2],a[3]),6===a.length?(this._blendEq=!0,o.blendEquationSeparate(a[4],a[5])):this._blendEq&&(this._blendEq=!1,o.blendEquationSeparate(o.FUNC_ADD,o.FUNC_ADD))}},f.prototype.setPolygonOffset=function(n,a){this.gl.polygonOffset(n,a)},f.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},f.prototype.updateCheck=function(n,a){var o=this.checks.indexOf(n);a&&-1===o?this.checks.push(n):!a&&-1!==o&&this.checks.splice(o,1)},f.checkBlendMode=function(n,a){n.setBlendMode(a.blendMode)},f.checkPolygonOffset=function(n,a){n.setPolygonOffset(1,a.polygonOffset)},f.prototype.destroy=function(){this.gl=null},f}(),hi=function(){function f(n){this.renderer=n,this.count=0,this.checkCount=0,this.maxIdle=nt.X.GC_MAX_IDLE,this.checkCountMax=nt.X.GC_MAX_CHECK_COUNT,this.mode=nt.X.GC_MODE}return f.prototype.postrender=function(){!this.renderer.renderingToScreen||(this.count++,this.mode!==A.UN.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},f.prototype.run=function(){for(var n=this.renderer.texture,a=n.managedTextures,o=!1,u=0;u<a.length;u++){var d=a[u];!d.framebuffer&&this.count-d.touched>this.maxIdle&&(n.destroyTexture(d,!0),a[u]=null,o=!0)}if(o){var p=0;for(u=0;u<a.length;u++)null!==a[u]&&(a[p++]=a[u]);a.length=p}},f.prototype.unload=function(n){var o=n._texture;o&&!o.framebuffer&&this.renderer.texture.destroyTexture(o);for(var u=n.children.length-1;u>=0;u--)this.unload(n.children[u])},f.prototype.destroy=function(){this.renderer=null},f}(),Lr=function(n){this.texture=n,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=A.vK.UNSIGNED_BYTE,this.internalFormat=A.I2.RGBA,this.samplerType=0},ui=function(){function f(n){this.renderer=n,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Pt,this.hasIntegerTextures=!1}return f.prototype.contextChange=function(){var n=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function(f){var n,a,o,u,d,p,S,P,V,q,ot,dt,Dt,Gt,kt,It,ne,ce,ve,Ur,Or,Ce,mi;return"WebGL2RenderingContext"in self&&f instanceof self.WebGL2RenderingContext?((n={})[A.vK.UNSIGNED_BYTE]=((a={})[A.I2.RGBA]=f.RGBA8,a[A.I2.RGB]=f.RGB8,a[A.I2.RG]=f.RG8,a[A.I2.RED]=f.R8,a[A.I2.RGBA_INTEGER]=f.RGBA8UI,a[A.I2.RGB_INTEGER]=f.RGB8UI,a[A.I2.RG_INTEGER]=f.RG8UI,a[A.I2.RED_INTEGER]=f.R8UI,a[A.I2.ALPHA]=f.ALPHA,a[A.I2.LUMINANCE]=f.LUMINANCE,a[A.I2.LUMINANCE_ALPHA]=f.LUMINANCE_ALPHA,a),n[A.vK.BYTE]=((o={})[A.I2.RGBA]=f.RGBA8_SNORM,o[A.I2.RGB]=f.RGB8_SNORM,o[A.I2.RG]=f.RG8_SNORM,o[A.I2.RED]=f.R8_SNORM,o[A.I2.RGBA_INTEGER]=f.RGBA8I,o[A.I2.RGB_INTEGER]=f.RGB8I,o[A.I2.RG_INTEGER]=f.RG8I,o[A.I2.RED_INTEGER]=f.R8I,o),n[A.vK.UNSIGNED_SHORT]=((u={})[A.I2.RGBA_INTEGER]=f.RGBA16UI,u[A.I2.RGB_INTEGER]=f.RGB16UI,u[A.I2.RG_INTEGER]=f.RG16UI,u[A.I2.RED_INTEGER]=f.R16UI,u[A.I2.DEPTH_COMPONENT]=f.DEPTH_COMPONENT16,u),n[A.vK.SHORT]=((d={})[A.I2.RGBA_INTEGER]=f.RGBA16I,d[A.I2.RGB_INTEGER]=f.RGB16I,d[A.I2.RG_INTEGER]=f.RG16I,d[A.I2.RED_INTEGER]=f.R16I,d),n[A.vK.UNSIGNED_INT]=((p={})[A.I2.RGBA_INTEGER]=f.RGBA32UI,p[A.I2.RGB_INTEGER]=f.RGB32UI,p[A.I2.RG_INTEGER]=f.RG32UI,p[A.I2.RED_INTEGER]=f.R32UI,p[A.I2.DEPTH_COMPONENT]=f.DEPTH_COMPONENT24,p),n[A.vK.INT]=((S={})[A.I2.RGBA_INTEGER]=f.RGBA32I,S[A.I2.RGB_INTEGER]=f.RGB32I,S[A.I2.RG_INTEGER]=f.RG32I,S[A.I2.RED_INTEGER]=f.R32I,S),n[A.vK.FLOAT]=((P={})[A.I2.RGBA]=f.RGBA32F,P[A.I2.RGB]=f.RGB32F,P[A.I2.RG]=f.RG32F,P[A.I2.RED]=f.R32F,P[A.I2.DEPTH_COMPONENT]=f.DEPTH_COMPONENT32F,P),n[A.vK.HALF_FLOAT]=((V={})[A.I2.RGBA]=f.RGBA16F,V[A.I2.RGB]=f.RGB16F,V[A.I2.RG]=f.RG16F,V[A.I2.RED]=f.R16F,V),n[A.vK.UNSIGNED_SHORT_5_6_5]=((q={})[A.I2.RGB]=f.RGB565,q),n[A.vK.UNSIGNED_SHORT_4_4_4_4]=((ot={})[A.I2.RGBA]=f.RGBA4,ot),n[A.vK.UNSIGNED_SHORT_5_5_5_1]=((dt={})[A.I2.RGBA]=f.RGB5_A1,dt),n[A.vK.UNSIGNED_INT_2_10_10_10_REV]=((Dt={})[A.I2.RGBA]=f.RGB10_A2,Dt[A.I2.RGBA_INTEGER]=f.RGB10_A2UI,Dt),n[A.vK.UNSIGNED_INT_10F_11F_11F_REV]=((Gt={})[A.I2.RGB]=f.R11F_G11F_B10F,Gt),n[A.vK.UNSIGNED_INT_5_9_9_9_REV]=((kt={})[A.I2.RGB]=f.RGB9_E5,kt),n[A.vK.UNSIGNED_INT_24_8]=((It={})[A.I2.DEPTH_STENCIL]=f.DEPTH24_STENCIL8,It),n[A.vK.FLOAT_32_UNSIGNED_INT_24_8_REV]=((ne={})[A.I2.DEPTH_STENCIL]=f.DEPTH32F_STENCIL8,ne),mi=n):((ce={})[A.vK.UNSIGNED_BYTE]=((ve={})[A.I2.RGBA]=f.RGBA,ve[A.I2.RGB]=f.RGB,ve[A.I2.ALPHA]=f.ALPHA,ve[A.I2.LUMINANCE]=f.LUMINANCE,ve[A.I2.LUMINANCE_ALPHA]=f.LUMINANCE_ALPHA,ve),ce[A.vK.UNSIGNED_SHORT_5_6_5]=((Ur={})[A.I2.RGB]=f.RGB,Ur),ce[A.vK.UNSIGNED_SHORT_4_4_4_4]=((Or={})[A.I2.RGBA]=f.RGBA,Or),ce[A.vK.UNSIGNED_SHORT_5_5_5_1]=((Ce={})[A.I2.RGBA]=f.RGBA,Ce),mi=ce),mi}(n);var a=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=a;for(var o=0;o<a;o++)this.boundTextures[o]=null;this.emptyTextures={};var u=new Lr(n.createTexture());for(n.bindTexture(n.TEXTURE_2D,u.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[n.TEXTURE_2D]=u,this.emptyTextures[n.TEXTURE_CUBE_MAP]=new Lr(n.createTexture()),n.bindTexture(n.TEXTURE_CUBE_MAP,this.emptyTextures[n.TEXTURE_CUBE_MAP].texture),o=0;o<6;o++)n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,null);for(n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_MIN_FILTER,n.LINEAR),o=0;o<this.boundTextures.length;o++)this.bind(null,o)},f.prototype.bind=function(n,a){void 0===a&&(a=0);var o=this.gl;if((n=null==n?void 0:n.castToBaseTexture())&&n.valid&&!n.parentTextureArray){n.touched=this.renderer.textureGC.count;var u=n._glTextures[this.CONTEXT_UID]||this.initTexture(n);this.boundTextures[a]!==n&&(this.currentLocation!==a&&(this.currentLocation=a,o.activeTexture(o.TEXTURE0+a)),o.bindTexture(n.target,u.texture)),u.dirtyId!==n.dirtyId&&(this.currentLocation!==a&&(this.currentLocation=a,o.activeTexture(o.TEXTURE0+a)),this.updateTexture(n)),this.boundTextures[a]=n}else this.currentLocation!==a&&(this.currentLocation=a,o.activeTexture(o.TEXTURE0+a)),o.bindTexture(o.TEXTURE_2D,this.emptyTextures[o.TEXTURE_2D].texture),this.boundTextures[a]=null},f.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var n=0;n<this.boundTextures.length;n++)this.boundTextures[n]=this.unknownTexture},f.prototype.unbind=function(n){var o=this.gl,u=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var d=0;d<u.length;d++)u[d]===this.unknownTexture&&this.bind(null,d)}for(d=0;d<u.length;d++)u[d]===n&&(this.currentLocation!==d&&(o.activeTexture(o.TEXTURE0+d),this.currentLocation=d),o.bindTexture(n.target,this.emptyTextures[n.target].texture),u[d]=null)},f.prototype.ensureSamplerType=function(n){var a=this,o=a.boundTextures,d=a.CONTEXT_UID;if(a.hasIntegerTextures)for(var p=n-1;p>=0;--p){var S=o[p];S&&S._glTextures[d].samplerType!==A.oT.FLOAT&&this.renderer.texture.unbind(S)}},f.prototype.initTexture=function(n){var a=new Lr(this.gl.createTexture());return a.dirtyId=-1,n._glTextures[this.CONTEXT_UID]=a,this.managedTextures.push(n),n.on("dispose",this.destroyTexture,this),a},f.prototype.initTextureType=function(n,a){var o,u;a.internalFormat=null!==(u=null===(o=this.internalFormats[n.type])||void 0===o?void 0:o[n.format])&&void 0!==u?u:n.format,a.type=2===this.webGLVersion&&n.type===A.vK.HALF_FLOAT?this.gl.HALF_FLOAT:n.type},f.prototype.updateTexture=function(n){var a=n._glTextures[this.CONTEXT_UID];if(a){var o=this.renderer;if(this.initTextureType(n,a),n.resource&&n.resource.upload(o,n,a))a.samplerType!==A.oT.FLOAT&&(this.hasIntegerTextures=!0);else{var u=n.realWidth,d=n.realHeight,p=o.gl;(a.width!==u||a.height!==d||a.dirtyId<0)&&(a.width=u,a.height=d,p.texImage2D(n.target,0,a.internalFormat,u,d,0,n.format,a.type,null))}n.dirtyStyleId!==a.dirtyStyleId&&this.updateTextureStyle(n),a.dirtyId=n.dirtyId}},f.prototype.destroyTexture=function(n,a){var o=this.gl;if((n=n.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(n),o.deleteTexture(n._glTextures[this.CONTEXT_UID].texture),n.off("dispose",this.destroyTexture,this),delete n._glTextures[this.CONTEXT_UID],!a)){var u=this.managedTextures.indexOf(n);-1!==u&&(0,J.Er)(this.managedTextures,u,1)}},f.prototype.updateTextureStyle=function(n){var a=n._glTextures[this.CONTEXT_UID];!a||(a.mipmap=!!(n.mipmap!==A.WB.POW2&&2===this.webGLVersion||n.isPowerOfTwo)&&n.mipmap>=1,a.wrapMode=2===this.webGLVersion||n.isPowerOfTwo?n.wrapMode:A.Nt.CLAMP,n.resource&&n.resource.style(this.renderer,n,a)||this.setStyle(n,a),a.dirtyStyleId=n.dirtyStyleId)},f.prototype.setStyle=function(n,a){var o=this.gl;if(a.mipmap&&n.mipmap!==A.WB.ON_MANUAL&&o.generateMipmap(n.target),o.texParameteri(n.target,o.TEXTURE_WRAP_S,a.wrapMode),o.texParameteri(n.target,o.TEXTURE_WRAP_T,a.wrapMode),a.mipmap){o.texParameteri(n.target,o.TEXTURE_MIN_FILTER,n.scaleMode===A.aH.LINEAR?o.LINEAR_MIPMAP_LINEAR:o.NEAREST_MIPMAP_NEAREST);var u=this.renderer.context.extensions.anisotropicFiltering;if(u&&n.anisotropicLevel>0&&n.scaleMode===A.aH.LINEAR){var d=Math.min(n.anisotropicLevel,o.getParameter(u.MAX_TEXTURE_MAX_ANISOTROPY_EXT));o.texParameterf(n.target,u.TEXTURE_MAX_ANISOTROPY_EXT,d)}}else o.texParameteri(n.target,o.TEXTURE_MIN_FILTER,n.scaleMode===A.aH.LINEAR?o.LINEAR:o.NEAREST);o.texParameteri(n.target,o.TEXTURE_MAG_FILTER,n.scaleMode===A.aH.LINEAR?o.LINEAR:o.NEAREST)},f.prototype.destroy=function(){this.renderer=null},f}(),li={__proto__:null,FilterSystem:Me,BatchSystem:Ve,ContextSystem:He,FramebufferSystem:Pr,GeometrySystem:Xr,MaskSystem:ei,ScissorSystem:Ht,StencilSystem:er,ProjectionSystem:yr,RenderTextureSystem:ri,ShaderSystem:nr,StateSystem:oi,TextureGCSystem:hi,TextureSystem:ui},Cr=new G.y3,zi=function(f){function n(a,o){void 0===a&&(a=A.N3.UNKNOWN);var u=f.call(this)||this;return o=Object.assign({},nt.X.RENDER_OPTIONS,o),u.options=o,u.type=a,u.screen=new G.Ae(0,0,o.width,o.height),u.view=o.view||document.createElement("canvas"),u.resolution=o.resolution||nt.X.RESOLUTION,u.useContextAlpha=o.useContextAlpha,u.autoDensity=!!o.autoDensity,u.preserveDrawingBuffer=o.preserveDrawingBuffer,u.clearBeforeRender=o.clearBeforeRender,u._backgroundColor=0,u._backgroundColorRgba=[0,0,0,1],u._backgroundColorString="#000000",u.backgroundColor=o.backgroundColor||u._backgroundColor,u.backgroundAlpha=o.backgroundAlpha,void 0!==o.transparent&&((0,J.a1)("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),u.useContextAlpha=o.transparent,u.backgroundAlpha=o.transparent?0:1),u._lastObjectRendered=null,u.plugins={},u}return Q(n,f),n.prototype.initPlugins=function(a){for(var o in a)this.plugins[o]=new a[o](this)},Object.defineProperty(n.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),n.prototype.resize=function(a,o){this.view.width=Math.round(a*this.resolution),this.view.height=Math.round(o*this.resolution);var u=this.view.width/this.resolution,d=this.view.height/this.resolution;this.screen.width=u,this.screen.height=d,this.autoDensity&&(this.view.style.width=u+"px",this.view.style.height=d+"px"),this.emit("resize",u,d)},n.prototype.generateTexture=function(a,o,u,d){void 0===o&&(o={}),"number"==typeof o&&((0,J.a1)("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),o={scaleMode:o,resolution:u,region:d});var p=o.region,S=function(f,n){var a={};for(var o in f)Object.prototype.hasOwnProperty.call(f,o)&&n.indexOf(o)<0&&(a[o]=f[o]);if(null!=f&&"function"==typeof Object.getOwnPropertySymbols){var u=0;for(o=Object.getOwnPropertySymbols(f);u<o.length;u++)n.indexOf(o[u])<0&&(a[o[u]]=f[o[u]])}return a}(o,["region"]);0===(d=p||a.getLocalBounds(null,!0)).width&&(d.width=1),0===d.height&&(d.height=1);var P=B.create(Rt({width:d.width,height:d.height},S));return Cr.tx=-d.x,Cr.ty=-d.y,this.render(a,{renderTexture:P,clear:!1,transform:Cr,skipUpdateTransform:!!a.parent}),P},n.prototype.destroy=function(a){for(var o in this.plugins)this.plugins[o].destroy(),this.plugins[o]=null;a&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var u=this;u.plugins=null,u.type=A.N3.UNKNOWN,u.view=null,u.screen=null,u._tempDisplayObjectParent=null,u.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(n.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(a){this._backgroundColor=a,this._backgroundColorString=(0,J.XN)(a),(0,J.wK)(a,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(a){this._backgroundColorRgba[3]=a},enumerable:!1,configurable:!0}),n}(J.vp),Ki=function(n){this.buffer=n||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},je=function(){function f(n){this.renderer=n,this.managedBuffers={},this.boundBufferBases={}}return f.prototype.destroy=function(){this.renderer=null},f.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},f.prototype.bind=function(n){var o=this.gl,d=n._glBuffers[this.CONTEXT_UID]||this.createGLBuffer(n);o.bindBuffer(n.type,d.buffer)},f.prototype.bindBufferBase=function(n,a){var u=this.gl;if(this.boundBufferBases[a]!==n){var p=n._glBuffers[this.CONTEXT_UID]||this.createGLBuffer(n);this.boundBufferBases[a]=n,u.bindBufferBase(u.UNIFORM_BUFFER,a,p.buffer)}},f.prototype.bindBufferRange=function(n,a,o){var d=this.gl;o=o||0;var S=n._glBuffers[this.CONTEXT_UID]||this.createGLBuffer(n);d.bindBufferRange(d.UNIFORM_BUFFER,a||0,S.buffer,256*o,256)},f.prototype.update=function(n){var o=this.gl,d=n._glBuffers[this.CONTEXT_UID];if(n._updateID!==d.updateID)if(d.updateID=n._updateID,o.bindBuffer(n.type,d.buffer),d.byteLength>=n.data.byteLength)o.bufferSubData(n.type,0,n.data);else{var p=n.static?o.STATIC_DRAW:o.DYNAMIC_DRAW;d.byteLength=n.data.byteLength,o.bufferData(n.type,n.data,p)}},f.prototype.dispose=function(n,a){if(this.managedBuffers[n.id]){delete this.managedBuffers[n.id];var o=n._glBuffers[this.CONTEXT_UID],u=this.gl;n.disposeRunner.remove(this),o&&(a||u.deleteBuffer(o.buffer),delete n._glBuffers[this.CONTEXT_UID])}},f.prototype.disposeAll=function(n){for(var a=Object.keys(this.managedBuffers),o=0;o<a.length;o++)this.dispose(this.managedBuffers[a[o]],n)},f.prototype.createGLBuffer=function(n){var o=this.CONTEXT_UID;return n._glBuffers[o]=new Ki(this.gl.createBuffer()),this.managedBuffers[n.id]=n,n.disposeRunner.add(this),n._glBuffers[o]},f}(),Ne=function(f){function n(a){var o=f.call(this,A.N3.WEBGL,a)||this;return a=o.options,o.gl=null,o.CONTEXT_UID=0,o.runners={destroy:new at.R("destroy"),contextChange:new at.R("contextChange"),reset:new at.R("reset"),update:new at.R("update"),postrender:new at.R("postrender"),prerender:new at.R("prerender"),resize:new at.R("resize")},o.runners.contextChange.add(o),o.globalUniforms=new Qt({projectionMatrix:new G.y3},!0),o.addSystem(ei,"mask").addSystem(He,"context").addSystem(oi,"state").addSystem(nr,"shader").addSystem(ui,"texture").addSystem(je,"buffer").addSystem(Xr,"geometry").addSystem(Pr,"framebuffer").addSystem(Ht,"scissor").addSystem(er,"stencil").addSystem(yr,"projection").addSystem(hi,"textureGC").addSystem(Me,"filter").addSystem(ri,"renderTexture").addSystem(Ve,"batch"),o.initPlugins(n.__plugins),o.multisample=void 0,a.context?o.context.initFromContext(a.context):o.context.initFromOptions({alpha:!!o.useContextAlpha,antialias:a.antialias,premultipliedAlpha:o.useContextAlpha&&"notMultiplied"!==o.useContextAlpha,stencil:!0,preserveDrawingBuffer:a.preserveDrawingBuffer,powerPreference:o.options.powerPreference}),o.renderingToScreen=!0,(0,J.DE)(2===o.context.webGLVersion?"WebGL 2":"WebGL 1"),o.resize(o.options.width,o.options.height),o}return Q(n,f),n.create=function(a){if((0,J.HR)())return new n(a);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},n.prototype.contextChange=function(){var o,a=this.gl;if(1===this.context.webGLVersion){var u=a.getParameter(a.FRAMEBUFFER_BINDING);a.bindFramebuffer(a.FRAMEBUFFER,null),o=a.getParameter(a.SAMPLES),a.bindFramebuffer(a.FRAMEBUFFER,u)}else u=a.getParameter(a.DRAW_FRAMEBUFFER_BINDING),a.bindFramebuffer(a.DRAW_FRAMEBUFFER,null),o=a.getParameter(a.SAMPLES),a.bindFramebuffer(a.DRAW_FRAMEBUFFER,u);this.multisample=o>=A.G5.HIGH?A.G5.HIGH:o>=A.G5.MEDIUM?A.G5.MEDIUM:o>=A.G5.LOW?A.G5.LOW:A.G5.NONE},n.prototype.addSystem=function(a,o){var u=new a(this);if(this[o])throw new Error('Whoops! The name "'+o+'" is already in use');for(var d in this[o]=u,this.runners)this.runners[d].add(u);return this},n.prototype.render=function(a,o){var u,d,p,S;if(o&&(o instanceof B?((0,J.a1)("6.0.0","Renderer#render arguments changed, use options instead."),u=o,d=arguments[2],p=arguments[3],S=arguments[4]):(u=o.renderTexture,d=o.clear,p=o.transform,S=o.skipUpdateTransform)),this.renderingToScreen=!u,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=p,!this.context.isLost){if(u||(this._lastObjectRendered=a),!S){var P=a.enableTempParent();a.updateTransform(),a.disableTempParent(P)}this.renderTexture.bind(u),this.batch.currentRenderer.start(),(void 0!==d?d:this.clearBeforeRender)&&this.renderTexture.clear(),a.render(this),this.batch.currentRenderer.flush(),u&&u.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},n.prototype.generateTexture=function(a,o,u,d){void 0===o&&(o={});var p=f.prototype.generateTexture.call(this,a,o,u,d);return this.framebuffer.blit(),p},n.prototype.resize=function(a,o){f.prototype.resize.call(this,a,o),this.runners.resize.emit(this.screen.height,this.screen.width)},n.prototype.reset=function(){return this.runners.reset.emit(),this},n.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},n.prototype.destroy=function(a){for(var o in this.runners.destroy.emit(),this.runners)this.runners[o].destroy();f.prototype.destroy.call(this,a),this.gl=null},Object.defineProperty(n.prototype,"extract",{get:function(){return(0,J.a1)("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),n.registerPlugin=function(a,o){(n.__plugins=n.__plugins||{})[a]=o},n}(zi);function ar(f){return Ne.create(f)}var Se="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",Zi="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",ci=function(){this.texArray=null,this.blend=0,this.type=A.lg.TRIANGLES,this.start=0,this.size=0,this.data=null},di=function(){function f(){this.elements=[],this.ids=[],this.count=0}return f.prototype.clear=function(){for(var n=0;n<this.count;n++)this.elements[n]=null;this.count=0},f}(),_i=function(){function f(n){this.rawBinaryData="number"==typeof n?new ArrayBuffer(n):n instanceof Uint8Array?n.buffer:n,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(f.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),f.prototype.view=function(n){return this[n+"View"]},f.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},f.sizeOf=function(n){switch(n){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(n+" isn't a valid view type")}},f}(),wr=function(f){function n(a){var o=f.call(this,a)||this;return o.shaderGenerator=null,o.geometryClass=null,o.vertexSize=null,o.state=We.for2d(),o.size=4*nt.X.SPRITE_BATCH_SIZE,o._vertexCount=0,o._indexCount=0,o._bufferedElements=[],o._bufferedTextures=[],o._bufferSize=0,o._shader=null,o._packedGeometries=[],o._packedGeometryPoolSize=2,o._flushId=0,o._aBuffers={},o._iBuffers={},o.MAX_TEXTURES=1,o.renderer.on("prerender",o.onPrerender,o),a.runners.contextChange.add(o),o._dcIndex=0,o._aIndex=0,o._iIndex=0,o._attributeBuffer=null,o._indexBuffer=null,o._tempBoundTextures=[],o}return Q(n,f),n.prototype.contextChange=function(){var a=this.renderer.gl;nt.X.PREFER_ENV===A.Vi.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),nt.X.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=function(f,n){if(0===f)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var a=n.createShader(n.FRAGMENT_SHADER);;){var o=qr.replace(/%forloop%/gi,Oe(f));if(n.shaderSource(a,o),n.compileShader(a),n.getShaderParameter(a,n.COMPILE_STATUS))break;f=f/2|0}return f}(this.MAX_TEXTURES,a)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var o=0;o<this._packedGeometryPoolSize;o++)this._packedGeometries[o]=new this.geometryClass;this.initFlushBuffers()},n.prototype.initFlushBuffers=function(){for(var a=n._drawCallPool,o=n._textureArrayPool,u=this.size/4,d=Math.floor(u/this.MAX_TEXTURES)+1;a.length<u;)a.push(new ci);for(;o.length<d;)o.push(new di);for(var p=0;p<this.MAX_TEXTURES;p++)this._tempBoundTextures[p]=null},n.prototype.onPrerender=function(){this._flushId=0},n.prototype.render=function(a){!a._texture.valid||(this._vertexCount+a.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=a.vertexData.length/2,this._indexCount+=a.indices.length,this._bufferedTextures[this._bufferSize]=a._texture.baseTexture,this._bufferedElements[this._bufferSize++]=a)},n.prototype.buildTexturesAndDrawCalls=function(){var o=this._bufferedTextures,u=this.MAX_TEXTURES,d=n._textureArrayPool,p=this.renderer.batch,S=this._tempBoundTextures,P=this.renderer.textureGC.count,V=++Pt._globalBatch,q=0,ot=d[0],dt=0;p.copyBoundTextures(S,u);for(var Dt=0;Dt<this._bufferSize;++Dt){var Gt=o[Dt];o[Dt]=null,Gt._batchEnabled!==V&&(ot.count>=u&&(p.boundArray(ot,S,V,u),this.buildDrawCalls(ot,dt,Dt),dt=Dt,ot=d[++q],++V),Gt._batchEnabled=V,Gt.touched=P,ot.elements[ot.count++]=Gt)}for(ot.count>0&&(p.boundArray(ot,S,V,u),this.buildDrawCalls(ot,dt,this._bufferSize),++q,++V),Dt=0;Dt<S.length;Dt++)S[Dt]=null;Pt._globalBatch=V},n.prototype.buildDrawCalls=function(a,o,u){var d=this,p=d._bufferedElements,S=d._attributeBuffer,P=d._indexBuffer,V=d.vertexSize,q=n._drawCallPool,ot=this._dcIndex,dt=this._aIndex,Dt=this._iIndex,Gt=q[ot];Gt.start=this._iIndex,Gt.texArray=a;for(var kt=o;kt<u;++kt){var It=p[kt],ce=J.YA[It._texture.baseTexture.alphaMode?1:0][It.blendMode];p[kt]=null,o<kt&&Gt.blend!==ce&&(Gt.size=Dt-Gt.start,o=kt,(Gt=q[++ot]).texArray=a,Gt.start=Dt),this.packInterleavedGeometry(It,S,P,dt,Dt),dt+=It.vertexData.length/2*V,Dt+=It.indices.length,Gt.blend=ce}o<u&&(Gt.size=Dt-Gt.start,++ot),this._dcIndex=ot,this._aIndex=dt,this._iIndex=Dt},n.prototype.bindAndClearTexArray=function(a){for(var o=this.renderer.texture,u=0;u<a.count;u++)o.bind(a.elements[u],a.ids[u]),a.elements[u]=null;a.count=0},n.prototype.updateGeometry=function(){var a=this,o=a._packedGeometries,u=a._attributeBuffer,d=a._indexBuffer;nt.X.CAN_UPLOAD_SAME_BUFFER?(o[this._flushId]._buffer.update(u.rawBinaryData),o[this._flushId]._indexBuffer.update(d),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,o[this._flushId]=new this.geometryClass),o[this._flushId]._buffer.update(u.rawBinaryData),o[this._flushId]._indexBuffer.update(d),this.renderer.geometry.bind(o[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},n.prototype.drawBatches=function(){for(var a=this._dcIndex,o=this.renderer,u=o.gl,d=o.state,p=n._drawCallPool,S=null,P=0;P<a;P++){var V=p[P],q=V.texArray,ot=V.type,dt=V.size,Dt=V.start,Gt=V.blend;S!==q&&(S=q,this.bindAndClearTexArray(q)),this.state.blendMode=Gt,d.set(this.state),u.drawElements(ot,dt,u.UNSIGNED_SHORT,2*Dt)}},n.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},n.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),nt.X.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},n.prototype.stop=function(){this.flush()},n.prototype.destroy=function(){for(var a=0;a<this._packedGeometryPoolSize;a++)this._packedGeometries[a]&&this._packedGeometries[a].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),f.prototype.destroy.call(this)},n.prototype.getAttributeBuffer=function(a){var o=(0,J.a9)(Math.ceil(a/8)),u=(0,J.k3)(o),d=8*o;this._aBuffers.length<=u&&(this._iBuffers.length=u+1);var p=this._aBuffers[d];return p||(this._aBuffers[d]=p=new _i(d*this.vertexSize*4)),p},n.prototype.getIndexBuffer=function(a){var o=(0,J.a9)(Math.ceil(a/12)),u=(0,J.k3)(o),d=12*o;this._iBuffers.length<=u&&(this._iBuffers.length=u+1);var p=this._iBuffers[u];return p||(this._iBuffers[u]=p=new Uint16Array(d)),p},n.prototype.packInterleavedGeometry=function(a,o,u,d,p){for(var S=o.uint32View,P=o.float32View,V=d/this.vertexSize,q=a.uvs,ot=a.indices,dt=a.vertexData,Dt=a._texture.baseTexture._batchLocation,Gt=Math.min(a.worldAlpha,1),kt=Gt<1&&a._texture.baseTexture.alphaMode?(0,J.rA)(a._tintRGB,Gt):a._tintRGB+(255*Gt<<24),It=0;It<dt.length;It+=2)P[d++]=dt[It],P[d++]=dt[It+1],P[d++]=q[It],P[d++]=q[It+1],S[d++]=kt,P[d++]=Dt;for(It=0;It<ot.length;It++)u[p++]=V+ot[It]},n._drawCallPool=[],n._textureArrayPool=[],n}(fe),pi=function(){function f(n,a){if(this.vertexSrc=n,this.fragTemplate=a,this.programCache={},this.defaultGroupCache={},a.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(a.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return f.prototype.generateShader=function(n){if(!this.programCache[n]){for(var a=new Int32Array(n),o=0;o<n;o++)a[o]=o;this.defaultGroupCache[n]=Qt.from({uSamplers:a},!0);var u=this.fragTemplate;u=(u=u.replace(/%count%/gi,""+n)).replace(/%forloop%/gi,this.generateSampleSrc(n)),this.programCache[n]=new Er(this.vertexSrc,u)}var d={tint:new Float32Array([1,1,1,1]),translationMatrix:new G.y3,default:this.defaultGroupCache[n]};return new mr(this.programCache[n],d)},f.prototype.generateSampleSrc=function(n){var a="";a+="\n",a+="\n";for(var o=0;o<n;o++)o>0&&(a+="\nelse "),o<n-1&&(a+="if(vTextureId < "+o+".5)"),a+="\n{",a+="\n\tcolor = texture2D(uSamplers["+o+"], vTextureCoord);",a+="\n}";return(a+="\n")+"\n"},f}(),Qi=function(f){function n(a){void 0===a&&(a=!1);var o=f.call(this)||this;return o._buffer=new st(null,a,!1),o._indexBuffer=new st(null,a,!0),o.addAttribute("aVertexPosition",o._buffer,2,!1,A.vK.FLOAT).addAttribute("aTextureCoord",o._buffer,2,!1,A.vK.FLOAT).addAttribute("aColor",o._buffer,4,!0,A.vK.UNSIGNED_BYTE).addAttribute("aTextureId",o._buffer,1,!0,A.vK.FLOAT).addIndex(o._indexBuffer),o}return Q(n,f),n}(Tt),Br="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",vi="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",tn=function(){function f(){}return f.create=function(n){var a=Object.assign({vertex:Br,fragment:vi,geometryClass:Qi,vertexSize:6},n),o=a.vertex,u=a.fragment,d=a.vertexSize,p=a.geometryClass;return function(S){function P(V){var q=S.call(this,V)||this;return q.shaderGenerator=new pi(o,u),q.geometryClass=p,q.vertexSize=d,q}return Q(P,S),P}(wr)},Object.defineProperty(f,"defaultVertexSrc",{get:function(){return Br},enumerable:!1,configurable:!0}),Object.defineProperty(f,"defaultFragmentTemplate",{get:function(){return vi},enumerable:!1,configurable:!0}),f}().create(),Pe={},De=function(f){Object.defineProperty(Pe,f,{get:function(){return(0,J.a1)("6.0.0","PIXI.systems."+f+" has moved to PIXI."+f),y[f]}})};for(var Le in y)De(Le);var Ei={},Fr=function(f){Object.defineProperty(Ei,f,{get:function(){return(0,J.a1)("6.0.0","PIXI.resources."+f+" has moved to PIXI."+f),li[f]}})};for(var Le in li)Fr(Le)},4865:($t,At,rt)=>{"use strict";rt.d(At,{U:()=>vt});var nt=rt(5989),A=function(G,F){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,Z){W.__proto__=Z}||function(W,Z){for(var Q in Z)Z.hasOwnProperty(Q)&&(W[Q]=Z[Q])})(G,F)},vt=function(G){function F(W){void 0===W&&(W=1);var Z=G.call(this,nt.kP,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return Z.alpha=W,Z}return function(G,F){function W(){this.constructor=G}A(G,F),G.prototype=null===F?Object.create(F):(W.prototype=F.prototype,new W)}(F,G),Object.defineProperty(F.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(W){this.uniforms.uAlpha=W},enumerable:!1,configurable:!0}),F}(nt.wn)},1275:($t,At,rt)=>{"use strict";rt.d(At,{T:()=>wt,Y:()=>Et});var nt=rt(5989),A=rt(5593),J=function(m,b){return(J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,H){x.__proto__=H}||function(x,H){for(var B in H)H.hasOwnProperty(B)&&(x[B]=H[B])})(m,b)};function at(m,b){function x(){this.constructor=m}J(m,b),m.prototype=null===b?Object.create(b):(x.prototype=b.prototype,new x)}var F={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},W=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n"),U=(()=>{return(m=U||(U={}))[m.NO=0]="NO",m[m.YES=1]="YES",m[m.AUTO=2]="AUTO",m[m.BLEND=0]="BLEND",m[m.CLEAR=1]="CLEAR",m[m.BLIT=2]="BLIT",U;var m})(),Et=function(m){function b(x,H,B,L,w){void 0===H&&(H=8),void 0===B&&(B=4),void 0===L&&(L=A.X.FILTER_RESOLUTION),void 0===w&&(w=5);var $=this,st=function(m,b){var L,x=Math.ceil(m/2),H="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",B="";L=b?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var w=0;w<m;w++){var $=L.replace("%index%",w.toString());B+=$=$.replace("%sampleIndex%",w-(x-1)+".0"),B+="\n"}return(H=H.replace("%blur%",B)).replace("%size%",m.toString())}(w,x),ct=function(m){for(var w,b=F[m],x=b.length,H=W,B="",$=0;$<m;$++){var st="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",$.toString());w=$,$>=x&&(w=m-$-1),B+=st=st.replace("%value%",b[w].toString()),B+="\n"}return(H=H.replace("%blur%",B)).replace("%size%",m.toString())}(w);return($=m.call(this,st,ct)||this).horizontal=x,$.resolution=L,$._quality=0,$.quality=B,$.blur=H,$}return at(b,m),b.prototype.apply=function(x,H,B,L){if(this.uniforms.strength=B?this.horizontal?1/B.width*(B.width/H.width):1/B.height*(B.height/H.height):this.horizontal?1/x.renderer.width*(x.renderer.width/H.width):1/x.renderer.height*(x.renderer.height/H.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)x.applyFilter(this,H,B,L);else{var w=x.getFilterTexture(),$=x.renderer,st=H,ct=w;this.state.blend=!1,x.applyFilter(this,st,ct,U.CLEAR);for(var Xt=1;Xt<this.passes-1;Xt++){x.bindAndClear(st,U.BLIT),this.uniforms.uSampler=ct;var k=ct;ct=st,st=k,$.shader.bind(this),$.geometry.draw(5)}this.state.blend=!0,x.applyFilter(this,ct,B,L),x.returnFilterTexture(w)}},Object.defineProperty(b.prototype,"blur",{get:function(){return this.strength},set:function(x){this.padding=1+2*Math.abs(x),this.strength=x},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"quality",{get:function(){return this._quality},set:function(x){this._quality=x,this.passes=x},enumerable:!1,configurable:!0}),b}(nt.wn),wt=function(m){function b(x,H,B,L){void 0===x&&(x=8),void 0===H&&(H=4),void 0===B&&(B=A.X.FILTER_RESOLUTION),void 0===L&&(L=5);var w=m.call(this)||this;return w.blurXFilter=new Et(!0,x,H,B,L),w.blurYFilter=new Et(!1,x,H,B,L),w.resolution=B,w.quality=H,w.blur=x,w.repeatEdgePixels=!1,w}return at(b,m),b.prototype.apply=function(x,H,B,L){var w=Math.abs(this.blurXFilter.strength),$=Math.abs(this.blurYFilter.strength);if(w&&$){var st=x.getFilterTexture();this.blurXFilter.apply(x,H,st,U.CLEAR),this.blurYFilter.apply(x,st,B,L),x.returnFilterTexture(st)}else $?this.blurYFilter.apply(x,H,B,L):this.blurXFilter.apply(x,H,B,L)},b.prototype.updatePadding=function(){this.padding=this._repeatEdgePixels?0:2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(b.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(x){this.blurXFilter.blur=this.blurYFilter.blur=x,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(x){this.blurXFilter.quality=this.blurYFilter.quality=x},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(x){this.blurXFilter.blur=x,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(x){this.blurYFilter.blur=x,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(x){this.blurYFilter.blendMode=x},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(x){this._repeatEdgePixels=x,this.updatePadding()},enumerable:!1,configurable:!0}),b}(nt.wn)},477:($t,At,rt)=>{"use strict";rt.d(At,{Cd:()=>G,ZX:()=>J,Pj:()=>F,y3:()=>bt,AB:()=>Rt,_b:()=>nt,E9:()=>Q,mg:()=>W,jl:()=>A,Ae:()=>vt,c9:()=>Z,HS:()=>at,wx:()=>se,Lv:()=>Kt});var nt=2*Math.PI,A=180/Math.PI,J=Math.PI/180,at=(()=>{return(U=at||(at={}))[U.POLY=0]="POLY",U[U.RECT=1]="RECT",U[U.CIRC=2]="CIRC",U[U.ELIP=3]="ELIP",U[U.RREC=4]="RREC",at;var U})(),vt=function(){function U(v,N,y,j){void 0===v&&(v=0),void 0===N&&(N=0),void 0===y&&(y=0),void 0===j&&(j=0),this.x=Number(v),this.y=Number(N),this.width=Number(y),this.height=Number(j),this.type=at.RECT}return Object.defineProperty(U.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(U,"EMPTY",{get:function(){return new U(0,0,0,0)},enumerable:!1,configurable:!0}),U.prototype.clone=function(){return new U(this.x,this.y,this.width,this.height)},U.prototype.copyFrom=function(v){return this.x=v.x,this.y=v.y,this.width=v.width,this.height=v.height,this},U.prototype.copyTo=function(v){return v.x=this.x,v.y=this.y,v.width=this.width,v.height=this.height,v},U.prototype.contains=function(v,N){return!(this.width<=0||this.height<=0)&&v>=this.x&&v<this.x+this.width&&N>=this.y&&N<this.y+this.height},U.prototype.pad=function(v,N){return void 0===v&&(v=0),void 0===N&&(N=v),this.x-=v,this.y-=N,this.width+=2*v,this.height+=2*N,this},U.prototype.fit=function(v){var N=Math.max(this.x,v.x),y=Math.min(this.x+this.width,v.x+v.width),j=Math.max(this.y,v.y),Y=Math.min(this.y+this.height,v.y+v.height);return this.x=N,this.width=Math.max(y-N,0),this.y=j,this.height=Math.max(Y-j,0),this},U.prototype.ceil=function(v,N){void 0===v&&(v=1),void 0===N&&(N=.001);var y=Math.ceil((this.x+this.width-N)*v)/v,j=Math.ceil((this.y+this.height-N)*v)/v;return this.x=Math.floor((this.x+N)*v)/v,this.y=Math.floor((this.y+N)*v)/v,this.width=y-this.x,this.height=j-this.y,this},U.prototype.enlarge=function(v){var N=Math.min(this.x,v.x),y=Math.max(this.x+this.width,v.x+v.width),j=Math.min(this.y,v.y),Y=Math.max(this.y+this.height,v.y+v.height);return this.x=N,this.width=y-N,this.y=j,this.height=Y-j,this},U.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},U}(),G=function(){function U(v,N,y){void 0===v&&(v=0),void 0===N&&(N=0),void 0===y&&(y=0),this.x=v,this.y=N,this.radius=y,this.type=at.CIRC}return U.prototype.clone=function(){return new U(this.x,this.y,this.radius)},U.prototype.contains=function(v,N){if(this.radius<=0)return!1;var j=this.x-v,Y=this.y-N;return(j*=j)+(Y*=Y)<=this.radius*this.radius},U.prototype.getBounds=function(){return new vt(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},U.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},U}(),F=function(){function U(v,N,y,j){void 0===v&&(v=0),void 0===N&&(N=0),void 0===y&&(y=0),void 0===j&&(j=0),this.x=v,this.y=N,this.width=y,this.height=j,this.type=at.ELIP}return U.prototype.clone=function(){return new U(this.x,this.y,this.width,this.height)},U.prototype.contains=function(v,N){if(this.width<=0||this.height<=0)return!1;var y=(v-this.x)/this.width,j=(N-this.y)/this.height;return(y*=y)+(j*=j)<=1},U.prototype.getBounds=function(){return new vt(this.x-this.width,this.y-this.height,this.width,this.height)},U.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},U}(),W=function(){function U(){for(var v=arguments,N=[],y=0;y<arguments.length;y++)N[y]=v[y];var j=Array.isArray(N[0])?N[0]:N;if("number"!=typeof j[0]){for(var Y=[],Et=0,wt=j.length;Et<wt;Et++)Y.push(j[Et].x,j[Et].y);j=Y}this.points=j,this.type=at.POLY,this.closeStroke=!0}return U.prototype.clone=function(){var N=new U(this.points.slice());return N.closeStroke=this.closeStroke,N},U.prototype.contains=function(v,N){for(var y=!1,j=this.points.length/2,Y=0,Et=j-1;Y<j;Et=Y++){var wt=this.points[2*Y],m=this.points[2*Y+1],x=this.points[2*Et+1];m>N!=x>N&&v<(N-m)/(x-m)*(this.points[2*Et]-wt)+wt&&(y=!y)}return y},U.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce(function(v,N){return v+", "+N},"")+"]"},U}(),Z=function(){function U(v,N,y,j,Y){void 0===v&&(v=0),void 0===N&&(N=0),void 0===y&&(y=0),void 0===j&&(j=0),void 0===Y&&(Y=20),this.x=v,this.y=N,this.width=y,this.height=j,this.radius=Y,this.type=at.RREC}return U.prototype.clone=function(){return new U(this.x,this.y,this.width,this.height,this.radius)},U.prototype.contains=function(v,N){if(this.width<=0||this.height<=0)return!1;if(v>=this.x&&v<=this.x+this.width&&N>=this.y&&N<=this.y+this.height){var y=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(N>=this.y+y&&N<=this.y+this.height-y||v>=this.x+y&&v<=this.x+this.width-y)return!0;var j=v-(this.x+y),Y=N-(this.y+y),Et=y*y;if(j*j+Y*Y<=Et||(j=v-(this.x+this.width-y))*j+Y*Y<=Et||j*j+(Y=N-(this.y+this.height-y))*Y<=Et||(j=v-(this.x+y))*j+Y*Y<=Et)return!0}return!1},U.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"},U}(),Q=function(){function U(v,N){void 0===v&&(v=0),void 0===N&&(N=0),this.x=0,this.y=0,this.x=v,this.y=N}return U.prototype.clone=function(){return new U(this.x,this.y)},U.prototype.copyFrom=function(v){return this.set(v.x,v.y),this},U.prototype.copyTo=function(v){return v.set(this.x,this.y),v},U.prototype.equals=function(v){return v.x===this.x&&v.y===this.y},U.prototype.set=function(v,N){return void 0===v&&(v=0),void 0===N&&(N=v),this.x=v,this.y=N,this},U.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},U}(),Rt=function(){function U(v,N,y,j){void 0===y&&(y=0),void 0===j&&(j=0),this._x=y,this._y=j,this.cb=v,this.scope=N}return U.prototype.clone=function(v,N){return void 0===v&&(v=this.cb),void 0===N&&(N=this.scope),new U(v,N,this._x,this._y)},U.prototype.set=function(v,N){return void 0===v&&(v=0),void 0===N&&(N=v),(this._x!==v||this._y!==N)&&(this._x=v,this._y=N,this.cb.call(this.scope)),this},U.prototype.copyFrom=function(v){return(this._x!==v.x||this._y!==v.y)&&(this._x=v.x,this._y=v.y,this.cb.call(this.scope)),this},U.prototype.copyTo=function(v){return v.set(this._x,this._y),v},U.prototype.equals=function(v){return v.x===this._x&&v.y===this._y},U.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(U.prototype,"x",{get:function(){return this._x},set:function(v){this._x!==v&&(this._x=v,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"y",{get:function(){return this._y},set:function(v){this._y!==v&&(this._y=v,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),U}(),bt=function(){function U(v,N,y,j,Y,Et){void 0===v&&(v=1),void 0===N&&(N=0),void 0===y&&(y=0),void 0===j&&(j=1),void 0===Y&&(Y=0),void 0===Et&&(Et=0),this.array=null,this.a=v,this.b=N,this.c=y,this.d=j,this.tx=Y,this.ty=Et}return U.prototype.fromArray=function(v){this.a=v[0],this.b=v[1],this.c=v[3],this.d=v[4],this.tx=v[2],this.ty=v[5]},U.prototype.set=function(v,N,y,j,Y,Et){return this.a=v,this.b=N,this.c=y,this.d=j,this.tx=Y,this.ty=Et,this},U.prototype.toArray=function(v,N){this.array||(this.array=new Float32Array(9));var y=N||this.array;return v?(y[0]=this.a,y[1]=this.b,y[2]=0,y[3]=this.c,y[4]=this.d,y[5]=0,y[6]=this.tx,y[7]=this.ty,y[8]=1):(y[0]=this.a,y[1]=this.c,y[2]=this.tx,y[3]=this.b,y[4]=this.d,y[5]=this.ty,y[6]=0,y[7]=0,y[8]=1),y},U.prototype.apply=function(v,N){N=N||new Q;var y=v.x,j=v.y;return N.x=this.a*y+this.c*j+this.tx,N.y=this.b*y+this.d*j+this.ty,N},U.prototype.applyInverse=function(v,N){N=N||new Q;var y=1/(this.a*this.d+this.c*-this.b),j=v.x,Y=v.y;return N.x=this.d*y*j+-this.c*y*Y+(this.ty*this.c-this.tx*this.d)*y,N.y=this.a*y*Y+-this.b*y*j+(-this.ty*this.a+this.tx*this.b)*y,N},U.prototype.translate=function(v,N){return this.tx+=v,this.ty+=N,this},U.prototype.scale=function(v,N){return this.a*=v,this.d*=N,this.c*=v,this.b*=N,this.tx*=v,this.ty*=N,this},U.prototype.rotate=function(v){var N=Math.cos(v),y=Math.sin(v),j=this.a,Y=this.c,Et=this.tx;return this.a=j*N-this.b*y,this.b=j*y+this.b*N,this.c=Y*N-this.d*y,this.d=Y*y+this.d*N,this.tx=Et*N-this.ty*y,this.ty=Et*y+this.ty*N,this},U.prototype.append=function(v){var N=this.a,y=this.b,j=this.c,Y=this.d;return this.a=v.a*N+v.b*j,this.b=v.a*y+v.b*Y,this.c=v.c*N+v.d*j,this.d=v.c*y+v.d*Y,this.tx=v.tx*N+v.ty*j+this.tx,this.ty=v.tx*y+v.ty*Y+this.ty,this},U.prototype.setTransform=function(v,N,y,j,Y,Et,wt,m,b){return this.a=Math.cos(wt+b)*Y,this.b=Math.sin(wt+b)*Y,this.c=-Math.sin(wt-m)*Et,this.d=Math.cos(wt-m)*Et,this.tx=v-(y*this.a+j*this.c),this.ty=N-(y*this.b+j*this.d),this},U.prototype.prepend=function(v){var N=this.tx;if(1!==v.a||0!==v.b||0!==v.c||1!==v.d){var y=this.a,j=this.c;this.a=y*v.a+this.b*v.c,this.b=y*v.b+this.b*v.d,this.c=j*v.a+this.d*v.c,this.d=j*v.b+this.d*v.d}return this.tx=N*v.a+this.ty*v.c+v.tx,this.ty=N*v.b+this.ty*v.d+v.ty,this},U.prototype.decompose=function(v){var N=this.a,y=this.b,j=this.c,Y=this.d,Et=v.pivot,wt=-Math.atan2(-j,Y),m=Math.atan2(y,N),b=Math.abs(wt+m);return b<1e-5||Math.abs(nt-b)<1e-5?(v.rotation=m,v.skew.x=v.skew.y=0):(v.rotation=0,v.skew.x=wt,v.skew.y=m),v.scale.x=Math.sqrt(N*N+y*y),v.scale.y=Math.sqrt(j*j+Y*Y),v.position.x=this.tx+(Et.x*N+Et.y*j),v.position.y=this.ty+(Et.x*y+Et.y*Y),v},U.prototype.invert=function(){var v=this.a,N=this.b,y=this.c,j=this.d,Y=this.tx,Et=v*j-N*y;return this.a=j/Et,this.b=-N/Et,this.c=-y/Et,this.d=v/Et,this.tx=(y*this.ty-j*Y)/Et,this.ty=-(v*this.ty-N*Y)/Et,this},U.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},U.prototype.clone=function(){var v=new U;return v.a=this.a,v.b=this.b,v.c=this.c,v.d=this.d,v.tx=this.tx,v.ty=this.ty,v},U.prototype.copyTo=function(v){return v.a=this.a,v.b=this.b,v.c=this.c,v.d=this.d,v.tx=this.tx,v.ty=this.ty,v},U.prototype.copyFrom=function(v){return this.a=v.a,this.b=v.b,this.c=v.c,this.d=v.d,this.tx=v.tx,this.ty=v.ty,this},U.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(U,"IDENTITY",{get:function(){return new U},enumerable:!1,configurable:!0}),Object.defineProperty(U,"TEMP_MATRIX",{get:function(){return new U},enumerable:!1,configurable:!0}),U}(),xt=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ut=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],zt=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Pt=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Ut=[],Ct=[],Ft=Math.sign;!function(){for(var U=0;U<16;U++){var v=[];Ut.push(v);for(var N=0;N<16;N++)for(var y=Ft(xt[U]*xt[N]+zt[U]*ut[N]),j=Ft(ut[U]*xt[N]+Pt[U]*ut[N]),Y=Ft(xt[U]*zt[N]+zt[U]*Pt[N]),Et=Ft(ut[U]*zt[N]+Pt[U]*Pt[N]),wt=0;wt<16;wt++)if(xt[wt]===y&&ut[wt]===j&&zt[wt]===Y&&Pt[wt]===Et){v.push(wt);break}}for(U=0;U<16;U++){var m=new bt;m.set(xt[U],ut[U],zt[U],Pt[U],0,0),Ct.push(m)}}();var Kt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(U){return xt[U]},uY:function(U){return ut[U]},vX:function(U){return zt[U]},vY:function(U){return Pt[U]},inv:function(U){return 8&U?15&U:7&-U},add:function(U,v){return Ut[U][v]},sub:function(U,v){return Ut[U][Kt.inv(v)]},rotate180:function(U){return 4^U},isVertical:function(U){return 2==(3&U)},byDirection:function(U,v){return 2*Math.abs(U)<=Math.abs(v)?v>=0?Kt.S:Kt.N:2*Math.abs(v)<=Math.abs(U)?U>0?Kt.E:Kt.W:v>0?U>0?Kt.SE:Kt.SW:U>0?Kt.NE:Kt.NW},matrixAppendRotationInv:function(U,v,N,y){void 0===N&&(N=0),void 0===y&&(y=0);var j=Ct[Kt.inv(v)];j.tx=N,j.ty=y,U.append(j)}},se=function(){function U(){this.worldTransform=new bt,this.localTransform=new bt,this.position=new Rt(this.onChange,this,0,0),this.scale=new Rt(this.onChange,this,1,1),this.pivot=new Rt(this.onChange,this,0,0),this.skew=new Rt(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return U.prototype.onChange=function(){this._localID++},U.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},U.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},U.prototype.updateLocalTransform=function(){var v=this.localTransform;this._localID!==this._currentLocalID&&(v.a=this._cx*this.scale.x,v.b=this._sx*this.scale.x,v.c=this._cy*this.scale.y,v.d=this._sy*this.scale.y,v.tx=this.position.x-(this.pivot.x*v.a+this.pivot.y*v.c),v.ty=this.position.y-(this.pivot.x*v.b+this.pivot.y*v.d),this._currentLocalID=this._localID,this._parentID=-1)},U.prototype.updateTransform=function(v){var N=this.localTransform;if(this._localID!==this._currentLocalID&&(N.a=this._cx*this.scale.x,N.b=this._sx*this.scale.x,N.c=this._cy*this.scale.y,N.d=this._sy*this.scale.y,N.tx=this.position.x-(this.pivot.x*N.a+this.pivot.y*N.c),N.ty=this.position.y-(this.pivot.x*N.b+this.pivot.y*N.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==v._worldID){var y=v.worldTransform,j=this.worldTransform;j.a=N.a*y.a+N.b*y.c,j.b=N.a*y.b+N.b*y.d,j.c=N.c*y.a+N.d*y.c,j.d=N.c*y.b+N.d*y.d,j.tx=N.tx*y.a+N.ty*y.c+y.tx,j.ty=N.tx*y.b+N.ty*y.d+y.ty,this._parentID=v._worldID,this._worldID++}},U.prototype.setFromMatrix=function(v){v.decompose(this),this._localID++},Object.defineProperty(U.prototype,"rotation",{get:function(){return this._rotation},set:function(v){this._rotation!==v&&(this._rotation=v,this.updateSkew())},enumerable:!1,configurable:!0}),U.IDENTITY=new U,U}()},91:($t,At,rt)=>{"use strict";rt.d(At,{R:()=>nt});var nt=function(){function A(J){this.items=[],this._name=J,this._aliasCount=0}return A.prototype.emit=function(J,at,vt,G,F,W,Z,Q){if(arguments.length>8)throw new Error("max arguments reached");var Rt=this,bt=Rt.name,xt=Rt.items;this._aliasCount++;for(var ut=0,zt=xt.length;ut<zt;ut++)xt[ut][bt](J,at,vt,G,F,W,Z,Q);return xt===this.items&&this._aliasCount--,this},A.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},A.prototype.add=function(J){return J[this._name]&&(this.ensureNonAliasedItems(),this.remove(J),this.items.push(J)),this},A.prototype.remove=function(J){var at=this.items.indexOf(J);return-1!==at&&(this.ensureNonAliasedItems(),this.items.splice(at,1)),this},A.prototype.contains=function(J){return-1!==this.items.indexOf(J)},A.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},A.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(A.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),A}();Object.defineProperties(nt.prototype,{dispatch:{value:nt.prototype.emit},run:{value:nt.prototype.emit}})},5593:($t,At,rt)=>{"use strict";rt.d(At,{t:()=>Ft,X:()=>Xt});var nt=/iPhone/i,A=/iPod/i,J=/iPad/i,at=/\biOS-universal(?:.+)Mac\b/i,vt=/\bAndroid(?:.+)Mobile\b/i,G=/Android/i,F=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,W=/Silk/i,Z=/Windows Phone/i,Q=/\bWindows(?:.+)ARM\b/i,Rt=/BlackBerry/i,bt=/BB10/i,xt=/Opera Mini/i,ut=/\b(CriOS|Chrome)(?:.+)Mobile/i,zt=/Mobile(?:.+)Firefox\b/i,Pt=function(k){return void 0!==k&&"MacIntel"===k.platform&&"number"==typeof k.maxTouchPoints&&k.maxTouchPoints>1&&"undefined"==typeof MSStream},Ft=function(k){var gt={userAgent:"",platform:"",maxTouchPoints:0};k||"undefined"==typeof navigator?"string"==typeof k?gt.userAgent=k:k&&k.userAgent&&(gt={userAgent:k.userAgent,platform:k.platform,maxTouchPoints:k.maxTouchPoints||0}):gt={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var mt=gt.userAgent,Tt=mt.split("[FBAN");void 0!==Tt[1]&&(mt=Tt[0]),void 0!==(Tt=mt.split("Twitter"))[1]&&(mt=Tt[0]);var pt=function(k){return function(gt){return gt.test(k)}}(mt),jt={apple:{phone:pt(nt)&&!pt(Z),ipod:pt(A),tablet:!pt(nt)&&(pt(J)||Pt(gt))&&!pt(Z),universal:pt(at),device:(pt(nt)||pt(A)||pt(J)||pt(at)||Pt(gt))&&!pt(Z)},amazon:{phone:pt(F),tablet:!pt(F)&&pt(W),device:pt(F)||pt(W)},android:{phone:!pt(Z)&&pt(F)||!pt(Z)&&pt(vt),tablet:!pt(Z)&&!pt(F)&&!pt(vt)&&(pt(W)||pt(G)),device:!pt(Z)&&(pt(F)||pt(W)||pt(vt)||pt(G))||pt(/\bokhttp\b/i)},windows:{phone:pt(Z),tablet:pt(Q),device:pt(Z)||pt(Q)},other:{blackberry:pt(Rt),blackberry10:pt(bt),opera:pt(xt),firefox:pt(zt),chrome:pt(ut),device:pt(Rt)||pt(bt)||pt(xt)||pt(zt)||pt(ut)},any:!1,phone:!1,tablet:!1};return jt.any=jt.apple.device||jt.android.device||jt.windows.device||jt.other.device,jt.phone=jt.apple.phone||jt.android.phone||jt.windows.phone,jt.tablet=jt.apple.tablet||jt.android.tablet||jt.windows.tablet,jt}(self.navigator),m=(()=>{return(k=m||(m={}))[k.NEAREST=0]="NEAREST",k[k.LINEAR=1]="LINEAR",m;var k})(),b=(()=>{return(k=b||(b={}))[k.CLAMP=33071]="CLAMP",k[k.REPEAT=10497]="REPEAT",k[k.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",b;var k})(),x=(()=>{return(k=x||(x={}))[k.OFF=0]="OFF",k[k.POW2=1]="POW2",k[k.ON=2]="ON",k[k.ON_MANUAL=3]="ON_MANUAL",x;var k})(),L=(()=>{return(k=L||(L={}))[k.AUTO=0]="AUTO",k[k.MANUAL=1]="MANUAL",L;var k})(),w=(()=>{return(k=w||(w={})).LOW="lowp",k.MEDIUM="mediump",k.HIGH="highp",w;var k})(),st=(()=>{return(k=st||(st={}))[k.NONE=0]="NONE",k[k.LOW=2]="LOW",k[k.MEDIUM=4]="MEDIUM",k[k.HIGH=8]="HIGH",st;var k})(),Xt={MIPMAP_TEXTURES:x.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:st.NONE,SPRITE_MAX_TEXTURES:function(k){var mt,gt=!0;(Ft.tablet||Ft.phone)&&(Ft.apple.device&&(mt=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(mt[1],10)<11&&(gt=!1),Ft.android.device&&(mt=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(mt[1],10)<7&&(gt=!1));return gt?32:4}(),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:L.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:b.CLAMP,SCALE_MODE:m.LINEAR,PRECISION_VERTEX:w.HIGH,PRECISION_FRAGMENT:Ft.apple.device?w.HIGH:w.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!Ft.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1}},5768:($t,At,rt)=>{"use strict";rt.d(At,{vB:()=>at,Sb:()=>vt,uF:()=>A});var nt=rt(5593);nt.X.TARGET_FPMS=.06;var A=(()=>{return(G=A||(A={}))[G.INTERACTION=50]="INTERACTION",G[G.HIGH=25]="HIGH",G[G.NORMAL=0]="NORMAL",G[G.LOW=-25]="LOW",G[G.UTILITY=-50]="UTILITY",A;var G})(),J=function(){function G(F,W,Z,Q){void 0===W&&(W=null),void 0===Z&&(Z=0),void 0===Q&&(Q=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=F,this.context=W,this.priority=Z,this.once=Q}return G.prototype.match=function(F,W){return void 0===W&&(W=null),this.fn===F&&this.context===W},G.prototype.emit=function(F){this.fn&&(this.context?this.fn.call(this.context,F):this.fn(F));var W=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),W},G.prototype.connect=function(F){this.previous=F,F.next&&(F.next.previous=this),this.next=F.next,F.next=this},G.prototype.destroy=function(F){void 0===F&&(F=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var W=this.next;return this.next=F?null:W,this.previous=null,W},G}(),at=function(){function G(){var F=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new J(null,null,1/0),this.deltaMS=1/nt.X.TARGET_FPMS,this.elapsedMS=1/nt.X.TARGET_FPMS,this._tick=function(W){F._requestId=null,F.started&&(F.update(W),F.started&&null===F._requestId&&F._head.next&&(F._requestId=requestAnimationFrame(F._tick)))}}return G.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},G.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},G.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},G.prototype.add=function(F,W,Z){return void 0===Z&&(Z=A.NORMAL),this._addListener(new J(F,W,Z))},G.prototype.addOnce=function(F,W,Z){return void 0===Z&&(Z=A.NORMAL),this._addListener(new J(F,W,Z,!0))},G.prototype._addListener=function(F){var W=this._head.next,Z=this._head;if(W){for(;W;){if(F.priority>W.priority){F.connect(Z);break}Z=W,W=W.next}F.previous||F.connect(Z)}else F.connect(Z);return this._startIfPossible(),this},G.prototype.remove=function(F,W){for(var Z=this._head.next;Z;)Z=Z.match(F,W)?Z.destroy():Z.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(G.prototype,"count",{get:function(){if(!this._head)return 0;for(var F=0,W=this._head;W=W.next;)F++;return F},enumerable:!1,configurable:!0}),G.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},G.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},G.prototype.destroy=function(){if(!this._protected){this.stop();for(var F=this._head.next;F;)F=F.destroy(!0);this._head.destroy(),this._head=null}},G.prototype.update=function(F){var W;if(void 0===F&&(F=performance.now()),F>this.lastTime){if((W=this.elapsedMS=F-this.lastTime)>this._maxElapsedMS&&(W=this._maxElapsedMS),W*=this.speed,this._minElapsedMS){var Z=F-this._lastFrame|0;if(Z<this._minElapsedMS)return;this._lastFrame=F-Z%this._minElapsedMS}this.deltaMS=W,this.deltaTime=this.deltaMS*nt.X.TARGET_FPMS;for(var Q=this._head,Rt=Q.next;Rt;)Rt=Rt.emit(this.deltaTime);Q.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=F},Object.defineProperty(G.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(F){var W=Math.min(this.maxFPS,F),Z=Math.min(Math.max(0,W)/1e3,nt.X.TARGET_FPMS);this._maxElapsedMS=1/Z},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(F){if(0===F)this._minElapsedMS=0;else{var W=Math.max(this.minFPS,F);this._minElapsedMS=1/(W/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(G,"shared",{get:function(){if(!G._shared){var F=G._shared=new G;F.autoStart=!0,F._protected=!0}return G._shared},enumerable:!1,configurable:!0}),Object.defineProperty(G,"system",{get:function(){if(!G._system){var F=G._system=new G;F.autoStart=!0,F._protected=!0}return G._system},enumerable:!1,configurable:!0}),G}(),vt=function(){function G(){}return G.init=function(F){var W=this;F=Object.assign({autoStart:!0,sharedTicker:!1},F),Object.defineProperty(this,"ticker",{set:function(Z){this._ticker&&this._ticker.remove(this.render,this),this._ticker=Z,Z&&Z.add(this.render,this,A.LOW)},get:function(){return this._ticker}}),this.stop=function(){W._ticker.stop()},this.start=function(){W._ticker.start()},this._ticker=null,this.ticker=F.sharedTicker?at.shared:new at,F.autoStart&&this.start()},G.destroy=function(){if(this._ticker){var F=this._ticker;this.ticker=null,F.destroy()}},G}()},7567:($t,At,rt)=>{"use strict";rt.d(At,{tq:()=>nt.t,vp:()=>J.a,OT:()=>vt.a,V8:()=>ne,qU:()=>Ur,GG:()=>kt,kN:()=>It,D:()=>Ei,fl:()=>a,a1:()=>Gt,Qq:()=>_n,u7:()=>o,fL:()=>pn,wK:()=>vi,XN:()=>Ji,wv:()=>S,HR:()=>ut,k3:()=>P,a9:()=>p,YA:()=>Le,Qt:()=>Fr,rA:()=>f,GT:()=>n,Er:()=>V,CO:()=>Pe,DE:()=>bt,Xx:()=>q,qm:()=>tn,yA:()=>Or,hQ:()=>dt,HQ:()=>W});var nt=rt(5593),A=rt(9170),J=rt.n(A),at=rt(5469),vt=rt.n(at),G=rt(8762),F=rt(6617),W={parse:G.Qc,format:G.WU,resolve:G.DB};nt.X.RETINA_PREFIX=/@([0-9\.]+)x/,nt.X.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var xt,Z=!1;function bt(K){var tt;Z||(navigator.userAgent.toLowerCase().indexOf("chrome")>-1?(tt=self.console).log.apply(tt,["\n %c %c %c PixiJS 6.2.1 - \u2730 "+K+" \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):self.console&&self.console.log("PixiJS 6.2.1 - "+K+" - http://www.pixijs.com/"),Z=!0)}function ut(){return void 0===xt&&(xt=function(){var tt={stencil:!0,failIfMajorPerformanceCaveat:nt.X.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var lt=document.createElement("canvas"),Lt=lt.getContext("webgl",tt)||lt.getContext("experimental-webgl",tt),ae=!(!Lt||!Lt.getContextAttributes().stencil);if(Lt){var le=Lt.getExtension("WEBGL_lose_context");le&&le.loseContext()}return Lt=null,ae}catch(Gr){return!1}}()),xt}var Br={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function vi(K,tt){return void 0===tt&&(tt=[]),tt[0]=(K>>16&255)/255,tt[1]=(K>>8&255)/255,tt[2]=(255&K)/255,tt}function Ji(K){var tt=K.toString(16);return"#"+("000000".substr(0,6-tt.length)+tt)}function tn(K){return"string"==typeof K&&"#"===(K=Br[K.toLowerCase()]||K)[0]&&(K=K.substr(1)),parseInt(K,16)}function Pe(K){return(255*K[0]<<16)+(255*K[1]<<8)+(255*K[2]|0)}var Le=function(){for(var K=[],tt=[],lt=0;lt<32;lt++)K[lt]=lt,tt[lt]=lt;K[F.T$.NORMAL_NPM]=F.T$.NORMAL,K[F.T$.ADD_NPM]=F.T$.ADD,K[F.T$.SCREEN_NPM]=F.T$.SCREEN,tt[F.T$.NORMAL]=F.T$.NORMAL_NPM,tt[F.T$.ADD]=F.T$.ADD_NPM,tt[F.T$.SCREEN]=F.T$.SCREEN_NPM;var Lt=[];return Lt.push(tt),Lt.push(K),Lt}();function Ei(K,tt){return Le[tt?1:0][K]}function Fr(K,tt,lt,Lt){return lt=lt||new Float32Array(4),Lt||void 0===Lt?(lt[0]=K[0]*tt,lt[1]=K[1]*tt,lt[2]=K[2]*tt):(lt[0]=K[0],lt[1]=K[1],lt[2]=K[2]),lt[3]=tt,lt}function f(K,tt){if(1===tt)return(255*tt<<24)+K;if(0===tt)return 0;var lt=K>>16&255,Lt=K>>8&255,ae=255&K;return(255*tt<<24)+((lt=lt*tt+.5|0)<<16)+((Lt=Lt*tt+.5|0)<<8)+(ae*tt+.5|0)}function n(K,tt,lt,Lt){return(lt=lt||new Float32Array(4))[0]=(K>>16&255)/255,lt[1]=(K>>8&255)/255,lt[2]=(255&K)/255,(Lt||void 0===Lt)&&(lt[0]*=tt,lt[1]*=tt,lt[2]*=tt),lt[3]=tt,lt}function a(K,tt){void 0===tt&&(tt=null);var lt=6*K;if((tt=tt||new Uint16Array(lt)).length!==lt)throw new Error("Out buffer length is incorrect, got "+tt.length+" and expected "+lt);for(var Lt=0,ae=0;Lt<lt;Lt+=6,ae+=4)tt[Lt+0]=ae+0,tt[Lt+1]=ae+1,tt[Lt+2]=ae+2,tt[Lt+3]=ae+0,tt[Lt+4]=ae+2,tt[Lt+5]=ae+3;return tt}function o(K){if(4===K.BYTES_PER_ELEMENT)return K instanceof Float32Array?"Float32Array":K instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===K.BYTES_PER_ELEMENT){if(K instanceof Uint16Array)return"Uint16Array"}else if(1===K.BYTES_PER_ELEMENT&&K instanceof Uint8Array)return"Uint8Array";return null}function p(K){return K+=0===K?1:0,--K,K|=K>>>1,K|=K>>>2,K|=K>>>4,K|=K>>>8,1+(K|=K>>>16)}function S(K){return!(K&K-1||!K)}function P(K){var tt=(K>65535?1:0)<<4,lt=((K>>>=tt)>255?1:0)<<3;return tt|=lt,tt|=lt=((K>>>=lt)>15?1:0)<<2,(tt|=lt=((K>>>=lt)>3?1:0)<<1)|(K>>>=lt)>>1}function V(K,tt,lt){var ae,Lt=K.length;if(!(tt>=Lt||0===lt)){var le=Lt-(lt=tt+lt>Lt?Lt-tt:lt);for(ae=tt;ae<le;++ae)K[ae]=K[ae+lt];K.length=le}}function q(K){return 0===K?0:K<0?-1:1}Float32Array,Uint32Array,Int32Array,Uint8Array;var ot=0;function dt(){return++ot}var Dt={};function Gt(K,tt,lt){if(void 0===lt&&(lt=3),!Dt[tt]){var Lt=(new Error).stack;void 0===Lt?console.warn("PixiJS Deprecation Warning: ",tt+"\nDeprecated since v"+K):(Lt=Lt.split("\n").splice(lt).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",tt+"\nDeprecated since v"+K),console.warn(Lt),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",tt+"\nDeprecated since v"+K),console.warn(Lt))),Dt[tt]=!0}}var Ti,kt={},It=Object.create(null),ne=Object.create(null),Ur=function(){function K(tt,lt,Lt){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=Lt||nt.X.RESOLUTION,this.resize(tt,lt)}return K.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},K.prototype.resize=function(tt,lt){this.canvas.width=Math.round(tt*this.resolution),this.canvas.height=Math.round(lt*this.resolution)},K.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(K.prototype,"width",{get:function(){return this.canvas.width},set:function(tt){this.canvas.width=Math.round(tt)},enumerable:!1,configurable:!0}),Object.defineProperty(K.prototype,"height",{get:function(){return this.canvas.height},set:function(tt){this.canvas.height=Math.round(tt)},enumerable:!1,configurable:!0}),K}();function Or(K){var we,pe,Re,tt=K.width,lt=K.height,Lt=K.getContext("2d"),le=Lt.getImageData(0,0,tt,lt).data,Gr=le.length,te={top:null,left:null,right:null,bottom:null},sr=null;for(we=0;we<Gr;we+=4)0!==le[we+3]&&(pe=we/4%tt,Re=~~(we/4/tt),null===te.top&&(te.top=Re),(null===te.left||pe<te.left)&&(te.left=pe),(null===te.right||te.right<pe)&&(te.right=pe+1),(null===te.bottom||te.bottom<Re)&&(te.bottom=Re));return null!==te.top&&(sr=Lt.getImageData(te.left,te.top,tt=te.right-te.left,lt=te.bottom-te.top+1)),{height:lt,width:tt,data:sr}}function _n(K,tt){if(void 0===tt&&(tt=self.location),0===K.indexOf("data:"))return"";tt=tt||self.location,Ti||(Ti=document.createElement("a")),Ti.href=K;var lt=W.parse(Ti.href);return lt.hostname!==tt.hostname||(lt.port||""!==tt.port)&&lt.port!==tt.port||lt.protocol!==tt.protocol?"anonymous":""}function pn(K,tt){var lt=nt.X.RETINA_PREFIX.exec(K);return lt?parseFloat(lt[1]):void 0!==tt?tt:1}},9170:$t=>{"use strict";var At=Object.prototype.hasOwnProperty,rt="~";function nt(){}function A(G,F,W){this.fn=G,this.context=F,this.once=W||!1}function J(G,F,W,Z,Q){if("function"!=typeof W)throw new TypeError("The listener must be a function");var Rt=new A(W,Z||G,Q),bt=rt?rt+F:F;return G._events[bt]?G._events[bt].fn?G._events[bt]=[G._events[bt],Rt]:G._events[bt].push(Rt):(G._events[bt]=Rt,G._eventsCount++),G}function at(G,F){0==--G._eventsCount?G._events=new nt:delete G._events[F]}function vt(){this._events=new nt,this._eventsCount=0}Object.create&&(nt.prototype=Object.create(null),(new nt).__proto__||(rt=!1)),vt.prototype.eventNames=function(){var W,Z,F=[];if(0===this._eventsCount)return F;for(Z in W=this._events)At.call(W,Z)&&F.push(rt?Z.slice(1):Z);return Object.getOwnPropertySymbols?F.concat(Object.getOwnPropertySymbols(W)):F},vt.prototype.listeners=function(F){var Z=this._events[rt?rt+F:F];if(!Z)return[];if(Z.fn)return[Z.fn];for(var Q=0,Rt=Z.length,bt=new Array(Rt);Q<Rt;Q++)bt[Q]=Z[Q].fn;return bt},vt.prototype.listenerCount=function(F){var Z=this._events[rt?rt+F:F];return Z?Z.fn?1:Z.length:0},vt.prototype.emit=function(F,W,Z,Q,Rt,bt){var xt=rt?rt+F:F;if(!this._events[xt])return!1;var Pt,Ut,ut=this._events[xt],zt=arguments.length;if(ut.fn){switch(ut.once&&this.removeListener(F,ut.fn,void 0,!0),zt){case 1:return ut.fn.call(ut.context),!0;case 2:return ut.fn.call(ut.context,W),!0;case 3:return ut.fn.call(ut.context,W,Z),!0;case 4:return ut.fn.call(ut.context,W,Z,Q),!0;case 5:return ut.fn.call(ut.context,W,Z,Q,Rt),!0;case 6:return ut.fn.call(ut.context,W,Z,Q,Rt,bt),!0}for(Ut=1,Pt=new Array(zt-1);Ut<zt;Ut++)Pt[Ut-1]=arguments[Ut];ut.fn.apply(ut.context,Pt)}else{var Ft,Ct=ut.length;for(Ut=0;Ut<Ct;Ut++)switch(ut[Ut].once&&this.removeListener(F,ut[Ut].fn,void 0,!0),zt){case 1:ut[Ut].fn.call(ut[Ut].context);break;case 2:ut[Ut].fn.call(ut[Ut].context,W);break;case 3:ut[Ut].fn.call(ut[Ut].context,W,Z);break;case 4:ut[Ut].fn.call(ut[Ut].context,W,Z,Q);break;default:if(!Pt)for(Ft=1,Pt=new Array(zt-1);Ft<zt;Ft++)Pt[Ft-1]=arguments[Ft];ut[Ut].fn.apply(ut[Ut].context,Pt)}}return!0},vt.prototype.on=function(F,W,Z){return J(this,F,W,Z,!1)},vt.prototype.once=function(F,W,Z){return J(this,F,W,Z,!0)},vt.prototype.removeListener=function(F,W,Z,Q){var Rt=rt?rt+F:F;if(!this._events[Rt])return this;if(!W)return at(this,Rt),this;var bt=this._events[Rt];if(bt.fn)bt.fn===W&&(!Q||bt.once)&&(!Z||bt.context===Z)&&at(this,Rt);else{for(var xt=0,ut=[],zt=bt.length;xt<zt;xt++)(bt[xt].fn!==W||Q&&!bt[xt].once||Z&&bt[xt].context!==Z)&&ut.push(bt[xt]);ut.length?this._events[Rt]=1===ut.length?ut[0]:ut:at(this,Rt)}return this},vt.prototype.removeAllListeners=function(F){var W;return F?this._events[W=rt?rt+F:F]&&at(this,W):(this._events=new nt,this._eventsCount=0),this},vt.prototype.off=vt.prototype.removeListener,vt.prototype.addListener=vt.prototype.on,vt.prefixed=rt,vt.EventEmitter=vt,$t.exports=vt},5469:$t=>{"use strict";function At(m,b,x){x=x||2;var $,st,ct,Xt,k,gt,mt,H=b&&b.length,B=H?b[0]*x:m.length,L=rt(m,0,B,x,!0),w=[];if(!L||L.next===L.prev)return w;if(H&&(L=function(m,b,x,H){var L,w,ct,B=[];for(L=0,w=b.length;L<w;L++)(ct=rt(m,b[L]*H,L<w-1?b[L+1]*H:m.length,H,!1))===ct.next&&(ct.steiner=!0),B.push(zt(ct));for(B.sort(W),L=0;L<B.length;L++)x=nt(x=Z(B[L],x),x.next);return x}(m,b,L,x)),m.length>80*x){$=ct=m[0],st=Xt=m[1];for(var Tt=x;Tt<B;Tt+=x)(k=m[Tt])<$&&($=k),(gt=m[Tt+1])<st&&(st=gt),k>ct&&(ct=k),gt>Xt&&(Xt=gt);mt=0!==(mt=Math.max(ct-$,Xt-st))?1/mt:0}return A(L,w,x,$,st,mt),w}function rt(m,b,x,H,B){var L,w;if(B===wt(m,b,x,H)>0)for(L=b;L<x;L+=H)w=j(L,m[L],m[L+1],w);else for(L=x-H;L>=b;L-=H)w=j(L,m[L],m[L+1],w);return w&&Ft(w,w.next)&&(Y(w),w=w.next),w}function nt(m,b){if(!m)return m;b||(b=m);var H,x=m;do{if(H=!1,x.steiner||!Ft(x,x.next)&&0!==Ct(x.prev,x,x.next))x=x.next;else{if(Y(x),(x=b=x.prev)===x.next)break;H=!0}}while(H||x!==b);return b}function A(m,b,x,H,B,L,w){if(m){!w&&L&&function(m,b,x,H){var B=m;do{null===B.z&&(B.z=ut(B.x,B.y,b,x,H)),B.prevZ=B.prev,B.nextZ=B.next,B=B.next}while(B!==m);B.prevZ.nextZ=null,B.prevZ=null,function(m){var b,x,H,B,L,w,$,st,ct=1;do{for(x=m,m=null,L=null,w=0;x;){for(w++,H=x,$=0,b=0;b<ct&&($++,H=H.nextZ);b++);for(st=ct;$>0||st>0&&H;)0!==$&&(0===st||!H||x.z<=H.z)?(B=x,x=x.nextZ,$--):(B=H,H=H.nextZ,st--),L?L.nextZ=B:m=B,B.prevZ=L,L=B;x=H}L.nextZ=null,ct*=2}while(w>1)}(B)}(m,H,B,L);for(var st,ct,$=m;m.prev!==m.next;)if(st=m.prev,ct=m.next,L?at(m,H,B,L):J(m))b.push(st.i/x),b.push(m.i/x),b.push(ct.i/x),Y(m),m=ct.next,$=ct.next;else if((m=ct)===$){w?1===w?A(m=vt(nt(m),b,x),b,x,H,B,L,2):2===w&&G(m,b,x,H,B,L):A(nt(m),b,x,H,B,L,1);break}}}function J(m){var b=m.prev,x=m,H=m.next;if(Ct(b,x,H)>=0)return!1;for(var B=m.next.next;B!==m.prev;){if(Pt(b.x,b.y,x.x,x.y,H.x,H.y,B.x,B.y)&&Ct(B.prev,B,B.next)>=0)return!1;B=B.next}return!0}function at(m,b,x,H){var B=m.prev,L=m,w=m.next;if(Ct(B,L,w)>=0)return!1;for(var ct=B.x>L.x?B.x>w.x?B.x:w.x:L.x>w.x?L.x:w.x,Xt=B.y>L.y?B.y>w.y?B.y:w.y:L.y>w.y?L.y:w.y,k=ut(B.x<L.x?B.x<w.x?B.x:w.x:L.x<w.x?L.x:w.x,B.y<L.y?B.y<w.y?B.y:w.y:L.y<w.y?L.y:w.y,b,x,H),gt=ut(ct,Xt,b,x,H),mt=m.prevZ,Tt=m.nextZ;mt&&mt.z>=k&&Tt&&Tt.z<=gt;){if(mt!==m.prev&&mt!==m.next&&Pt(B.x,B.y,L.x,L.y,w.x,w.y,mt.x,mt.y)&&Ct(mt.prev,mt,mt.next)>=0||(mt=mt.prevZ,Tt!==m.prev&&Tt!==m.next&&Pt(B.x,B.y,L.x,L.y,w.x,w.y,Tt.x,Tt.y)&&Ct(Tt.prev,Tt,Tt.next)>=0))return!1;Tt=Tt.nextZ}for(;mt&&mt.z>=k;){if(mt!==m.prev&&mt!==m.next&&Pt(B.x,B.y,L.x,L.y,w.x,w.y,mt.x,mt.y)&&Ct(mt.prev,mt,mt.next)>=0)return!1;mt=mt.prevZ}for(;Tt&&Tt.z<=gt;){if(Tt!==m.prev&&Tt!==m.next&&Pt(B.x,B.y,L.x,L.y,w.x,w.y,Tt.x,Tt.y)&&Ct(Tt.prev,Tt,Tt.next)>=0)return!1;Tt=Tt.nextZ}return!0}function vt(m,b,x){var H=m;do{var B=H.prev,L=H.next.next;!Ft(B,L)&&R(B,H,H.next,L)&&v(B,L)&&v(L,B)&&(b.push(B.i/x),b.push(H.i/x),b.push(L.i/x),Y(H),Y(H.next),H=m=L),H=H.next}while(H!==m);return nt(H)}function G(m,b,x,H,B,L){var w=m;do{for(var $=w.next.next;$!==w.prev;){if(w.i!==$.i&&Ut(w,$)){var st=y(w,$);return w=nt(w,w.next),st=nt(st,st.next),A(w,b,x,H,B,L),void A(st,b,x,H,B,L)}$=$.next}w=w.next}while(w!==m)}function W(m,b){return m.x-b.x}function Z(m,b){var x=function(m,b){var w,x=b,H=m.x,B=m.y,L=-1/0;do{if(B<=x.y&&B>=x.next.y&&x.next.y!==x.y){var $=x.x+(B-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if($<=H&&$>L){if(L=$,$===H){if(B===x.y)return x;if(B===x.next.y)return x.next}w=x.x<x.next.x?x:x.next}}x=x.next}while(x!==b);if(!w)return null;if(H===L)return w;var gt,st=w,ct=w.x,Xt=w.y,k=1/0;x=w;do{H>=x.x&&x.x>=ct&&H!==x.x&&Pt(B<Xt?H:L,B,ct,Xt,B<Xt?L:H,B,x.x,x.y)&&(gt=Math.abs(B-x.y)/(H-x.x),v(x,m)&&(gt<k||gt===k&&(x.x>w.x||x.x===w.x&&Rt(w,x)))&&(w=x,k=gt)),x=x.next}while(x!==st);return w}(m,b);if(!x)return b;var H=y(x,m),B=nt(x,x.next);return nt(H,H.next),b===x?B:b}function Rt(m,b){return Ct(m.prev,m,b.prev)<0&&Ct(b.next,m,m.next)<0}function ut(m,b,x,H,B){return(m=1431655765&((m=858993459&((m=252645135&((m=16711935&((m=32767*(m-x)*B)|m<<8))|m<<4))|m<<2))|m<<1))|(b=1431655765&((b=858993459&((b=252645135&((b=16711935&((b=32767*(b-H)*B)|b<<8))|b<<4))|b<<2))|b<<1))<<1}function zt(m){var b=m,x=m;do{(b.x<x.x||b.x===x.x&&b.y<x.y)&&(x=b),b=b.next}while(b!==m);return x}function Pt(m,b,x,H,B,L,w,$){return(B-w)*(b-$)-(m-w)*(L-$)>=0&&(m-w)*(H-$)-(x-w)*(b-$)>=0&&(x-w)*(L-$)-(B-w)*(H-$)>=0}function Ut(m,b){return m.next.i!==b.i&&m.prev.i!==b.i&&!function(m,b){var x=m;do{if(x.i!==m.i&&x.next.i!==m.i&&x.i!==b.i&&x.next.i!==b.i&&R(x,x.next,m,b))return!0;x=x.next}while(x!==m);return!1}(m,b)&&(v(m,b)&&v(b,m)&&function(m,b){var x=m,H=!1,B=(m.x+b.x)/2,L=(m.y+b.y)/2;do{x.y>L!=x.next.y>L&&x.next.y!==x.y&&B<(x.next.x-x.x)*(L-x.y)/(x.next.y-x.y)+x.x&&(H=!H),x=x.next}while(x!==m);return H}(m,b)&&(Ct(m.prev,m,b.prev)||Ct(m,b.prev,b))||Ft(m,b)&&Ct(m.prev,m,m.next)>0&&Ct(b.prev,b,b.next)>0)}function Ct(m,b,x){return(b.y-m.y)*(x.x-b.x)-(b.x-m.x)*(x.y-b.y)}function Ft(m,b){return m.x===b.x&&m.y===b.y}function R(m,b,x,H){var B=se(Ct(m,b,x)),L=se(Ct(m,b,H)),w=se(Ct(x,H,m)),$=se(Ct(x,H,b));return!!(B!==L&&w!==$||0===B&&Kt(m,x,b)||0===L&&Kt(m,H,b)||0===w&&Kt(x,m,H)||0===$&&Kt(x,b,H))}function Kt(m,b,x){return b.x<=Math.max(m.x,x.x)&&b.x>=Math.min(m.x,x.x)&&b.y<=Math.max(m.y,x.y)&&b.y>=Math.min(m.y,x.y)}function se(m){return m>0?1:m<0?-1:0}function v(m,b){return Ct(m.prev,m,m.next)<0?Ct(m,b,m.next)>=0&&Ct(m,m.prev,b)>=0:Ct(m,b,m.prev)<0||Ct(m,m.next,b)<0}function y(m,b){var x=new Et(m.i,m.x,m.y),H=new Et(b.i,b.x,b.y),B=m.next,L=b.prev;return m.next=b,b.prev=m,x.next=B,B.prev=x,H.next=x,x.prev=H,L.next=H,H.prev=L,H}function j(m,b,x,H){var B=new Et(m,b,x);return H?(B.next=H.next,B.prev=H,H.next.prev=B,H.next=B):(B.prev=B,B.next=B),B}function Y(m){m.next.prev=m.prev,m.prev.next=m.next,m.prevZ&&(m.prevZ.nextZ=m.nextZ),m.nextZ&&(m.nextZ.prevZ=m.prevZ)}function Et(m,b,x){this.i=m,this.x=b,this.y=x,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function wt(m,b,x,H){for(var B=0,L=b,w=x-H;L<x;L+=H)B+=(m[w]-m[L])*(m[L+1]+m[w+1]),w=L;return B}$t.exports=At,$t.exports.default=At,At.deviation=function(m,b,x,H){var B=b&&b.length,w=Math.abs(wt(m,0,B?b[0]*x:m.length,x));if(B)for(var $=0,st=b.length;$<st;$++)w-=Math.abs(wt(m,b[$]*x,$<st-1?b[$+1]*x:m.length,x));var k=0;for($=0;$<H.length;$+=3){var gt=H[$]*x,mt=H[$+1]*x,Tt=H[$+2]*x;k+=Math.abs((m[gt]-m[Tt])*(m[mt+1]-m[gt+1])-(m[gt]-m[mt])*(m[Tt+1]-m[gt+1]))}return 0===w&&0===k?0:Math.abs((k-w)/w)},At.flatten=function(m){for(var b=m[0][0].length,x={vertices:[],holes:[],dimensions:b},H=0,B=0;B<m.length;B++){for(var L=0;L<m[B].length;L++)for(var w=0;w<b;w++)x.vertices.push(m[B][L][w]);B>0&&x.holes.push(H+=m[B-1].length)}return x}},7790:$t=>{"use strict";var At=Object.getOwnPropertySymbols,rt=Object.prototype.hasOwnProperty,nt=Object.prototype.propertyIsEnumerable;function A(at){if(null==at)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(at)}$t.exports=function(){try{if(!Object.assign)return!1;var at=new String("abc");if(at[5]="de","5"===Object.getOwnPropertyNames(at)[0])return!1;for(var vt={},G=0;G<10;G++)vt["_"+String.fromCharCode(G)]=G;if("0123456789"!==Object.getOwnPropertyNames(vt).map(function(Z){return vt[Z]}).join(""))return!1;var W={};return"abcdefghijklmnopqrst".split("").forEach(function(Z){W[Z]=Z}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},W)).join("")}catch(Z){return!1}}()?Object.assign:function(at,vt){for(var G,W,F=A(at),Z=1;Z<arguments.length;Z++){for(var Q in G=Object(arguments[Z]))rt.call(G,Q)&&(F[Q]=G[Q]);if(At){W=At(G);for(var Rt=0;Rt<W.length;Rt++)nt.call(G,W[Rt])&&(F[W[Rt]]=G[W[Rt]])}}return F}},8977:($t,At,rt)=>{"use strict";rt.d(At,{KgH:()=>Za,MxU:()=>Qe,VL4:()=>et.VL,Xz2:()=>ba,W20:()=>fe,ZXM:()=>et.ZX,TCu:()=>tt,Kj0:()=>yi,AeJ:()=>Y.Ae,exe:()=>et.ex,jyi:()=>te,xvT:()=>mn,pn8:()=>or,xEZ:()=>et.xE,oO3:()=>la,u8d:()=>$a});var vt=setTimeout,G="undefined"!=typeof setImmediate?setImmediate:null;function F(i){return Boolean(i&&void 0!==i.length)}function W(){}function Q(i){if(!(this instanceof Q))throw new TypeError("Promises must be constructed via new");if("function"!=typeof i)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],Pt(i,this)}function Rt(i,e){for(;3===i._state;)i=i._value;0!==i._state?(i._handled=!0,Q._immediateFn(function(){var t=1===i._state?e.onFulfilled:e.onRejected;if(null!==t){var r;try{r=t(i._value)}catch(s){return void xt(e.promise,s)}bt(e.promise,r)}else(1===i._state?bt:xt)(e.promise,i._value)})):i._deferreds.push(e)}function bt(i,e){try{if(e===i)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if(e instanceof Q)return i._state=3,i._value=e,void ut(i);if("function"==typeof t)return void Pt(function(i,e){return function(){i.apply(e,arguments)}}(t,e),i)}i._state=1,i._value=e,ut(i)}catch(r){xt(i,r)}}function xt(i,e){i._state=2,i._value=e,ut(i)}function ut(i){2===i._state&&0===i._deferreds.length&&Q._immediateFn(function(){i._handled||Q._unhandledRejectionFn(i._value)});for(var e=0,t=i._deferreds.length;e<t;e++)Rt(i,i._deferreds[e]);i._deferreds=null}function zt(i,e,t){this.onFulfilled="function"==typeof i?i:null,this.onRejected="function"==typeof e?e:null,this.promise=t}function Pt(i,e){var t=!1;try{i(function(r){t||(t=!0,bt(e,r))},function(r){t||(t=!0,xt(e,r))})}catch(r){if(t)return;t=!0,xt(e,r)}}Q.prototype.catch=function(i){return this.then(null,i)},Q.prototype.then=function(i,e){var t=new this.constructor(W);return Rt(this,new zt(i,e,t)),t},Q.prototype.finally=function(i){var e=this.constructor;return this.then(function(t){return e.resolve(i()).then(function(){return t})},function(t){return e.resolve(i()).then(function(){return e.reject(t)})})},Q.all=function(i){return new Q(function(e,t){if(!F(i))return t(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(i);if(0===r.length)return e([]);var s=r.length;function h(c,E){try{if(E&&("object"==typeof E||"function"==typeof E)){var _=E.then;if("function"==typeof _)return void _.call(E,function(T){h(c,T)},t)}r[c]=E,0==--s&&e(r)}catch(T){t(T)}}for(var l=0;l<r.length;l++)h(l,r[l])})},Q.allSettled=function(i){return new this(function(t,r){if(!i||void 0===i.length)return r(new TypeError(typeof i+" "+i+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var s=Array.prototype.slice.call(i);if(0===s.length)return t([]);var h=s.length;function l(E,_){if(_&&("object"==typeof _||"function"==typeof _)){var T=_.then;if("function"==typeof T)return void T.call(_,function(D){l(E,D)},function(D){s[E]={status:"rejected",reason:D},0==--h&&t(s)})}s[E]={status:"fulfilled",value:_},0==--h&&t(s)}for(var c=0;c<s.length;c++)l(c,s[c])})},Q.resolve=function(i){return i&&"object"==typeof i&&i.constructor===Q?i:new Q(function(e){e(i)})},Q.reject=function(i){return new Q(function(e,t){t(i)})},Q.race=function(i){return new Q(function(e,t){if(!F(i))return t(new TypeError("Promise.race accepts an array"));for(var r=0,s=i.length;r<s;r++)Q.resolve(i[r]).then(e,t)})},Q._immediateFn="function"==typeof G&&function(i){G(i)}||function(i){vt(i,0)},Q._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};const Ut=Q;var Ct=rt(7790),Ft=rt.n(Ct);if(self.Promise||(self.Promise=Ut),Object.assign||(Object.assign=Ft()),Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!self.performance||!self.performance.now){var Kt=Date.now();self.performance||(self.performance={}),self.performance.now=function(){return Date.now()-Kt}}for(var se=Date.now(),U=["ms","moz","webkit","o"],v=0;v<U.length&&!self.requestAnimationFrame;++v){var N=U[v];self.requestAnimationFrame=self[N+"RequestAnimationFrame"],self.cancelAnimationFrame=self[N+"CancelAnimationFrame"]||self[N+"CancelRequestAnimationFrame"]}self.requestAnimationFrame||(self.requestAnimationFrame=function(i){if("function"!=typeof i)throw new TypeError(i+"is not a function");var e=Date.now(),t=16+se-e;return t<0&&(t=0),se=e,self.setTimeout(function(){se=Date.now(),i(performance.now())},t)}),self.cancelAnimationFrame||(self.cancelAnimationFrame=function(i){return clearTimeout(i)}),Math.sign||(Math.sign=function(e){return 0===(e=Number(e))||isNaN(e)?e:e>0?1:-1}),Number.isInteger||(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),self.ArrayBuffer||(self.ArrayBuffer=Array),self.Float32Array||(self.Float32Array=Array),self.Uint32Array||(self.Uint32Array=Array),self.Uint16Array||(self.Uint16Array=Array),self.Uint8Array||(self.Uint8Array=Array),self.Int32Array||(self.Int32Array=Array);var y=rt(7567),j=rt(5593),Y=rt(477);j.X.SORTABLE_CHILDREN=!1;var Et=function(){function i(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return i.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},i.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},i.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?Y.Ae.EMPTY:((e=e||new Y.Ae(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},i.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},i.prototype.addPointMatrix=function(e,t){var _=e.a*t.x+e.c*t.y+e.tx,T=e.b*t.x+e.d*t.y+e.ty;this.minX=Math.min(this.minX,_),this.maxX=Math.max(this.maxX,_),this.minY=Math.min(this.minY,T),this.maxY=Math.max(this.maxY,T)},i.prototype.addQuad=function(e){var t=this.minX,r=this.minY,s=this.maxX,h=this.maxY,l=e[0],c=e[1];t=l<t?l:t,r=c<r?c:r,s=l>s?l:s,h=c>h?c:h,t=(l=e[2])<t?l:t,r=(c=e[3])<r?c:r,s=l>s?l:s,h=c>h?c:h,t=(l=e[4])<t?l:t,r=(c=e[5])<r?c:r,s=l>s?l:s,h=c>h?c:h,r=(c=e[7])<r?c:r,s=(l=e[6])>s?l:s,h=c>h?c:h,this.minX=t=l<t?l:t,this.minY=r,this.maxX=s,this.maxY=h},i.prototype.addFrame=function(e,t,r,s,h){this.addFrameMatrix(e.worldTransform,t,r,s,h)},i.prototype.addFrameMatrix=function(e,t,r,s,h){var l=e.a,c=e.b,E=e.c,_=e.d,T=e.tx,D=e.ty,g=this.minX,O=this.minY,I=this.maxX,M=this.maxY,C=l*t+E*r+T,X=c*t+_*r+D;g=C<g?C:g,O=X<O?X:O,I=C>I?C:I,M=X>M?X:M,g=(C=l*s+E*r+T)<g?C:g,O=(X=c*s+_*r+D)<O?X:O,I=C>I?C:I,M=X>M?X:M,g=(C=l*t+E*h+T)<g?C:g,O=(X=c*t+_*h+D)<O?X:O,I=C>I?C:I,M=X>M?X:M,O=(X=c*s+_*h+D)<O?X:O,I=(C=l*s+E*h+T)>I?C:I,M=X>M?X:M,this.minX=g=C<g?C:g,this.minY=O,this.maxX=I,this.maxY=M},i.prototype.addVertexData=function(e,t,r){for(var s=this.minX,h=this.minY,l=this.maxX,c=this.maxY,E=t;E<r;E+=2){var _=e[E],T=e[E+1];s=_<s?_:s,h=T<h?T:h,l=_>l?_:l,c=T>c?T:c}this.minX=s,this.minY=h,this.maxX=l,this.maxY=c},i.prototype.addVertices=function(e,t,r,s){this.addVerticesMatrix(e.worldTransform,t,r,s)},i.prototype.addVerticesMatrix=function(e,t,r,s,h,l){void 0===h&&(h=0),void 0===l&&(l=h);for(var c=e.a,E=e.b,_=e.c,T=e.d,D=e.tx,g=e.ty,O=this.minX,I=this.minY,M=this.maxX,C=this.maxY,X=r;X<s;X+=2){var ht=t[X],_t=t[X+1],St=c*ht+_*_t+D,it=T*_t+E*ht+g;O=Math.min(O,St-h),M=Math.max(M,St+h),I=Math.min(I,it-l),C=Math.max(C,it+l)}this.minX=O,this.minY=I,this.maxX=M,this.maxY=C},i.prototype.addBounds=function(e){var t=this.minX,r=this.minY,s=this.maxX,h=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<r?e.minY:r,this.maxX=e.maxX>s?e.maxX:s,this.maxY=e.maxY>h?e.maxY:h},i.prototype.addBoundsMask=function(e,t){var r=e.minX>t.minX?e.minX:t.minX,s=e.minY>t.minY?e.minY:t.minY,h=e.maxX<t.maxX?e.maxX:t.maxX,l=e.maxY<t.maxY?e.maxY:t.maxY;if(r<=h&&s<=l){var c=this.minX,E=this.minY,_=this.maxX,T=this.maxY;this.minX=r<c?r:c,this.minY=s<E?s:E,this.maxX=h>_?h:_,this.maxY=l>T?l:T}},i.prototype.addBoundsMatrix=function(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)},i.prototype.addBoundsArea=function(e,t){var r=e.minX>t.x?e.minX:t.x,s=e.minY>t.y?e.minY:t.y,h=e.maxX<t.x+t.width?e.maxX:t.x+t.width,l=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(r<=h&&s<=l){var c=this.minX,E=this.minY,_=this.maxX,T=this.maxY;this.minX=r<c?r:c,this.minY=s<E?s:E,this.maxX=h>_?h:_,this.maxY=l>T?l:T}},i.prototype.pad=function(e,t){void 0===e&&(e=0),void 0===t&&(t=e),this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)},i.prototype.addFramePad=function(e,t,r,s,h,l){t-=l,r+=h,s+=l,this.minX=this.minX<(e-=h)?this.minX:e,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>s?this.maxY:s},i}(),wt=function(i,e){return(wt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])})(i,e)};function m(i,e){function t(){this.constructor=i}wt(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var b=function(i){function e(){var t=i.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new Y.wx,t.alpha=1,t.visible=!0,t.renderable=!0,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new Et,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._maskRefCount=0,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}return m(e,i),e.mixin=function(t){for(var r=Object.keys(t),s=0;s<r.length;++s){var h=r[s];Object.defineProperty(e.prototype,h,Object.getOwnPropertyDescriptor(t,h))}},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(t,r){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),r||(this._boundsRect||(this._boundsRect=new Y.Ae),r=this._boundsRect),this._bounds.getRectangle(r)},e.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new Y.Ae),t=this._localBoundsRect),this._localBounds||(this._localBounds=new Et);var r=this.transform,s=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var h=this._bounds,l=this._boundsID;this._bounds=this._localBounds;var c=this.getBounds(!1,t);return this.parent=s,this.transform=r,this._bounds=h,this._bounds.updateID+=this._boundsID-l,c},e.prototype.toGlobal=function(t,r,s){return void 0===s&&(s=!1),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,r)},e.prototype.toLocal=function(t,r,s,h){return r&&(t=r.toGlobal(t,s,h)),h||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,s)},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,r,s,h,l,c,E,_,T){return void 0===t&&(t=0),void 0===r&&(r=0),void 0===s&&(s=1),void 0===h&&(h=1),void 0===l&&(l=0),void 0===c&&(c=0),void 0===E&&(E=0),void 0===_&&(_=0),void 0===T&&(T=0),this.position.x=t,this.position.y=r,this.scale.x=s||1,this.scale.y=h||1,this.rotation=l,this.skew.x=c,this.skew.y=E,this.pivot.x=_,this.pivot.y=T,this},e.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.emit("destroyed"),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new x),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*Y.jl},set:function(t){this.transform.rotation=t*Y.ZX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){var r;this._mask!==t&&(this._mask&&((r=this._mask.maskObject||this._mask)._maskRefCount--,0===r._maskRefCount&&(r.renderable=!0,r.isMask=!1)),this._mask=t,this._mask&&(0===(r=this._mask.maskObject||this._mask)._maskRefCount&&(r.renderable=!1,r.isMask=!0),r._maskRefCount++))},enumerable:!1,configurable:!0}),e}(y.vp),x=function(i){function e(){var t=null!==i&&i.apply(this,arguments)||this;return t.sortDirty=null,t}return m(e,i),e}(b);b.prototype.displayObjectUpdateTransform=b.prototype.updateTransform;var ue=(()=>{return(i=ue||(ue={}))[i.NONE=0]="NONE",i[i.SCISSOR=1]="SCISSOR",i[i.STENCIL=2]="STENCIL",i[i.SPRITE=3]="SPRITE",ue;var i})();function Me(i,e){return i.zIndex===e.zIndex?i._lastSortedIndex-e._lastSortedIndex:i.zIndex-e.zIndex}var fe=function(i){function e(){var t=i.call(this)||this;return t.children=[],t.sortableChildren=j.X.SORTABLE_CHILDREN,t.sortDirty=!1,t}return m(e,i),e.prototype.onChildrenChange=function(t){},e.prototype.addChild=function(){for(var t=arguments,r=[],s=0;s<arguments.length;s++)r[s]=t[s];if(r.length>1)for(var h=0;h<r.length;h++)this.addChild(r[h]);else{var l=r[0];l.parent&&l.parent.removeChild(l),l.parent=this,this.sortDirty=!0,l.transform._parentID=-1,this.children.push(l),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",l,this,this.children.length-1),l.emit("added",this)}return r[0]},e.prototype.addChildAt=function(t,r){if(r<0||r>this.children.length)throw new Error(t+"addChildAt: The index "+r+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(r,0,t),this._boundsID++,this.onChildrenChange(r),t.emit("added",this),this.emit("childAdded",t,this,r),t},e.prototype.swapChildren=function(t,r){if(t!==r){var s=this.getChildIndex(t),h=this.getChildIndex(r);this.children[s]=r,this.children[h]=t,this.onChildrenChange(s<h?s:h)}},e.prototype.getChildIndex=function(t){var r=this.children.indexOf(t);if(-1===r)throw new Error("The supplied DisplayObject must be a child of the caller");return r},e.prototype.setChildIndex=function(t,r){if(r<0||r>=this.children.length)throw new Error("The index "+r+" supplied is out of bounds "+this.children.length);var s=this.getChildIndex(t);(0,y.Er)(this.children,s,1),this.children.splice(r,0,t),this.onChildrenChange(r)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(){for(var t=arguments,r=[],s=0;s<arguments.length;s++)r[s]=t[s];if(r.length>1)for(var h=0;h<r.length;h++)this.removeChild(r[h]);else{var l=r[0],c=this.children.indexOf(l);if(-1===c)return null;l.parent=null,l.transform._parentID=-1,(0,y.Er)(this.children,c,1),this._boundsID++,this.onChildrenChange(c),l.emit("removed",this),this.emit("childRemoved",l,this,c)}return r[0]},e.prototype.removeChildAt=function(t){var r=this.getChildAt(t);return r.parent=null,r.transform._parentID=-1,(0,y.Er)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),r.emit("removed",this),this.emit("childRemoved",r,this,t),r},e.prototype.removeChildren=function(t,r){void 0===t&&(t=0),void 0===r&&(r=this.children.length);var c,l=r-t;if(l>0&&l<=r){c=this.children.splice(t,l);for(var E=0;E<c.length;++E)c[E].parent=null,c[E].transform&&(c[E].transform._parentID=-1);for(this._boundsID++,this.onChildrenChange(t),E=0;E<c.length;++E)c[E].emit("removed",this),this.emit("childRemoved",c[E],this,E);return c}if(0===l&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,r=0,s=this.children.length;r<s;++r){var h=this.children[r];h._lastSortedIndex=r,!t&&0!==h.zIndex&&(t=!0)}t&&this.children.length>1&&this.children.sort(Me),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,r=this.children.length;t<r;++t){var s=this.children[t];s.visible&&s.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var r=this.children[t];if(r.visible&&r.renderable)if(r.calculateBounds(),r._mask){var s=r._mask.maskObject||r._mask;s.calculateBounds(),this._bounds.addBoundsMask(r._bounds,s._bounds)}else r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(t,r){void 0===r&&(r=!1);var s=i.prototype.getLocalBounds.call(this,t);if(!r)for(var h=0,l=this.children.length;h<l;++h){var c=this.children[h];c.visible&&c.updateTransform()}return s},e.prototype._calculateBounds=function(){},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var r=0,s=this.children.length;r<s;++r)this.children[r].render(t)}},e.prototype.renderAdvanced=function(t){var r=this.filters,s=this._mask;if(r){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var h=0;h<r.length;h++)r[h].enabled&&this._enabledFilters.push(r[h])}var l=r&&this._enabledFilters&&this._enabledFilters.length||s&&(!s.isMaskData||s.enabled&&(s.autoDetect||s.type!==ue.NONE));l&&t.batch.flush(),r&&this._enabledFilters&&this._enabledFilters.length&&t.filter.push(this,this._enabledFilters),s&&t.mask.push(this,this._mask),this._render(t),h=0;for(var c=this.children.length;h<c;h++)this.children[h].render(t);l&&t.batch.flush(),s&&t.mask.pop(this),r&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(t){i.prototype.destroy.call(this),this.sortDirty=!1;var r="boolean"==typeof t?t:t&&t.children,s=this.removeChildren(0,this.children.length);if(r)for(var h=0;h<s.length;++h)s[h].destroy(t)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var r=this.getLocalBounds().width;this.scale.x=0!==r?t/r:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var r=this.getLocalBounds().height;this.scale.y=0!==r?t/r:1,this._height=t},enumerable:!1,configurable:!0}),e}(b);fe.prototype.containerUpdateTransform=fe.prototype.updateTransform,b.mixin({accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1});var Vr=function(){function i(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(y.tq.tablet||y.tq.phone)&&this.createTouchHook();var t=document.createElement("div");t.style.width="100px",t.style.height="100px",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.zIndex=2..toString(),this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),self.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(i.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),i.prototype.createTouchHook=function(){var e=this,t=document.createElement("button");t.style.width="1px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.style.zIndex=2..toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",function(){e._isMobileAccessibility=!0,e.activate(),e.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t},i.prototype.destroyTouchHook=function(){!this._hookDiv||(document.body.removeChild(this._hookDiv),this._hookDiv=null)},i.prototype.activate=function(){var e;this._isActive||(this._isActive=!0,self.document.addEventListener("mousemove",this._onMouseMove,!0),self.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),null===(e=this.renderer.view.parentNode)||void 0===e||e.appendChild(this.div))},i.prototype.deactivate=function(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,self.document.removeEventListener("mousemove",this._onMouseMove,!0),self.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),null===(e=this.div.parentNode)||void 0===e||e.removeChild(this.div))},i.prototype.updateAccessibleObjects=function(e){if(e.visible&&e.accessibleChildren){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);var t=e.children;if(t)for(var r=0;r<t.length;r++)this.updateAccessibleObjects(t[r])}},i.prototype.update=function(){var e=performance.now();if(!(y.tq.android.device&&e<this.androidUpdateCount)&&(this.androidUpdateCount=e+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),s=t.top,c=this.renderer,E=c.width,_=c.height,T=c.resolution,D=t.width/E*T,g=t.height/_*T,O=this.div;O.style.left=t.left+"px",O.style.top=s+"px",O.style.width=E+"px",O.style.height=_+"px";for(var I=0;I<this.children.length;I++){var M=this.children[I];if(M.renderId!==this.renderId)M._accessibleActive=!1,(0,y.Er)(this.children,I,1),this.div.removeChild(M._accessibleDiv),this.pool.push(M._accessibleDiv),M._accessibleDiv=null,I--;else{O=M._accessibleDiv;var C=M.hitArea,X=M.worldTransform;M.hitArea?(O.style.left=(X.tx+C.x*X.a)*D+"px",O.style.top=(X.ty+C.y*X.d)*g+"px",O.style.width=C.width*X.a*D+"px",O.style.height=C.height*X.d*g+"px"):(C=M.getBounds(),this.capHitArea(C),O.style.left=C.x*D+"px",O.style.top=C.y*g+"px",O.style.width=C.width*D+"px",O.style.height=C.height*g+"px",O.title!==M.accessibleTitle&&null!==M.accessibleTitle&&(O.title=M.accessibleTitle),O.getAttribute("aria-label")!==M.accessibleHint&&null!==M.accessibleHint&&O.setAttribute("aria-label",M.accessibleHint)),(M.accessibleTitle!==O.title||M.tabIndex!==O.tabIndex)&&(O.title=M.accessibleTitle,O.tabIndex=M.tabIndex,this.debug&&this.updateDebugHTML(O))}}this.renderId++}},i.prototype.updateDebugHTML=function(e){e.innerHTML="type: "+e.type+"</br> title : "+e.title+"</br> tabIndex: "+e.tabIndex},i.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);var t=this.renderer,r=t.width,s=t.height;e.x+e.width>r&&(e.width=r-e.x),e.y+e.height>s&&(e.height=s-e.y)},i.prototype.addChild=function(e){var t=this.pool.pop();t||((t=document.createElement("button")).style.width="100px",t.style.height="100px",t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=2..toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&null!==e.accessibleTitle?t.title=e.accessibleTitle:(!e.accessibleHint||null===e.accessibleHint)&&(t.title="displayObject "+e.tabIndex),e.accessibleHint&&null!==e.accessibleHint&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},i.prototype._onClick=function(e){var t=this.renderer.plugins.interaction,r=e.target.displayObject,s=t.eventData;t.dispatchEvent(r,"click",s),t.dispatchEvent(r,"pointertap",s),t.dispatchEvent(r,"tap",s)},i.prototype._onFocus=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive");var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseover",t.eventData)},i.prototype._onFocusOut=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite");var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseout",t.eventData)},i.prototype._onKeyDown=function(e){9===e.keyCode&&this.activate()},i.prototype._onMouseMove=function(e){0===e.movementX&&0===e.movementY||this.deactivate()},i.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,self.document.removeEventListener("mousemove",this._onMouseMove,!0),self.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},i}(),_e=rt(5768),lr=function(){function i(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new Y.E9,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(i.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),i.prototype.getLocalPosition=function(e,t,r){return e.worldTransform.applyInverse(r||this.global,t)},i.prototype.copyEvent=function(e){"isPrimary"in e&&e.isPrimary&&(this.isPrimary=!0),this.button="button"in e&&e.button;var t="buttons"in e&&e.buttons;this.buttons=Number.isInteger(t)?t:"which"in e&&e.which,this.width="width"in e&&e.width,this.height="height"in e&&e.height,this.tiltX="tiltX"in e&&e.tiltX,this.tiltY="tiltY"in e&&e.tiltY,this.pointerType="pointerType"in e&&e.pointerType,this.pressure="pressure"in e&&e.pressure,this.rotationAngle="rotationAngle"in e&&e.rotationAngle,this.twist="twist"in e&&e.twist||0,this.tangentialPressure="tangentialPressure"in e&&e.tangentialPressure||0},i.prototype.reset=function(){this.isPrimary=!1},i}(),fr=function(i,e){return(fr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])})(i,e)},Ze=function(){function i(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return i.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},i.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},i}(),Dr=function(){function i(e){this._pointerId=e,this._flags=i.FLAGS.NONE}return i.prototype._doSet=function(e,t){this._flags=t?this._flags|e:this._flags&~e},Object.defineProperty(i.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"flags",{get:function(){return this._flags},set:function(e){this._flags=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"none",{get:function(){return this._flags===i.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"over",{get:function(){return 0!=(this._flags&i.FLAGS.OVER)},set:function(e){this._doSet(i.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightDown",{get:function(){return 0!=(this._flags&i.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(i.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leftDown",{get:function(){return 0!=(this._flags&i.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(i.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),i.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),i}(),cr=function(){function i(){this._tempPoint=new Y.E9}return i.prototype.recursiveFindHit=function(e,t,r,s,h){if(!t||!t.visible)return!1;var l=e.data.global,c=!1,E=h=t.interactive||h,_=!0;if(t.hitArea?(s&&(t.worldTransform.applyInverse(l,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?c=!0:(s=!1,_=!1)),E=!1):t._mask&&s&&(t._mask.containsPoint&&t._mask.containsPoint(l)||(s=!1)),_&&t.interactiveChildren&&t.children)for(var T=t.children,D=T.length-1;D>=0;D--){var g=T[D],O=this.recursiveFindHit(e,g,r,s,E);if(O){if(!g.parent)continue;E=!1,O&&(e.target&&(s=!1),c=!0)}}return h&&(s&&!e.target&&!t.hitArea&&t.containsPoint&&t.containsPoint(l)&&(c=!0),t.interactive&&(c&&!e.target&&(e.target=t),r&&r(e,t,!!c))),c},i.prototype.findHit=function(e,t,r,s){this.recursiveFindHit(e,t,r,s,!1)},i}(),Ii={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(i){i?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};b.mixin(Ii);var dr={target:null,data:{global:null}},jr=function(i){function e(t,r){var s=i.call(this)||this;return r=r||{},s.renderer=t,s.autoPreventDefault=void 0===r.autoPreventDefault||r.autoPreventDefault,s.interactionFrequency=r.interactionFrequency||10,s.mouse=new lr,s.mouse.identifier=1,s.mouse.global.set(-999999),s.activeInteractionData={},s.activeInteractionData[1]=s.mouse,s.interactionDataPool=[],s.eventData=new Ze,s.interactionDOMElement=null,s.moveWhenInside=!1,s.eventsAdded=!1,s.tickerAdded=!1,s.mouseOverRenderer=!("PointerEvent"in self),s.supportsTouchEvents="ontouchstart"in self,s.supportsPointerEvents=!!self.PointerEvent,s.onPointerUp=s.onPointerUp.bind(s),s.processPointerUp=s.processPointerUp.bind(s),s.onPointerCancel=s.onPointerCancel.bind(s),s.processPointerCancel=s.processPointerCancel.bind(s),s.onPointerDown=s.onPointerDown.bind(s),s.processPointerDown=s.processPointerDown.bind(s),s.onPointerMove=s.onPointerMove.bind(s),s.processPointerMove=s.processPointerMove.bind(s),s.onPointerOut=s.onPointerOut.bind(s),s.processPointerOverOut=s.processPointerOverOut.bind(s),s.onPointerOver=s.onPointerOver.bind(s),s.cursorStyles={default:"inherit",pointer:"pointer"},s.currentCursorMode=null,s.cursor=null,s.resolution=1,s.delayedEvents=[],s.search=new cr,s._tempDisplayObject=new x,s._eventListenerOptions={capture:!0,passive:!1},s._useSystemTicker=void 0===r.useSystemTicker||r.useSystemTicker,s.setTargetElement(s.renderer.view,s.renderer.resolution),s}return function(i,e){function t(){this.constructor=i}fr(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,i),Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,r){return dr.target=null,dr.data.global=t,r||(r=this.lastObjectRendered),this.processInteractive(dr,r,null,!0),dr.target},e.prototype.setTargetElement=function(t,r){void 0===r&&(r=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=r,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(_e.vB.system.add(this.tickerUpdate,this,_e.uF.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){!this.tickerAdded||(_e.vB.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;self.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(self.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),self.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),self.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(self.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),self.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;self.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(self.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),self.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),self.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(self.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),self.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement){if(this._didMove)return void(this._didMove=!1);for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var r=this.activeInteractionData[t];if(r.originalEvent&&"touch"!==r.pointerType){var s=this.configureInteractionEventForDOMEvent(this.eventData,r.originalEvent,r);this.processInteractive(s,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){t=t||"default";var r=!0;if(self.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(r=!1),this.currentCursorMode!==t){this.currentCursorMode=t;var s=this.cursorStyles[t];if(s)switch(typeof s){case"string":r&&(this.interactionDOMElement.style.cursor=s);break;case"function":s(t);break;case"object":r&&Object.assign(this.interactionDOMElement.style,s)}else r&&"string"==typeof t&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,r,s){(!s.stopPropagationHint||t===s.stopsPropagatingAt)&&(s.currentTarget=t,s.type=r,t.emit(r,s),t[r]&&t[r](s))},e.prototype.delayDispatchEvent=function(t,r,s){this.delayedEvents.push({displayObject:t,eventString:r,eventData:s})},e.prototype.mapPositionToPoint=function(t,r,s){var h;h=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var l=1/this.resolution;t.x=this.interactionDOMElement.width/h.width*(r-h.left)*l,t.y=this.interactionDOMElement.height/h.height*(s-h.top)*l},e.prototype.processInteractive=function(t,r,s,h){var l=this.search.findHit(t,r,s,h),c=this.delayedEvents;if(!c.length)return l;t.stopPropagationHint=!1;var E=c.length;this.delayedEvents=[];for(var _=0;_<E;_++){var T=c[_],D=T.displayObject,g=T.eventString,O=T.eventData;O.stopsPropagatingAt===D&&(O.stopPropagationHint=!0),this.dispatchEvent(D,g,O)}return l},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var r=this.normalizeToPointerData(t);this.autoPreventDefault&&r[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(var h=r.length,l=0;l<h;l++){var c=r[l],E=this.getInteractionDataForPointerId(c),_=this.configureInteractionEventForDOMEvent(this.eventData,c,E);_.data.originalEvent=t,this.processInteractive(_,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",_),"touch"===c.pointerType?this.emit("touchstart",_):"mouse"!==c.pointerType&&"pen"!==c.pointerType||this.emit(2===c.button?"rightdown":"mousedown",this.eventData)}}},e.prototype.processPointerDown=function(t,r,s){var h=t.data,l=t.data.identifier;if(s)if(r.trackedPointers[l]||(r.trackedPointers[l]=new Dr(l)),this.dispatchEvent(r,"pointerdown",t),"touch"===h.pointerType)this.dispatchEvent(r,"touchstart",t);else if("mouse"===h.pointerType||"pen"===h.pointerType){var c=2===h.button;c?r.trackedPointers[l].rightDown=!0:r.trackedPointers[l].leftDown=!0,this.dispatchEvent(r,c?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,r,s){for(var h=this.normalizeToPointerData(t),l=h.length,c=t.target!==this.interactionDOMElement?"outside":"",E=0;E<l;E++){var _=h[E],T=this.getInteractionDataForPointerId(_),D=this.configureInteractionEventForDOMEvent(this.eventData,_,T);D.data.originalEvent=t,this.processInteractive(D,this.lastObjectRendered,s,r||!c),this.emit(r?"pointercancel":"pointerup"+c,D),"mouse"===_.pointerType||"pen"===_.pointerType?this.emit(2===_.button?"rightup"+c:"mouseup"+c,D):"touch"===_.pointerType&&(this.emit(r?"touchcancel":"touchend"+c,D),this.releaseInteractionDataForPointerId(_.pointerId))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,r){var s=t.data,h=t.data.identifier;void 0!==r.trackedPointers[h]&&(delete r.trackedPointers[h],this.dispatchEvent(r,"pointercancel",t),"touch"===s.pointerType&&this.dispatchEvent(r,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,r,s){var h=t.data,l=t.data.identifier,c=r.trackedPointers[l],E="touch"===h.pointerType,_="mouse"===h.pointerType||"pen"===h.pointerType,T=!1;if(_){var D=2===h.button,g=Dr.FLAGS,I=void 0!==c&&c.flags&(D?g.RIGHT_DOWN:g.LEFT_DOWN);s?(this.dispatchEvent(r,D?"rightup":"mouseup",t),I&&(this.dispatchEvent(r,D?"rightclick":"click",t),T=!0)):I&&this.dispatchEvent(r,D?"rightupoutside":"mouseupoutside",t),c&&(D?c.rightDown=!1:c.leftDown=!1)}s?(this.dispatchEvent(r,"pointerup",t),E&&this.dispatchEvent(r,"touchend",t),c&&((!_||T)&&this.dispatchEvent(r,"pointertap",t),E&&(this.dispatchEvent(r,"tap",t),c.over=!1))):c&&(this.dispatchEvent(r,"pointerupoutside",t),E&&this.dispatchEvent(r,"touchendoutside",t)),c&&c.none&&delete r.trackedPointers[l]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var r=this.normalizeToPointerData(t);("mouse"===r[0].pointerType||"pen"===r[0].pointerType)&&(this._didMove=!0,this.cursor=null);for(var s=r.length,h=0;h<s;h++){var l=r[h],c=this.getInteractionDataForPointerId(l),E=this.configureInteractionEventForDOMEvent(this.eventData,l,c);E.data.originalEvent=t,this.processInteractive(E,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",E),"touch"===l.pointerType&&this.emit("touchmove",E),("mouse"===l.pointerType||"pen"===l.pointerType)&&this.emit("mousemove",E)}"mouse"===r[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,r,s){var h=t.data,l="touch"===h.pointerType,c="mouse"===h.pointerType||"pen"===h.pointerType;c&&this.processPointerOverOut(t,r,s),(!this.moveWhenInside||s)&&(this.dispatchEvent(r,"pointermove",t),l&&this.dispatchEvent(r,"touchmove",t),c&&this.dispatchEvent(r,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var s=this.normalizeToPointerData(t)[0];"mouse"===s.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var h=this.getInteractionDataForPointerId(s),l=this.configureInteractionEventForDOMEvent(this.eventData,s,h);l.data.originalEvent=s,this.processInteractive(l,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",l),"mouse"===s.pointerType||"pen"===s.pointerType?this.emit("mouseout",l):this.releaseInteractionDataForPointerId(h.identifier)}},e.prototype.processPointerOverOut=function(t,r,s){var h=t.data,l=t.data.identifier,c="mouse"===h.pointerType||"pen"===h.pointerType,E=r.trackedPointers[l];s&&!E&&(E=r.trackedPointers[l]=new Dr(l)),void 0!==E&&(s&&this.mouseOverRenderer?(E.over||(E.over=!0,this.delayDispatchEvent(r,"pointerover",t),c&&this.delayDispatchEvent(r,"mouseover",t)),c&&null===this.cursor&&(this.cursor=r.cursor)):E.over&&(E.over=!1,this.dispatchEvent(r,"pointerout",this.eventData),c&&this.dispatchEvent(r,"mouseout",t),E.none&&delete r.trackedPointers[l]))},e.prototype.onPointerOver=function(t){var s=this.normalizeToPointerData(t)[0],h=this.getInteractionDataForPointerId(s),l=this.configureInteractionEventForDOMEvent(this.eventData,s,h);l.data.originalEvent=s,"mouse"===s.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",l),("mouse"===s.pointerType||"pen"===s.pointerType)&&this.emit("mouseover",l)},e.prototype.getInteractionDataForPointerId=function(t){var s,r=t.pointerId;return 1===r||"mouse"===t.pointerType?s=this.mouse:this.activeInteractionData[r]?s=this.activeInteractionData[r]:((s=this.interactionDataPool.pop()||new lr).identifier=r,this.activeInteractionData[r]=s),s.copyEvent(t),s},e.prototype.releaseInteractionDataForPointerId=function(t){var r=this.activeInteractionData[t];r&&(delete this.activeInteractionData[t],r.reset(),this.interactionDataPool.push(r))},e.prototype.configureInteractionEventForDOMEvent=function(t,r,s){return t.data=s,this.mapPositionToPoint(s.global,r.clientX,r.clientY),"touch"===r.pointerType&&(r.globalX=s.global.x,r.globalY=s.global.y),s.originalEvent=r,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var r=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var s=0,h=t.changedTouches.length;s<h;s++){var l=t.changedTouches[s];void 0===l.button&&(l.button=t.touches.length?1:0),void 0===l.buttons&&(l.buttons=t.touches.length?1:0),void 0===l.isPrimary&&(l.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===l.width&&(l.width=l.radiusX||1),void 0===l.height&&(l.height=l.radiusY||1),void 0===l.tiltX&&(l.tiltX=0),void 0===l.tiltY&&(l.tiltY=0),void 0===l.pointerType&&(l.pointerType="touch"),void 0===l.pointerId&&(l.pointerId=l.identifier||0),void 0===l.pressure&&(l.pressure=l.force||.5),void 0===l.twist&&(l.twist=0),void 0===l.tangentialPressure&&(l.tangentialPressure=0),void 0===l.layerX&&(l.layerX=l.offsetX=l.clientX),void 0===l.layerY&&(l.layerY=l.offsetY=l.clientY),l.isNormalized=!0,r.push(l)}else if(!self.MouseEvent||t instanceof MouseEvent&&!(this.supportsPointerEvents&&t instanceof self.PointerEvent)){var c=t;void 0===c.isPrimary&&(c.isPrimary=!0),void 0===c.width&&(c.width=1),void 0===c.height&&(c.height=1),void 0===c.tiltX&&(c.tiltX=0),void 0===c.tiltY&&(c.tiltY=0),void 0===c.pointerType&&(c.pointerType="mouse"),void 0===c.pointerId&&(c.pointerId=1),void 0===c.pressure&&(c.pressure=.5),void 0===c.twist&&(c.twist=0),void 0===c.tangentialPressure&&(c.tangentialPressure=0),c.isNormalized=!0,r.push(c)}else r.push(t);return r},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e}(y.vp),et=rt(5989),Qe=function(){function i(e){var t=this;this.stage=new fe,e=Object.assign({forceCanvas:!1},e),this.renderer=(0,et.e6)(e),i._plugins.forEach(function(r){r.init.call(t,e)})}return i.registerPlugin=function(e){i._plugins.push(e)},i.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(i.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),i.prototype.destroy=function(e,t){var r=this,s=i._plugins.slice(0);s.reverse(),s.forEach(function(h){h.destroy.call(r)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null},i._plugins=[],i}(),zr=function(){function i(){}return i.init=function(e){var t=this;Object.defineProperty(this,"resizeTo",{set:function(r){self.removeEventListener("resize",this.queueResize),this._resizeTo=r,r&&(self.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){!t._resizeTo||(t.cancelResize(),t._resizeId=requestAnimationFrame(function(){return t.resize()}))},this.cancelResize=function(){t._resizeId&&(cancelAnimationFrame(t._resizeId),t._resizeId=null)},this.resize=function(){if(t._resizeTo){var r,s;if(t.cancelResize(),t._resizeTo===self)r=self.innerWidth,s=self.innerHeight;else{var h=t._resizeTo;r=h.clientWidth,s=h.clientHeight}t.renderer.resize(r,s)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null},i.destroy=function(){self.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},i}();Qe.registerPlugin(zr);var Ye=new Y.Ae,Ni=function(){function i(e){this.renderer=e}return i.prototype.image=function(e,t,r){var s=new Image;return s.src=this.base64(e,t,r),s},i.prototype.base64=function(e,t,r){return this.canvas(e).toDataURL(t,r)},i.prototype.canvas=function(e){var r,s,l,t=this.renderer,h=!1,c=!1;e&&(e instanceof et.TI?l=e:(l=this.renderer.generateTexture(e),c=!0)),l?(r=l.baseTexture.resolution,s=l.frame,h=!1,t.renderTexture.bind(l)):(r=this.renderer.resolution,h=!0,(s=Ye).width=this.renderer.width,s.height=this.renderer.height,t.renderTexture.bind(null));var E=Math.floor(s.width*r+1e-4),_=Math.floor(s.height*r+1e-4),T=new y.qU(E,_,1),D=new Uint8Array(4*E*_),g=t.gl;g.readPixels(s.x*r,s.y*r,E,_,g.RGBA,g.UNSIGNED_BYTE,D);var O=T.context.getImageData(0,0,E,_);if(i.arrayPostDivide(D,O.data),T.context.putImageData(O,0,0),h){var I=new y.qU(T.width,T.height,1);I.context.scale(1,-1),I.context.drawImage(T.canvas,0,-_),T.destroy(),T=I}return c&&l.destroy(!0),T.canvas},i.prototype.pixels=function(e){var r,s,h,t=this.renderer,l=!1;e&&(e instanceof et.TI?h=e:(h=this.renderer.generateTexture(e),l=!0)),h?(r=h.baseTexture.resolution,s=h.frame,t.renderTexture.bind(h)):(r=t.resolution,(s=Ye).width=t.width,s.height=t.height,t.renderTexture.bind(null));var c=s.width*r,E=s.height*r,_=new Uint8Array(4*c*E),T=t.gl;return T.readPixels(s.x*r,s.y*r,c,E,T.RGBA,T.UNSIGNED_BYTE,_),l&&h.destroy(!0),i.arrayPostDivide(_,_),_},i.prototype.destroy=function(){this.renderer=null},i.arrayPostDivide=function(e,t){for(var r=0;r<e.length;r+=4){var s=t[r+3]=e[r+3];0!==s?(t[r]=Math.round(Math.min(255*e[r]/s,255)),t[r+1]=Math.round(Math.min(255*e[r+1]/s,255)),t[r+2]=Math.round(Math.min(255*e[r+2]/s,255))):(t[r]=e[r],t[r+1]=e[r+1],t[r+2]=e[r+2])}},i}(),_r=function(){function i(e,t,r){void 0===t&&(t=!1),this._fn=e,this._once=t,this._thisArg=r,this._next=this._prev=this._owner=null}return i.prototype.detach=function(){return null!==this._owner&&(this._owner.detach(this),!0)},i}();function qr(i,e){return i._head?(i._tail._next=e,e._prev=i._tail,i._tail=e):(i._head=e,i._tail=e),e._owner=i,e}var Oe=function(){function i(){this._head=this._tail=void 0}return i.prototype.handlers=function(e){void 0===e&&(e=!1);var t=this._head;if(e)return!!t;for(var r=[];t;)r.push(t),t=t._next;return r},i.prototype.has=function(e){if(!(e instanceof _r))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return e._owner===this},i.prototype.dispatch=function(){for(var e=arguments,t=[],r=0;r<arguments.length;r++)t[r]=e[r];var s=this._head;if(!s)return!1;for(;s;)s._once&&this.detach(s),s._fn.apply(s._thisArg,t),s=s._next;return!0},i.prototype.add=function(e,t){if(void 0===t&&(t=null),"function"!=typeof e)throw new Error("MiniSignal#add(): First arg must be a Function.");return qr(this,new _r(e,!1,t))},i.prototype.once=function(e,t){if(void 0===t&&(t=null),"function"!=typeof e)throw new Error("MiniSignal#once(): First arg must be a Function.");return qr(this,new _r(e,!0,t))},i.prototype.detach=function(e){if(!(e instanceof _r))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return e._owner!==this||(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,null===e._next&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null),this},i.prototype.detachAll=function(){var e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this},i}();function Zr(i,e){for(var t={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=t.parser[(e=e||{}).strictMode?"strict":"loose"].exec(i),s={},h=14;h--;)s[t.key[h]]=r[h]||"";return s[t.q.name]={},s[t.key[12]].replace(t.q.parser,function(l,c,E){c&&(s[t.q.name][c]=E)}),s}var Je=!(!self.XDomainRequest||"withCredentials"in new XMLHttpRequest),pr=null;function mr(){}function Tr(i,e,t){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(i[e]=t)}function tr(i){return i.toString().replace("object ","")}var i,h,ie=function(){function i(e,t,r){if(this._dequeue=mr,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,"string"!=typeof e||"string"!=typeof t)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(i.STATUS_FLAGS.DATA_URL,0===t.indexOf("data:")),this.name=e,this.url=t,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=i.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=mr,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Oe,this.onProgress=new Oe,this.onComplete=new Oe,this.onAfterMiddleware=new Oe}return i.setExtensionLoadType=function(e,t){Tr(i._loadTypeMap,e,t)},i.setExtensionXhrType=function(e,t){Tr(i._xhrTypeMap,e,t)},Object.defineProperty(i.prototype,"isDataUrl",{get:function(){return this._hasFlag(i.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isComplete",{get:function(){return this._hasFlag(i.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isLoading",{get:function(){return this._hasFlag(i.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),i.prototype.complete=function(){this._clearEvents(),this._finish()},i.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=i.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},i.prototype.load=function(e){var t=this;if(!this.isLoading){if(this.isComplete)return void(e&&setTimeout(function(){return e(t)},1));switch(e&&this.onComplete.once(e),this._setFlag(i.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(!1===this.crossOrigin||"string"!=typeof this.crossOrigin)&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case i.LOAD_TYPE.IMAGE:this.type=i.TYPE.IMAGE,this._loadElement("image");break;case i.LOAD_TYPE.AUDIO:this.type=i.TYPE.AUDIO,this._loadSourceElement("audio");break;case i.LOAD_TYPE.VIDEO:this.type=i.TYPE.VIDEO,this._loadSourceElement("video");break;default:Je&&this.crossOrigin?this._loadXdr():this._loadXhr()}}},i.prototype._hasFlag=function(e){return 0!=(this._flags&e)},i.prototype._setFlag=function(e,t){this._flags=t?this._flags|e:this._flags&~e},i.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},i.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(i.STATUS_FLAGS.COMPLETE,!0),this._setFlag(i.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},i.prototype._loadElement=function(e){this.data=this.metadata.loadElement?this.metadata.loadElement:"image"===e&&void 0!==self.Image?new Image:document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},i.prototype._loadSourceElement=function(e){if(this.data=this.metadata.loadElement?this.metadata.loadElement:"audio"===e&&void 0!==self.Audio?new Audio:document.createElement(e),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var t=this.metadata.mimeType,r=0;r<this.url.length;++r)this.data.appendChild(this._createSource(e,this.url[r],Array.isArray(t)?t[r]:t));else t=this.metadata.mimeType,this.data.appendChild(this._createSource(e,this.url,Array.isArray(t)?t[0]:t));this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+e)},i.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.timeout=this.timeout,e.responseType=this.xhrType===i.XHR_RESPONSE_TYPE.JSON||this.xhrType===i.XHR_RESPONSE_TYPE.DOCUMENT?i.XHR_RESPONSE_TYPE.TEXT:this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},i.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new self.XDomainRequest;e.timeout=this.timeout||5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXhrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout(function(){return e.send()},1)},i.prototype._createSource=function(e,t,r){r||(r=e+"/"+this._getExtension(t));var s=document.createElement("source");return s.src=t,s.type=r,s},i.prototype._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},i.prototype._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},i.prototype._onTimeout=function(){this.abort("Load timed out.")},i.prototype._xhrOnError=function(){var e=this.xhr;this.abort(tr(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},i.prototype._xhrOnTimeout=function(){this.abort(tr(this.xhr)+" Request timed out.")},i.prototype._xhrOnAbort=function(){this.abort(tr(this.xhr)+" Request was aborted by the user.")},i.prototype._xhrOnLoad=function(){var e=this.xhr,t="",r=void 0===e.status?200:e.status;if((""===e.responseType||"text"===e.responseType||void 0===e.responseType)&&(t=e.responseText),0===r&&(t.length>0||e.responseType===i.XHR_RESPONSE_TYPE.BUFFER)?r=200:1223===r&&(r=204),2==(r/100|0)){if(this.xhrType===i.XHR_RESPONSE_TYPE.TEXT)this.data=t,this.type=i.TYPE.TEXT;else if(this.xhrType===i.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(t),this.type=i.TYPE.JSON}catch(c){return void this.abort("Error trying to parse loaded json: "+c)}else if(this.xhrType===i.XHR_RESPONSE_TYPE.DOCUMENT)try{if(self.DOMParser){var h=new DOMParser;this.data=h.parseFromString(t,"text/xml")}else{var l=document.createElement("div");l.innerHTML=t,this.data=l}this.type=i.TYPE.XML}catch(c){return void this.abort("Error trying to parse loaded xml: "+c)}else this.data=e.response||t;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},i.prototype._determineCrossOrigin=function(e,t){if(0===e.indexOf("data:"))return"";if(self.origin!==self.location.origin)return"anonymous";t=t||self.location,pr||(pr=document.createElement("a")),pr.href=e;var r=Zr(pr.href,{strictMode:!0});return r.host!==t.hostname||(r.port||""!==t.port)&&r.port!==t.port||(r.protocol?r.protocol+":":"")!==t.protocol?"anonymous":""},i.prototype._determineXhrType=function(){return i._xhrTypeMap[this.extension]||i.XHR_RESPONSE_TYPE.TEXT},i.prototype._determineLoadType=function(){return i._loadTypeMap[this.extension]||i.LOAD_TYPE.XHR},i.prototype._getExtension=function(e){void 0===e&&(e=this.url);var t="";if(this.isDataUrl){var r=e.indexOf("/");t=e.substring(r+1,e.indexOf(";",r))}else{var s=e.indexOf("?"),h=e.indexOf("#"),l=Math.min(s>-1?s:e.length,h>-1?h:e.length);t=(e=e.substring(0,l)).substring(e.lastIndexOf(".")+1)}return t.toLowerCase()},i.prototype._getMimeFromXhrType=function(e){switch(e){case i.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case i.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case i.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case i.XHR_RESPONSE_TYPE.JSON:return"application/json";default:return"text/plain"}},i}();function xe(){}function br(i){return function(){for(var t=arguments,r=[],s=0;s<arguments.length;s++)r[s]=t[s];if(null===i)throw new Error("Callback was already called.");var h=i;i=null,h.apply(this,r)}}(h=(i=ie||(ie={})).STATUS_FLAGS||(i.STATUS_FLAGS={}))[h.NONE=0]="NONE",h[h.DATA_URL=1]="DATA_URL",h[h.COMPLETE=2]="COMPLETE",h[h.LOADING=4]="LOADING",function(h){h[h.UNKNOWN=0]="UNKNOWN",h[h.JSON=1]="JSON",h[h.XML=2]="XML",h[h.IMAGE=3]="IMAGE",h[h.AUDIO=4]="AUDIO",h[h.VIDEO=5]="VIDEO",h[h.TEXT=6]="TEXT"}(i.TYPE||(i.TYPE={})),function(h){h[h.XHR=1]="XHR",h[h.IMAGE=2]="IMAGE",h[h.AUDIO=3]="AUDIO",h[h.VIDEO=4]="VIDEO"}(i.LOAD_TYPE||(i.LOAD_TYPE={})),function(h){h.DEFAULT="text",h.BUFFER="arraybuffer",h.BLOB="blob",h.DOCUMENT="document",h.JSON="json",h.TEXT="text"}(i.XHR_RESPONSE_TYPE||(i.XHR_RESPONSE_TYPE={})),i._loadTypeMap={gif:i.LOAD_TYPE.IMAGE,png:i.LOAD_TYPE.IMAGE,bmp:i.LOAD_TYPE.IMAGE,jpg:i.LOAD_TYPE.IMAGE,jpeg:i.LOAD_TYPE.IMAGE,tif:i.LOAD_TYPE.IMAGE,tiff:i.LOAD_TYPE.IMAGE,webp:i.LOAD_TYPE.IMAGE,tga:i.LOAD_TYPE.IMAGE,svg:i.LOAD_TYPE.IMAGE,"svg+xml":i.LOAD_TYPE.IMAGE,mp3:i.LOAD_TYPE.AUDIO,ogg:i.LOAD_TYPE.AUDIO,wav:i.LOAD_TYPE.AUDIO,mp4:i.LOAD_TYPE.VIDEO,webm:i.LOAD_TYPE.VIDEO},i._xhrTypeMap={xhtml:i.XHR_RESPONSE_TYPE.DOCUMENT,html:i.XHR_RESPONSE_TYPE.DOCUMENT,htm:i.XHR_RESPONSE_TYPE.DOCUMENT,xml:i.XHR_RESPONSE_TYPE.DOCUMENT,tmx:i.XHR_RESPONSE_TYPE.DOCUMENT,svg:i.XHR_RESPONSE_TYPE.DOCUMENT,tsx:i.XHR_RESPONSE_TYPE.DOCUMENT,gif:i.XHR_RESPONSE_TYPE.BLOB,png:i.XHR_RESPONSE_TYPE.BLOB,bmp:i.XHR_RESPONSE_TYPE.BLOB,jpg:i.XHR_RESPONSE_TYPE.BLOB,jpeg:i.XHR_RESPONSE_TYPE.BLOB,tif:i.XHR_RESPONSE_TYPE.BLOB,tiff:i.XHR_RESPONSE_TYPE.BLOB,webp:i.XHR_RESPONSE_TYPE.BLOB,tga:i.XHR_RESPONSE_TYPE.BLOB,json:i.XHR_RESPONSE_TYPE.JSON,text:i.XHR_RESPONSE_TYPE.TEXT,txt:i.XHR_RESPONSE_TYPE.TEXT,ttf:i.XHR_RESPONSE_TYPE.BUFFER,otf:i.XHR_RESPONSE_TYPE.BUFFER},i.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var Mr=function(e,t){this.data=e,this.callback=t},We=function(){function i(e,t){var r=this;if(void 0===t&&(t=1),this.workers=0,this.saturated=xe,this.unsaturated=xe,this.empty=xe,this.drain=xe,this.error=xe,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(s,h,l){if(l&&"function"!=typeof l)throw new Error("task callback must be a function");if(r.started=!0,null==s&&r.idle())setTimeout(function(){return r.drain()},1);else{var c=new Mr(s,"function"==typeof l?l:xe);h?r._tasks.unshift(c):r._tasks.push(c),setTimeout(r.process,1)}},this.process=function(){for(;!r.paused&&r.workers<r.concurrency&&r._tasks.length;){var s=r._tasks.shift();0===r._tasks.length&&r.empty(),r.workers+=1,r.workers===r.concurrency&&r.saturated(),r._worker(s.data,br(r._next(s)))}},this._worker=e,0===t)throw new Error("Concurrency must not be zero");this.concurrency=t,this.buffer=t/4}return i.prototype._next=function(e){var t=this;return function(){for(var r=arguments,s=[],h=0;h<arguments.length;h++)s[h]=r[h];t.workers-=1,e.callback.apply(e,s),null!=s[0]&&t.error(s[0],e.data),t.workers<=t.concurrency-t.buffer&&t.unsaturated(),t.idle()&&t.drain(),t.process()}},i.prototype.push=function(e,t){this._insert(e,!1,t)},i.prototype.kill=function(){this.workers=0,this.drain=xe,this.started=!1,this._tasks=[]},i.prototype.unshift=function(e,t){this._insert(e,!0,t)},i.prototype.length=function(){return this._tasks.length},i.prototype.running=function(){return this.workers},i.prototype.idle=function(){return this._tasks.length+this.workers===0},i.prototype.pause=function(){!0!==this.paused&&(this.paused=!0)},i.prototype.resume=function(){if(!1!==this.paused){this.paused=!1;for(var e=1;e<=this.concurrency;e++)this.process()}},i.eachSeries=function(e,t,r,s){var h=0,l=e.length;!function c(E){E||h===l?r&&r(E):s?setTimeout(function(){t(e[h++],c)},1):t(e[h++],c)}()},i.queue=function(e,t){return new i(e,t)},i}(),wi=/(#[\w-]+)?$/,ye=function(){function i(e,t){var r=this;void 0===e&&(e=""),void 0===t&&(t=10),this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(E,_){return r._loadResource(E,_)},this.resources={},this.baseUrl=e,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(E,_){return r._loadResource(E,_)},this._queue=We.queue(this._boundLoadResource,t),this._queue.pause(),this.resources={},this.onProgress=new Oe,this.onError=new Oe,this.onLoad=new Oe,this.onStart=new Oe,this.onComplete=new Oe;for(var s=0;s<i._plugins.length;++s){var h=i._plugins[s],l=h.pre,c=h.use;l&&this.pre(l),c&&this.use(c)}this._protected=!1}return i.prototype._add=function(e,t,r,s){if(this.loading&&(!r||!r.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e])throw new Error('Resource named "'+e+'" already exists.');if(t=this._prepareUrl(t),this.resources[e]=new ie(e,t,r),"function"==typeof s&&this.resources[e].onAfterMiddleware.once(s),this.loading){for(var h=r.parentResource,l=[],c=0;c<h.children.length;++c)h.children[c].isComplete||l.push(h.children[c]);var _=h.progressChunk*(l.length+1)/(l.length+2);for(h.children.push(this.resources[e]),h.progressChunk=_,c=0;c<l.length;++c)l[c].progressChunk=_;this.resources[e].progressChunk=_}return this._queue.push(this.resources[e]),this},i.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},i.prototype.use=function(e){return this._afterMiddleware.push(e),this},i.prototype.reset=function(){for(var e in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var t=this.resources[e];t._onLoadBinding&&t._onLoadBinding.detach(),t.isLoading&&t.abort("loader reset")}return this.resources={},this},i.prototype.load=function(e){if("function"==typeof e&&this.onComplete.once(e),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var r=100/this._queue._tasks.length,s=0;s<this._queue._tasks.length;++s)this._queue._tasks[s].data.progressChunk=r;this._onStart(),this._queue.resume()}return this},Object.defineProperty(i.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(e){this._queue.concurrency=e},enumerable:!1,configurable:!0}),i.prototype._prepareUrl=function(e){var r,t=Zr(e,{strictMode:!0});if(r=t.protocol||!t.path||0===e.indexOf("//")?e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==e.charAt(0)?this.baseUrl+"/"+e:this.baseUrl+e,this.defaultQueryString){var s=wi.exec(r)[0];-1!==(r=r.substr(0,r.length-s.length)).indexOf("?")?r+="&"+this.defaultQueryString:r+="?"+this.defaultQueryString,r+=s}return r},i.prototype._loadResource=function(e,t){var r=this;e._dequeue=t,We.eachSeries(this._beforeMiddleware,function(s,h){s.call(r,e,function(){h(e.isComplete?{}:null)})},function(){e.isComplete?r._onLoad(e):(e._onLoadBinding=e.onComplete.once(r._onLoad,r),e.load())},!0)},i.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},i.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},i.prototype._onLoad=function(e){var t=this;e._onLoadBinding=null,this._resourcesParsing.push(e),e._dequeue(),We.eachSeries(this._afterMiddleware,function(r,s){r.call(t,e,s)},function(){e.onAfterMiddleware.dispatch(e),t.progress=Math.min(100,t.progress+e.progressChunk),t.onProgress.dispatch(t,e),e.error?t.onError.dispatch(e.error,t,e):t.onLoad.dispatch(t,e),t._resourcesParsing.splice(t._resourcesParsing.indexOf(e),1),t._queue.idle()&&0===t._resourcesParsing.length&&t._onComplete()},!0)},i.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(i,"shared",{get:function(){var e=i._shared;return e||((e=new i)._protected=!0,i._shared=e),e},enumerable:!1,configurable:!0}),i.registerPlugin=function(e){return i._plugins.push(e),e.add&&e.add(),i},i._plugins=[],i}();ye.prototype.add=function(e,t,r,s){if(Array.isArray(e)){for(var h=0;h<e.length;++h)this.add(e[h]);return this}if("object"==typeof e&&(r=e,s=t||r.callback||r.onComplete,t=r.url,e=r.name||r.key||r.url),"string"!=typeof t&&(s=r,r=t,t=e),"string"!=typeof t)throw new Error("No url passed to add resource to loader.");return"function"==typeof r&&(s=r,r=null),this._add(e,t,r,s)};var Bi=function(){function i(){}return i.init=function(e){e=Object.assign({sharedLoader:!1},e),this.loader=e.sharedLoader?ye.shared:new ye},i.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},i}(),Fi=function(){function i(){}return i.add=function(){ie.setExtensionLoadType("svg",ie.LOAD_TYPE.XHR),ie.setExtensionXhrType("svg",ie.XHR_RESPONSE_TYPE.TEXT)},i.use=function(e,t){!e.data||e.type!==ie.TYPE.IMAGE&&"svg"!==e.extension?t():et.xE.fromLoader(e.data,e.url,e.name,e.metadata).then(function(c){e.texture=c,t()}).catch(t)},i}(),ti=self.URL||self.webkitURL;ye.registerPlugin({use:function(i,e){if(i.data){if(i.xhr&&i.xhrType===ie.XHR_RESPONSE_TYPE.BLOB)if(self.Blob&&"string"!=typeof i.data){if(0===i.data.type.indexOf("image")){var r=ti.createObjectURL(i.data);return i.blob=i.data,i.data=new Image,i.data.src=r,i.type=ie.TYPE.IMAGE,void(i.data.onload=function(){ti.revokeObjectURL(r),i.data.onload=null,e()})}}else{var t=i.xhr.getResponseHeader("content-type");if(t&&0===t.indexOf("image"))return i.data=new Image,i.data.src="data:"+t+";base64,"+function(i){for(var e="",t=0;t<i.length;){for(var r=[0,0,0],s=[0,0,0,0],h=0;h<r.length;++h)r[h]=t<i.length?255&i.charCodeAt(t++):0;switch(s[0]=r[0]>>2,s[1]=(3&r[0])<<4|r[1]>>4,s[2]=(15&r[1])<<2|r[2]>>6,s[3]=63&r[2],t-(i.length-1)){case 2:s[3]=64,s[2]=64;break;case 1:s[3]=64}for(h=0;h<s.length;++h)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(s[h])}return e}(i.xhr.responseText),i.type=ie.TYPE.IMAGE,void(i.data.onload=function(){i.data.onload=null,e()})}e()}else e()}}),ye.registerPlugin(Fi);var Jt,Yt=rt(6617),Ht=(()=>(function(i){i[i.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",i[i.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",i[i.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",i[i.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",i[i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",i[i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",i[i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",i[i.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",i[i.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",i[i.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",i[i.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",i[i.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",i[i.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",i[i.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",i[i.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",i[i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",i[i.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",i[i.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",i[i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",i[i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",i[i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",i[i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",i[i.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",i[i.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",i[i.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",i[i.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"}(Ht||(Ht={})),Ht))(),er=((Jt={})[Ht.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,Jt[Ht.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,Jt[Ht.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,Jt[Ht.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,Jt[Ht.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,Jt[Ht.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,Jt[Ht.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,Jt[Ht.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,Jt[Ht.COMPRESSED_R11_EAC]=.5,Jt[Ht.COMPRESSED_SIGNED_R11_EAC]=.5,Jt[Ht.COMPRESSED_RG11_EAC]=1,Jt[Ht.COMPRESSED_SIGNED_RG11_EAC]=1,Jt[Ht.COMPRESSED_RGB8_ETC2]=.5,Jt[Ht.COMPRESSED_RGBA8_ETC2_EAC]=1,Jt[Ht.COMPRESSED_SRGB8_ETC2]=.5,Jt[Ht.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,Jt[Ht.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,Jt[Ht.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,Jt[Ht.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,Jt[Ht.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,Jt[Ht.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,Jt[Ht.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,Jt[Ht.COMPRESSED_RGB_ETC1_WEBGL]=.5,Jt[Ht.COMPRESSED_RGB_ATC_WEBGL]=.5,Jt[Ht.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,Jt[Ht.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,Jt),yr=function(i,e){return(yr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])})(i,e)};function Ie(i,e){function t(){this.constructor=i}yr(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var ir,ge,Ui=function(i){function e(t,r){void 0===r&&(r={width:1,height:1,autoLoad:!0});var h,l,s=this;return"string"==typeof t?(h=t,l=new Uint8Array):(h=null,l=t),(s=i.call(this,l,r)||this).origin=h,s.buffer=l?new et.Rv(l):null,s.origin&&!1!==r.autoLoad&&s.load(),l&&l.length&&(s.loaded=!0,s.onBlobLoaded(s.buffer.rawBinaryData)),s}return Ie(e,i),e.prototype.onBlobLoaded=function(t){},e.prototype.load=function(){return function(i,e,t,r){return new(t||(t=Promise))(function(s,h){function l(_){try{E(r.next(_))}catch(T){h(T)}}function c(_){try{E(r.throw(_))}catch(T){h(T)}}function E(_){_.done?s(_.value):new t(function(T){T(_.value)}).then(l,c)}E((r=r.apply(i,[])).next())})}(this,0,Promise,function(){var s;return function(i,e){var r,s,h,l,t={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return l={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function c(_){return function(T){return function(_){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,s&&(h=2&_[0]?s.return:_[0]?s.throw||((h=s.return)&&h.call(s),0):s.next)&&!(h=h.call(s,_[1])).done)return h;switch(s=0,h&&(_=[2&_[0],h.value]),_[0]){case 0:case 1:h=_;break;case 4:return t.label++,{value:_[1],done:!1};case 5:t.label++,s=_[1],_=[0];continue;case 7:_=t.ops.pop(),t.trys.pop();continue;default:if(!(h=(h=t.trys).length>0&&h[h.length-1])&&(6===_[0]||2===_[0])){t=0;continue}if(3===_[0]&&(!h||_[1]>h[0]&&_[1]<h[3])){t.label=_[1];break}if(6===_[0]&&t.label<h[1]){t.label=h[1],h=_;break}if(h&&t.label<h[2]){t.label=h[2],t.ops.push(_);break}h[2]&&t.ops.pop(),t.trys.pop();continue}_=e.call(i,t)}catch(T){_=[6,T],s=0}finally{r=h=0}if(5&_[0])throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}([_,T])}}}(this,function(h){switch(h.label){case 0:return[4,fetch(this.origin)];case 1:return[4,h.sent().blob()];case 2:return[4,h.sent().arrayBuffer()];case 3:return s=h.sent(),this.data=new Uint32Array(s),this.buffer=new et.Rv(s),this.loaded=!0,this.onBlobLoaded(s),this.update(),[2,this]}})})},e}(et.qm),Nr=function(i){function e(t,r){var s=i.call(this,t,r)||this;return s.format=r.format,s.levels=r.levels||1,s._width=r.width,s._height=r.height,s._extension=e._formatToExtension(s.format),(r.levelBuffers||s.buffer)&&(s._levelBuffers=r.levelBuffers||e._createLevelBuffers(t instanceof Uint8Array?t:s.buffer.uint8View,s.format,s.levels,4,4,s.width,s.height)),s}return Ie(e,i),e.prototype.upload=function(t,r,s){var h=t.gl;if(!t.context.extensions[this._extension])throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var c=0,E=this.levels;c<E;c++){var _=this._levelBuffers[c];h.compressedTexImage2D(h.TEXTURE_2D,_.levelID,this.format,_.levelWidth,_.levelHeight,0,_.levelBuffer)}return!0},e.prototype.onBlobLoaded=function(){this._levelBuffers=e._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},e._formatToExtension=function(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},e._createLevelBuffers=function(t,r,s,h,l,c,E){for(var _=new Array(s),T=t.byteOffset,D=c,g=E,O=D+h-1&~(h-1),I=g+l-1&~(l-1),M=O*I*er[r],C=0;C<s;C++)_[C]={levelID:C,levelWidth:s>1?D:O,levelHeight:s>1?g:I,levelBuffer:new Uint8Array(t.buffer,T,M)},T+=M,M=(O=(D=D>>1||1)+h-1&~(h-1))*(I=(g=g>>1||1)+l-1&~(l-1))*er[r];return _},e}(Ui),ii=function(){function i(){}return i.use=function(e,t){var r=e.data;if(e.type===ie.TYPE.JSON&&r&&r.cacheID&&r.textures){for(var h=r.textures,l=void 0,c=void 0,E=0,_=h.length;E<_;E++){var T=h[E],D=T.src,g=T.format;if(g||(c=D),i.textureFormats[g]){l=D;break}}if(!(l=l||c))return void t(new Error("Cannot load compressed-textures in "+e.url+", make sure you provide a fallback"));if(l===e.url)return void t(new Error("URL of compressed texture cannot be the same as the manifest's URL"));var O={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},I=y.HQ.resolve(e.url.replace(this.baseUrl,""),l);this.add(r.cacheID,I,O,function(C){if(C.error)t(C.error);else{var X=C.texture,_t=C.textures;Object.assign(e,{texture:void 0===X?null:X,textures:void 0===_t?{}:_t}),t()}})}else t()},i.add=function(){var t=document.createElement("canvas").getContext("webgl");if(t){var r={s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};for(var s in i.textureExtensions=r,i.textureFormats={},r){var h=r[s];!h||Object.assign(i.textureFormats,Object.getPrototypeOf(h))}}else console.warn("WebGL not available for compressed textures. Silently failing.")},i}();function ni(i,e,t){var r={textures:{},texture:null};if(!e)return r;var s=e.map(function(h){return new et.xE(new et.VL(h,Object.assign({mipmap:Yt.WB.OFF,alphaMode:Yt.iw.NO_PREMULTIPLIED_ALPHA},t)))});return s.forEach(function(h,l){var c=h.baseTexture,E=i+"-"+(l+1);et.VL.addToCache(c,E),et.xE.addToCache(h,E),0===l&&(et.VL.addToCache(c,i),et.xE.addToCache(h,i),r.texture=h),r.textures[E]=h}),r}ie.setExtensionXhrType("dds",ie.XHR_RESPONSE_TYPE.BUFFER);var je,Ne,ar,Ee=(()=>(function(i){i[i.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",i[i.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",i[i.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",i[i.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",i[i.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",i[i.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",i[i.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",i[i.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",i[i.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",i[i.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",i[i.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",i[i.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",i[i.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",i[i.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",i[i.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",i[i.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",i[i.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",i[i.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",i[i.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",i[i.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",i[i.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",i[i.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",i[i.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",i[i.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",i[i.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",i[i.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",i[i.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",i[i.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",i[i.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",i[i.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",i[i.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",i[i.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",i[i.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",i[i.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",i[i.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",i[i.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",i[i.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",i[i.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",i[i.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",i[i.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",i[i.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",i[i.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",i[i.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",i[i.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",i[i.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",i[i.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",i[i.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",i[i.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",i[i.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",i[i.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",i[i.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",i[i.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",i[i.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",i[i.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",i[i.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",i[i.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",i[i.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",i[i.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",i[i.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",i[i.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",i[i.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",i[i.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",i[i.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",i[i.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",i[i.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",i[i.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",i[i.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",i[i.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",i[i.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",i[i.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",i[i.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",i[i.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",i[i.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",i[i.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",i[i.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",i[i.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",i[i.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",i[i.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",i[i.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",i[i.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",i[i.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",i[i.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",i[i.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",i[i.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",i[i.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",i[i.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",i[i.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",i[i.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",i[i.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",i[i.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",i[i.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",i[i.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",i[i.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",i[i.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",i[i.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",i[i.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",i[i.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",i[i.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",i[i.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",i[i.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",i[i.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",i[i.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",i[i.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",i[i.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",i[i.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",i[i.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",i[i.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",i[i.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",i[i.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",i[i.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",i[i.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",i[i.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",i[i.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",i[i.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",i[i.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",i[i.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",i[i.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",i[i.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",i[i.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",i[i.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",i[i.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",i[i.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"}(Ee||(Ee={})),Ee))(),Ar=(()=>(function(i){i[i.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",i[i.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",i[i.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"}(Ar||(Ar={})),Ar))(),Cr=((ir={})[827611204]=Ht.COMPRESSED_RGBA_S3TC_DXT1_EXT,ir[861165636]=Ht.COMPRESSED_RGBA_S3TC_DXT3_EXT,ir[894720068]=Ht.COMPRESSED_RGBA_S3TC_DXT5_EXT,ir),zi=((ge={})[Ee.DXGI_FORMAT_BC1_TYPELESS]=Ht.COMPRESSED_RGBA_S3TC_DXT1_EXT,ge[Ee.DXGI_FORMAT_BC1_UNORM]=Ht.COMPRESSED_RGBA_S3TC_DXT1_EXT,ge[Ee.DXGI_FORMAT_BC2_TYPELESS]=Ht.COMPRESSED_RGBA_S3TC_DXT3_EXT,ge[Ee.DXGI_FORMAT_BC2_UNORM]=Ht.COMPRESSED_RGBA_S3TC_DXT3_EXT,ge[Ee.DXGI_FORMAT_BC3_TYPELESS]=Ht.COMPRESSED_RGBA_S3TC_DXT5_EXT,ge[Ee.DXGI_FORMAT_BC3_UNORM]=Ht.COMPRESSED_RGBA_S3TC_DXT5_EXT,ge[Ee.DXGI_FORMAT_BC1_UNORM_SRGB]=Ht.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,ge[Ee.DXGI_FORMAT_BC2_UNORM_SRGB]=Ht.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,ge[Ee.DXGI_FORMAT_BC3_UNORM_SRGB]=Ht.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,ge),Ki=function(){function i(){}return i.use=function(e,t){if("dds"===e.extension&&e.data)try{Object.assign(e,ni(e.name||e.url,i.parse(e.data),e.metadata))}catch(r){return void t(r)}t()},i.parse=function(e){var t=new Uint32Array(e);if(542327876!==t[0])throw new Error("Invalid DDS file magic word");var s=new Uint32Array(e,0,124/Uint32Array.BYTES_PER_ELEMENT),h=s[3],l=s[4],c=s[7],E=new Uint32Array(e,19*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),_=E[1];if(4&_){var T=E[2];if(808540228!==T){var D=Cr[T],O=new Uint8Array(e,128);return[new Nr(O,{format:D,width:l,height:h,levels:c})]}var C=new Uint32Array(t.buffer,128,20/Uint32Array.BYTES_PER_ELEMENT),X=C[0],ht=C[1],_t=C[2],St=C[3],it=zi[X];if(void 0===it)throw new Error("DDSLoader cannot parse texture data with DXGI format "+X);if(4===_t)throw new Error("DDSLoader does not support cubemap textures");if(ht===Ar.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSLoader does not supported 3D texture data");var z=new Array;if(1===St)z.push(new Uint8Array(e,148));else{for(var qt=er[it],ft=0,yt=l,Vt=h,Bt=0;Bt<c;Bt++)ft+=Math.max(1,yt+3&-4)*Math.max(1,Vt+3&-4)*qt,yt>>>=1,Vt>>>=1;var Mt=148;for(Bt=0;Bt<St;Bt++)z.push(new Uint8Array(e,Mt,ft)),Mt+=ft}return z.map(function(Zt){return new Nr(Zt,{format:it,width:l,height:h,levels:c})})}throw 64&_?new Error("DDSLoader does not support uncompressed texture data."):512&_?new Error("DDSLoader does not supported YUV uncompressed texture data."):131072&_?new Error("DDSLoader does not support single-channel (lumninance) texture data!"):2&_?new Error("DDSLoader does not support single-channel (alpha) texture data!"):new Error("DDSLoader failed to load a texture file due to an unknown reason!")},i}();ie.setExtensionXhrType("ktx",ie.XHR_RESPONSE_TYPE.BUFFER);var fi=[171,75,84,88,32,49,49,187,13,10,26,10],$i=((je={})[Yt.vK.UNSIGNED_BYTE]=1,je[Yt.vK.UNSIGNED_SHORT]=2,je[Yt.vK.FLOAT]=4,je[Yt.vK.HALF_FLOAT]=8,je),ci=((Ne={})[Yt.I2.RGBA]=4,Ne[Yt.I2.RGB]=3,Ne[Yt.I2.LUMINANCE]=1,Ne[Yt.I2.LUMINANCE_ALPHA]=2,Ne[Yt.I2.ALPHA]=1,Ne),di=((ar={})[Yt.vK.UNSIGNED_SHORT_4_4_4_4]=2,ar[Yt.vK.UNSIGNED_SHORT_5_5_5_1]=2,ar[Yt.vK.UNSIGNED_SHORT_5_6_5]=2,ar),_i=function(){function i(){}return i.use=function(e,t){if("ktx"===e.extension&&e.data)try{var r=e.name||e.url;Object.assign(e,ni(r,i.parse(r,e.data),e.metadata))}catch(s){return void t(s)}t()},i.parse=function(e,t){var r=new DataView(t);if(!i.validate(e,r))return null;var s=67305985===r.getUint32(12,!0),h=r.getUint32(16,s),l=r.getUint32(24,s),c=r.getUint32(28,s),E=r.getUint32(36,s),_=r.getUint32(40,s)||1,T=r.getUint32(44,s)||1,D=r.getUint32(48,s)||1,g=r.getUint32(52,s),O=r.getUint32(56,s),I=r.getUint32(60,s);if(0===_||1!==T)throw new Error("Only 2D textures are supported");if(1!==g)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==D)throw new Error("WebGL does not support array textures");var it,X=E+3&-4,ht=_+3&-4,_t=new Array(D),St=E*_;if(0===h&&(St=X*ht),void 0===(it=0!==h?$i[h]?$i[h]*ci[l]:di[h]:er[c]))throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var Ot=St*it,qt=E,ft=_,yt=X,Vt=ht,Bt=64+I,ee=0;ee<O;ee++){for(var me=r.getUint32(Bt,s),Nt=Bt+4,Mt=0;Mt<D;Mt++){var Zt=_t[Mt];Zt||(Zt=_t[Mt]=new Array(O)),Zt[ee]={levelID:ee,levelWidth:O>1?qt:yt,levelHeight:O>1?ft:Vt,levelBuffer:new Uint8Array(t,Nt,Ot)},Nt+=Ot}Bt=(Bt+=me+4)%4!=0?Bt+4-Bt%4:Bt,Ot=(yt=(qt=qt>>1||1)+4-1&-4)*(Vt=(ft=ft>>1||1)+4-1&-4)*it}if(0!==h)throw new Error("TODO: Uncompressed");return _t.map(function(Te){return new Nr(null,{format:c,width:E,height:_,levels:O,levelBuffers:Te})})},i.validate=function(e,t){for(var r=0;r<fi.length;r++)if(t.getUint8(r)!==fi[r])return console.error(e+" is not a valid *.ktx file!"),!1;return!0},i}(),wr=function(i,e){return(wr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])})(i,e)};function pi(i,e){function t(){this.constructor=i}wr(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}!function(i){function e(t,r,s,h){void 0===t&&(t=1500),void 0===s&&(s=16384),void 0===h&&(h=!1);var l=i.call(this)||this;return s>16384&&(s=16384),l._properties=[!1,!0,!1,!1,!1],l._maxSize=t,l._batchSize=s,l._buffers=null,l._bufferUpdateIDs=[],l._updateID=0,l.interactiveChildren=!1,l.blendMode=Yt.T$.NORMAL,l.autoResize=h,l.roundPixels=!0,l.baseTexture=null,l.setProperties(r),l._tint=0,l.tintRgb=new Float32Array(4),l.tint=16777215,l}pi(e,i),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,(0,y.wK)(t,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(t){var r=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return r.onChildrenChange(0)})),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var r=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<r;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[r]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},e.prototype.destroy=function(t){i.prototype.destroy.call(this,t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}(fe);var Br=function(){function i(e,t,r){this.geometry=new et.ZX,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(var s=0;s<e.length;++s){var h=e[s];h={attributeName:h.attributeName,size:h.size,uploadFunction:h.uploadFunction,type:h.type||Yt.vK.FLOAT,offset:h.offset},t[s]?this.dynamicProperties.push(h):this.staticProperties.push(h)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return i.prototype.initBuffers=function(){var e=this.geometry,t=0;this.indexBuffer=new et.lW((0,y.fl)(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(var r=0;r<this.dynamicProperties.length;++r)(s=this.dynamicProperties[r]).offset=t,t+=s.size,this.dynamicStride+=s.size;var h=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(h),this.dynamicDataUint32=new Uint32Array(h),this.dynamicBuffer=new et.lW(this.dynamicData,!1,!1);var l=0;for(this.staticStride=0,r=0;r<this.staticProperties.length;++r)(s=this.staticProperties[r]).offset=l,l+=s.size,this.staticStride+=s.size;var c=new ArrayBuffer(this.size*this.staticStride*4*4);for(this.staticData=new Float32Array(c),this.staticDataUint32=new Uint32Array(c),this.staticBuffer=new et.lW(this.staticData,!0,!1),r=0;r<this.dynamicProperties.length;++r)e.addAttribute((s=this.dynamicProperties[r]).attributeName,this.dynamicBuffer,0,s.type===Yt.vK.UNSIGNED_BYTE,s.type,4*this.dynamicStride,4*s.offset);for(r=0;r<this.staticProperties.length;++r){var s;e.addAttribute((s=this.staticProperties[r]).attributeName,this.staticBuffer,0,s.type===Yt.vK.UNSIGNED_BYTE,s.type,4*this.staticStride,4*s.offset)}},i.prototype.uploadDynamic=function(e,t,r){for(var s=0;s<this.dynamicProperties.length;s++){var h=this.dynamicProperties[s];h.uploadFunction(e,t,r,h.type===Yt.vK.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,h.offset)}this.dynamicBuffer._updateID++},i.prototype.uploadStatic=function(e,t,r){for(var s=0;s<this.staticProperties.length;s++){var h=this.staticProperties[s];h.uploadFunction(e,t,r,h.type===Yt.vK.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,h.offset)}this.staticBuffer._updateID++},i.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},i}(),tn=function(i){function e(t){var r=i.call(this,t)||this;return r.shader=null,r.properties=null,r.tempMatrix=new Y.y3,r.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:r.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:r.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:r.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:r.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Yt.vK.UNSIGNED_BYTE,uploadFunction:r.uploadTint,offset:0}],r.shader=et.ex.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),r.state=et.ZM.for2d(),r}return pi(e,i),e.prototype.render=function(t){var r=t.children,s=t._maxSize,h=t._batchSize,l=this.renderer,c=r.length;if(0!==c){c>s&&!t.autoResize&&(c=s);var E=t._buffers;E||(E=t._buffers=this.generateBuffers(t));var _=r[0]._texture.baseTexture;this.state.blendMode=(0,y.D)(t.blendMode,_.alphaMode),l.state.set(this.state);var T=l.gl,D=t.worldTransform.copyTo(this.tempMatrix);D.prepend(l.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=D.toArray(!0),this.shader.uniforms.uColor=(0,y.Qt)(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,_.alphaMode),this.shader.uniforms.uSampler=_,this.renderer.shader.bind(this.shader);for(var g=!1,O=0,I=0;O<c;O+=h,I+=1){var M=c-O;M>h&&(M=h),I>=E.length&&E.push(this._generateOneMoreBuffer(t));var C=E[I];C.uploadDynamic(r,O,M),(g=g||C._updateID<(t._bufferUpdateIDs[I]||0))&&(C._updateID=t._updateID,C.uploadStatic(r,O,M)),l.geometry.bind(C.geometry),T.drawElements(T.TRIANGLES,6*M,T.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var r=[],s=t._maxSize,h=t._batchSize,l=t._properties,c=0;c<s;c+=h)r.push(new Br(this.properties,l,h));return r},e.prototype._generateOneMoreBuffer=function(t){return new Br(this.properties,t._properties,t._batchSize)},e.prototype.uploadVertices=function(t,r,s,h,l,c){for(var E=0,_=0,T=0,D=0,g=0;g<s;++g){var O=t[r+g],I=O._texture,M=O.scale.x,C=O.scale.y,X=I.trim,ht=I.orig;X?(E=(_=X.x-O.anchor.x*ht.width)+X.width,T=(D=X.y-O.anchor.y*ht.height)+X.height):(E=ht.width*(1-O.anchor.x),_=ht.width*-O.anchor.x,T=ht.height*(1-O.anchor.y),D=ht.height*-O.anchor.y),h[c]=_*M,h[c+1]=D*C,h[c+l]=E*M,h[c+l+1]=D*C,h[c+2*l]=E*M,h[c+2*l+1]=T*C,h[c+3*l]=_*M,h[c+3*l+1]=T*C,c+=4*l}},e.prototype.uploadPosition=function(t,r,s,h,l,c){for(var E=0;E<s;E++){var _=t[r+E].position;h[c]=_.x,h[c+1]=_.y,h[c+l]=_.x,h[c+l+1]=_.y,h[c+2*l]=_.x,h[c+2*l+1]=_.y,h[c+3*l]=_.x,h[c+3*l+1]=_.y,c+=4*l}},e.prototype.uploadRotation=function(t,r,s,h,l,c){for(var E=0;E<s;E++){var _=t[r+E].rotation;h[c]=_,h[c+l]=_,h[c+2*l]=_,h[c+3*l]=_,c+=4*l}},e.prototype.uploadUvs=function(t,r,s,h,l,c){for(var E=0;E<s;++E){var _=t[r+E]._texture._uvs;_?(h[c]=_.x0,h[c+1]=_.y0,h[c+l]=_.x1,h[c+l+1]=_.y1,h[c+2*l]=_.x2,h[c+2*l+1]=_.y2,h[c+3*l]=_.x3,h[c+3*l+1]=_.y3,c+=4*l):(h[c]=0,h[c+1]=0,h[c+l]=0,h[c+l+1]=0,h[c+2*l]=0,h[c+2*l+1]=0,h[c+3*l]=0,h[c+3*l+1]=0,c+=4*l)}},e.prototype.uploadTint=function(t,r,s,h,l,c){for(var E=0;E<s;++E){var _=t[r+E],D=_.alpha,g=D<1&&_._texture.baseTexture.alphaMode>0?(0,y.rA)(_._tintRGB,D):_._tintRGB+(255*D<<24);h[c]=g,h[c+l]=g,h[c+2*l]=g,h[c+3*l]=g,c+=4*l}},e.prototype.destroy=function(){i.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e}(et.bO),Pe=(()=>(function(i){i.MITER="miter",i.BEVEL="bevel",i.ROUND="round"}(Pe||(Pe={})),Pe))(),De=(()=>(function(i){i.BUTT="butt",i.ROUND="round",i.SQUARE="square"}(De||(De={})),De))(),Le={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(i,e){if(void 0===e&&(e=20),!this.adaptive||!i||isNaN(i))return e;var t=Math.ceil(i/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}},Ei=function(){function i(){this.color=16777215,this.alpha=1,this.texture=et.xE.WHITE,this.matrix=null,this.visible=!1,this.reset()}return i.prototype.clone=function(){var e=new i;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},i.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=et.xE.WHITE,this.matrix=null,this.visible=!1},i.prototype.destroy=function(){this.texture=null,this.matrix=null},i}(),Fr=function(i,e){return(Fr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])})(i,e)};function f(i,e){function t(){this.constructor=i}Fr(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var n={build:function(i){i.points=i.shape.points.slice()},triangulate:function(i,e){var t=i.points,r=i.holes,s=e.points,h=e.indices;if(t.length>=6){for(var l=[],c=0;c<r.length;c++){var E=r[c];l.push(t.length/2),t=t.concat(E.points)}var _=(0,y.OT)(t,l,2);if(!_)return;var T=s.length/2;for(c=0;c<_.length;c+=3)h.push(_[c]+T),h.push(_[c+1]+T),h.push(_[c+2]+T);for(c=0;c<t.length;c++)s.push(t[c])}}},a={build:function(i){var h,l,e=i.shape,t=i.points,r=e.x,s=e.y;if(t.length=0,i.type===Y.HS.CIRC)h=e.radius,l=e.radius;else{var c=i.shape;h=c.width,l=c.height}if(0!==h&&0!==l){var E=Math.floor(30*Math.sqrt(e.radius))||Math.floor(15*Math.sqrt(h+l));E/=2.3;for(var _=2*Math.PI/E,T=0;T<E-.5;T++)t.push(r+Math.sin(-_*T)*h,s+Math.cos(-_*T)*l);t.push(t[0],t[1])}},triangulate:function(i,e){var t=i.points,r=e.points,s=e.indices,h=r.length/2,l=h,c=i.shape,E=i.matrix,_=c.x,T=c.y;r.push(i.matrix?E.a*_+E.c*T+E.tx:_,i.matrix?E.b*_+E.d*T+E.ty:T);for(var D=0;D<t.length;D+=2)r.push(t[D],t[D+1]),s.push(h++,l,h)}};function u(i,e,t){return i+(e-i)*t}function d(i,e,t,r,s,h,l){void 0===l&&(l=[]);for(var E=l,_=0,T=0,D=0,g=0,O=0,I=0,M=0,C=0;M<=20;++M)_=u(i,t,C=M/20),T=u(e,r,C),D=u(t,s,C),g=u(r,h,C),O=u(_,D,C),I=u(T,g,C),(0!==M||E[E.length-2]!==O||E[E.length-1]!==I)&&E.push(O,I);return E}var p={build:function(i){var e=i.shape,t=i.points,r=e.x,s=e.y,h=e.width,l=e.height,c=Math.max(0,Math.min(e.radius,Math.min(h,l)/2));t.length=0,c?(d(r,s+c,r,s,r+c,s,t),d(r+h-c,s,r+h,s,r+h,s+c,t),d(r+h,s+l-c,r+h,s+l,r+h-c,s+l,t),d(r+c,s+l,r,s+l,r,s+l-c,t)):t.push(r,s,r+h,s,r+h,s+l,r,s+l)},triangulate:function(i,e){for(var t=i.points,r=e.points,s=e.indices,h=r.length/2,l=(0,y.OT)(t,null,2),c=0,E=l.length;c<E;c+=3)s.push(l[c]+h),s.push(l[c+1]+h),s.push(l[c+2]+h);for(c=0,E=t.length;c<E;c++)r.push(t[c],t[++c])}};function S(i,e,t,r,s,h,l,c){var g,O;l?(g=r,O=-t):(g=-r,O=t);var C=i+t*h+g,X=e+r*h+O;return c.push(i-t*s+g,e-r*s+O),c.push(C,X),2}function P(i,e,t,r,s,h,l,c){var E=t-i,_=r-e,T=Math.atan2(E,_),D=Math.atan2(s-i,h-e);c&&T<D?T+=2*Math.PI:!c&&T>D&&(D+=2*Math.PI);var g=T,O=D-T,I=Math.abs(O),M=Math.sqrt(E*E+_*_),C=1+(15*I*Math.sqrt(M)/Math.PI>>0),X=O/C;if(g+=X,c){l.push(i,e),l.push(t,r);for(var ht=1,_t=g;ht<C;ht++,_t+=X)l.push(i,e),l.push(i+Math.sin(_t)*M,e+Math.cos(_t)*M);l.push(i,e),l.push(s,h)}else{for(l.push(t,r),l.push(i,e),ht=1,_t=g;ht<C;ht++,_t+=X)l.push(i+Math.sin(_t)*M,e+Math.cos(_t)*M),l.push(i,e);l.push(s,h),l.push(i,e)}return 2*C}function ot(i,e){i.lineStyle.native?function(i,e){var t=0,r=i.shape,s=i.points||r.points,h=r.type!==Y.HS.POLY||r.closeStroke;if(0!==s.length){var l=e.points,c=e.indices,E=s.length/2,_=l.length/2,T=_;for(l.push(s[0],s[1]),t=1;t<E;t++)l.push(s[2*t],s[2*t+1]),c.push(T,T+1),T++;h&&c.push(T,_)}}(i,e):function(i,e){var t=i.shape,r=i.points||t.points.slice(),s=e.closePointEps;if(0!==r.length){var h=i.lineStyle,l=new Y.E9(r[0],r[1]),c=new Y.E9(r[r.length-2],r[r.length-1]),E=t.type!==Y.HS.POLY||t.closeStroke,_=Math.abs(l.x-c.x)<s&&Math.abs(l.y-c.y)<s;if(E){r=r.slice(),_&&(r.pop(),r.pop(),c.set(r[r.length-2],r[r.length-1]));var T=.5*(l.x+c.x),D=.5*(c.y+l.y);r.unshift(T,D),r.push(T,D)}var g=e.points,O=r.length/2,I=r.length,M=g.length/2,C=h.width/2,X=C*C,ht=h.miterLimit*h.miterLimit,_t=r[0],St=r[1],it=r[2],z=r[3],Ot=0,qt=0,ft=-(St-z),yt=_t-it,Vt=0,Bt=0,ee=Math.sqrt(ft*ft+yt*yt);ft/=ee,yt/=ee,ft*=C,yt*=C;var me=h.alignment,Nt=2*(1-me),Mt=2*me;E||(h.cap===De.ROUND?I+=P(_t-ft*(Nt-Mt)*.5,St-yt*(Nt-Mt)*.5,_t-ft*Nt,St-yt*Nt,_t+ft*Mt,St+yt*Mt,g,!0)+2:h.cap===De.SQUARE&&(I+=S(_t,St,ft,yt,Nt,Mt,!0,g))),g.push(_t-ft*Nt,St-yt*Nt),g.push(_t+ft*Mt,St+yt*Mt);for(var Zt=1;Zt<O-1;++Zt){Ot=r[2*(Zt+1)],qt=r[2*(Zt+1)+1],ft=-((St=r[2*(Zt-1)+1])-(z=r[2*Zt+1])),yt=(_t=r[2*(Zt-1)])-(it=r[2*Zt]),ft/=ee=Math.sqrt(ft*ft+yt*yt),yt/=ee,ft*=C,yt*=C,Vt=-(z-qt),Bt=it-Ot,Vt/=ee=Math.sqrt(Vt*Vt+Bt*Bt),Bt/=ee,Vt*=C,Bt*=C;var Te=it-_t,Ae=St-z,Wt=it-Ot,Ri=qt-z,xr=Ae*Wt-Ri*Te,hr=xr<0;if(Math.abs(xr)<.1)g.push(it-ft*Nt,z-yt*Nt),g.push(it+ft*Mt,z+yt*Mt);else{var nn=(-ft+_t)*(-yt+z)-(-ft+it)*(-yt+St),Ai=(-Vt+Ot)*(-Bt+z)-(-Vt+it)*(-Bt+qt),ze=(Te*Ai-Wt*nn)/xr,Oi=(Ri*nn-Ae*Ai)/xr,xi=(ze-it)*(ze-it)+(Oi-z)*(Oi-z),Xe=it+(ze-it)*Nt,ke=z+(Oi-z)*Nt,Fe=it-(ze-it)*Mt,Ue=z-(Oi-z)*Mt,Yr=hr?Nt:Mt;xi<=Math.min(Te*Te+Ae*Ae,Wt*Wt+Ri*Ri)+Yr*Yr*X?h.join===Pe.BEVEL||xi/X>ht?(hr?(g.push(Xe,ke),g.push(it+ft*Mt,z+yt*Mt),g.push(Xe,ke),g.push(it+Vt*Mt,z+Bt*Mt)):(g.push(it-ft*Nt,z-yt*Nt),g.push(Fe,Ue),g.push(it-Vt*Nt,z-Bt*Nt),g.push(Fe,Ue)),I+=2):h.join===Pe.ROUND?hr?(g.push(Xe,ke),g.push(it+ft*Mt,z+yt*Mt),I+=P(it,z,it+ft*Mt,z+yt*Mt,it+Vt*Mt,z+Bt*Mt,g,!0)+4,g.push(Xe,ke),g.push(it+Vt*Mt,z+Bt*Mt)):(g.push(it-ft*Nt,z-yt*Nt),g.push(Fe,Ue),I+=P(it,z,it-ft*Nt,z-yt*Nt,it-Vt*Nt,z-Bt*Nt,g,!1)+4,g.push(it-Vt*Nt,z-Bt*Nt),g.push(Fe,Ue)):(g.push(Xe,ke),g.push(Fe,Ue)):(g.push(it-ft*Nt,z-yt*Nt),g.push(it+ft*Mt,z+yt*Mt),h.join===Pe.BEVEL||xi/X>ht||(h.join===Pe.ROUND?I+=hr?P(it,z,it+ft*Mt,z+yt*Mt,it+Vt*Mt,z+Bt*Mt,g,!0)+2:P(it,z,it-ft*Nt,z-yt*Nt,it-Vt*Nt,z-Bt*Nt,g,!1)+2:(hr?(g.push(Fe,Ue),g.push(Fe,Ue)):(g.push(Xe,ke),g.push(Xe,ke)),I+=2)),g.push(it-Vt*Nt,z-Bt*Nt),g.push(it+Vt*Mt,z+Bt*Mt),I+=2)}}ft=-((St=r[2*(O-2)+1])-(z=r[2*(O-1)+1])),yt=(_t=r[2*(O-2)])-(it=r[2*(O-1)]),ft/=ee=Math.sqrt(ft*ft+yt*yt),yt/=ee,g.push(it-(ft*=C)*Nt,z-(yt*=C)*Nt),g.push(it+ft*Mt,z+yt*Mt),E||(h.cap===De.ROUND?I+=P(it-ft*(Nt-Mt)*.5,z-yt*(Nt-Mt)*.5,it-ft*Nt,z-yt*Nt,it+ft*Mt,z+yt*Mt,g,!1)+2:h.cap===De.SQUARE&&(I+=S(it,z,ft,yt,Nt,Mt,!1,g)));var qe=e.indices,Pi=Le.epsilon*Le.epsilon;for(Zt=M;Zt<I+M-2;++Zt)_t=g[2*Zt],St=g[2*Zt+1],it=g[2*(Zt+1)],z=g[2*(Zt+1)+1],Ot=g[2*(Zt+2)],qt=g[2*(Zt+2)+1],!(Math.abs(_t*(z-qt)+it*(qt-St)+Ot*(St-z))<Pi)&&qe.push(Zt,Zt+1,Zt+2)}}(i,e)}var It,dt=function(){function i(){}return i.curveTo=function(e,t,r,s,h,l){var _=l[l.length-1]-t,T=l[l.length-2]-e,D=s-t,g=r-e,O=Math.abs(_*g-T*D);if(O<1e-8||0===h)return(l[l.length-2]!==e||l[l.length-1]!==t)&&l.push(e,t),null;var I=_*_+T*T,M=D*D+g*g,C=_*D+T*g,X=h*Math.sqrt(I)/O,ht=h*Math.sqrt(M)/O,_t=X*C/I,St=ht*C/M,it=X*g+ht*T,z=X*D+ht*_,ft=g*(X+St),yt=D*(X+St);return{cx:it+e,cy:z+t,radius:h,startAngle:Math.atan2(_*(ht+_t)-z,T*(ht+_t)-it),endAngle:Math.atan2(yt-z,ft-it),anticlockwise:T*D>g*_}},i.arc=function(e,t,r,s,h,l,c,E,_){for(var T=c-l,D=Le._segmentsCount(Math.abs(T)*h,40*Math.ceil(Math.abs(T)/Y._b)),g=T/(2*D),O=2*g,I=Math.cos(g),M=Math.sin(g),C=D-1,X=C%1/C,ht=0;ht<=C;++ht){var St=g+l+O*(ht+X*ht),it=Math.cos(St),z=-Math.sin(St);_.push((I*it+M*z)*h+r,(I*-z+M*it)*h+s)}},i}(),Dt=function(){function i(){}return i.curveLength=function(e,t,r,s,h,l,c,E){for(var T=0,D=0,g=0,O=0,I=0,M=0,C=0,X=0,ht=0,_t=0,St=0,it=e,z=t,Ot=1;Ot<=10;++Ot)_t=it-(X=(C=(M=(I=1-(D=Ot/10))*I)*I)*e+3*M*D*r+3*I*(g=D*D)*h+(O=g*D)*c),St=z-(ht=C*t+3*M*D*s+3*I*g*l+O*E),it=X,z=ht,T+=Math.sqrt(_t*_t+St*St);return T},i.curveTo=function(e,t,r,s,h,l,c){var E=c[c.length-2],_=c[c.length-1];c.length-=2;var T=Le._segmentsCount(i.curveLength(E,_,e,t,r,s,h,l)),D=0,g=0,O=0,I=0,M=0;c.push(E,_);for(var C=1,X=0;C<=T;++C)c.push((O=(g=(D=1-(X=C/T))*D)*D)*E+3*g*X*e+3*D*(I=X*X)*r+(M=I*X)*h,O*_+3*g*X*t+3*D*I*s+M*l)},i}(),Gt=function(){function i(){}return i.curveLength=function(e,t,r,s,h,l){var c=e-2*r+h,E=t-2*s+l,_=2*r-2*e,T=2*s-2*t,D=4*(c*c+E*E),g=4*(c*_+E*T),O=_*_+T*T,I=2*Math.sqrt(D+g+O),M=Math.sqrt(D),C=2*D*M,X=2*Math.sqrt(O),ht=g/M;return(C*I+M*g*(I-X)+(4*O*D-g*g)*Math.log((2*M+ht+I)/(ht+X)))/(4*C)},i.curveTo=function(e,t,r,s,h){for(var l=h[h.length-2],c=h[h.length-1],E=Le._segmentsCount(i.curveLength(l,c,e,t,r,s)),_=0,T=0,D=1;D<=E;++D){var g=D/E;h.push((_=l+(e-l)*g)+(e+(r-e)*g-_)*g,(T=c+(t-c)*g)+(t+(s-t)*g-T)*g)}},i}(),kt=function(){function i(){this.reset()}return i.prototype.begin=function(e,t,r){this.reset(),this.style=e,this.start=t,this.attribStart=r},i.prototype.end=function(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start},i.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},i}(),ne=((It={})[Y.HS.POLY]=n,It[Y.HS.CIRC]=a,It[Y.HS.ELIP]=a,It[Y.HS.RECT]={build:function(i){var e=i.shape,t=e.x,r=e.y,s=e.width,h=e.height,l=i.points;l.length=0,l.push(t,r,t+s,r,t+s,r+h,t,r+h)},triangulate:function(i,e){var t=i.points,r=e.points,s=r.length/2;r.push(t[0],t[1],t[2],t[3],t[6],t[7],t[4],t[5]),e.indices.push(s,s+1,s+2,s+1,s+2,s+3)}},It[Y.HS.RREC]=p,It),ce=[],ve=[];function Ur(i){for(var e=i.points,t=0,r=0;r<e.length-2;r+=2)t+=(e[r+2]-e[r])*(e[r+3]+e[r+1]);return t>0}var Or=function(){function i(e,t,r,s){void 0===t&&(t=null),void 0===r&&(r=null),void 0===s&&(s=null),this.points=[],this.holes=[],this.shape=e,this.lineStyle=r,this.fillStyle=t,this.matrix=s,this.type=e.type}return i.prototype.clone=function(){return new i(this.shape,this.fillStyle,this.lineStyle,this.matrix)},i.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},i}(),Ce=new Y.E9,mi=new Et,Ti=function(i){function e(){var t=i.call(this)||this;return t.closePointEps=1e-4,t.boundsPadding=0,t.uvsFloat32=null,t.indicesUint16=null,t.batchable=!1,t.points=[],t.colors=[],t.uvs=[],t.indices=[],t.textureIds=[],t.graphicsData=[],t.drawCalls=[],t.batchDirty=-1,t.batches=[],t.dirty=0,t.cacheDirty=-1,t.clearDirty=0,t.shapeIndex=0,t._bounds=new Et,t.boundsDirty=-1,t}return f(e,i),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),ve.push(this.drawCalls[t]);for(this.drawCalls.length=0,t=0;t<this.batches.length;t++){var r=this.batches[t];r.reset(),ce.push(r)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(t,r,s,h){void 0===r&&(r=null),void 0===s&&(s=null),void 0===h&&(h=null);var l=new Or(t,r,s,h);return this.graphicsData.push(l),this.dirty++,this},e.prototype.drawHole=function(t,r){if(void 0===r&&(r=null),!this.graphicsData.length)return null;var s=new Or(t,null,null,r),h=this.graphicsData[this.graphicsData.length-1];return s.lineStyle=h.lineStyle,h.holes.push(s),this.dirty++,this},e.prototype.destroy=function(){i.prototype.destroy.call(this);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(t){for(var r=this.graphicsData,s=0;s<r.length;++s){var h=r[s];if(h.fillStyle.visible&&h.shape&&(h.matrix?h.matrix.applyInverse(t,Ce):Ce.copyFrom(t),h.shape.contains(Ce.x,Ce.y))){var l=!1;if(h.holes)for(var c=0;c<h.holes.length;c++)if(h.holes[c].shape.contains(Ce.x,Ce.y)){l=!0;break}if(!l)return!0}}return!1},e.prototype.updateBatches=function(t){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var r=this.uvs,s=this.graphicsData,h=null,l=null;this.batches.length>0&&(l=(h=this.batches[this.batches.length-1]).style);for(var c=this.shapeIndex;c<s.length;c++){this.shapeIndex++;var E=s[c],_=E.fillStyle,T=E.lineStyle;ne[E.type].build(E),E.matrix&&this.transformPoints(E.points,E.matrix);for(var g=0;g<2;g++){var O=0===g?_:T;if(O.visible){var M=this.indices.length,C=this.points.length/2;O.texture.baseTexture.wrapMode=Yt.Nt.REPEAT,0===g?this.processFill(E):this.processLine(E);var X=this.points.length/2-C;0!==X&&(h&&!this._compareStyles(l,O)&&(h.end(M,C),h=null),h||((h=ce.pop()||new kt).begin(O,M,C),this.batches.push(h),l=O),this.addUvs(this.points,r,O.texture,C,X,O.matrix))}}}var _t=this.points.length/2;if(h&&h.end(this.indices.length,_t),0===this.batches.length)return void(this.batchable=!0);this.indicesUint16&&this.indices.length===this.indicesUint16.length?this.indicesUint16.set(this.indices):this.indicesUint16=_t>65535&&t?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}}else this.batchable=!0},e.prototype._compareStyles=function(t,r){return!(!t||!r||t.texture.baseTexture!==r.texture.baseTexture||t.color+t.alpha!==r.color+r.alpha||!!t.native!=!!r.native)},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,r=this.graphicsData.length;t<r;t++){var s=this.graphicsData[t],h=s.fillStyle,l=s.lineStyle;if(h&&!h.texture.baseTexture.valid||l&&!l.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,r=0,s=t.length;r<s;r++)for(var h=t[r],l=0;l<h.size;l++){var c=h.start+l;this.indicesUint16[c]=this.indicesUint16[c]-h.attribStart}},e.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var t=this.batches,r=0;r<t.length;r++)if(t[r].style.native)return!1;return this.points.length<2*e.BATCHABLE_SIZE},e.prototype.buildDrawCalls=function(){for(var t=++et.VL._globalBatch,r=0;r<this.drawCalls.length;r++)this.drawCalls[r].texArray.clear(),ve.push(this.drawCalls[r]);this.drawCalls.length=0;var s=this.colors,h=this.textureIds,l=ve.pop();l||((l=new et.a$).texArray=new et.Ie),l.texArray.count=0,l.start=0,l.size=0,l.type=Yt.lg.TRIANGLES;var c=0,E=null,_=0,T=!1,D=Yt.lg.TRIANGLES,g=0;for(this.drawCalls.push(l),r=0;r<this.batches.length;r++){var O=this.batches[r],M=O.style,C=M.texture.baseTexture;T!==!!M.native&&(D=(T=!!M.native)?Yt.lg.LINES:Yt.lg.TRIANGLES,E=null,c=8,t++),E!==C&&(E=C,C._batchEnabled!==t&&(8===c&&(t++,c=0,l.size>0&&((l=ve.pop())||((l=new et.a$).texArray=new et.Ie),this.drawCalls.push(l)),l.start=g,l.size=0,l.texArray.count=0,l.type=D),C.touched=1,C._batchEnabled=t,C._batchLocation=c,C.wrapMode=Yt.Nt.REPEAT,l.texArray.elements[l.texArray.count++]=C,c++)),l.size+=O.size,g+=O.size,_=C._batchLocation,this.addColors(s,M.color,M.alpha,O.attribSize,O.attribStart),this.addTextureIds(h,_,O.attribSize,O.attribStart)}et.VL._globalBatch=t,this.packAttributes()},e.prototype.packAttributes=function(){for(var t=this.points,r=this.uvs,s=this.colors,h=this.textureIds,l=new ArrayBuffer(3*t.length*4),c=new Float32Array(l),E=new Uint32Array(l),_=0,T=0;T<t.length/2;T++)c[_++]=t[2*T],c[_++]=t[2*T+1],c[_++]=r[2*T],c[_++]=r[2*T+1],E[_++]=s[T],c[_++]=h[T];this._buffer.update(l),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(t){t.holes.length?(this.processHoles(t.holes),n.triangulate(t,this)):ne[t.type].triangulate(t,this)},e.prototype.processLine=function(t){ot(t,this);for(var r=0;r<t.holes.length;r++)ot(t.holes[r],this)},e.prototype.processHoles=function(t){for(var r=0;r<t.length;r++){var s=t[r];ne[s.type].build(s),s.matrix&&this.transformPoints(s.points,s.matrix)}},e.prototype.calculateBounds=function(){var t=this._bounds,r=mi,s=Y.y3.IDENTITY;this._bounds.clear(),r.clear();for(var h=0;h<this.graphicsData.length;h++){var l=this.graphicsData[h],c=l.shape,E=l.type,_=l.lineStyle,T=l.matrix||Y.y3.IDENTITY,D=0;if(_&&_.visible){var g=_.alignment;D=_.width,E===Y.HS.POLY?Ur(c)?D*=1-g:D*=g:D*=Math.max(0,g)}s!==T&&(r.isEmpty()||(t.addBoundsMatrix(r,s),r.clear()),s=T),E===Y.HS.RECT||E===Y.HS.RREC?r.addFramePad(c.x,c.y,c.x+c.width,c.y+c.height,D,D):E===Y.HS.CIRC?r.addFramePad(c.x,c.y,c.x,c.y,c.radius+D,c.radius+D):E===Y.HS.ELIP?r.addFramePad(c.x,c.y,c.x,c.y,c.width+D,c.height+D):t.addVerticesMatrix(s,c.points,0,c.points.length,D,D)}r.isEmpty()||t.addBoundsMatrix(r,s),t.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(t,r){for(var s=0;s<t.length/2;s++){var h=t[2*s],l=t[2*s+1];t[2*s]=r.a*h+r.c*l+r.tx,t[2*s+1]=r.b*h+r.d*l+r.ty}},e.prototype.addColors=function(t,r,s,h,l){void 0===l&&(l=0);var E=(0,y.rA)((r>>16)+(65280&r)+((255&r)<<16),s);t.length=Math.max(t.length,l+h);for(var _=0;_<h;_++)t[l+_]=E},e.prototype.addTextureIds=function(t,r,s,h){void 0===h&&(h=0),t.length=Math.max(t.length,h+s);for(var l=0;l<s;l++)t[h+l]=r},e.prototype.addUvs=function(t,r,s,h,l,c){void 0===c&&(c=null);for(var E=0,_=r.length,T=s.frame;E<l;){var D=t[2*(h+E)],g=t[2*(h+E)+1];if(c){var O=c.a*D+c.c*g+c.tx;g=c.b*D+c.d*g+c.ty,D=O}E++,r.push(D/T.width,g/T.height)}var I=s.baseTexture;(T.width<I.width||T.height<I.height)&&this.adjustUvs(r,s,_,l)},e.prototype.adjustUvs=function(t,r,s,h){for(var l=r.baseTexture,c=1e-6,E=s+2*h,_=r.frame,T=_.width/l.width,D=_.height/l.height,g=_.x/_.width,O=_.y/_.height,I=Math.floor(t[s]+c),M=Math.floor(t[s+1]+c),C=s+2;C<E;C+=2)I=Math.min(I,Math.floor(t[C]+c)),M=Math.min(M,Math.floor(t[C+1]+c));for(g-=I,O-=M,C=s;C<E;C+=2)t[C]=(t[C]+g)*T,t[C+1]=(t[C+1]+O)*D},e.BATCHABLE_SIZE=100,e}(et.JZ),_n=function(i){function e(){var t=null!==i&&i.apply(this,arguments)||this;return t.width=0,t.alignment=.5,t.native=!1,t.cap=De.BUTT,t.join=Pe.MITER,t.miterLimit=10,t}return f(e,i),e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},e.prototype.reset=function(){i.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e}(Ei),pn=new Float32Array(3),K={},tt=function(i){function e(t){void 0===t&&(t=null);var r=i.call(this)||this;return r.shader=null,r.pluginName="batch",r.currentPath=null,r.batches=[],r.batchTint=-1,r.batchDirty=-1,r.vertexData=null,r._fillStyle=new Ei,r._lineStyle=new _n,r._matrix=null,r._holeMode=!1,r.state=et.ZM.for2d(),r._geometry=t||new Ti,r._geometry.refCount++,r._transformID=-1,r.tint=16777215,r.blendMode=Yt.T$.NORMAL,r}return f(e,i),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(t,r,s,h,l){return void 0===t&&(t=null),void 0===r&&(r=0),void 0===s&&(s=1),void 0===h&&(h=.5),void 0===l&&(l=!1),"number"==typeof t&&(t={width:t,color:r,alpha:s,alignment:h,native:l}),this.lineTextureStyle(t)},e.prototype.lineTextureStyle=function(t){t=Object.assign({width:0,texture:et.xE.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:De.BUTT,join:Pe.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var r=t.width>0&&t.alpha>0;return r?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:r},t)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,r=this.currentPath.points.length;r>2&&(this.drawShape(this.currentPath),this.currentPath=new Y.mg,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[r-2],t[r-1]))}else this.currentPath=new Y.mg,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(t,r){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=r,this},e.prototype.lineTo=function(t,r){this.currentPath||this.moveTo(0,0);var s=this.currentPath.points;return(s[s.length-2]!==t||s[s.length-1]!==r)&&s.push(t,r),this},e.prototype._initCurve=function(t,r){void 0===t&&(t=0),void 0===r&&(r=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,r]):this.moveTo(t,r)},e.prototype.quadraticCurveTo=function(t,r,s,h){this._initCurve();var l=this.currentPath.points;return 0===l.length&&this.moveTo(0,0),Gt.curveTo(t,r,s,h,l),this},e.prototype.bezierCurveTo=function(t,r,s,h,l,c){return this._initCurve(),Dt.curveTo(t,r,s,h,l,c,this.currentPath.points),this},e.prototype.arcTo=function(t,r,s,h,l){this._initCurve(t,r);var E=dt.curveTo(t,r,s,h,l,this.currentPath.points);return E&&this.arc(E.cx,E.cy,E.radius,E.startAngle,E.endAngle,E.anticlockwise),this},e.prototype.arc=function(t,r,s,h,l,c){if(void 0===c&&(c=!1),h===l)return this;if(!c&&l<=h?l+=Y._b:c&&h<=l&&(h+=Y._b),0==l-h)return this;var _=t+Math.cos(h)*s,T=r+Math.sin(h)*s,D=this._geometry.closePointEps,g=this.currentPath?this.currentPath.points:null;if(g){var O=Math.abs(g[g.length-2]-_),I=Math.abs(g[g.length-1]-T);O<D&&I<D||g.push(_,T)}else this.moveTo(_,T),g=this.currentPath.points;return dt.arc(_,T,t,r,s,h,l,c,g),this},e.prototype.beginFill=function(t,r){return void 0===t&&(t=0),void 0===r&&(r=1),this.beginTextureFill({texture:et.xE.WHITE,color:t,alpha:r})},e.prototype.beginTextureFill=function(t){t=Object.assign({texture:et.xE.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var r=t.alpha>0;return r?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:r},t)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(t,r,s,h){return this.drawShape(new Y.Ae(t,r,s,h))},e.prototype.drawRoundedRect=function(t,r,s,h,l){return this.drawShape(new Y.c9(t,r,s,h,l))},e.prototype.drawCircle=function(t,r,s){return this.drawShape(new Y.Cd(t,r,s))},e.prototype.drawEllipse=function(t,r,s,h){return this.drawShape(new Y.Pj(t,r,s,h))},e.prototype.drawPolygon=function(){for(var t=arguments,r=[],s=0;s<arguments.length;s++)r[s]=t[s];var h,l=!0,c=r[0];c.points?(l=c.closeStroke,h=c.points):h=Array.isArray(r[0])?r[0]:r;var E=new Y.mg(h);return E.closeStroke=l,this.drawShape(E),this},e.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return!(1!==t.length||t[0].shape.type!==Y.HS.RECT||t[0].holes.length||t[0].lineStyle.visible&&t[0].lineStyle.width)},e.prototype._render=function(t){this.finishPoly();var r=this._geometry;r.updateBatches(t.context.supports.uint32Indices),r.batchable?(this.batchDirty!==r.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},e.prototype._populateBatches=function(){var t=this._geometry,r=this.blendMode,s=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=s,this.vertexData=new Float32Array(t.points);for(var h=0;h<s;h++){var l=t.batches[h],c=l.style.color,E=new Float32Array(this.vertexData.buffer,4*l.attribStart*2,2*l.attribSize),_=new Float32Array(t.uvsFloat32.buffer,4*l.attribStart*2,2*l.attribSize),D={vertexData:E,blendMode:r,indices:new Uint16Array(t.indicesUint16.buffer,2*l.start,l.size),uvs:_,_batchRGB:(0,y.wK)(c),_tintRGB:c,_texture:l.style.texture,alpha:l.style.alpha,worldAlpha:1};this.batches[h]=D}},e.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var r=0,s=this.batches.length;r<s;r++){var h=this.batches[r];h.worldAlpha=this.worldAlpha*h.alpha,t.plugins[this.pluginName].render(h)}}},e.prototype._renderDirect=function(t){var r=this._resolveDirectShader(t),s=this._geometry,h=this.tint,l=this.worldAlpha,c=r.uniforms,E=s.drawCalls;c.translationMatrix=this.transform.worldTransform,c.tint[0]=(h>>16&255)/255*l,c.tint[1]=(h>>8&255)/255*l,c.tint[2]=(255&h)/255*l,c.tint[3]=l,t.shader.bind(r),t.geometry.bind(s,r),t.state.set(this.state);for(var _=0,T=E.length;_<T;_++)this._renderDrawCallDirect(t,s.drawCalls[_])},e.prototype._renderDrawCallDirect=function(t,r){for(var s=r.texArray,h=r.type,l=r.size,c=r.start,E=s.count,_=0;_<E;_++)t.texture.bind(s.elements[_],_);t.geometry.draw(h,l,c)},e.prototype._resolveDirectShader=function(t){var r=this.shader,s=this.pluginName;if(!r){if(!K[s]){for(var h=t.plugins.batch.MAX_TEXTURES,l=new Int32Array(h),c=0;c<h;c++)l[c]=c;var E={tint:new Float32Array([1,1,1,1]),translationMatrix:new Y.y3,default:et.oo.from({uSamplers:l},!0)};K[s]=new et.ex(t.plugins[s]._shader.program,E)}r=K[s]}return r},e.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(t.graphicsData.length){var r=t.bounds;this._bounds.addFrame(this.transform,r.minX,r.minY,r.maxX,r.maxY)}},e.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=(0,y.wK)(this.tint,pn),r=0;r<this.batches.length;r++){var s=this.batches[r],h=s._batchRGB,_=(t[0]*h[0]*255<<16)+(t[1]*h[1]*255<<8)+(0|t[2]*h[2]*255);s._tintRGB=(_>>16)+(65280&_)+((255&_)<<16)}}},e.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var r=this.transform.worldTransform,s=r.a,h=r.b,l=r.c,c=r.d,E=r.tx,_=r.ty,T=this._geometry.points,D=this.vertexData,g=0,O=0;O<T.length;O+=2){var I=T[O],M=T[O+1];D[g++]=s*I+l*M+E,D[g++]=c*M+h*I+_}}},e.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this},e.prototype.setMatrix=function(t){return this._matrix=t,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(t){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,i.prototype.destroy.call(this,t)},e._TEMP_POINT=new Y.E9,e}(fe),Lt=function(i,e){return(Lt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])})(i,e)},le=new Y.E9,Gr=new Uint16Array([0,1,2,0,2,3]),te=function(i){function e(t){var r=i.call(this)||this;return r._anchor=new Y.AB(r._onAnchorUpdate,r,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),r._texture=null,r._width=0,r._height=0,r._tint=null,r._tintRGB=null,r.tint=16777215,r.blendMode=Yt.T$.NORMAL,r._cachedTint=16777215,r.uvs=null,r.texture=t||et.xE.EMPTY,r.vertexData=new Float32Array(8),r.vertexTrimmedData=null,r._transformID=-1,r._textureID=-1,r._transformTrimmedID=-1,r._textureTrimmedID=-1,r.indices=Gr,r.pluginName="batch",r.isSprite=!0,r._roundPixels=j.X.ROUND_PIXELS,r}return function(i,e){function t(){this.constructor=i}Lt(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,i),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=(0,y.Xx)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,y.Xx)(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var r=this.transform.worldTransform,s=r.a,h=r.b,l=r.c,c=r.d,E=r.tx,_=r.ty,T=this.vertexData,D=t.trim,g=t.orig,O=this._anchor,I=0,M=0,C=0,X=0;if(D?(I=(M=D.x-O._x*g.width)+D.width,C=(X=D.y-O._y*g.height)+D.height):(I=(M=-O._x*g.width)+g.width,C=(X=-O._y*g.height)+g.height),T[0]=s*M+l*X+E,T[1]=c*X+h*M+_,T[2]=s*I+l*X+E,T[3]=c*X+h*I+_,T[4]=s*I+l*C+E,T[5]=c*C+h*I+_,T[6]=s*M+l*C+E,T[7]=c*C+h*M+_,this._roundPixels)for(var ht=j.X.RESOLUTION,_t=0;_t<T.length;++_t)T[_t]=Math.round((T[_t]*ht|0)/ht)}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var r=this.vertexTrimmedData,s=this._texture.orig,h=this._anchor,l=this.transform.worldTransform,c=l.a,E=l.b,_=l.c,T=l.d,D=l.tx,g=l.ty,O=-h._x*s.width,I=O+s.width,M=-h._y*s.height,C=M+s.height;r[0]=c*O+_*M+D,r[1]=T*M+E*O+g,r[2]=c*I+_*M+D,r[3]=T*M+E*I+g,r[4]=c*I+_*C+D,r[5]=T*C+E*I+g,r[6]=c*O+_*C+D,r[7]=T*C+E*O+g},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,r=this._texture.orig;!t||t.width===r.width&&t.height===r.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Y.Ae),t=this._localBoundsRect),this._bounds.getRectangle(t)):i.prototype.getLocalBounds.call(this,t)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,le);var r=this._texture.orig.width,s=this._texture.orig.height,h=-r*this.anchor.x,l=0;return!!(le.x>=h&&le.x<h+r&&(l=-s*this.anchor.y,le.y>=l&&le.y<l+s))},e.prototype.destroy=function(t){i.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,("boolean"==typeof t?t:t&&t.texture)&&this._texture.destroy(!!("boolean"==typeof t?t:t&&t.baseTexture)),this._texture=null},e.from=function(t,r){return new e(t instanceof et.xE?t:et.xE.from(t,r))},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var r=(0,y.Xx)(this.scale.x)||1;this.scale.x=r*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var r=(0,y.Xx)(this.scale.y)||1;this.scale.y=r*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||et.xE.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(fe),sr=function(i,e){return(sr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])})(i,e)},pe=(()=>(function(i){i[i.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",i[i.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"}(pe||(pe={})),pe))(),Re={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:pe.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},Hr=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],or=function(){function i(e){this.styleID=0,this.reset(),En(this,e,e)}return i.prototype.clone=function(){var e={};return En(e,this,Re),new i(e)},i.prototype.reset=function(){En(this,Re,Re)},Object.defineProperty(i.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"breakWords",{get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(e){var t=vn(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fill",{get:function(){return this._fill},set:function(e){var t=vn(e);this._fill!==t&&(this._fill=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(e){(function(i,e){if(!Array.isArray(i)||!Array.isArray(e)||i.length!==e.length)return!1;for(var t=0;t<i.length;++t)if(i[t]!==e[t])return!1;return!0})(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leading",{get:function(){return this._leading},set:function(e){this._leading!==e&&(this._leading=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"padding",{get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"stroke",{get:function(){return this._stroke},set:function(e){var t=vn(e);this._stroke!==t&&(this._stroke=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"trim",{get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)},enumerable:!1,configurable:!0}),i.prototype.toFontString=function(){var e="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(var r=t.length-1;r>=0;r--){var s=t[r].trim();!/([\"\'])[^\'\"]+\1/.test(s)&&Hr.indexOf(s)<0&&(s='"'+s+'"'),t[r]=s}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+e+" "+t.join(",")},i}();function an(i){return"number"==typeof i?(0,y.XN)(i):("string"==typeof i&&0===i.indexOf("0x")&&(i=i.replace("0x","#")),i)}function vn(i){if(Array.isArray(i)){for(var e=0;e<i.length;++e)i[e]=an(i[e]);return i}return an(i)}function En(i,e,t){for(var r in t)i[r]=Array.isArray(e[r])?e[r].slice():e[r]}var Be=function(){function i(e,t,r,s,h,l,c,E,_){this.text=e,this.style=t,this.width=r,this.height=s,this.lines=h,this.lineWidths=l,this.lineHeight=c,this.maxLineWidth=E,this.fontProperties=_}return i.measureText=function(e,t,r,s){void 0===s&&(s=i._canvas),r=null==r?t.wordWrap:r;var h=t.toFontString(),l=i.measureFont(h);0===l.fontSize&&(l.fontSize=t.fontSize,l.ascent=t.fontSize);var c=s.getContext("2d");c.font=h;for(var _=(r?i.wordWrap(e,t,s):e).split(/(?:\r\n|\r|\n)/),T=new Array(_.length),D=0,g=0;g<_.length;g++){var O=c.measureText(_[g]).width+(_[g].length-1)*t.letterSpacing;T[g]=O,D=Math.max(D,O)}var I=D+t.strokeThickness;t.dropShadow&&(I+=t.dropShadowDistance);var M=t.lineHeight||l.fontSize+t.strokeThickness,C=Math.max(M,l.fontSize+t.strokeThickness)+(_.length-1)*(M+t.leading);return t.dropShadow&&(C+=t.dropShadowDistance),new i(e,t,I,C,_,T,M+t.leading,D,l)},i.wordWrap=function(e,t,r){void 0===r&&(r=i._canvas);for(var s=r.getContext("2d"),h=0,l="",c="",E=Object.create(null),_=t.letterSpacing,T=t.whiteSpace,D=i.collapseSpaces(T),g=i.collapseNewlines(T),O=!D,I=t.wordWrapWidth+_,M=i.tokenize(e),C=0;C<M.length;C++){var X=M[C];if(i.isNewline(X)){if(!g){c+=i.addLine(l),O=!D,l="",h=0;continue}X=" "}if(D){var ht=i.isBreakingSpace(X),_t=i.isBreakingSpace(l[l.length-1]);if(ht&&_t)continue}var St=i.getFromCache(X,_,E,s);if(St>I)if(""!==l&&(c+=i.addLine(l),l="",h=0),i.canBreakWords(X,t.breakWords))for(var it=i.wordWrapSplit(X),z=0;z<it.length;z++){for(var Ot=it[z],qt=1;it[z+qt];){var ft=it[z+qt];if(i.canBreakChars(Ot[Ot.length-1],ft,X,z,t.breakWords))break;Ot+=ft,qt++}z+=Ot.length-1;var Vt=i.getFromCache(Ot,_,E,s);Vt+h>I&&(c+=i.addLine(l),O=!1,l="",h=0),l+=Ot,h+=Vt}else l.length>0&&(c+=i.addLine(l),l="",h=0),c+=i.addLine(X,!(C===M.length-1)),O=!1,l="",h=0;else St+h>I&&(O=!1,c+=i.addLine(l),l="",h=0),(l.length>0||!i.isBreakingSpace(X)||O)&&(l+=X,h+=St)}return c+i.addLine(l,!1)},i.addLine=function(e,t){return void 0===t&&(t=!0),e=i.trimRight(e),t?e+"\n":e},i.getFromCache=function(e,t,r,s){var h=r[e];if("number"!=typeof h){var l=e.length*t;h=s.measureText(e).width+l,r[e]=h}return h},i.collapseSpaces=function(e){return"normal"===e||"pre-line"===e},i.collapseNewlines=function(e){return"normal"===e},i.trimRight=function(e){if("string"!=typeof e)return"";for(var t=e.length-1;t>=0&&i.isBreakingSpace(e[t]);t--)e=e.slice(0,-1);return e},i.isNewline=function(e){return"string"==typeof e&&i._newlines.indexOf(e.charCodeAt(0))>=0},i.isBreakingSpace=function(e,t){return"string"==typeof e&&i._breakingSpaces.indexOf(e.charCodeAt(0))>=0},i.tokenize=function(e){var t=[],r="";if("string"!=typeof e)return t;for(var s=0;s<e.length;s++){var h=e[s];i.isBreakingSpace(h,e[s+1])||i.isNewline(h)?(""!==r&&(t.push(r),r=""),t.push(h)):r+=h}return""!==r&&t.push(r),t},i.canBreakWords=function(e,t){return t},i.canBreakChars=function(e,t,r,s,h){return!0},i.wordWrapSplit=function(e){return e.split("")},i.measureFont=function(e){if(i._fonts[e])return i._fonts[e];var t={ascent:0,descent:0,fontSize:0},r=i._canvas,s=i._context;s.font=e;var h=i.METRICS_STRING+i.BASELINE_SYMBOL,l=Math.ceil(s.measureText(h).width),c=Math.ceil(s.measureText(i.BASELINE_SYMBOL).width),E=Math.ceil(i.HEIGHT_MULTIPLIER*c);c=c*i.BASELINE_MULTIPLIER|0,r.width=l,r.height=E,s.fillStyle="#f00",s.fillRect(0,0,l,E),s.font=e,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(h,0,c);var _=s.getImageData(0,0,l,E).data,T=_.length,D=4*l,g=0,O=0,I=!1;for(g=0;g<c;++g){for(var M=0;M<D;M+=4)if(255!==_[O+M]){I=!0;break}if(I)break;O+=D}for(t.ascent=c-g,O=T-D,I=!1,g=E;g>c;--g){for(M=0;M<D;M+=4)if(255!==_[O+M]){I=!0;break}if(I)break;O-=D}return t.descent=g-c,t.fontSize=t.ascent+t.descent,i._fonts[e]=t,t},i.clearMetrics=function(e){void 0===e&&(e=""),e?delete i._fonts[e]:i._fonts={}},i}(),sn=function(){try{var i=new OffscreenCanvas(0,0),e=i.getContext("2d");return e&&e.measureText?i:document.createElement("canvas")}catch(t){return document.createElement("canvas")}}();sn.width=sn.height=10,Be._canvas=sn,Be._context=sn.getContext("2d"),Be._fonts={},Be.METRICS_STRING="|\xc9q\xc5",Be.BASELINE_SYMBOL="M",Be.BASELINE_MULTIPLIER=1.4,Be.HEIGHT_MULTIPLIER=2,Be._newlines=[10,13],Be._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var Kn={texture:!0,children:!1,baseTexture:!0},mn=function(i){function e(t,r,s){var h=this,l=!1;s||(s=document.createElement("canvas"),l=!0),s.width=3,s.height=3;var c=et.xE.from(s);return c.orig=new Y.Ae,c.trim=new Y.Ae,(h=i.call(this,c)||this)._ownCanvas=l,h.canvas=s,h.context=h.canvas.getContext("2d"),h._resolution=j.X.RESOLUTION,h._autoResolution=!0,h._text=null,h._style=null,h._styleListener=null,h._font="",h.text=t,h.style=r,h.localStyleID=-1,h}return function(i,e){function t(){this.constructor=i}sr(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,i),e.prototype.updateText=function(t){var r=this._style;if(this.localStyleID!==r.styleID&&(this.dirty=!0,this.localStyleID=r.styleID),this.dirty||!t){this._font=this._style.toFontString();var s=this.context,h=Be.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),c=h.height,E=h.lines,_=h.lineHeight,T=h.lineWidths,D=h.maxLineWidth,g=h.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,h.width)+2*r.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,c)+2*r.padding)*this._resolution),s.scale(this._resolution,this._resolution),s.clearRect(0,0,this.canvas.width,this.canvas.height),s.font=this._font,s.lineWidth=r.strokeThickness,s.textBaseline=r.textBaseline,s.lineJoin=r.lineJoin,s.miterLimit=r.miterLimit;for(var O,I,M=r.dropShadow?2:1,C=0;C<M;++C){var X=r.dropShadow&&0===C,ht=X?Math.ceil(Math.max(1,c)+2*r.padding):0,_t=ht*this._resolution;if(X){s.fillStyle="black",s.strokeStyle="black";var St=r.dropShadowColor,it=(0,y.wK)("number"==typeof St?St:(0,y.qm)(St));s.shadowColor="rgba("+255*it[0]+","+255*it[1]+","+255*it[2]+","+r.dropShadowAlpha+")",s.shadowBlur=r.dropShadowBlur,s.shadowOffsetX=Math.cos(r.dropShadowAngle)*r.dropShadowDistance,s.shadowOffsetY=Math.sin(r.dropShadowAngle)*r.dropShadowDistance+_t}else s.fillStyle=this._generateFillStyle(r,E,h),s.strokeStyle=r.stroke,s.shadowColor="black",s.shadowBlur=0,s.shadowOffsetX=0,s.shadowOffsetY=0;var z=(_-g.fontSize)/2;(!e.nextLineHeightBehavior||_-g.fontSize<0)&&(z=0);for(var Ot=0;Ot<E.length;Ot++)O=r.strokeThickness/2,I=r.strokeThickness/2+Ot*_+g.ascent+z,"right"===r.align?O+=D-T[Ot]:"center"===r.align&&(O+=(D-T[Ot])/2),r.stroke&&r.strokeThickness&&this.drawLetterSpacing(E[Ot],O+r.padding,I+r.padding-ht,!0),r.fill&&this.drawLetterSpacing(E[Ot],O+r.padding,I+r.padding-ht)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,r,s,h){void 0===h&&(h=!1);var c=this._style.letterSpacing,E="letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype;if(0===c||E)return E&&(this.context.letterSpacing=c,this.context.textLetterSpacing=c),void(h?this.context.strokeText(t,r,s):this.context.fillText(t,r,s));for(var _=r,T=Array.from?Array.from(t):t.split(""),D=this.context.measureText(t).width,g=0,O=0;O<T.length;++O){var I=T[O];h?this.context.strokeText(I,_,s):this.context.fillText(I,_,s),_+=D-(g=this.context.measureText(t.substring(O+1)).width)+c,D=g}},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var r=(0,y.yA)(t);r.data&&(t.width=r.width,t.height=r.height,this.context.putImageData(r.data,0,0))}var s=this._texture,h=this._style,l=h.trim?0:h.padding,c=s.baseTexture;s.trim.width=s._frame.width=t.width/this._resolution,s.trim.height=s._frame.height=t.height/this._resolution,s.trim.x=-l,s.trim.y=-l,s.orig.width=s._frame.width-2*l,s.orig.height=s._frame.height-2*l,this._onTextureUpdate(),c.setRealSize(t.width,t.height,this._resolution),s.updateUvs(),this._recursivePostUpdateTransform(),this.dirty=!1},e.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),i.prototype._render.call(this,t)},e.prototype.getLocalBounds=function(t){return this.updateText(!0),i.prototype.getLocalBounds.call(this,t)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(t,r,s){var h=t.fill;if(!Array.isArray(h))return h;if(1===h.length)return h[0];var l,c=t.dropShadow?t.dropShadowDistance:0,E=t.padding||0,_=this.canvas.width/this._resolution-c-2*E,T=this.canvas.height/this._resolution-c-2*E,D=h.slice(),g=t.fillGradientStops.slice();if(!g.length)for(var O=D.length+1,I=1;I<O;++I)g.push(I/O);if(D.unshift(h[0]),g.unshift(0),D.push(h[h.length-1]),g.push(1),t.fillGradientType===pe.LINEAR_VERTICAL){l=this.context.createLinearGradient(_/2,E,_/2,T+E);var M=s.fontProperties.fontSize+t.strokeThickness;for(I=0;I<r.length;I++){var C=s.lineHeight*(I-1)+M,X=s.lineHeight*I,ht=X;I>0&&C>X&&(ht=(X+C)/2);var _t=X+M,St=s.lineHeight*(I+1),it=_t;I+1<r.length&&St<_t&&(it=(_t+St)/2);for(var z=(it-ht)/T,Ot=0;Ot<D.length;Ot++){var ft=Math.min(1,Math.max(0,ht/T+("number"==typeof g[Ot]?g[Ot]:Ot/D.length)*z));ft=Number(ft.toFixed(5)),l.addColorStop(ft,D[Ot])}}}else{l=this.context.createLinearGradient(E,T/2,_+E,T/2);var yt=D.length+1,Vt=1;for(I=0;I<D.length;I++)l.addColorStop("number"==typeof g[I]?g[I]:Vt/yt,D[I]),Vt++}return l},e.prototype.destroy=function(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},Kn,t),i.prototype.destroy.call(this,t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var r=(0,y.Xx)(this.scale.x)||1;this.scale.x=r*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var r=(0,y.Xx)(this.scale.y)||1;this.scale.y=r*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){this._style=(t=t||{})instanceof or?t:new or(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e.nextLineHeightBehavior=!1,e}(te);j.X.UPLOADS_PER_FRAME=4;var Tn=function(i,e){return(Tn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])})(i,e)},Zn=function(){function i(e){this.maxItemsPerFrame=e,this.itemsLeft=0}return i.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},i.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},i}();function $n(i,e){var t=!1;if(i&&i._textures&&i._textures.length)for(var r=0;r<i._textures.length;r++)if(i._textures[r]instanceof et.xE){var s=i._textures[r].baseTexture;-1===e.indexOf(s)&&(e.push(s),t=!0)}return t}function Qn(i,e){if(i.baseTexture instanceof et.VL){var t=i.baseTexture;return-1===e.indexOf(t)&&e.push(t),!0}return!1}function Jn(i,e){if(i._texture&&i._texture instanceof et.xE){var t=i._texture.baseTexture;return-1===e.indexOf(t)&&e.push(t),!0}return!1}function ta(i,e){return e instanceof mn&&(e.updateText(!0),!0)}function ea(i,e){if(e instanceof or){var t=e.toFontString();return Be.measureFont(t),!0}return!1}function ra(i,e){if(i instanceof mn){-1===e.indexOf(i.style)&&e.push(i.style),-1===e.indexOf(i)&&e.push(i);var t=i._texture.baseTexture;return-1===e.indexOf(t)&&e.push(t),!0}return!1}function ia(i,e){return i instanceof or&&(-1===e.indexOf(i)&&e.push(i),!0)}var na=function(){function i(e){var t=this;this.limiter=new Zn(j.X.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){!t.queue||t.prepareItems()},this.registerFindHook(ra),this.registerFindHook(ia),this.registerFindHook($n),this.registerFindHook(Qn),this.registerFindHook(Jn),this.registerUploadHook(ta),this.registerUploadHook(ea)}return i.prototype.upload=function(e,t){"function"==typeof e&&(t=e,e=null),e&&this.add(e),this.queue.length?(t&&this.completes.push(t),this.ticking||(this.ticking=!0,_e.vB.system.addOnce(this.tick,this,_e.uF.UTILITY))):t&&t()},i.prototype.tick=function(){setTimeout(this.delayedTick,0)},i.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],t=!1;if(e&&!e._destroyed)for(var r=0,s=this.uploadHooks.length;r<s;r++)if(this.uploadHooks[r](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}t||this.queue.shift()}if(this.queue.length)_e.vB.system.addOnce(this.tick,this,_e.uF.UTILITY);else{this.ticking=!1;var h=this.completes.slice(0);for(this.completes.length=0,r=0,s=h.length;r<s;r++)h[r]()}},i.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},i.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},i.prototype.add=function(e){for(var t=0,r=this.addHooks.length;t<r&&!this.addHooks[t](e,this.queue);t++);if(e instanceof fe)for(t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this},i.prototype.destroy=function(){this.ticking&&_e.vB.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},i}();function Cn(i,e){return e instanceof et.VL&&(e._glTextures[i.CONTEXT_UID]||i.texture.bind(e),!0)}function aa(i,e){if(!(e instanceof tt))return!1;var t=e.geometry;e.finishPoly(),t.updateBatches();for(var r=t.batches,s=0;s<r.length;s++){var h=r[s].style.texture;h&&Cn(i,h.baseTexture)}return t.batchable||i.geometry.bind(t,e._resolveDirectShader(i)),!0}function sa(i,e){return i instanceof tt&&(e.push(i),!0)}var oa=function(i){function e(t){var r=i.call(this,t)||this;return r.uploadHookHelper=r.renderer,r.registerFindHook(sa),r.registerUploadHook(Cn),r.registerUploadHook(aa),r}return function(i,e){function t(){this.constructor=i}Tn(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,i),e}(na),ha=(function(){function i(e){this.maxMilliseconds=e,this.frameStart=0}i.prototype.beginFrame=function(){this.frameStart=Date.now()},i.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds}}(),function(){function i(e,t,r){void 0===r&&(r=null),this._texture=e instanceof et.xE?e:null,this.baseTexture=e instanceof et.VL?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;var s=this.baseTexture.resource;this.resolution=this._updateResolution(r||(s?s.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return i.prototype._updateResolution=function(e){void 0===e&&(e=null);var t=this.data.meta.scale,r=(0,y.fL)(e,null);return null===r&&(r=void 0!==t?parseFloat(t):1),1!==r&&this.baseTexture.setResolution(r),r},i.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=i.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},i.prototype._processFrames=function(e){for(var t=e,r=i.BATCH_SIZE;t-e<r&&t<this._frameKeys.length;){var s=this._frameKeys[t],h=this._frames[s],l=h.frame;if(l){var c,E=null,_=!1!==h.trimmed&&h.sourceSize?h.sourceSize:h.frame,T=new Y.Ae(0,0,Math.floor(_.w)/this.resolution,Math.floor(_.h)/this.resolution);c=h.rotated?new Y.Ae(Math.floor(l.x)/this.resolution,Math.floor(l.y)/this.resolution,Math.floor(l.h)/this.resolution,Math.floor(l.w)/this.resolution):new Y.Ae(Math.floor(l.x)/this.resolution,Math.floor(l.y)/this.resolution,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution),!1!==h.trimmed&&h.spriteSourceSize&&(E=new Y.Ae(Math.floor(h.spriteSourceSize.x)/this.resolution,Math.floor(h.spriteSourceSize.y)/this.resolution,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution)),this.textures[s]=new et.xE(this.baseTexture,c,T,E,h.rotated?2:0,h.anchor),et.xE.addToCache(this.textures[s],s)}t++}},i.prototype._processAnimations=function(){var e=this.data.animations||{};for(var t in e){this.animations[t]=[];for(var r=0;r<e[t].length;r++)this.animations[t].push(this.textures[e[t][r]])}},i.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},i.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*i.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*i.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())},0)},i.prototype.destroy=function(e){var t;for(var r in void 0===e&&(e=!1),this.textures)this.textures[r].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(null===(t=this._texture)||void 0===t||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},i.BATCH_SIZE=1e3,i}()),ua=function(){function i(){}return i.use=function(e,t){var r,s,h=this,l=e.name+"_image";if(e.data&&e.type===ie.TYPE.JSON&&e.data.frames&&!h.resources[l]){var c=null===(s=null===(r=e.data)||void 0===r?void 0:r.meta)||void 0===s?void 0:s.related_multi_packs;if(Array.isArray(c))for(var E=function(I){if("string"!=typeof I)return"continue";var M=I.replace(".json",""),C=y.HQ.resolve(e.url.replace(h.baseUrl,""),I);if(h.resources[M]||Object.values(h.resources).some(function(ht){return y.HQ.format(y.HQ.parse(ht.url))===C}))return"continue";h.add(M,C,{crossOrigin:e.crossOrigin,loadType:ie.LOAD_TYPE.XHR,xhrType:ie.XHR_RESPONSE_TYPE.JSON,parentResource:e,metadata:e.metadata})},_=0,T=c;_<T.length;_++)E(T[_]);var g={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},O=i.getResourcePath(e,h.baseUrl);h.add(l,O,g,function(M){if(M.error)t(M.error);else{var C=new ha(M.texture,e.data,e.url);C.parse(function(){e.spritesheet=C,e.textures=C.textures,t()})}})}else t()},i.getResourcePath=function(e,t){return e.isDataUrl?e.data.meta.image:y.HQ.resolve(e.url.replace(t,""),e.data.meta.image)},i}(),yn=function(i,e){return(yn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])})(i,e)};function wn(i,e){function t(){this.constructor=i}yn(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var en=new Y.E9,la=function(i){function e(t,r,s){void 0===r&&(r=100),void 0===s&&(s=100);var h=i.call(this,t)||this;return h.tileTransform=new Y.wx,h._width=r,h._height=s,h.uvMatrix=h.texture.uvMatrix||new et.UX(t),h.pluginName="tilingSprite",h.uvRespectAnchor=!1,h}return wn(e,i),Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(t){var r=this._texture;!r||!r.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){this._bounds.addFrame(this.transform,this._width*-this._anchor._x,this._height*-this._anchor._y,this._width*(1-this._anchor._x),this._height*(1-this._anchor._y))},e.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Y.Ae),t=this._localBoundsRect),this._bounds.getRectangle(t)):i.prototype.getLocalBounds.call(this,t)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,en);var r=this._width,s=this._height,h=-r*this.anchor._x;if(en.x>=h&&en.x<h+r){var l=-s*this.anchor._y;if(en.y>=l&&en.y<l+s)return!0}return!1},e.prototype.destroy=function(t){i.prototype.destroy.call(this,t),this.tileTransform=null,this.uvMatrix=null},e.from=function(t,r){return new e(t instanceof et.xE?t:et.xE.from(t,r),r.width,r.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),e}(te),Bn="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",on=new Y.y3,pa=function(i){function e(t){var r=i.call(this,t)||this;return t.runners.contextChange.add(r),r.quad=new et.ud,r.state=et.ZM.for2d(),r}return wn(e,i),e.prototype.contextChange=function(){var t=this.renderer,r={globals:t.globalUniforms};this.simpleShader=et.ex.from(Bn,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",r),this.shader=t.context.webGLVersion>1?et.ex.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",r):et.ex.from(Bn,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",r)},e.prototype.render=function(t){var r=this.renderer,s=this.quad,h=s.vertices;h[0]=h[6]=t._width*-t.anchor.x,h[1]=h[3]=t._height*-t.anchor.y,h[2]=h[4]=t._width*(1-t.anchor.x),h[5]=h[7]=t._height*(1-t.anchor.y);var l=t.uvRespectAnchor?t.anchor.x:0,c=t.uvRespectAnchor?t.anchor.y:0;(h=s.uvs)[0]=h[6]=-l,h[1]=h[3]=-c,h[2]=h[4]=1-l,h[5]=h[7]=1-c,s.invalidate();var E=t._texture,_=E.baseTexture,T=t.tileTransform.localTransform,D=t.uvMatrix,g=_.isPowerOfTwo&&E.frame.width===_.width&&E.frame.height===_.height;g&&(_._glTextures[r.CONTEXT_UID]?g=_.wrapMode!==Yt.Nt.CLAMP:_.wrapMode===Yt.Nt.CLAMP&&(_.wrapMode=Yt.Nt.REPEAT));var O=g?this.simpleShader:this.shader,I=E.width,M=E.height,C=t._width,X=t._height;on.set(T.a*I/C,T.b*I/X,T.c*M/C,T.d*M/X,T.tx/C,T.ty/X),on.invert(),g?on.prepend(D.mapCoord):(O.uniforms.uMapCoord=D.mapCoord.toArray(!0),O.uniforms.uClampFrame=D.uClampFrame,O.uniforms.uClampOffset=D.uClampOffset),O.uniforms.uTransform=on.toArray(!0),O.uniforms.uColor=(0,y.GT)(t.tint,t.worldAlpha,O.uniforms.uColor,_.alphaMode),O.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),O.uniforms.uSampler=E,r.shader.bind(O),r.geometry.bind(s),this.state.blendMode=(0,y.D)(t.blendMode,_.alphaMode),r.state.set(this.state),r.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e}(et.bO),gn=function(i,e){return(gn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])})(i,e)};function Sn(i,e){function t(){this.constructor=i}gn(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var va=function(){function i(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return i.prototype.update=function(e){if(e||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}},i}(),Rn=new Y.E9,Fn=new Y.mg,yi=function(i){function e(t,r,s,h){void 0===h&&(h=Yt.lg.TRIANGLES);var l=i.call(this)||this;return l.geometry=t,l.shader=r,l.state=s||et.ZM.for2d(),l.drawMode=h,l.start=0,l.size=0,l.uvs=null,l.indices=null,l.vertexData=new Float32Array(1),l.vertexDirty=-1,l._transformID=-1,l._roundPixels=j.X.ROUND_PIXELS,l.batchUvs=null,l}return Sn(e,i),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},set:function(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){this.shader.batchable&&this.drawMode===Yt.lg.TRIANGLES&&this.geometry.buffers[0].data.length<2*e.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},e.prototype._renderDefault=function(t){var r=this.shader;r.alpha=this.worldAlpha,r.update&&r.update(),t.batch.flush(),r.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(r),t.state.set(this.state),t.geometry.bind(this.geometry,r),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(t){var r=this.geometry,s=this.shader;s.uvMatrix&&(s.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=r.indexBuffer.data,this._tintRGB=s._tintRGB,this._texture=s.texture;var h=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[h]),t.plugins[h].render(this)},e.prototype.calculateVertices=function(){var r=this.geometry.buffers[0],s=r.data,h=r._updateID;if(h!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==s.length&&(this.vertexData=new Float32Array(s.length));for(var l=this.transform.worldTransform,c=l.a,E=l.b,_=l.c,T=l.d,D=l.tx,g=l.ty,O=this.vertexData,I=0;I<O.length/2;I++){var M=s[2*I],C=s[2*I+1];O[2*I]=c*M+_*C+D,O[2*I+1]=E*M+T*C+g}if(this._roundPixels){var X=j.X.RESOLUTION;for(I=0;I<O.length;++I)O[I]=Math.round((O[I]*X|0)/X)}this.vertexDirty=h}},e.prototype.calculateUvs=function(){var t=this.geometry.buffers[1],r=this.shader;r.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new va(t,r.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,Rn);for(var r=this.geometry.getBuffer("aVertexPosition").data,s=Fn.points,h=this.geometry.getIndex().data,l=h.length,c=4===this.drawMode?3:1,E=0;E+2<l;E+=c){var _=2*h[E],T=2*h[E+1],D=2*h[E+2];if(s[0]=r[_],s[1]=r[_+1],s[2]=r[T],s[3]=r[T+1],s[4]=r[D],s[5]=r[D+1],Fn.contains(Rn.x,Rn.y))return!0}return!1},e.prototype.destroy=function(t){i.prototype.destroy.call(this,t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e}(fe),rn=function(i){function e(t,r){var s=this,h={uSampler:t,alpha:1,uTextureMatrix:Y.y3.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r)).uniforms&&Object.assign(h,r.uniforms),(s=i.call(this,r.program||et.$r.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),h)||this)._colorDirty=!1,s.uvMatrix=new et.UX(t),s.batchable=void 0===r.program,s.pluginName=r.pluginName,s.tint=r.tint,s.alpha=r.alpha,s}return Sn(e,i),Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){this._colorDirty&&(this._colorDirty=!1,(0,y.GT)(this._tint,this._alpha,this.uniforms.uColor,this.texture.baseTexture.alphaMode)),this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}(et.ex),hn=function(i){function e(t,r,s){var h=i.call(this)||this,l=new et.lW(t),c=new et.lW(r,!0),E=new et.lW(s,!0,!0);return h.addAttribute("aVertexPosition",l,2,!1,Yt.vK.FLOAT).addAttribute("aTextureCoord",c,2,!1,Yt.vK.FLOAT).addIndex(E),h._updateId=-1,h}return Sn(e,i),Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e}(et.ZX),An=function(i,e){return(An=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])})(i,e)},un=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]},ya=function(){function i(){}return i.test=function(e){return"string"==typeof e&&0===e.indexOf("info face=")},i.parse=function(e){var t=e.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var s in t){var h=t[s].match(/^[a-z]+/gm)[0],l=t[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),c={};for(var E in l){var _=l[E].split("="),T=_[0],D=_[1].replace(/"/gm,""),g=parseFloat(D),O=isNaN(g)?D:g;c[T]=O}r[h].push(c)}var I=new un;return r.info.forEach(function(M){return I.info.push({face:M.face,size:parseInt(M.size,10)})}),r.common.forEach(function(M){return I.common.push({lineHeight:parseInt(M.lineHeight,10)})}),r.page.forEach(function(M){return I.page.push({id:parseInt(M.id,10),file:M.file})}),r.char.forEach(function(M){return I.char.push({id:parseInt(M.id,10),page:parseInt(M.page,10),x:parseInt(M.x,10),y:parseInt(M.y,10),width:parseInt(M.width,10),height:parseInt(M.height,10),xoffset:parseInt(M.xoffset,10),yoffset:parseInt(M.yoffset,10),xadvance:parseInt(M.xadvance,10)})}),r.kerning.forEach(function(M){return I.kerning.push({first:parseInt(M.first,10),second:parseInt(M.second,10),amount:parseInt(M.amount,10)})}),r.distanceField.forEach(function(M){return I.distanceField.push({distanceRange:parseInt(M.distanceRange,10),fieldType:M.fieldType})}),I},i}(),On=function(){function i(){}return i.test=function(e){return e instanceof XMLDocument&&e.getElementsByTagName("page").length&&null!==e.getElementsByTagName("info")[0].getAttribute("face")},i.parse=function(e){for(var t=new un,r=e.getElementsByTagName("info"),s=e.getElementsByTagName("common"),h=e.getElementsByTagName("page"),l=e.getElementsByTagName("char"),c=e.getElementsByTagName("kerning"),E=e.getElementsByTagName("distanceField"),_=0;_<r.length;_++)t.info.push({face:r[_].getAttribute("face"),size:parseInt(r[_].getAttribute("size"),10)});for(_=0;_<s.length;_++)t.common.push({lineHeight:parseInt(s[_].getAttribute("lineHeight"),10)});for(_=0;_<h.length;_++)t.page.push({id:parseInt(h[_].getAttribute("id"),10)||0,file:h[_].getAttribute("file")});for(_=0;_<l.length;_++){var T=l[_];t.char.push({id:parseInt(T.getAttribute("id"),10),page:parseInt(T.getAttribute("page"),10)||0,x:parseInt(T.getAttribute("x"),10),y:parseInt(T.getAttribute("y"),10),width:parseInt(T.getAttribute("width"),10),height:parseInt(T.getAttribute("height"),10),xoffset:parseInt(T.getAttribute("xoffset"),10),yoffset:parseInt(T.getAttribute("yoffset"),10),xadvance:parseInt(T.getAttribute("xadvance"),10)})}for(_=0;_<c.length;_++)t.kerning.push({first:parseInt(c[_].getAttribute("first"),10),second:parseInt(c[_].getAttribute("second"),10),amount:parseInt(c[_].getAttribute("amount"),10)});for(_=0;_<E.length;_++)t.distanceField.push({fieldType:E[_].getAttribute("fieldType"),distanceRange:parseInt(E[_].getAttribute("distanceRange"),10)});return t},i}(),ga=function(){function i(){}return i.test=function(e){if("string"==typeof e&&e.indexOf("<font>")>-1){var t=(new self.DOMParser).parseFromString(e,"text/xml");return On.test(t)}return!1},i.parse=function(e){var t=(new self.DOMParser).parseFromString(e,"text/xml");return On.parse(t)},i}(),xn=[ya,On,ga];function Un(i){for(var e=0;e<xn.length;e++)if(xn[e].test(i))return xn[e];return null}function Ra(i,e,t,r,s,h,l){var c=t.text,E=t.fontProperties;e.translate(r,s),e.scale(h,h);var _=l.strokeThickness/2,T=-l.strokeThickness/2;e.font=l.toFontString(),e.lineWidth=l.strokeThickness,e.textBaseline=l.textBaseline,e.lineJoin=l.lineJoin,e.miterLimit=l.miterLimit,e.fillStyle=function(i,e,t,r,s,h){var l=t.fill;if(!Array.isArray(l))return l;if(1===l.length)return l[0];var c,E=t.dropShadow?t.dropShadowDistance:0,_=t.padding||0,T=i.width/r-E-2*_,D=i.height/r-E-2*_,g=l.slice(),O=t.fillGradientStops.slice();if(!O.length)for(var I=g.length+1,M=1;M<I;++M)O.push(M/I);if(g.unshift(l[0]),O.unshift(0),g.push(l[l.length-1]),O.push(1),t.fillGradientType===pe.LINEAR_VERTICAL){c=e.createLinearGradient(T/2,_,T/2,D+_);var C=0,ht=(h.fontProperties.fontSize+t.strokeThickness)/D;for(M=0;M<s.length;M++)for(var _t=h.lineHeight*M,St=0;St<g.length;St++){var Ot=Math.max(C,_t/D+("number"==typeof O[St]?O[St]:St/g.length)*ht);Ot=Math.min(Ot,1),c.addColorStop(Ot,g[St]),C=Ot}}else{c=e.createLinearGradient(_,D/2,T+_,D/2);var qt=g.length+1,ft=1;for(M=0;M<g.length;M++)c.addColorStop("number"==typeof O[M]?O[M]:ft/qt,g[M]),ft++}return c}(i,e,l,h,[c],t),e.strokeStyle=l.stroke;var D=l.dropShadowColor,g=(0,y.wK)("number"==typeof D?D:(0,y.qm)(D));l.dropShadow?(e.shadowColor="rgba("+255*g[0]+","+255*g[1]+","+255*g[2]+","+l.dropShadowAlpha+")",e.shadowBlur=l.dropShadowBlur,e.shadowOffsetX=Math.cos(l.dropShadowAngle)*l.dropShadowDistance,e.shadowOffsetY=Math.sin(l.dropShadowAngle)*l.dropShadowDistance):(e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),l.stroke&&l.strokeThickness&&e.strokeText(c,_,T+t.lineHeight-E.descent),l.fill&&e.fillText(c,_,T+t.lineHeight-E.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function Gn(i){return Array.from?Array.from(i):i.split("")}function ln(i){return i.codePointAt?i.codePointAt(0):i.charCodeAt(0)}var gi=function(){function i(e,t,r){var s,h,l=e.info[0],c=e.common[0],_=e.distanceField[0],T=(0,y.fL)(e.page[0].file),D={};this._ownsTextures=r,this.font=l.face,this.size=l.size,this.lineHeight=c.lineHeight/T,this.chars={},this.pageTextures=D;for(var g=0;g<e.page.length;g++){var O=e.page[g];D[I=O.id]=t instanceof Array?t[g]:t[O.file],(null==_?void 0:_.fieldType)&&"none"!==_.fieldType&&(D[I].baseTexture.alphaMode=Yt.iw.NO_PREMULTIPLIED_ALPHA)}for(g=0;g<e.char.length;g++){var C=e.char[g],I=C.id,X=C.page,ht=e.char[g],_t=ht.x,St=ht.y,it=ht.width,z=ht.height,Ot=ht.xoffset,qt=ht.yoffset,ft=ht.xadvance;Ot/=T,qt/=T,ft/=T;var yt=new Y.Ae((_t/=T)+D[X].frame.x/T,(St/=T)+D[X].frame.y/T,it/=T,z/=T);this.chars[I]={xOffset:Ot,yOffset:qt,xAdvance:ft,kerning:{},texture:new et.xE(D[X].baseTexture,yt),page:X}}for(g=0;g<e.kerning.length;g++){var Vt=e.kerning[g],Bt=Vt.first,ee=Vt.second,me=Vt.amount;Bt/=T,me/=T,this.chars[ee/=T]&&(this.chars[ee].kerning[Bt]=me)}this.distanceFieldRange=null==_?void 0:_.distanceRange,this.distanceFieldType=null!==(h=null===(s=null==_?void 0:_.fieldType)||void 0===s?void 0:s.toLowerCase())&&void 0!==h?h:"none"}return i.prototype.destroy=function(){for(var e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(var e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null},i.install=function(e,t,r){var s;if(e instanceof un)s=e;else{var h=Un(e);if(!h)throw new Error("Unrecognized data format for font.");s=h.parse(e)}t instanceof et.xE&&(t=[t]);var l=new i(s,t,r);return i.available[l.font]=l,l},i.uninstall=function(e){var t=i.available[e];if(!t)throw new Error("No font found named '"+e+"'");t.destroy(),delete i.available[e]},i.from=function(e,t,r){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var s=Object.assign({},i.defaultOptions,r),l=s.padding,c=s.resolution,E=s.textureWidth,_=s.textureHeight,T=function(i){"string"==typeof i&&(i=[i]);for(var e=[],t=0,r=i.length;t<r;t++){var s=i[t];if(Array.isArray(s)){if(2!==s.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+s.length+".");var h=s[0].charCodeAt(0),l=s[1].charCodeAt(0);if(l<h)throw new Error("[BitmapFont]: Invalid character range.");for(var c=h,E=l;c<=E;c++)e.push(String.fromCharCode(c))}else e.push.apply(e,Gn(s))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}(s.chars),D=t instanceof or?t:new or(t),g=E,O=new un;O.info[0]={face:D.fontFamily,size:D.fontSize},O.common[0]={lineHeight:D.fontSize};for(var C,X,ht,I=0,M=0,_t=0,St=[],it=0;it<T.length;it++){C||((C=document.createElement("canvas")).width=E,C.height=_,X=C.getContext("2d"),ht=new et.VL(C,{resolution:c}),St.push(new et.xE(ht)),O.page.push({id:St.length-1,file:""}));var z=Be.measureText(T[it],D,!1,C),Ot=z.width,qt=Math.ceil(z.height),ft=Math.ceil(("italic"===D.fontStyle?2:1)*Ot);if(M>=_-qt*c){if(0===M)throw new Error("[BitmapFont] textureHeight "+_+"px is too small for "+D.fontSize+"px fonts");--it,C=null,X=null,ht=null,M=0,I=0,_t=0}else if(_t=Math.max(qt+z.fontProperties.descent,_t),ft*c+I>=g)--it,M+=_t*c,M=Math.ceil(M),I=0,_t=0;else{Ra(C,X,z,I,M,c,D);var yt=ln(z.text);O.char.push({id:yt,page:St.length-1,x:I/c,y:M/c,width:ft,height:qt,xoffset:0,yoffset:0,xadvance:Math.ceil(Ot-(D.dropShadow?D.dropShadowDistance:0)-(D.stroke?D.strokeThickness:0))}),I+=(ft+2*l)*c,I=Math.ceil(I)}}it=0;for(var Vt=T.length;it<Vt;it++)for(var Bt=T[it],ee=0;ee<Vt;ee++){var me=T[ee],Nt=X.measureText(Bt).width,Mt=X.measureText(me).width,Te=X.measureText(Bt+me).width-(Nt+Mt);Te&&O.kerning.push({first:ln(Bt),second:ln(me),amount:Te})}var Ae=new i(O,St,!0);return void 0!==i.available[e]&&i.uninstall(e),i.available[e]=Ae,Ae},i.ALPHA=[["a","z"],["A","Z"]," "],i.NUMERIC=[["0","9"]],i.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],i.ASCII=[[" ","~"]],i.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:i.ALPHANUMERIC},i.available={},i}(),Pa=[],Da=[],Hn=[],ba=function(i){function e(t,r){void 0===r&&(r={});var s=i.call(this)||this;s._tint=16777215;var h=Object.assign({},e.styleDefaults,r),l=h.align,c=h.tint,E=h.maxWidth,_=h.letterSpacing,T=h.fontName,D=h.fontSize;if(!gi.available[T])throw new Error('Missing BitmapFont "'+T+'"');return s._activePagesMeshData=[],s._textWidth=0,s._textHeight=0,s._align=l,s._tint=c,s._fontName=T,s._fontSize=D||gi.available[T].size,s._text=t,s._maxWidth=E,s._maxLineHeight=0,s._letterSpacing=_,s._anchor=new Y.AB(function(){s.dirty=!0},s,0,0),s._roundPixels=j.X.ROUND_PIXELS,s.dirty=!0,s._textureCache={},s}return function(i,e){function t(){this.constructor=i}An(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,i),e.prototype.updateText=function(){for(var t,r=gi.available[this._fontName],s=this._fontSize/r.size,h=new Y.E9,l=[],c=[],E=[],T=Gn(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),D=this._maxWidth*r.size/this._fontSize,g="none"===r.distanceFieldType?Pa:Da,O=null,I=0,M=0,C=0,X=-1,ht=0,_t=0,St=0,it=0,z=0;z<T.length;z++){var qt=ln(Ot=T[z]);if(/(?:\s)/.test(Ot)&&(X=z,ht=I,it++),"\r"!==Ot&&"\n"!==Ot){var ft=r.chars[qt];if(ft){O&&ft.kerning[O]&&(h.x+=ft.kerning[O]);var yt=Hn.pop()||{texture:et.xE.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Y.E9};yt.texture=ft.texture,yt.line=C,yt.charCode=qt,yt.position.x=h.x+ft.xOffset+this._letterSpacing/2,yt.position.y=h.y+ft.yOffset,yt.prevSpaces=it,l.push(yt),I=yt.position.x+ft.texture.orig.width,h.x+=ft.xAdvance+this._letterSpacing,St=Math.max(St,ft.yOffset+ft.texture.height),O=qt,-1!==X&&D>0&&h.x>D&&(++_t,(0,y.Er)(l,1+X-_t,1+z-X),z=X,X=-1,c.push(ht),E.push(l.length>0?l[l.length-1].prevSpaces:0),M=Math.max(M,ht),C++,h.x=0,h.y+=r.lineHeight,O=null,it=0)}}else c.push(I),E.push(-1),M=Math.max(M,I),++C,++_t,h.x=0,h.y+=r.lineHeight,O=null,it=0}var Vt=T[T.length-1];"\r"!==Vt&&"\n"!==Vt&&(/(?:\s)/.test(Vt)&&(I=ht),c.push(I),M=Math.max(M,I),E.push(-1));var Bt=[];for(z=0;z<=C;z++){var ee=0;"right"===this._align?ee=M-c[z]:"center"===this._align?ee=(M-c[z])/2:"justify"===this._align&&(ee=E[z]<0?0:(M-c[z])/E[z]),Bt.push(ee)}var me=l.length,Nt={},Mt=[],Zt=this._activePagesMeshData;for(z=0;z<Zt.length;z++)g.push(Zt[z]);for(z=0;z<me;z++){var Ae=(Te=l[z].texture).baseTexture.uid;if(!Nt[Ae]){if(!(Wt=g.pop())){var Ri=new hn,xr=void 0,hr=void 0;"none"===r.distanceFieldType?(xr=new rn(et.xE.EMPTY),hr=Yt.T$.NORMAL):(xr=new rn(et.xE.EMPTY,{program:et.$r.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n"),uniforms:{uFWidth:0}}),hr=Yt.T$.NORMAL_NPM);var nn=new yi(Ri,xr);nn.blendMode=hr,Wt={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:nn,vertices:null,uvs:null,indices:null}}Wt.index=0,Wt.indexCount=0,Wt.vertexCount=0,Wt.uvsCount=0,Wt.total=0;var Ai=this._textureCache;Ai[Ae]=Ai[Ae]||new et.xE(Te.baseTexture),Wt.mesh.texture=Ai[Ae],Wt.mesh.tint=this._tint,Mt.push(Wt),Nt[Ae]=Wt}Nt[Ae].total++}for(z=0;z<Zt.length;z++)-1===Mt.indexOf(Zt[z])&&this.removeChild(Zt[z].mesh);for(z=0;z<Mt.length;z++)Mt[z].mesh.parent!==this&&this.addChild(Mt[z].mesh);for(var z in this._activePagesMeshData=Mt,Nt){var ze=(Wt=Nt[z]).total;if(!((null===(t=Wt.indices)||void 0===t?void 0:t.length)>6*ze)||Wt.vertices.length<2*yi.BATCHABLE_SIZE)Wt.vertices=new Float32Array(8*ze),Wt.uvs=new Float32Array(8*ze),Wt.indices=new Uint16Array(6*ze);else for(var xi=Wt.vertices,Xe=4*Wt.total*2;Xe<xi.length;Xe++)xi[Xe]=0;Wt.mesh.size=6*ze}for(z=0;z<me;z++){var Ot,ke=(Ot=l[z]).position.x+Bt[Ot.line]*("justify"===this._align?Ot.prevSpaces:1);this._roundPixels&&(ke=Math.round(ke));var Te,Fe=ke*s,Ue=Ot.position.y*s,he=Nt[(Te=Ot.texture).baseTexture.uid],Yr=Te.frame,Ke=Te._uvs,re=he.index++;he.indices[6*re+0]=0+4*re,he.indices[6*re+1]=1+4*re,he.indices[6*re+2]=2+4*re,he.indices[6*re+3]=0+4*re,he.indices[6*re+4]=2+4*re,he.indices[6*re+5]=3+4*re,he.vertices[8*re+0]=Fe,he.vertices[8*re+1]=Ue,he.vertices[8*re+2]=Fe+Yr.width*s,he.vertices[8*re+3]=Ue,he.vertices[8*re+4]=Fe+Yr.width*s,he.vertices[8*re+5]=Ue+Yr.height*s,he.vertices[8*re+6]=Fe,he.vertices[8*re+7]=Ue+Yr.height*s,he.uvs[8*re+0]=Ke.x0,he.uvs[8*re+1]=Ke.y0,he.uvs[8*re+2]=Ke.x1,he.uvs[8*re+3]=Ke.y1,he.uvs[8*re+4]=Ke.x2,he.uvs[8*re+5]=Ke.y2,he.uvs[8*re+6]=Ke.x3,he.uvs[8*re+7]=Ke.y3}for(var z in this._textWidth=M*s,this._textHeight=(h.y+r.lineHeight)*s,Nt){var Wt=Nt[z];if(0!==this.anchor.x||0!==this.anchor.y)for(var qe=0,Pi=this._textWidth*this.anchor.x,dn=this._textHeight*this.anchor.y,kn=0;kn<Wt.total;kn++)Wt.vertices[qe++]-=Pi,Wt.vertices[qe++]-=dn,Wt.vertices[qe++]-=Pi,Wt.vertices[qe++]-=dn,Wt.vertices[qe++]-=Pi,Wt.vertices[qe++]-=dn,Wt.vertices[qe++]-=Pi,Wt.vertices[qe++]-=dn;this._maxLineHeight=St*s;var Vn=Wt.mesh.geometry.getBuffer("aVertexPosition"),Wn=Wt.mesh.geometry.getBuffer("aTextureCoord"),jn=Wt.mesh.geometry.getIndex();Vn.data=Wt.vertices,Wn.data=Wt.uvs,jn.data=Wt.indices,Vn.update(),Wn.update(),jn.update()}for(z=0;z<l.length;z++)Hn.push(l[z])},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype._render=function(t){var r=gi.available[this._fontName],s=r.distanceFieldRange,l=r.size;if("none"!==r.distanceFieldType)for(var c=this.worldTransform,E=c.a,_=c.b,T=c.c,D=c.d,g=Math.sqrt(E*E+_*_),O=Math.sqrt(T*T+D*D),I=(Math.abs(g)+Math.abs(O))/2,M=this._fontSize/l,C=0,X=this._activePagesMeshData;C<X.length;C++)X[C].mesh.shader.uniforms.uFWidth=I*s*M*t.resolution;i.prototype._render.call(this,t)},e.prototype.getLocalBounds=function(){return this.validate(),i.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var r=0;r<this._activePagesMeshData.length;r++)this._activePagesMeshData[r].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!gi.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),e.prototype.destroy=function(t){var r=this._textureCache;for(var s in r)r[s].destroy(),delete r[s];this._textureCache=null,i.prototype.destroy.call(this,t)},e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},e}(fe),Ma=function(){function i(){}return i.add=function(){ie.setExtensionXhrType("fnt",ie.XHR_RESPONSE_TYPE.TEXT)},i.use=function(e,t){var r=Un(e.data);if(r)for(var s=i.getBaseUrl(this,e),h=r.parse(e.data),l={},c=function(M){l[M.metadata.pageFile]=M.texture,Object.keys(l).length===h.page.length&&(e.bitmapFont=gi.install(h,l,!0),t())},E=0;E<h.page.length;++E){var _=h.page[E].file,T=s+_,D=!1;for(var g in this.resources){var O=this.resources[g];if(O.url===T){O.metadata.pageFile=_,O.texture?c(O):O.onAfterMiddleware.add(c),D=!0;break}}if(!D){var I={crossOrigin:e.crossOrigin,loadType:ie.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:_},e.metadata.imageMetadata),parentResource:e};this.add(T,I,c)}}else t()},i.getBaseUrl=function(e,t){var r=t.isDataUrl?"":i.dirname(t.url);return t.isDataUrl&&("."===r&&(r=""),e.baseUrl&&r&&"/"===e.baseUrl.charAt(e.baseUrl.length-1)&&(r+="/")),(r=r.replace(e.baseUrl,""))&&"/"!==r.charAt(r.length-1)&&(r+="/"),r},i.dirname=function(e){var t=e.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return t===e?".":""===t?"/":t},i}(),Ia=rt(4865),Yn=rt(1275),Pn=function(i,e){return(Pn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])})(i,e)},Dn=function(i){function e(){var t=this,r={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(t=i.call(this,et.Y9,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",r)||this).alpha=1,t}return function(i,e){function t(){this.constructor=i}Pn(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,i),e.prototype._loadMatrix=function(t,r){void 0===r&&(r=!1);var s=t;r&&(this._multiply(s,this.uniforms.m,t),s=this._colorMatrix(s)),this.uniforms.m=s},e.prototype._multiply=function(t,r,s){return t[0]=r[0]*s[0]+r[1]*s[5]+r[2]*s[10]+r[3]*s[15],t[1]=r[0]*s[1]+r[1]*s[6]+r[2]*s[11]+r[3]*s[16],t[2]=r[0]*s[2]+r[1]*s[7]+r[2]*s[12]+r[3]*s[17],t[3]=r[0]*s[3]+r[1]*s[8]+r[2]*s[13]+r[3]*s[18],t[4]=r[0]*s[4]+r[1]*s[9]+r[2]*s[14]+r[3]*s[19]+r[4],t[5]=r[5]*s[0]+r[6]*s[5]+r[7]*s[10]+r[8]*s[15],t[6]=r[5]*s[1]+r[6]*s[6]+r[7]*s[11]+r[8]*s[16],t[7]=r[5]*s[2]+r[6]*s[7]+r[7]*s[12]+r[8]*s[17],t[8]=r[5]*s[3]+r[6]*s[8]+r[7]*s[13]+r[8]*s[18],t[9]=r[5]*s[4]+r[6]*s[9]+r[7]*s[14]+r[8]*s[19]+r[9],t[10]=r[10]*s[0]+r[11]*s[5]+r[12]*s[10]+r[13]*s[15],t[11]=r[10]*s[1]+r[11]*s[6]+r[12]*s[11]+r[13]*s[16],t[12]=r[10]*s[2]+r[11]*s[7]+r[12]*s[12]+r[13]*s[17],t[13]=r[10]*s[3]+r[11]*s[8]+r[12]*s[13]+r[13]*s[18],t[14]=r[10]*s[4]+r[11]*s[9]+r[12]*s[14]+r[13]*s[19]+r[14],t[15]=r[15]*s[0]+r[16]*s[5]+r[17]*s[10]+r[18]*s[15],t[16]=r[15]*s[1]+r[16]*s[6]+r[17]*s[11]+r[18]*s[16],t[17]=r[15]*s[2]+r[16]*s[7]+r[17]*s[12]+r[18]*s[17],t[18]=r[15]*s[3]+r[16]*s[8]+r[17]*s[13]+r[18]*s[18],t[19]=r[15]*s[4]+r[16]*s[9]+r[17]*s[14]+r[18]*s[19]+r[19],t},e.prototype._colorMatrix=function(t){var r=new Float32Array(t);return r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,r},e.prototype.brightness=function(t,r){this._loadMatrix([t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0],r)},e.prototype.tint=function(t,r){this._loadMatrix([(t>>16&255)/255,0,0,0,0,0,(t>>8&255)/255,0,0,0,0,0,(255&t)/255,0,0,0,0,0,1,0],r)},e.prototype.greyscale=function(t,r){this._loadMatrix([t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0],r)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,r){t=(t||0)/180*Math.PI;var s=Math.cos(t),h=Math.sin(t),c=1/3,E=(0,Math.sqrt)(c);this._loadMatrix([s+(1-s)*c,c*(1-s)-E*h,c*(1-s)+E*h,0,0,c*(1-s)+E*h,s+c*(1-s),c*(1-s)-E*h,0,0,c*(1-s)-E*h,c*(1-s)+E*h,s+c*(1-s),0,0,0,0,0,1,0],r)},e.prototype.contrast=function(t,r){var s=(t||0)+1,h=-.5*(s-1);this._loadMatrix([s,0,0,0,h,0,s,0,0,h,0,0,s,0,h,0,0,0,1,0],r)},e.prototype.saturate=function(t,r){void 0===t&&(t=0);var s=2*t/3+1,h=-.5*(s-1);this._loadMatrix([s,h,h,0,0,h,s,h,0,0,h,h,s,0,0,0,0,0,1,0],r)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,r,s,h,l){var c=((s=s||16770432)>>16&255)/255,E=(s>>8&255)/255,_=(255&s)/255,T=((h=h||3375104)>>16&255)/255,D=(h>>8&255)/255,g=(255&h)/255;this._loadMatrix([.3,.59,.11,0,0,c,E,_,t=t||.2,0,T,D,g,r=r||.15,0,c-T,E-D,_-g,0,0],l)},e.prototype.night=function(t,r){this._loadMatrix([-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0],r)},e.prototype.predator=function(t,r){this._loadMatrix([11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0],r)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(et.wn);Dn.prototype.grayscale=Dn.prototype.greyscale;var bn=function(i,e){return(bn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])})(i,e)},Fa=function(i){function e(t,r){var s=this,h=new Y.y3;return t.renderable=!1,(s=i.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:t._texture,filterMatrix:h,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=t,s.maskMatrix=h,null==r&&(r=20),s.scale=new Y.E9(r,r),s}return function(i,e){function t(){this.constructor=i}bn(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,i),e.prototype.apply=function(t,r,s,h){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var l=this.maskSprite.worldTransform,c=Math.sqrt(l.a*l.a+l.b*l.b),E=Math.sqrt(l.c*l.c+l.d*l.d);0!==c&&0!==E&&(this.uniforms.rotation[0]=l.a/c,this.uniforms.rotation[1]=l.b/c,this.uniforms.rotation[2]=l.c/E,this.uniforms.rotation[3]=l.d/E),t.applyFilter(this,r,s,h)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0}),e}(et.wn),Mn=function(i,e){return(Mn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])})(i,e)},Ya=function(i){function e(){return i.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this}return function(i,e){function t(){this.constructor=i}Mn(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,i),e}(et.wn),In=function(i,e){return(In=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])})(i,e)},Va=function(i){function e(t,r){void 0===t&&(t=.5),void 0===r&&(r=Math.random());var s=i.call(this,et.Y9,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return s.noise=t,s.seed=r,s}return function(i,e){function t(){this.constructor=i}In(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,i),Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0}),e}(et.wn),fn=(()=>(function(i){i[i.NONE=0]="NONE",i[i.LOW=2]="LOW",i[i.MEDIUM=4]="MEDIUM",i[i.HIGH=8]="HIGH"}(fn||(fn={})),fn))(),Xn=new Y.y3;b.prototype._cacheAsBitmap=!1,b.prototype._cacheData=null,b.prototype._cacheAsBitmapResolution=null,b.prototype._cacheAsBitmapMultisample=fn.NONE;var Wa=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(b.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(i){i!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=i,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(i){i!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=i,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(i){var e;this._cacheAsBitmap!==i&&(this._cacheAsBitmap=i,i?(this._cacheData||(this._cacheData=new Wa),(e=this._cacheData).originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),b.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))},b.prototype._initCachedDisplayObject=function(e){var t;if(!this._cacheData||!this._cacheData.sprite){var r=this.alpha;this.alpha=1,e.batch.flush();var s=this.getLocalBounds(null,!0).clone();this.filters&&this.filters.length&&s.pad(this.filters[0].padding),s.ceil(j.X.RESOLUTION);var l=e.renderTexture.current,c=e.renderTexture.sourceFrame.clone(),E=e.renderTexture.destinationFrame.clone(),_=e.projection.transform,T=et.TI.create({width:s.width,height:s.height,resolution:this.cacheAsBitmapResolution||e.resolution,multisample:null!==(t=this.cacheAsBitmapMultisample)&&void 0!==t?t:e.multisample}),D="cacheAsBitmap_"+(0,y.hQ)();this._cacheData.textureCacheId=D,et.VL.addToCache(T.baseTexture,D),et.xE.addToCache(T,D);var g=this.transform.localTransform.copyTo(Xn).invert().translate(-s.x,-s.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:T,clear:!0,transform:g,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=_,e.renderTexture.bind(l,c,E),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;var O=new te(T);O.transform.worldTransform=this.transform.worldTransform,O.anchor.x=-s.x/s.width,O.anchor.y=-s.y/s.height,O.alpha=r,O._bounds=this._bounds,this._cacheData.sprite=O,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=O.containsPoint.bind(O)}},b.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))},b.prototype._initCachedDisplayObjectCanvas=function(e){if(!this._cacheData||!this._cacheData.sprite){var t=this.getLocalBounds(null,!0),r=this.alpha;this.alpha=1;var s=e.context,h=e._projTransform;t.ceil(j.X.RESOLUTION);var l=et.TI.create({width:t.width,height:t.height}),c="cacheAsBitmap_"+(0,y.hQ)();this._cacheData.textureCacheId=c,et.VL.addToCache(l.baseTexture,c),et.xE.addToCache(l,c);var E=Xn;this.transform.localTransform.copyTo(E),E.invert(),E.tx-=t.x,E.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:l,clear:!0,transform:E,skipUpdateTransform:!1}),e.context=s,e._projTransform=h,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;var _=new te(l);_.transform.worldTransform=this.transform.worldTransform,_.anchor.x=-t.x/t.width,_.anchor.y=-t.y/t.height,_.alpha=r,_._bounds=this._bounds,this._cacheData.sprite=_,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=_.containsPoint.bind(_)}},b.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},b.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},b.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,et.VL.removeFromCache(this._cacheData.textureCacheId),et.xE.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},b.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)},b.prototype.name=null,fe.prototype.getChildByName=function(e,t){for(var r=0,s=this.children.length;r<s;r++)if(this.children[r].name===e)return this.children[r];if(t)for(r=0,s=this.children.length;r<s;r++)if(this.children[r].getChildByName){var l=this.children[r].getChildByName(e,!0);if(l)return l}return null},b.prototype.getGlobalPosition=function(e,t){return void 0===e&&(e=new Y.E9),void 0===t&&(t=!1),this.parent?this.parent.toGlobal(this.position,e,t):(e.x=this.position.x,e.y=this.position.y),e};var Nn=function(i,e){return(Nn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])})(i,e)};function Si(i,e){function t(){this.constructor=i}Nn(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var ja=function(i){function e(t,r,s,h){void 0===t&&(t=100),void 0===r&&(r=100),void 0===s&&(s=10),void 0===h&&(h=10);var l=i.call(this)||this;return l.segWidth=s,l.segHeight=h,l.width=t,l.height=r,l.build(),l}return Si(e,i),e.prototype.build=function(){for(var t=this.segWidth*this.segHeight,r=[],s=[],h=[],l=this.segWidth-1,c=this.segHeight-1,E=this.width/l,_=this.height/c,T=0;T<t;T++){var D=T%this.segWidth,g=T/this.segWidth|0;r.push(D*E,g*_),s.push(D/l,g/c)}var O=l*c;for(T=0;T<O;T++){var I=T%l,M=T/l|0,X=M*this.segWidth+I+1,ht=(M+1)*this.segWidth+I;h.push(M*this.segWidth+I,X,ht,X,(M+1)*this.segWidth+I+1,ht)}this.buffers[0].data=new Float32Array(r),this.buffers[1].data=new Float32Array(s),this.indexBuffer.data=new Uint16Array(h),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(hn),za=function(i){function e(t,r,s){void 0===t&&(t=200),void 0===s&&(s=0);var h=i.call(this,new Float32Array(4*r.length),new Float32Array(4*r.length),new Uint16Array(6*(r.length-1)))||this;return h.points=r,h._width=t,h.textureScale=s,h.build(),h}return Si(e,i),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var t=this.points;if(t){var r=this.getBuffer("aVertexPosition"),s=this.getBuffer("aTextureCoord"),h=this.getIndex();if(!(t.length<1)){r.data.length/4!==t.length&&(r.data=new Float32Array(4*t.length),s.data=new Float32Array(4*t.length),h.data=new Uint16Array(6*(t.length-1)));var l=s.data,c=h.data;l[0]=0,l[1]=0,l[2]=0,l[3]=1;for(var E=0,_=t[0],T=this._width*this.textureScale,D=t.length,g=0;g<D;g++){var O=4*g;if(this.textureScale>0){var I=_.x-t[g].x,M=_.y-t[g].y,C=Math.sqrt(I*I+M*M);_=t[g],E+=C/T}else E=g/(D-1);l[O]=E,l[O+1]=0,l[O+2]=E,l[O+3]=1}var X=0;for(g=0;g<D-1;g++)c[X++]=O=2*g,c[X++]=O+1,c[X++]=O+2,c[X++]=O+2,c[X++]=O+1,c[X++]=O+3;s.update(),h.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var s,r=t[0],h=0,l=0,c=this.buffers[0].data,E=t.length,_=0;_<E;_++){var T=t[_],D=4*_;l=-((s=_<t.length-1?t[_+1]:T).x-r.x),h=s.y-r.y;var g=Math.sqrt(h*h+l*l),O=this.textureScale>0?this.textureScale*this._width/2:this._width/2;h/=g,l/=g,l*=O,c[D]=T.x+(h*=O),c[D+1]=T.y+l,c[D+2]=T.x-h,c[D+3]=T.y-l,r=T}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(hn),Ka=(function(i){function e(t,r,s){void 0===s&&(s=0);var h=this,l=new za(t.height,r,s),c=new rn(t);return s>0&&(t.baseTexture.wrapMode=Yt.Nt.REPEAT),(h=i.call(this,l,c)||this).autoUpdate=!0,h}Si(e,i),e.prototype._render=function(t){var r=this.geometry;(this.autoUpdate||r._width!==this.shader.texture.height)&&(r._width=this.shader.texture.height,r.update()),i.prototype._render.call(this,t)}}(yi),function(i){function e(t,r,s){var h=this,l=new ja(t.width,t.height,r,s),c=new rn(et.xE.WHITE);return(h=i.call(this,l,c)||this).texture=t,h.autoResize=!0,h}return Si(e,i),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry,r=this.shader.texture;this.autoResize&&(t.width!==r.width||t.height!==r.height)&&(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),i.prototype._render.call(this,t)},e.prototype.destroy=function(t){this.shader.texture.off("update",this.textureUpdated,this),i.prototype.destroy.call(this,t)},e}(yi)),Ln=(function(i){function e(t,r,s,h,l){void 0===t&&(t=et.xE.EMPTY);var c=this,E=new hn(r,s,h);E.getBuffer("aVertexPosition").static=!1;var _=new rn(t);return(c=i.call(this,E,_,null,l)||this).autoUpdate=!0,c}Si(e,i),Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),i.prototype._render.call(this,t)}}(yi),function(i){function e(t,r,s,h,l){void 0===r&&(r=10),void 0===s&&(s=10),void 0===h&&(h=10),void 0===l&&(l=10);var c=i.call(this,et.xE.WHITE,4,4)||this;return c._origWidth=t.orig.width,c._origHeight=t.orig.height,c._width=c._origWidth,c._height=c._origHeight,c._leftWidth=r,c._rightWidth=h,c._topHeight=s,c._bottomHeight=l,c.texture=t,c}Si(e,i),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,r=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*r,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*r,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,r=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*r,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*r,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,s=this._topHeight+this._bottomHeight;return Math.min(this._width>t?1:this._width/t,this._height>s?1:this._height/s)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var t=this.texture,r=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var s=1/this._origWidth,h=1/this._origHeight;r[0]=r[8]=r[16]=r[24]=0,r[1]=r[3]=r[5]=r[7]=0,r[6]=r[14]=r[22]=r[30]=1,r[25]=r[27]=r[29]=r[31]=1,r[2]=r[10]=r[18]=r[26]=s*this._leftWidth,r[4]=r[12]=r[20]=r[28]=1-s*this._rightWidth,r[9]=r[11]=r[13]=r[15]=h*this._topHeight,r[17]=r[19]=r[21]=r[23]=1-h*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}(Ka),rt(91),function(i,e){return(Ln=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])})(i,e)}),Za=function(i){function e(t,r){void 0===r&&(r=!0);var s=i.call(this,t[0]instanceof et.xE?t[0]:t[0].texture)||this;return s._textures=null,s._durations=null,s._autoUpdate=r,s._isConnectedToTicker=!1,s.animationSpeed=1,s.loop=!0,s.updateAnchor=!1,s.onComplete=null,s.onFrameChange=null,s.onLoop=null,s._currentTime=0,s._playing=!1,s._previousFrame=null,s.textures=t,s}return function(i,e){function t(){this.constructor=i}Ln(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,i),e.prototype.stop=function(){!this._playing||(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(_e.vB.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(_e.vB.shared.add(this.update,this,_e.uF.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(t){this.stop();var r=this.currentFrame;this._currentTime=t,r!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var r=this.currentFrame;this._currentTime=t,r!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){if(this._playing){var r=this.animationSpeed*t,s=this.currentFrame;if(null!==this._durations){var h=this._currentTime%1*this._durations[this.currentFrame];for(h+=r/60*1e3;h<0;)this._currentTime--,h+=this._durations[this.currentFrame];var l=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);h>=this._durations[this.currentFrame];)h-=this._durations[this.currentFrame]*l,this._currentTime+=l;this._currentTime+=h/this._durations[this.currentFrame]}else this._currentTime+=r;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):s!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<s||this.animationSpeed<0&&this.currentFrame>s)&&this.onLoop(),this.updateTexture())}},e.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(t){this.stop(),i.prototype.destroy.call(this,t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(t){for(var r=[],s=0;s<t.length;++s)r.push(et.xE.from(t[s]));return new e(r)},e.fromImages=function(t){for(var r=[],s=0;s<t.length;++s)r.push(et.xE.from(t[s]));return new e(r)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof et.xE)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var r=0;r<t.length;r++)this._textures.push(t[r].texture),this._durations.push(t[r].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(_e.vB.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(_e.vB.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),e}(te);et.Th.registerPlugin("accessibility",Vr),et.Th.registerPlugin("extract",Ni),et.Th.registerPlugin("interaction",jr),et.Th.registerPlugin("particle",tn),et.Th.registerPlugin("prepare",oa),et.Th.registerPlugin("batch",et.Bv),et.Th.registerPlugin("tilingSprite",pa),ye.registerPlugin(Ma),ye.registerPlugin(ii),ye.registerPlugin(Ki),ye.registerPlugin(_i),ye.registerPlugin(ua),Qe.registerPlugin(_e.Sb),Qe.registerPlugin(Bi);var $a={AlphaFilter:Ia.U,BlurFilter:Yn.T,BlurFilterPass:Yn.Y,ColorMatrixFilter:Dn,DisplacementFilter:Fa,FXAAFilter:Ya,NoiseFilter:Va}},516:$t=>{"use strict";function At(rt,nt){return Object.prototype.hasOwnProperty.call(rt,nt)}$t.exports=function(rt,nt,A,J){A=A||"=";var at={};if("string"!=typeof rt||0===rt.length)return at;var vt=/\+/g;rt=rt.split(nt=nt||"&");var G=1e3;J&&"number"==typeof J.maxKeys&&(G=J.maxKeys);var F=rt.length;G>0&&F>G&&(F=G);for(var W=0;W<F;++W){var Rt,bt,xt,ut,Z=rt[W].replace(vt,"%20"),Q=Z.indexOf(A);Q>=0?(Rt=Z.substr(0,Q),bt=Z.substr(Q+1)):(Rt=Z,bt=""),xt=decodeURIComponent(Rt),ut=decodeURIComponent(bt),At(at,xt)?Array.isArray(at[xt])?at[xt].push(ut):at[xt]=[at[xt],ut]:at[xt]=ut}return at}},5776:$t=>{"use strict";var At=function(rt){switch(typeof rt){case"string":return rt;case"boolean":return rt?"true":"false";case"number":return isFinite(rt)?rt:"";default:return""}};$t.exports=function(rt,nt,A,J){return nt=nt||"&",A=A||"=",null===rt&&(rt=void 0),"object"==typeof rt?Object.keys(rt).map(function(at){var vt=encodeURIComponent(At(at))+A;return Array.isArray(rt[at])?rt[at].map(function(G){return vt+encodeURIComponent(At(G))}).join(nt):vt+encodeURIComponent(At(rt[at]))}).join(nt):J?encodeURIComponent(At(J))+A+encodeURIComponent(At(rt)):""}},7137:($t,At,rt)=>{"use strict";At.decode=At.parse=rt(516),At.encode=At.stringify=rt(5776)},1308:function($t,At,rt){var nt;$t=rt.nmd($t),function(A){"object"==typeof global&&global;var G,F=2147483647,W=36,Pt=/^xn--/,Ut=/[^\x20-\x7E]/,Ct=/[\x2E\u3002\uFF0E\uFF61]/g,Ft={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Kt=Math.floor,se=String.fromCharCode;function v(L){throw RangeError(Ft[L])}function N(L,w){for(var $=L.length,st=[];$--;)st[$]=w(L[$]);return st}function y(L,w){var $=L.split("@"),st="";return $.length>1&&(st=$[0]+"@",L=$[1]),st+N((L=L.replace(Ct,".")).split("."),w).join(".")}function j(L){for(var ct,Xt,w=[],$=0,st=L.length;$<st;)(ct=L.charCodeAt($++))>=55296&&ct<=56319&&$<st?56320==(64512&(Xt=L.charCodeAt($++)))?w.push(((1023&ct)<<10)+(1023&Xt)+65536):(w.push(ct),$--):w.push(ct);return w}function Y(L){return N(L,function(w){var $="";return w>65535&&($+=se((w-=65536)>>>10&1023|55296),w=56320|1023&w),$+se(w)}).join("")}function Et(L){return L-48<10?L-22:L-65<26?L-65:L-97<26?L-97:W}function wt(L,w){return L+22+75*(L<26)-((0!=w)<<5)}function m(L,w,$){var st=0;for(L=$?Kt(L/700):L>>1,L+=Kt(L/w);L>455;st+=W)L=Kt(L/35);return Kt(st+36*L/(L+38))}function b(L){var st,gt,mt,Tt,pt,jt,oe,Qt,ue,de,w=[],$=L.length,ct=0,Xt=128,k=72;for((gt=L.lastIndexOf("-"))<0&&(gt=0),mt=0;mt<gt;++mt)L.charCodeAt(mt)>=128&&v("not-basic"),w.push(L.charCodeAt(mt));for(Tt=gt>0?gt+1:0;Tt<$;){for(pt=ct,jt=1,oe=W;Tt>=$&&v("invalid-input"),((Qt=Et(L.charCodeAt(Tt++)))>=W||Qt>Kt((F-ct)/jt))&&v("overflow"),ct+=Qt*jt,!(Qt<(ue=oe<=k?1:oe>=k+26?26:oe-k));oe+=W)jt>Kt(F/(de=W-ue))&&v("overflow"),jt*=de;k=m(ct-pt,st=w.length+1,0==pt),Kt(ct/st)>F-Xt&&v("overflow"),Xt+=Kt(ct/st),ct%=st,w.splice(ct++,0,Xt)}return Y(w)}function x(L){var w,$,st,ct,Xt,k,gt,mt,Tt,pt,jt,Qt,ue,de,be,oe=[];for(Qt=(L=j(L)).length,w=128,$=0,Xt=72,k=0;k<Qt;++k)(jt=L[k])<128&&oe.push(se(jt));for(st=ct=oe.length,ct&&oe.push("-");st<Qt;){for(gt=F,k=0;k<Qt;++k)(jt=L[k])>=w&&jt<gt&&(gt=jt);for(gt-w>Kt((F-$)/(ue=st+1))&&v("overflow"),$+=(gt-w)*ue,w=gt,k=0;k<Qt;++k)if((jt=L[k])<w&&++$>F&&v("overflow"),jt==w){for(mt=$,Tt=W;!(mt<(pt=Tt<=Xt?1:Tt>=Xt+26?26:Tt-Xt));Tt+=W)oe.push(se(wt(pt+(be=mt-pt)%(de=W-pt),0))),mt=Kt(be/de);oe.push(se(wt(mt,0))),Xt=m($,ue,st==ct),$=0,++st}++$,++w}return oe.join("")}G={version:"1.3.2",ucs2:{decode:j,encode:Y},decode:b,encode:x,toASCII:function(L){return y(L,function(w){return Ut.test(w)?"xn--"+x(w):w})},toUnicode:function(L){return y(L,function(w){return Pt.test(w)?b(w.slice(4).toLowerCase()):w})}},void 0!==(nt=function(){return G}.call(At,rt,At,$t))&&($t.exports=nt)}()},8762:($t,At,rt)=>{"use strict";var A=rt(1308),J=rt(796);function at(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}At.Qc=R,At.DB=function(v,N){return R(v,!1,!0).resolve(N)},At.WU=function(v){return J.isString(v)&&(v=R(v)),v instanceof at?v.format():at.prototype.format.call(v)};var vt=/^([a-z0-9.+-]+:)/i,G=/:[0-9]*$/,F=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Z=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),Q=["'"].concat(Z),Rt=["%","/","?",";","#"].concat(Q),bt=["/","?","#"],ut=/^[+a-z0-9A-Z_-]{0,63}$/,zt=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Pt={javascript:!0,"javascript:":!0},Ut={javascript:!0,"javascript:":!0},Ct={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Ft=rt(7137);function R(v,N,y){if(v&&J.isObject(v)&&v instanceof at)return v;var j=new at;return j.parse(v,N,y),j}at.prototype.parse=function(v,N,y){if(!J.isString(v))throw new TypeError("Parameter 'url' must be a string, not "+typeof v);var j=v.indexOf("?"),Y=-1!==j&&j<v.indexOf("#")?"?":"#",Et=v.split(Y);Et[0]=Et[0].replace(/\\/g,"/");var m=v=Et.join(Y);if(m=m.trim(),!y&&1===v.split("#").length){var b=F.exec(m);if(b)return this.path=m,this.href=m,this.pathname=b[1],b[2]?(this.search=b[2],this.query=N?Ft.parse(this.search.substr(1)):this.search.substr(1)):N&&(this.search="",this.query={}),this}var x=vt.exec(m);if(x){var H=(x=x[0]).toLowerCase();this.protocol=H,m=m.substr(x.length)}if(y||x||m.match(/^\/\/[^@\/]+@[^@\/]+/)){var B="//"===m.substr(0,2);B&&(!x||!Ut[x])&&(m=m.substr(2),this.slashes=!0)}if(!Ut[x]&&(B||x&&!Ct[x])){for(var L=-1,w=0;w<bt.length;w++)-1!==($=m.indexOf(bt[w]))&&(-1===L||$<L)&&(L=$);var st,ct;for(-1!==(ct=-1===L?m.lastIndexOf("@"):m.lastIndexOf("@",L))&&(st=m.slice(0,ct),m=m.slice(ct+1),this.auth=decodeURIComponent(st)),L=-1,w=0;w<Rt.length;w++){var $;-1!==($=m.indexOf(Rt[w]))&&(-1===L||$<L)&&(L=$)}-1===L&&(L=m.length),this.host=m.slice(0,L),m=m.slice(L),this.parseHost(),this.hostname=this.hostname||"";var Xt="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!Xt)for(var k=this.hostname.split(/\./),gt=(w=0,k.length);w<gt;w++){var mt=k[w];if(mt&&!mt.match(ut)){for(var Tt="",pt=0,jt=mt.length;pt<jt;pt++)mt.charCodeAt(pt)>127?Tt+="x":Tt+=mt[pt];if(!Tt.match(ut)){var oe=k.slice(0,w),Qt=k.slice(w+1),ue=mt.match(zt);ue&&(oe.push(ue[1]),Qt.unshift(ue[2])),Qt.length&&(m="/"+Qt.join(".")+m),this.hostname=oe.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),Xt||(this.hostname=A.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,Xt&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==m[0]&&(m="/"+m))}if(!Pt[H])for(w=0,gt=Q.length;w<gt;w++){var Me=Q[w];if(-1!==m.indexOf(Me)){var fe=encodeURIComponent(Me);fe===Me&&(fe=escape(Me)),m=m.split(Me).join(fe)}}var Ve=m.indexOf("#");-1!==Ve&&(this.hash=m.substr(Ve),m=m.slice(0,Ve));var Ge=m.indexOf("?");return-1!==Ge?(this.search=m.substr(Ge),this.query=m.substr(Ge+1),N&&(this.query=Ft.parse(this.query)),m=m.slice(0,Ge)):N&&(this.search="",this.query={}),m&&(this.pathname=m),Ct[H]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},at.prototype.format=function(){var v=this.auth||"";v&&(v=(v=encodeURIComponent(v)).replace(/%3A/i,":"),v+="@");var N=this.protocol||"",y=this.pathname||"",j=this.hash||"",Y=!1,Et="";this.host?Y=v+this.host:this.hostname&&(Y=v+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(Y+=":"+this.port)),this.query&&J.isObject(this.query)&&Object.keys(this.query).length&&(Et=Ft.stringify(this.query));var wt=this.search||Et&&"?"+Et||"";return N&&":"!==N.substr(-1)&&(N+=":"),this.slashes||(!N||Ct[N])&&!1!==Y?(Y="//"+(Y||""),y&&"/"!==y.charAt(0)&&(y="/"+y)):Y||(Y=""),j&&"#"!==j.charAt(0)&&(j="#"+j),wt&&"?"!==wt.charAt(0)&&(wt="?"+wt),N+Y+(y=y.replace(/[?#]/g,function(m){return encodeURIComponent(m)}))+(wt=wt.replace("#","%23"))+j},at.prototype.resolve=function(v){return this.resolveObject(R(v,!1,!0)).format()},at.prototype.resolveObject=function(v){if(J.isString(v)){var N=new at;N.parse(v,!1,!0),v=N}for(var y=new at,j=Object.keys(this),Y=0;Y<j.length;Y++){var Et=j[Y];y[Et]=this[Et]}if(y.hash=v.hash,""===v.href)return y.href=y.format(),y;if(v.slashes&&!v.protocol){for(var wt=Object.keys(v),m=0;m<wt.length;m++){var b=wt[m];"protocol"!==b&&(y[b]=v[b])}return Ct[y.protocol]&&y.hostname&&!y.pathname&&(y.path=y.pathname="/"),y.href=y.format(),y}if(v.protocol&&v.protocol!==y.protocol){if(!Ct[v.protocol]){for(var x=Object.keys(v),H=0;H<x.length;H++){var B=x[H];y[B]=v[B]}return y.href=y.format(),y}if(y.protocol=v.protocol,v.host||Ut[v.protocol])y.pathname=v.pathname;else{for(var gt=(v.pathname||"").split("/");gt.length&&!(v.host=gt.shift()););v.host||(v.host=""),v.hostname||(v.hostname=""),""!==gt[0]&&gt.unshift(""),gt.length<2&&gt.unshift(""),y.pathname=gt.join("/")}return y.search=v.search,y.query=v.query,y.host=v.host||"",y.auth=v.auth,y.hostname=v.hostname||v.host,y.port=v.port,(y.pathname||y.search)&&(y.path=(y.pathname||"")+(y.search||"")),y.slashes=y.slashes||v.slashes,y.href=y.format(),y}var $=y.pathname&&"/"===y.pathname.charAt(0),st=v.host||v.pathname&&"/"===v.pathname.charAt(0),ct=st||$||y.host&&v.pathname,Xt=ct,k=y.pathname&&y.pathname.split("/")||[],mt=(gt=v.pathname&&v.pathname.split("/")||[],y.protocol&&!Ct[y.protocol]);if(mt&&(y.hostname="",y.port=null,y.host&&(""===k[0]?k[0]=y.host:k.unshift(y.host)),y.host="",v.protocol&&(v.hostname=null,v.port=null,v.host&&(""===gt[0]?gt[0]=v.host:gt.unshift(v.host)),v.host=null),ct=ct&&(""===gt[0]||""===k[0])),st)y.host=v.host||""===v.host?v.host:y.host,y.hostname=v.hostname||""===v.hostname?v.hostname:y.hostname,y.search=v.search,y.query=v.query,k=gt;else if(gt.length)k||(k=[]),k.pop(),k=k.concat(gt),y.search=v.search,y.query=v.query;else if(!J.isNullOrUndefined(v.search))return mt&&(y.hostname=y.host=k.shift(),(Tt=!!(y.host&&y.host.indexOf("@")>0)&&y.host.split("@"))&&(y.auth=Tt.shift(),y.host=y.hostname=Tt.shift())),y.search=v.search,y.query=v.query,(!J.isNull(y.pathname)||!J.isNull(y.search))&&(y.path=(y.pathname?y.pathname:"")+(y.search?y.search:"")),y.href=y.format(),y;if(!k.length)return y.pathname=null,y.path=y.search?"/"+y.search:null,y.href=y.format(),y;for(var pt=k.slice(-1)[0],jt=(y.host||v.host||k.length>1)&&("."===pt||".."===pt)||""===pt,oe=0,Qt=k.length;Qt>=0;Qt--)"."===(pt=k[Qt])?k.splice(Qt,1):".."===pt?(k.splice(Qt,1),oe++):oe&&(k.splice(Qt,1),oe--);if(!ct&&!Xt)for(;oe--;oe)k.unshift("..");ct&&""!==k[0]&&(!k[0]||"/"!==k[0].charAt(0))&&k.unshift(""),jt&&"/"!==k.join("/").substr(-1)&&k.push("");var Tt,ue=""===k[0]||k[0]&&"/"===k[0].charAt(0);return mt&&(y.hostname=y.host=ue?"":k.length?k.shift():"",(Tt=!!(y.host&&y.host.indexOf("@")>0)&&y.host.split("@"))&&(y.auth=Tt.shift(),y.host=y.hostname=Tt.shift())),(ct=ct||y.host&&k.length)&&!ue&&k.unshift(""),k.length?y.pathname=k.join("/"):(y.pathname=null,y.path=null),(!J.isNull(y.pathname)||!J.isNull(y.search))&&(y.path=(y.pathname?y.pathname:"")+(y.search?y.search:"")),y.auth=v.auth||y.auth,y.slashes=y.slashes||v.slashes,y.href=y.format(),y},at.prototype.parseHost=function(){var v=this.host,N=G.exec(v);N&&(":"!==(N=N[0])&&(this.port=N.substr(1)),v=v.substr(0,v.length-N.length)),v&&(this.hostname=v)}},796:$t=>{"use strict";$t.exports={isString:function(At){return"string"==typeof At},isObject:function(At){return"object"==typeof At&&null!==At},isNull:function(At){return null===At},isNullOrUndefined:function(At){return null==At}}}}]);