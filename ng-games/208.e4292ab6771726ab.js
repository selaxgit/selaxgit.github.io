"use strict";(self.webpackChunkng_games=self.webpackChunkng_games||[]).push([[208],{2208:(dt,P,A)=>{A.r(P),A.d(P,{ArkanoidModule:()=>lt});var G=A(9808),j=A(2074),h=A(8977),U=A(136),E=A(6695),w=A(7268),K=A(2961);const Q=[{x:4,y:587,height:36,width:36},{x:48,y:587,height:36,width:36},{x:92,y:587,height:36,width:36},{x:136,y:587,height:36,width:36},{x:180,y:587,height:36,width:36}],R={"brick-grey":{x:0,y:0,height:35,width:57}},I={centerTexture:{x:131,y:22,height:22,width:35},sideTextures:[{x:0,y:0,width:44,height:22},{x:0,y:22,height:22,width:44},{x:0,y:44,height:22,width:44},{x:0,y:66,height:22,width:44}]},l_LT_height=40,l_LT_width=28,l_LT_x=104,l_LT_y=208,l_RT_height=40,l_RT_width=38,l_RT_x=104,l_RT_y=262,l_HORIZONTAL_height=30,l_HORIZONTAL_width=218,l_HORIZONTAL_x=104,l_HORIZONTAL_y=176,l_VERTICAL_height=94,l_VERTICAL_width=28,l_VERTICAL_x=146,l_VERTICAL_y=208,_=[{height:22,width:26,x:256,y:256},{height:22,width:26,x:256,y:278},{height:22,width:26,x:256,y:300},{height:22,width:26,x:256,y:322}];class tt extends h.W20{constructor(s){super(),this.uiPackTexture=s,this.ballAngle=0*Math.PI/180,this.ballSpeed=5,this.ballDeltaX=Math.cos(this.ballAngle),this.ballDeltaY=Math.sin(this.ballAngle),this.initBallDefault(),this.currentBall=this.ballDefault}get animated(){return this.currentBall.playing}set animated(s){s?this.currentBall.play():this.currentBall.stop()}setCoords(s,t,i=null){this.x=s-this.width/2,this.y=t-this.height/2,null!==i&&(this.ballAngle=i,this.ballDeltaX=Math.cos(this.ballAngle),this.ballDeltaY=Math.sin(this.ballAngle))}updateSuitableBricks(s,t){t.removeChildren();const i=[],e=this.x+this.width/2,n=this.y+this.height/2;let o=e+13*this.ballDeltaX,a=n+13*this.ballDeltaY;const y={p1:{x:e,y:n},p2:{x:o,y:a}};this.drawArrow(t,e,n,o,a,65280);const r=w.k.rad2grad(this.ballAngle);let p=w.k.grad2rad(r-90);const m=e+13*Math.cos(p),b=n+13*Math.sin(p);o=m+13*this.ballDeltaX,a=b+13*this.ballDeltaY,this.drawArrow(t,m,b,o,a,65280);const T={p1:{x:m,y:b},p2:{x:o,y:a}};p=w.k.grad2rad(r+90);const k=e+13*Math.cos(p),D=n+13*Math.sin(p);o=k+13*this.ballDeltaX,a=D+13*this.ballDeltaY,this.drawArrow(t,k,D,o,a,65280);const S={p1:{x:k,y:D},p2:{x:o,y:a}};return Array.isArray(s)&&s.forEach(d=>{const C=[],M=d.idx,L={p1:{x:d.rect.x,y:d.rect.y},p2:{x:d.rect.x,y:d.rect.y+d.rect.height}};let x=w.k.lineIntersect(y,L);x&&x.seg2&&(C.push({idx:M,angle:-90,x:x.x,y:x.y,distance:Math.sqrt(Math.pow(Math.abs(e-x.x),2)+Math.pow(Math.abs(n-x.y),2))}),this.drawCircle(t,x.x,x.y,5)),x=w.k.lineIntersect(T,L),x&&x.seg2&&(C.push({idx:M,angle:-90,x:x.x,y:x.y,distance:Math.sqrt(Math.pow(Math.abs(m-x.x),2)+Math.pow(Math.abs(b-x.y),2))}),this.drawCircle(t,x.x,x.y,5)),x=w.k.lineIntersect(S,L),x&&x.seg2&&(C.push({idx:M,angle:-90,x:x.x,y:x.y,distance:Math.sqrt(Math.pow(Math.abs(k-x.x),2)+Math.pow(Math.abs(D-x.y),2))}),this.drawCircle(t,x.x,x.y,5));const O={p1:{x:d.rect.x+d.rect.width,y:d.rect.y},p2:{x:d.rect.x+d.rect.width,y:d.rect.y+d.rect.height}};let u=w.k.lineIntersect(y,O);u&&u.seg2&&(C.push({idx:M,angle:-90,x:u.x,y:u.y,distance:Math.sqrt(Math.pow(Math.abs(e-u.x),2)+Math.pow(Math.abs(n-u.y),2))}),this.drawCircle(t,u.x,u.y,5)),u=w.k.lineIntersect(T,O),u&&u.seg2&&(C.push({idx:M,angle:-90,x:u.x,y:u.y,distance:Math.sqrt(Math.pow(Math.abs(m-u.x),2)+Math.pow(Math.abs(b-u.y),2))}),this.drawCircle(t,u.x,u.y,5)),u=w.k.lineIntersect(S,O),u&&u.seg2&&(C.push({idx:M,angle:-90,x:u.x,y:u.y,distance:Math.sqrt(Math.pow(Math.abs(k-u.x),2)+Math.pow(Math.abs(D-u.y),2))}),this.drawCircle(t,u.x,u.y,5));const W={p1:{x:d.rect.x,y:d.rect.y},p2:{x:d.rect.x+d.rect.width,y:d.rect.y}};let g=w.k.lineIntersect(y,W);g&&g.seg2&&(C.push({idx:M,angle:0,x:g.x,y:g.y,distance:Math.sqrt(Math.pow(Math.abs(e-g.x),2)+Math.pow(Math.abs(n-g.y),2))}),this.drawCircle(t,g.x,g.y,5)),g=w.k.lineIntersect(T,W),g&&g.seg2&&(C.push({idx:M,angle:0,x:g.x,y:g.y,distance:Math.sqrt(Math.pow(Math.abs(m-g.x),2)+Math.pow(Math.abs(b-g.y),2))}),this.drawCircle(t,g.x,g.y,5)),g=w.k.lineIntersect(S,W),g&&g.seg2&&(C.push({idx:M,angle:0,x:g.x,y:g.y,distance:Math.sqrt(Math.pow(Math.abs(k-g.x),2)+Math.pow(Math.abs(D-g.y),2))}),this.drawCircle(t,g.x,g.y,5));const F={p1:{x:d.rect.x,y:d.rect.y+d.rect.height},p2:{x:d.rect.x+d.rect.width,y:d.rect.y+d.rect.height}};let f=w.k.lineIntersect(y,F);if(f&&f.seg2&&(C.push({idx:M,angle:0,x:f.x,y:f.y,distance:Math.sqrt(Math.pow(Math.abs(e-f.x),2)+Math.pow(Math.abs(n-f.y),2))}),this.drawCircle(t,f.x,f.y,5)),f=w.k.lineIntersect(T,F),f&&f.seg2&&(C.push({idx:M,angle:0,x:f.x,y:f.y,distance:Math.sqrt(Math.pow(Math.abs(m-f.x),2)+Math.pow(Math.abs(b-f.y),2))}),this.drawCircle(t,f.x,f.y,5)),f=w.k.lineIntersect(S,F),f&&f.seg2&&(C.push({idx:M,angle:0,x:f.x,y:f.y,distance:Math.sqrt(Math.pow(Math.abs(k-f.x),2)+Math.pow(Math.abs(D-f.y),2))}),this.drawCircle(t,f.x,f.y,5)),C.length>0){C.sort((ot,rt)=>ot.distance-rt.distance);const N=C.shift();N&&i.push(N)}}),i}isCollisionBricks(s,t){const i=w.k.rad2grad(this.ballAngle),e=this.width/2,n=this.x+e,o=this.y+e;let a=w.k.grad2rad(i-90);const y=n+e*Math.cos(a),r=o+e*Math.sin(a);a=w.k.grad2rad(i+90);const p=n+e*Math.cos(a),m=o+e*Math.sin(a);for(const b of t){const T=Math.sqrt(Math.pow(Math.abs(n-b.x),2)+Math.pow(Math.abs(o-b.y),2)),k=Math.sqrt(Math.pow(Math.abs(y-b.x),2)+Math.pow(Math.abs(r-b.y),2)),D=Math.sqrt(Math.pow(Math.abs(p-b.x),2)+Math.pow(Math.abs(m-b.y),2));if(T<=e||k<=e||D<=e){const S=w.k.grad2rad(b.angle),d=-Math.sin(S),C=-Math.cos(S),M=this.ballDeltaX*d+this.ballDeltaY*C;return this.ballDeltaX=this.ballDeltaX-2*M*d,this.ballDeltaY=this.ballDeltaY-2*M*C,b.idx}}return null}isCollisionVaus(s,t){const i=this.x+this.ballSpeed*this.ballDeltaX*s,n=this.y+this.ballSpeed*this.ballDeltaY*s+this.height;if(n>=t.y&&n<=t.y+10){const o=t.x-this.width+10,a=t.x+t.width;if(i>=o&&i<a){this.ballDeltaY*=-1;const y=100/(a-o)*(i+this.width/2-o);let r=w.k.angleOfVector({x:this.ballDeltaX,y:this.ballDeltaY});if(y<=50||y>=65){y<=50?(r>270&&(r-=r-270),r-=y<20?40:y<30?30:y<40?20:10):y>=65&&(r<270&&(r+=270-r),r+=y>90?40:y>80?30:y>70?20:10),r<=190&&(r=200),r>=350&&(r=340);const p=w.k.angleVector(r);this.ballDeltaX=p.x,this.ballDeltaY=p.y}return!0}}return!1}isCollisionStopLines(s,t,i,e){const n=this.x+this.ballSpeed*this.ballDeltaX*s,o=this.y+this.ballSpeed*this.ballDeltaY*s;if(o<=t.top.y){const a=this.ballDeltaX*t.top.nx+this.ballDeltaY*t.top.ny;return this.ballDeltaX=this.ballDeltaX-2*a*t.top.nx,this.ballDeltaY=this.ballDeltaY-2*a*t.top.ny,!0}if(o+this.height>=t.bottom.y){if(e){const a=this.ballDeltaX*t.bottom.nx+this.ballDeltaY*t.bottom.ny;return this.ballDeltaX=this.ballDeltaX-2*a*t.bottom.nx,this.ballDeltaY=this.ballDeltaY-2*a*t.bottom.ny,!0}if(o>=i)return null}else{if(n+this.width>=t.right.x){const a=this.ballDeltaX*t.right.nx+this.ballDeltaY*t.right.ny;return this.ballDeltaX=this.ballDeltaX-2*a*t.right.nx,this.ballDeltaY=this.ballDeltaY-2*a*t.right.ny,!0}if(n<=t.left.x){const a=this.ballDeltaX*t.left.nx+this.ballDeltaY*t.left.ny;return this.ballDeltaX=this.ballDeltaX-2*a*t.left.nx,this.ballDeltaY=this.ballDeltaY-2*a*t.left.ny,!0}}return!1}ballMove(s){this.animated&&(this.x+=this.ballSpeed*this.ballDeltaX*s,this.y+=this.ballSpeed*this.ballDeltaY*s)}initBallDefault(){const s=[];Q.forEach(t=>{s.push(new h.xEZ(this.uiPackTexture,new h.AeJ(t.x,t.y,t.width,t.height)))}),this.ballDefault=new h.KgH(s),this.ballDefault.animationSpeed=.07,this.addChild(this.ballDefault)}drawArrow(s,t,i,e,n,o){}drawCircle(s,t,i,e,n=65280){}}class et extends h.W20{constructor(s,t){super(),this.uiPackTexture=s,this.screenBox=t,this.bricksTextures={},Object.keys(R).forEach(i=>{this.bricksTextures[i]=new h.xEZ(this.uiPackTexture,new h.AeJ(R[i].x,R[i].y,R[i].width,R[i].height))})}loadLevel(s,t){let i,e;const n=[];if(Array.isArray(s.bricks)){const o=this.getResponsiveWidth(88),a=this.getResponsiveHeight(44),y=this.getResponsiveWidth(26),r=this.getResponsiveHeight(26);let p=0,m=0,b=0;s.bricks.forEach(T=>{this.bricksTextures[T.textureName]&&(i=this.bricksTextures[T.textureName].clone(),e=new h.jyi(i),e.width=o+y,e.height=a+r,e.x=T.position.x*o,e.y=T.position.y*a,e.name=`brick-${b}`,p<e.x&&(p=e.x),m<e.y&&(m=e.y),this.addChild(e),n.push({idx:b,rect:{x:e.x,y:e.y,width:o,height:a},score:T.score}),b++)}),this.addChild((new h.TCu).beginFill(0,0).drawRect(0,0,21*o,m+a+r).endFill()),this.x=t.left.x+(t.right.x-t.left.x-this.width)/2,this.y=t.top.y+a+r,n.forEach(T=>{T.rect.x=this.x+T.rect.x,T.rect.y=this.y+T.rect.y})}return n}removeBrick(s){const t=this.getChildByName(`brick-${s}`);t&&this.removeChild(t)}getResponsiveWidth(s){let t=s;return this.screenBox.width<1910&&(t=s*this.screenBox.width/1910),Number(t.toFixed(6))}getResponsiveHeight(s){let t=s;return this.screenBox.height<841&&(t=s*this.screenBox.height/841),Number(t.toFixed(6))}}class it extends h.W20{constructor(s,t){super();const i=new h.Xz2(E.M.numberFormat(t),{align:"left",fontName:"pixel",fontSize:16});i.x=s.x+(s.width-i.width)/2,i.y=s.y+(s.height-i.height)/2,i.tint=16777215,this.addChild(i),E.M.animate({draw:e=>{this&&i&&s&&(e>=1?this.destroy():(i.width-=2*e,i.height-=2*e,i.x=s.x+(s.width-i.width)/2,i.y=s.y+(s.height-i.height)/2))},duration:500,timing:E.d.bounce})}}var st=A(6797);class ht extends h.W20{constructor(s,t,i){super(),this.uiPackTexture=s,this.vausPackTexture=t,this.screenBox=i;const e=new h.W20;this.bgWater=st.pM.getShaderMesh(this.screenBox.width-30,this.screenBox.height-18),e.addChild(this.bgWater),e.x=0,e.y=0,e.mask=(new h.TCu).beginFill(0).drawRect(10,10,this.screenBox.width-30,this.screenBox.height-18).endFill(),this.addChild(e),this.sortableChildren=!0,this.closeGateObject=new h.TCu,this.closeGateObject.beginFill(65280,1).drawRect(10,this.screenBox.height-18,this.screenBox.width-30,4).endFill(),this.closeGateObject.visible=!1,this.addChild(this.closeGateObject),this.createBorders()}get visibleGate(){return this.closeGateObject.visible}set visibleGate(s){this.closeGateObject.visible=s}tickerLoop(s){this.bgWater&&(this.bgWater.shader.uniforms.iTime+=s/500)}createBorders(){let s,t;s=new h.xEZ(this.uiPackTexture,new h.AeJ(l_LT_x,l_LT_y,l_LT_width,l_LT_height)),t=new h.jyi(s),t.width=l_LT_width,t.height=l_LT_height,t.zIndex=1,this.addChild(t),t=new h.jyi(s),t.width=l_LT_width,t.height=l_LT_height,t.anchor.y=1,t.scale.y*=-1,t.y=this.screenBox.height-t.height-7,this.addChild(t),s=new h.xEZ(this.uiPackTexture,new h.AeJ(l_RT_x,l_RT_y,l_RT_width,l_RT_height)),t=new h.jyi(s),t.width=l_RT_width,t.height=l_RT_height,t.x=this.screenBox.width-t.width,t.zIndex=1,this.addChild(t),t=new h.jyi(s),t.width=l_RT_width,t.height=l_RT_height,t.anchor.y=1,t.scale.y*=-1,t.x=this.screenBox.width-t.width,t.y=this.screenBox.height-t.height-7,this.addChild(t),s=new h.xEZ(this.uiPackTexture,new h.AeJ(l_HORIZONTAL_x,l_HORIZONTAL_y,l_HORIZONTAL_width,l_HORIZONTAL_height)),t=new h.oO3(s,this.screenBox.width-l_LT_width-l_RT_width+15,l_HORIZONTAL_height),t.x=l_LT_width,this.addChild(t),s=new h.xEZ(this.uiPackTexture,new h.AeJ(l_VERTICAL_x,l_VERTICAL_y,l_VERTICAL_width,l_VERTICAL_height)),t=new h.oO3(s,l_VERTICAL_width,this.screenBox.height-2*l_LT_height-7),t.y=l_LT_height,this.addChild(t),t=new h.oO3(s,l_VERTICAL_width,this.screenBox.height-2*l_LT_height-7),t.y=l_LT_height,t.x=this.screenBox.width-t.width,t.zIndex=1,this.addChild(t);const i=[];let e;for(let n=0;n<2;n++){const o=_[n];i.push(new h.xEZ(this.vausPackTexture,new h.AeJ(o.x,o.y,o.width,o.height)))}e=new h.KgH(i),e.x=this.screenBox.width-l_RT_width-e.width,e.y=this.screenBox.height-e.height-5,e.animationSpeed=.07,e.play(),this.addChild(e),e=new h.KgH(i),e.anchor.x=1,e.scale.x*=-1,e.x=l_LT_width+0,e.y=this.screenBox.height-e.height-5,e.animationSpeed=.07,e.play(),this.addChild(e)}}class at extends h.W20{constructor(s){super(),this.vausPackTexture=s,this.vausDefault=new h.W20,this.initVausDefault()}initVausDefault(){this.vausDefault.sortableChildren=!0;const s=[];let t;I.sideTextures.forEach(n=>{s.push(new h.xEZ(this.vausPackTexture,new h.AeJ(n.x,n.y,n.width,n.height)))}),t=new h.KgH(s),t.x=0,t.y=0,t.animationSpeed=.07,t.play(),this.vausDefault.addChild(t),t=new h.KgH(s),t.x=77,t.y=0,t.anchor.x=1,t.scale.x*=-1,t.animationSpeed=.07,t.play(),this.vausDefault.addChild(t);const i=new h.xEZ(this.vausPackTexture,new h.AeJ(I.centerTexture.x,I.centerTexture.y,I.centerTexture.width,I.centerTexture.height)),e=new h.jyi(i);e.width=I.centerTexture.width,e.height=I.centerTexture.height,e.x=44,e.zIndex=1,this.vausDefault.addChild(e),this.addChild(this.vausDefault)}}var B=A(5e3),v=(()=>{return(c=v||(v={}))[c.LOADING=0]="LOADING",c[c.GAME=1]="GAME",c[c.GAME_OVER=2]="GAME_OVER",c[c.WIN=3]="WIN",v;var c})();const Y="assets/games/arkanoid/levels",nt=[{path:"",component:(()=>{class c extends K.a{constructor(){super(...arguments),this.title=`Arkanoid | ${U.X}`,this.appBgColor=18832,this.debugContainer=new h.W20,this.infoContainer=new h.W20,this.vausHalfWidth=0,this.lifeCounter=5,this.scoreCounter=0,this.bricks=[],this.suitableBricks=[],this.gameMode=v.LOADING,this.levelsFilelist=[]}onKeyUp(t){"KeyQ"===t.code&&this.uiContainer&&(this.uiContainer.visibleGate=!this.uiContainer.visibleGate)}onMouseUp(){this.ballActor.animated||this.startBallMove()}init(){super.init(),this.initStopLines(),this.app.loader.add("pixel","assets/games/fonts/pixel.fnt.xml"),this.app.loader.load(()=>{const t=h.VL4.from("assets/games/arkanoid/ui-pack.png"),i=h.VL4.from("assets/games/arkanoid/vaus.png");this.uiContainer=new ht(t,i,this.screenBox),this.gameContainer.addChild(this.uiContainer),this.bricksContainer=new et(t,this.screenBox),this.gameContainer.addChild(this.bricksContainer),this.vausActor=new at(i),this.vausActor.x=this.stopLines.left.x,this.vausActor.y=this.screenBox.height-this.vausActor.height-30,this.vausHalfWidth=this.vausActor.width/2,this.gameContainer.addChild(this.vausActor),this.ballActor=new tt(t),this.stickBallToVaus(),this.gameContainer.addChild(this.ballActor),this.infoContainer.addChild((new h.TCu).beginFill(0,0).drawRect(0,0,this.gameContainer.width,this.gameContainer.height).endFill());const e=new h.pn8({fontFamily:"Arial",fontSize:32,fontWeight:"bold",fill:["#ffffff","#00ff99"],stroke:"#4a1850",strokeThickness:5,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:4,dropShadowAngle:Math.PI/6,dropShadowDistance:6,wordWrap:!1,lineJoin:"round"});this.infoText=new h.xvT("",e),this.infoContainer.addChild(this.infoText),this.messageText=new h.xvT("",e),this.infoContainer.addChild(this.messageText),this.gameOverText=new h.xvT("GAME OVER",new h.pn8({fontFamily:"Arial",fontSize:64,fontWeight:"bold",fill:["#ffffff","#ff0000"],stroke:"#4a1850",strokeThickness:5,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:4,dropShadowAngle:Math.PI/6,dropShadowDistance:6,wordWrap:!1,lineJoin:"round"})),this.gameOverText.x=(this.infoContainer.width-this.gameOverText.width)/2,this.gameOverText.y=(this.infoContainer.height-this.gameOverText.height)/2,this.gameOverText.visible=!1,this.infoContainer.addChild(this.gameOverText),this.gameWinText=new h.xvT("\u0412\u042b \u0412\u042b\u0418\u0413\u0420\u0410\u041b\u0418!!!",new h.pn8({fontFamily:"Arial",fontSize:64,fontWeight:"bold",fill:["#ffffff","#00ff99"],stroke:"#4a1850",strokeThickness:5,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:4,dropShadowAngle:Math.PI/6,dropShadowDistance:6,wordWrap:!1,lineJoin:"round"})),this.gameWinText.x=(this.infoContainer.width-this.gameWinText.width)/2,this.gameWinText.y=(this.infoContainer.height-this.gameWinText.height)/2,this.gameWinText.visible=!1,this.infoContainer.addChild(this.gameWinText),this.setMessageText("\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."),this.gameContainer.addChild(this.infoContainer),this.debugContainer.addChild((new h.TCu).beginFill(0,0).drawRect(0,0,this.gameContainer.width,this.gameContainer.height).endFill()),this.gameContainer.addChild(this.debugContainer),this.newGame()})}tickerLoop(t){if(!this.destroying){if(this.uiContainer&&this.gameMode===v.GAME&&(this.uiContainer.tickerLoop(t),this.ballActor)){const i=this.ballActor.isCollisionStopLines(t,this.stopLines,this.uiContainer.height,this.uiContainer.visibleGate);if(null===i)this.ballActor.animated=!1,this.setInfoText(this.lifeCounter-1);else{const e=this.ballActor.isCollisionBricks(t,this.suitableBricks);if(this.ballActor.isCollisionVaus(t,{x:this.vausActor.x,y:this.vausActor.y,width:this.vausActor.width,height:this.vausActor.height})||i||null!==e){if(null!==e){const o=this.bricks.find(a=>a.idx===e);o&&(this.bricks=this.bricks.filter(a=>a.idx!==e),this.bricksContainer.removeBrick(e),this.setInfoText(this.lifeCounter,this.scoreCounter+o.score),this.createFadingScore(o))}this.updateSuitableBricks()}this.ballActor.ballMove(t)}}this.vausUpdate()}}newGame(){this.setInfoText(5),fetch(`${Y}/levels.json?time=${(new Date).getTime()}`).then(t=>{if(!t.ok)throw new Error(t.statusText);return t.json()}).then(t=>{this.levelsFilelist=t.levels,this.loadLevel()}).catch(t=>{throw t})}loadLevel(){if(0===this.levelsFilelist.length)return this.gameMode=v.WIN,void(this.gameWinText.visible=!0);this.gameMode=v.LOADING,this.setMessageText("\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0443\u0440\u043e\u0432\u043d\u044f...");const t=this.levelsFilelist.shift();fetch(`${Y}/${t}`).then(i=>{if(!i.ok)throw new Error(i.statusText);return i.json()}).then(i=>{this.bricks=this.bricksContainer.loadLevel(i,this.stopLines),this.messageText.visible=!1,this.gameMode=v.GAME}).catch(i=>{throw i})}startBallMove(){this.updateSuitableBricks(),this.ballActor.animated=!0}vausUpdate(){if(!this.vausActor)return;if(this.gameMode!==v.GAME)return this.ballActor.animated=!1,void this.stickBallToVaus();const t=this.app.renderer.plugins.interaction.mouse.global;if(t){let i=t.x-this.vausHalfWidth;i<this.stopLines.left.x&&(i=this.stopLines.left.x),i+this.vausActor.width>this.stopLines.right.x&&(i=this.stopLines.right.x-this.vausActor.width),this.vausActor.x=i,this.ballActor.animated||this.stickBallToVaus()}}stickBallToVaus(){this.ballActor.setCoords(this.vausActor.x+(this.vausActor.width-this.ballActor.width)/2+this.ballActor.width/2,this.vausActor.y-this.ballActor.height/2,w.k.grad2rad(-90))}updateSuitableBricks(){0!==this.bricks.length?this.suitableBricks=this.ballActor?this.ballActor.updateSuitableBricks(this.bricks,this.debugContainer):[]:this.loadLevel()}initStopLines(){this.stopLines={left:{x:18,y:0,nx:-Math.sin(-90*Math.PI/180),ny:Math.cos(-90*Math.PI/180)},right:{x:this.screenBox.width-30,y:0,nx:-Math.sin(-90*Math.PI/180),ny:Math.cos(-90*Math.PI/180)},top:{x:0,y:18,nx:-Math.sin(0*Math.PI/180),ny:Math.cos(0*Math.PI/180)},bottom:{x:0,y:this.screenBox.height-18,nx:-Math.sin(0*Math.PI/180),ny:Math.cos(0*Math.PI/180)}}}setInfoText(t,i=null){this.lifeCounter=t,this.lifeCounter<=0&&(this.lifeCounter=0,this.gameMode=v.GAME_OVER,this.gameOverText.visible=!0),null!==i&&(this.scoreCounter=i),0===this.infoText.x&&(this.infoText.text=`Life: ${t}     Score: ${E.M.numberFormat(1e6)}`,this.infoText.x=this.infoContainer.width-this.infoText.width-35,this.infoText.y=25),this.infoText.text=`Life: ${t}     Score: ${E.M.numberFormat(this.scoreCounter)}`}createFadingScore(t){const i=new it(t.rect,t.score);this.infoContainer.addChild(i)}setMessageText(t){this.messageText.text=t,this.messageText.x=(this.infoContainer.width-this.messageText.width)/2,this.messageText.y=(this.infoContainer.height-this.messageText.height)/2,this.messageText.visible=!0}}return c.\u0275fac=function(){let s;return function(i){return(s||(s=B.n5z(c)))(i||c)}}(),c.\u0275cmp=B.Xpm({type:c,selectors:[["app-games-arkanoid"]],hostBindings:function(t,i){1&t&&B.NdJ("keyup",function(n){return i.onKeyUp(n)},!1,B.evT)("mouseup",function(){return i.onMouseUp()},!1,B.evT)},features:[B.qOj],decls:2,vars:0,consts:[[1,"game-container"],["gameContainer",""]],template:function(t,i){1&t&&B._UZ(0,"div",0,1)},styles:["[_nghost-%COMP%]{flex:auto;display:flex;flex-direction:column;background-color:#004990;padding-left:10px;padding-top:10px}"]}),c})()}];let lt=(()=>{class c{}return c.\u0275fac=function(t){return new(t||c)},c.\u0275mod=B.oAB({type:c}),c.\u0275inj=B.cJS({imports:[[G.ez,j.Bz.forChild(nt)]]}),c})()}}]);