import{a as si}from"./chunk-JGBLPNDP.js";import{$a as B,$b as M,A as yt,Aa as l,Ab as A,Ac as Nt,B as bt,Ba as G,Be as ni,C as ue,Cd as Kt,Ce as Ee,D as xt,De as oi,E as v,Ea as w,Fa as Ue,Fb as Bt,Fd as Je,Fe as ri,Ga as d,Gd as et,Ha as p,Hd as Wt,I as He,Ib as Ye,Id as ke,J as Mt,Jd as Qt,K as q,Kb as Xe,Kd as Zt,Lb as he,M as m,Md as Yt,N as $e,Na as wt,Nc as F,Nd as Xt,O as Le,Oa as ie,Od as qt,P as je,Pa as j,Pb as N,Qa as z,Qb as Te,Ra as me,Rb as V,Rc as Ut,S as h,Sa as u,Sb as U,T as f,Ta as ne,Tb as K,U as vt,Ua as It,Ub as Rt,V as ze,Va as ve,W as J,Wa as Dt,X as ce,Xa as Gt,Y as be,Ya as Ot,Z as ee,Za as O,_a as H,ab as pe,c as T,ca as Tt,cc as Vt,da as c,db as Pt,dc as Ht,ea as k,eb as b,ec as $t,fb as x,fe as Jt,g as pt,gb as Ke,gc as Lt,ha as kt,hb as We,ia as Z,ib as Qe,ja as S,jc as jt,ka as Et,kb as Ft,l as X,la as L,m as _e,ma as de,n as ge,na as Ne,nb as R,o as Re,oa as _,ob as I,p as le,pa as te,qa as E,ra as St,s as Ce,sa as D,se as ei,t as Ve,u as ht,ua as C,ub as At,v as ft,ve as ti,w as _t,x as ye,xa as xe,xd as qe,y as gt,ya as Me,yb as Ze,z as Ct,za as s,zc as zt,ze as ii}from"./chunk-FGQYVVFQ.js";import"./chunk-XP2N47VC.js";import{k as ae}from"./chunk-XJADAOP3.js";import"./chunk-WDCVTZT5.js";import"./chunk-ZKQ77EQL.js";import"./chunk-Q75QCHGE.js";import"./chunk-JOYMENOW.js";import{L as oe,Q as re,W as se,a as Y,b as dt,i as mt}from"./chunk-FY46XAGK.js";var li=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275dir=L({type:i,selectors:[["","cdkMenuGroup",""]],hostAttrs:["role","group",1,"cdk-menu-group"],exportAs:["cdkMenuGroup"],features:[pe([{provide:qe,useClass:qe}])]})}return i})(),ot=new q("cdk-menu"),W=function(i){return i[i.nextItem=0]="nextItem",i[i.previousItem=1]="previousItem",i[i.currentItem=2]="currentItem",i}(W||{}),$=new q("cdk-menu-stack"),vi={provide:$,deps:[[new Le,new je,new $e($)]],useFactory:i=>i||new rt},Ti=i=>({provide:$,deps:[[new Le,new je,new $e($)]],useFactory:o=>o||rt.inline(i)}),rt=(()=>{class i{id=m(Xe).getId("cdk-menu-stack-");_elements=[];_close=new T;_empty=new T;_hasFocus=new T;closed=this._close;hasFocus=this._hasFocus.pipe(ue(!1),ft(0),gt());emptied=this._empty;_inlineMenuOrientation=null;static inline(e){let t=new i;return t._inlineMenuOrientation=e,t}push(e){this._elements.push(e)}close(e,t){let{focusNextOnEmpty:n,focusParentTrigger:r}=Y({},t);if(this._elements.indexOf(e)>=0){let a;do a=this._elements.pop(),this._close.next({item:a,focusParentTrigger:r});while(a!==e);this.isEmpty()&&this._empty.next(n)}}closeSubMenuOf(e){let t=!1;if(this._elements.indexOf(e)>=0)for(t=this.peek()!==e;this.peek()!==e;)this._close.next({item:this._elements.pop()});return t}closeAll(e){let{focusNextOnEmpty:t,focusParentTrigger:n}=Y({},e);if(!this.isEmpty()){for(;!this.isEmpty();){let r=this._elements.pop();r&&this._close.next({item:r,focusParentTrigger:n})}this._empty.next(t)}}isEmpty(){return!this._elements.length}length(){return this._elements.length}peek(){return this._elements[this._elements.length-1]}hasInlineMenu(){return this._inlineMenuOrientation!=null}inlineMenuOrientation(){return this._inlineMenuOrientation}setHasFocus(e){this._hasFocus.next(e)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=He({token:i,factory:i.\u0275fac})}return i})(),Ie=new q("cdk-menu-trigger"),ki=new q("cdk-menu-scroll-strategy",{providedIn:"root",factory:()=>{let i=m(ke);return()=>i.scrollStrategies.reposition()}}),ui=(()=>{class i{injector=m(ze);viewContainerRef=m(kt);menuStack=m($);menuScrollStrategy=m(ki);menuPosition;opened=new ce;closed=new ce;menuTemplateRef;menuData;overlayRef=null;destroyed=new T;stopOutsideClicksListener=Ce(this.closed,this.destroyed);childMenu;_menuPortal;_childMenuInjector;ngOnDestroy(){this._destroyOverlay(),this.destroyed.next(),this.destroyed.complete()}isOpen(){return!!this.overlayRef?.hasAttached()}registerChildMenu(e){this.childMenu=e}getMenuContentPortal(){let e=this.menuTemplateRef!==this._menuPortal?.templateRef;return this.menuTemplateRef&&(!this._menuPortal||e)&&(this._menuPortal=new Kt(this.menuTemplateRef,this.viewContainerRef,this.menuData,this._getChildMenuInjector())),this._menuPortal}isElementInsideMenuStack(e){for(let t=e;t;t=t?.parentElement??null)if(t.getAttribute("data-cdk-menu-stack-id")===this.menuStack.id)return!0;return!1}_destroyOverlay(){this.overlayRef&&(this.overlayRef.dispose(),this.overlayRef=null)}_getChildMenuInjector(){return this._childMenuInjector=this._childMenuInjector||ze.create({providers:[{provide:Ie,useValue:this},{provide:$,useValue:this.menuStack}],parent:this.injector}),this._childMenuInjector}static \u0275fac=function(t){return new(t||i)};static \u0275dir=L({type:i,hostVars:2,hostBindings:function(t,n){t&2&&te("aria-controls",n.childMenu==null?null:n.childMenu.id)("data-cdk-menu-stack-id",n.menuStack.id)}})}return i})();var st=new q("cdk-menu-aim");function ci(i,o){if(!o.isTrusted)return!1;let e=i.nativeElement,t=o.keyCode;return e.nodeName==="BUTTON"&&!e.disabled?t===13||t===32:e.nodeName==="A"?t===13:!1}var at=(()=>{class i extends ui{_elementRef=m(ee);_overlay=m(ke);_ngZone=m(be);_changeDetectorRef=m(We);_inputModalityDetector=m(Ye);_directionality=m(he,{optional:!0});_parentMenu=m(ot,{optional:!0});_menuAim=m(st,{optional:!0});constructor(){super(),this._setRole(),this._registerCloseHandler(),this._subscribeToMenuStackClosed(),this._subscribeToMouseEnter(),this._subscribeToMenuStackHasFocus(),this._setType()}toggle(){this.isOpen()?this.close():this.open()}open(){!this.isOpen()&&this.menuTemplateRef!=null&&(this.opened.next(),this.overlayRef=this.overlayRef||this._overlay.create(this._getOverlayConfig()),this.overlayRef.attach(this.getMenuContentPortal()),this._changeDetectorRef.markForCheck(),this._subscribeToOutsideClicks())}close(){this.isOpen()&&(this.closed.next(),this.overlayRef.detach(),this._changeDetectorRef.markForCheck()),this._closeSiblingTriggers()}getMenu(){return this.childMenu}_toggleOnKeydown(e){let t=this._parentMenu?.orientation==="vertical";switch(e.keyCode){case 32:case 13:!A(e)&&!ci(this._elementRef,e)&&(this.toggle(),this.childMenu?.focusFirstItem("keyboard"));break;case 39:A(e)||this._parentMenu&&t&&this._directionality?.value!=="rtl"&&(e.preventDefault(),this.open(),this.childMenu?.focusFirstItem("keyboard"));break;case 37:A(e)||this._parentMenu&&t&&this._directionality?.value==="rtl"&&(e.preventDefault(),this.open(),this.childMenu?.focusFirstItem("keyboard"));break;case 40:case 38:A(e)||t||(e.preventDefault(),this.open(),e.keyCode===40?this.childMenu?.focusFirstItem("keyboard"):this.childMenu?.focusLastItem("keyboard"));break}}_handleClick(){this.toggle(),this.childMenu?.focusFirstItem("mouse")}_setHasFocus(e){this._parentMenu||this.menuStack.setHasFocus(e)}_subscribeToMouseEnter(){this._ngZone.runOutsideAngular(()=>{le(this._elementRef.nativeElement,"mouseenter").pipe(Ve(()=>this._inputModalityDetector.mostRecentModality!=="touch"&&!this.menuStack.isEmpty()&&!this.isOpen()),v(this.destroyed)).subscribe(()=>{let e=()=>this._ngZone.run(()=>{this._closeSiblingTriggers(),this.open()});this._menuAim?this._menuAim.toggle(e):e()})})}_closeSiblingTriggers(){this._parentMenu?!this.menuStack.closeSubMenuOf(this._parentMenu)&&this.menuStack.peek()!==this._parentMenu&&this.menuStack.closeAll():this.menuStack.closeAll()}_getOverlayConfig(){return new Je({positionStrategy:this._getOverlayPositionStrategy(),scrollStrategy:this.menuScrollStrategy(),direction:this._directionality||void 0})}_getOverlayPositionStrategy(){return this._overlay.position().flexibleConnectedTo(this._elementRef).withLockedPosition().withGrowAfterOpen().withPositions(this._getOverlayPositions())}_getOverlayPositions(){return this.menuPosition??(!this._parentMenu||this._parentMenu.orientation==="horizontal"?et:Wt)}_registerCloseHandler(){this._parentMenu||this.menuStack.closed.pipe(v(this.destroyed)).subscribe(({item:e})=>{e===this.childMenu&&this.close()})}_subscribeToOutsideClicks(){this.overlayRef&&this.overlayRef.outsidePointerEvents().pipe(v(this.stopOutsideClicksListener)).subscribe(e=>{let t=Ze(e),n=this._elementRef.nativeElement;t!==n&&!n.contains(t)&&(this.isElementInsideMenuStack(t)?this._closeSiblingTriggers():this.menuStack.closeAll())})}_subscribeToMenuStackHasFocus(){this._parentMenu||this.menuStack.hasFocus.pipe(v(this.destroyed)).subscribe(e=>{e||this.menuStack.closeAll()})}_subscribeToMenuStackClosed(){this._parentMenu||this.menuStack.closed.subscribe(({focusParentTrigger:e})=>{e&&!this.menuStack.length()&&this._elementRef.nativeElement.focus()})}_setRole(){this._parentMenu||this._elementRef.nativeElement.setAttribute("role","button")}_setType(){let e=this._elementRef.nativeElement;e.nodeName==="BUTTON"&&!e.getAttribute("type")&&e.setAttribute("type","button")}static \u0275fac=function(t){return new(t||i)};static \u0275dir=L({type:i,selectors:[["","cdkMenuTriggerFor",""]],hostAttrs:[1,"cdk-menu-trigger"],hostVars:2,hostBindings:function(t,n){t&1&&d("focusin",function(){return n._setHasFocus(!0)})("focusout",function(){return n._setHasFocus(!1)})("keydown",function(a){return n._toggleOnKeydown(a)})("click",function(){return n._handleClick()}),t&2&&te("aria-haspopup",n.menuTemplateRef?"menu":null)("aria-expanded",n.menuTemplateRef==null?null:n.isOpen())},inputs:{menuTemplateRef:[0,"cdkMenuTriggerFor","menuTemplateRef"],menuPosition:[0,"cdkMenuPosition","menuPosition"],menuData:[0,"cdkMenuTriggerData","menuData"]},outputs:{opened:"cdkMenuOpened",closed:"cdkMenuClosed"},exportAs:["cdkMenuTriggerFor"],features:[pe([{provide:Ie,useExisting:i},vi]),de]})}return i})(),lt=(()=>{class i{_dir=m(he,{optional:!0});_elementRef=m(ee);_ngZone=m(be);_inputModalityDetector=m(Ye);_menuAim=m(st,{optional:!0});_menuStack=m($);_parentMenu=m(ot,{optional:!0});_menuTrigger=m(at,{optional:!0,self:!0});disabled=!1;typeaheadLabel;triggered=new ce;get hasMenu(){return this._menuTrigger?.menuTemplateRef!=null}_tabindex=-1;closeOnSpacebarTrigger=!0;destroyed=new T;constructor(){this._setupMouseEnter(),this._setType(),this._isStandaloneItem()&&(this._tabindex=0)}ngOnDestroy(){this.destroyed.next(),this.destroyed.complete()}focus(){this._elementRef.nativeElement.focus()}trigger(e){let{keepOpen:t}=Y({},e);!this.disabled&&!this.hasMenu&&(this.triggered.next(),t||this._menuStack.closeAll({focusParentTrigger:!0}))}isMenuOpen(){return!!this._menuTrigger?.isOpen()}getMenu(){return this._menuTrigger?.getMenu()}getMenuTrigger(){return this._menuTrigger}getLabel(){return this.typeaheadLabel||this._elementRef.nativeElement.textContent?.trim()||""}_resetTabIndex(){this._isStandaloneItem()||(this._tabindex=-1)}_setTabIndex(e){this.disabled||(!e||!this._menuStack.isEmpty())&&(this._tabindex=0)}_onKeydown(e){switch(e.keyCode){case 32:case 13:!A(e)&&!ci(this._elementRef,e)&&this.trigger({keepOpen:e.keyCode===32&&!this.closeOnSpacebarTrigger});break;case 39:A(e)||this._parentMenu&&this._isParentVertical()&&(this._dir?.value!=="rtl"?this._forwardArrowPressed(e):this._backArrowPressed(e));break;case 37:A(e)||this._parentMenu&&this._isParentVertical()&&(this._dir?.value!=="rtl"?this._backArrowPressed(e):this._forwardArrowPressed(e));break}}_isStandaloneItem(){return!this._parentMenu}_backArrowPressed(e){let t=this._parentMenu;(this._menuStack.hasInlineMenu()||this._menuStack.length()>1)&&(e.preventDefault(),this._menuStack.close(t,{focusNextOnEmpty:this._menuStack.inlineMenuOrientation()==="horizontal"?W.previousItem:W.currentItem,focusParentTrigger:!0}))}_forwardArrowPressed(e){!this.hasMenu&&this._menuStack.inlineMenuOrientation()==="horizontal"&&(e.preventDefault(),this._menuStack.closeAll({focusNextOnEmpty:W.nextItem,focusParentTrigger:!0}))}_setupMouseEnter(){if(!this._isStandaloneItem()){let e=()=>this._ngZone.run(()=>this._menuStack.closeSubMenuOf(this._parentMenu));this._ngZone.runOutsideAngular(()=>le(this._elementRef.nativeElement,"mouseenter").pipe(Ve(()=>this._inputModalityDetector.mostRecentModality!=="touch"&&!this._menuStack.isEmpty()&&!this.hasMenu),v(this.destroyed)).subscribe(()=>{this._menuAim?this._menuAim.toggle(e):e()}))}}_isParentVertical(){return this._parentMenu?.orientation==="vertical"}_setType(){let e=this._elementRef.nativeElement;e.nodeName==="BUTTON"&&!e.getAttribute("type")&&e.setAttribute("type","button")}static \u0275fac=function(t){return new(t||i)};static \u0275dir=L({type:i,selectors:[["","cdkMenuItem",""]],hostAttrs:["role","menuitem",1,"cdk-menu-item"],hostVars:2,hostBindings:function(t,n){t&1&&d("blur",function(){return n._resetTabIndex()})("focus",function(){return n._setTabIndex()})("click",function(){return n.trigger()})("keydown",function(a){return n._onKeydown(a)}),t&2&&(Ue("tabindex",n._tabindex),te("aria-disabled",n.disabled||null))},inputs:{disabled:[2,"cdkMenuItemDisabled","disabled",Qe],typeaheadLabel:[0,"cdkMenuitemTypeaheadLabel","typeaheadLabel"]},outputs:{triggered:"cdkMenuItemTriggered"},exportAs:["cdkMenuItem"],features:[Ne]})}return i})(),tt=class{_items;entered=this._getItemPointerEntries();exited=this._getItemPointerExits();activeElement;previousElement;_destroyed=new T;constructor(o){this._items=o,this.entered.subscribe(e=>this.activeElement=e),this.exited.subscribe(()=>{this.previousElement=this.activeElement,this.activeElement=void 0})}destroy(){this._destroyed.next(),this._destroyed.complete()}_getItemPointerEntries(){return Re(()=>this._items.changes.pipe(ue(this._items),_e(o=>o.map(e=>le(e._elementRef.nativeElement,"mouseenter").pipe(ye(e),v(this._items.changes)))),ge()))}_getItemPointerExits(){return Re(()=>this._items.changes.pipe(ue(this._items),_e(o=>o.map(e=>le(e._elementRef.nativeElement,"mouseout").pipe(ye(e),v(this._items.changes)))),ge()))}},Ei=(()=>{class i extends li{nativeElement=m(ee).nativeElement;ngZone=m(be);menuStack=m($);menuAim=m(st,{optional:!0,self:!0});dir=m(he,{optional:!0});id=m(Xe).getId("cdk-menu-");items;orientation="vertical";isInline=!1;keyManager;destroyed=new T;triggerItem;pointerTracker;_menuStackHasFocus=Z(!1);_tabIndexSignal=Ft(()=>{let e=this._menuStackHasFocus()?-1:0;return this.isInline?e:null});ngAfterContentInit(){this.isInline||this.menuStack.push(this),this._setKeyManager(),this._subscribeToMenuStackHasFocus(),this._subscribeToMenuOpen(),this._subscribeToMenuStackClosed(),this._setUpPointerTracker()}ngOnDestroy(){this.keyManager?.destroy(),this.destroyed.next(),this.destroyed.complete(),this.pointerTracker?.destroy()}focusFirstItem(e="program"){this.keyManager.setFocusOrigin(e),this.keyManager.setFirstItemActive()}focusLastItem(e="program"){this.keyManager.setFocusOrigin(e),this.keyManager.setLastItemActive()}_getTabIndex(){return this._tabIndexSignal()}closeOpenMenu(e,t){let{focusParentTrigger:n}=Y({},t),r=this.keyManager,a=this.triggerItem;e===a?.getMenuTrigger()?.getMenu()&&(a?.getMenuTrigger()?.close(),n&&(a?r.setActiveItem(a):r.setFirstItemActive()))}_setKeyManager(){this.keyManager=new Bt(this.items).withWrap().withTypeAhead().withHomeAndEnd(),this.orientation==="horizontal"?this.keyManager.withHorizontalOrientation(this.dir?.value||"ltr"):this.keyManager.withVerticalOrientation()}_subscribeToMenuOpen(){let e=Ce(this.items.changes,this.destroyed);this.items.changes.pipe(ue(this.items),_e(t=>t.filter(n=>n.hasMenu).map(n=>n.getMenuTrigger().opened.pipe(ye(n),v(e)))),ge(),xt(t=>(this.triggerItem=t,t.getMenuTrigger().closed)),v(this.destroyed)).subscribe(()=>this.triggerItem=void 0)}_subscribeToMenuStackClosed(){this.menuStack.closed.pipe(v(this.destroyed)).subscribe(({item:e,focusParentTrigger:t})=>this.closeOpenMenu(e,{focusParentTrigger:t}))}_subscribeToMenuStackHasFocus(){this.isInline&&this.menuStack.hasFocus.pipe(v(this.destroyed)).subscribe(e=>{this._menuStackHasFocus.set(e)})}_setUpPointerTracker(){this.menuAim&&(this.ngZone.runOutsideAngular(()=>{this.pointerTracker=new tt(this.items)}),this.menuAim.initialize(this,this.pointerTracker))}static \u0275fac=(()=>{let e;return function(n){return(e||(e=vt(i)))(n||i)}})();static \u0275dir=L({type:i,contentQueries:function(t,n,r){if(t&1&&wt(r,lt,5),t&2){let a;j(a=z())&&(n.items=a)}},hostAttrs:["role","menu"],hostVars:4,hostBindings:function(t,n){t&1&&d("focus",function(){return n.focusFirstItem()})("focusin",function(){return n.menuStack.setHasFocus(!0)})("focusout",function(){return n.menuStack.setHasFocus(!1)}),t&2&&(Ue("tabindex",n._getTabIndex())("id",n.id),te("aria-orientation",n.orientation)("data-cdk-menu-stack-id",n.menuStack.id))},inputs:{id:"id"},features:[de]})}return i})(),di=(()=>{class i extends Ei{_parentTrigger=m(Ie,{optional:!0});closed=new ce;orientation="vertical";isInline=!this._parentTrigger;constructor(){super(),this.destroyed.subscribe(this.closed),this._parentTrigger?.registerChildMenu(this)}ngAfterContentInit(){super.ngAfterContentInit(),this._subscribeToMenuStackEmptied()}ngOnDestroy(){super.ngOnDestroy(),this.closed.complete()}_handleKeyEvent(e){let t=this.keyManager;switch(e.keyCode){case 37:case 39:A(e)||(e.preventDefault(),t.setFocusOrigin("keyboard"),t.onKeydown(e));break;case 27:A(e)||(e.preventDefault(),this.menuStack.close(this,{focusNextOnEmpty:W.currentItem,focusParentTrigger:!0}));break;case 9:A(e,"altKey","metaKey","ctrlKey")||this.menuStack.closeAll({focusParentTrigger:!0});break;default:t.onKeydown(e)}}_toggleMenuFocus(e){let t=this.keyManager;switch(e){case W.nextItem:t.setFocusOrigin("keyboard"),t.setNextItemActive();break;case W.previousItem:t.setFocusOrigin("keyboard"),t.setPreviousItemActive();break;case W.currentItem:t.activeItem&&(t.setFocusOrigin("keyboard"),t.setActiveItem(t.activeItem));break}}_subscribeToMenuStackEmptied(){this.menuStack.emptied.pipe(v(this.destroyed)).subscribe(e=>this._toggleMenuFocus(e))}static \u0275fac=function(t){return new(t||i)};static \u0275dir=L({type:i,selectors:[["","cdkMenu",""]],hostAttrs:["role","menu",1,"cdk-menu"],hostVars:2,hostBindings:function(t,n){t&1&&d("keydown",function(a){return n._handleKeyEvent(a)}),t&2&&D("cdk-menu-inline",n.isInline)},outputs:{closed:"closed"},exportAs:["cdkMenu"],features:[pe([{provide:li,useExisting:i},{provide:ot,useExisting:i},Ti("vertical")]),de]})}return i})();var Si=et.map(i=>{let o=i.overlayX==="start"?2:-2,e=i.overlayY==="top"?2:-2;return dt(Y({},i),{offsetX:o,offsetY:e})}),wi=(()=>{class i{static _openContextMenuTrigger;update(e){i._openContextMenuTrigger!==e&&(i._openContextMenuTrigger?.close(),i._openContextMenuTrigger=e)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=He({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),De=(()=>{class i extends ui{_overlay=m(ke);_directionality=m(he,{optional:!0});_contextMenuTracker=m(wi);_changeDetectorRef=m(We);disabled=!1;constructor(){super(),this._setMenuStackCloseListener()}open(e){this._open(null,e),this._changeDetectorRef.markForCheck()}close(){this.menuStack.closeAll()}_openOnContextMenu(e){this.disabled||(e.preventDefault(),e.stopPropagation(),this._contextMenuTracker.update(this),this._open(e,{x:e.clientX,y:e.clientY}),e.button===2?this.childMenu?.focusFirstItem("mouse"):e.button===0?this.childMenu?.focusFirstItem("keyboard"):this.childMenu?.focusFirstItem("program"))}_getOverlayConfig(e){return new Je({positionStrategy:this._getOverlayPositionStrategy(e),scrollStrategy:this.menuScrollStrategy(),direction:this._directionality||void 0})}_getOverlayPositionStrategy(e){return this._overlay.position().flexibleConnectedTo(e).withLockedPosition().withGrowAfterOpen().withPositions(this.menuPosition??Si)}_setMenuStackCloseListener(){this.menuStack.closed.pipe(v(this.destroyed)).subscribe(({item:e})=>{e===this.childMenu&&this.isOpen()&&(this.closed.next(),this.overlayRef.detach())})}_subscribeToOutsideClicks(e){if(this.overlayRef){let t=this.overlayRef.outsidePointerEvents();if(e){let[n,r]=ht(t,({type:a})=>a==="auxclick");t=Ce(r.pipe(bt((a,g)=>e.ctrlKey&&g===0&&a.ctrlKey)),n.pipe(yt(1)))}t.pipe(v(this.stopOutsideClicksListener)).subscribe(n=>{this.isElementInsideMenuStack(Ze(n))||this.menuStack.closeAll()})}}_open(e,t){this.disabled||(this.isOpen()?(this.menuStack.closeSubMenuOf(this.childMenu),this.overlayRef.getConfig().positionStrategy.setOrigin(t),this.overlayRef.updatePosition()):(this.opened.next(),this.overlayRef?(this.overlayRef.getConfig().positionStrategy.setOrigin(t),this.overlayRef.updatePosition()):this.overlayRef=this._overlay.create(this._getOverlayConfig(t)),this.overlayRef.attach(this.getMenuContentPortal()),this._subscribeToOutsideClicks(e)))}static \u0275fac=function(t){return new(t||i)};static \u0275dir=L({type:i,selectors:[["","cdkContextMenuTriggerFor",""]],hostVars:1,hostBindings:function(t,n){t&1&&d("contextmenu",function(a){return n._openOnContextMenu(a)}),t&2&&te("data-cdk-menu-stack-id",null)},inputs:{menuTemplateRef:[0,"cdkContextMenuTriggerFor","menuTemplateRef"],menuPosition:[0,"cdkContextMenuPosition","menuPosition"],menuData:[0,"cdkContextMenuTriggerData","menuData"],disabled:[2,"cdkContextMenuDisabled","disabled",Qe]},outputs:{opened:"cdkContextMenuOpened",closed:"cdkContextMenuClosed"},exportAs:["cdkContextMenuTriggerFor"],features:[pe([{provide:Ie,useExisting:i},{provide:$,useClass:rt}]),Ne,de]})}return i})();var Ge=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Et({type:i});static \u0275inj=Mt({imports:[Qt]})}return i})();var Ii=["menu"],Di=(i,o)=>o.referenceId,Gi=(i,o)=>({tile:i,coords:o});function Oi(i,o){if(i&1&&(s(0,"div",3),u(1),s(2,"mat-icon",5),u(3,"arrow_right"),l()()),i&2){let e=o.$implicit;p();let t=B(0);p();let n=me(3);E("cdkMenuTriggerFor",n)("cdkMenuTriggerData",Pt(3,Gi,e,t==null?null:t.coords)),c(),It(" Frame #",e.referenceId," ")}}function Pi(i,o){if(i&1){let e=w();O(0),b(1,"async"),s(2,"div",2),xe(3,Oi,4,6,"div",3,Di),s(5,"div",4),d("click",function(){h(e);let n=B(0),r=p();return f(n&&n.tiles.length>0&&r.tilesGridStore.onActionContextMenu("clear-cell",{coords:n.coords}))}),u(6," \u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u0441\u0435 \u0444\u0440\u0435\u0439\u043C\u044B \u0438\u0437 \u044F\u0447\u0435\u0439\u043A\u0438 "),l()()}if(i&2){let e=H(x(1,3,p().tilesGridStore.editorContextMenuData$));c(3),Me(e==null?null:e.tiles),c(2),D("disabled",!e||e.tiles.length===0),E("cdkMenuItemDisabled",!e||e.tiles.length===0)}}function Fi(i,o){i&1&&(s(0,"mat-icon",7),u(1,"check_box"),l())}function Ai(i,o){i&1&&(s(0,"mat-icon",7),u(1,"check_box_outline_blank"),l())}function Bi(i,o){i&1&&(s(0,"mat-icon",7),u(1,"check_box"),l())}function Ri(i,o){i&1&&(s(0,"mat-icon",7),u(1,"check_box_outline_blank"),l())}function Vi(i,o){i&1&&(s(0,"mat-icon",7),u(1,"check_box"),l())}function Hi(i,o){i&1&&(s(0,"mat-icon",7),u(1,"check_box_outline_blank"),l())}function $i(i,o){if(i&1){let e=w();s(0,"div",2)(1,"div",6),d("click",function(){let n=h(e),r=n.tile,a=n.coords,g=p();return f(g.tilesGridStore.onActionContextMenu("switch-flip-vertical",{coords:a,tile:r}))}),_(2,Fi,2,0,"mat-icon",7)(3,Ai,2,0,"mat-icon",7),u(4," \u041E\u0442\u043E\u0431\u0440\u0430\u0437\u0438\u0442\u044C \u043F\u043E \u0432\u0435\u0440\u0442\u0438\u043A\u0430\u043B\u0438 "),l(),s(5,"div",6),d("click",function(){let n=h(e),r=n.tile,a=n.coords,g=p();return f(g.tilesGridStore.onActionContextMenu("switch-flip-horizontal",{coords:a,tile:r}))}),_(6,Bi,2,0,"mat-icon",7)(7,Ri,2,0,"mat-icon",7),u(8," \u041E\u0442\u043E\u0431\u0440\u0430\u0437\u0438\u0442\u044C \u043F\u043E \u0433\u043E\u0440\u0438\u0437\u043E\u043D\u0442\u0430\u043B\u0438 "),l(),s(9,"div",6),d("click",function(){let n=h(e),r=n.tile,a=n.coords,g=p();return f(g.tilesGridStore.onActionContextMenu("switch-stretch",{coords:a,tile:r}))}),_(10,Vi,2,0,"mat-icon",7)(11,Hi,2,0,"mat-icon",7),u(12," \u041F\u043E \u0440\u0430\u0437\u043C\u0435\u0440\u0430\u043C \u044F\u0447\u0435\u0439\u043A\u0438 "),l(),s(13,"div",6),d("click",function(){let n=h(e),r=n.tile,a=n.coords,g=p();return f(g.tilesGridStore.onActionContextMenu("property-frame",{coords:a,tile:r}))}),s(14,"mat-icon",7),u(15,"settings"),l(),u(16," \u0421\u0432\u043E\u0439\u0441\u0442\u0432\u0430 \u0442\u0430\u0439\u043B\u0430 "),l(),s(17,"div",6),d("click",function(){let n=h(e),r=n.tile,a=n.coords,g=p();return f(g.tilesGridStore.onActionContextMenu("top-z-index",{coords:a,tile:r}))}),s(18,"mat-icon",7),u(19,"upload"),l(),u(20," \u041F\u043E\u0434\u043D\u044F\u0442\u044C \u043D\u0430\u0432\u0435\u0440\u0445 "),l(),s(21,"div",8),d("click",function(){let n=h(e),r=n.tile,a=n.coords,g=p();return f(g.tilesGridStore.onActionContextMenu("remove-frame",{coords:a,tile:r}))}),s(22,"mat-icon",7),u(23,"delete"),l(),u(24," \u0423\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0442\u043E\u0442 \u0444\u0440\u0435\u0439\u043C "),l()()}if(i&2){let e=o.tile;c(2),C(e.flipVertical?2:3),c(4),C(e.flipHorizontal?6:7),c(4),C(e.stretch?10:11)}}var pi=(()=>{class i{constructor(e){this.tilesGridStore=e}static{this.\u0275fac=function(t){return new(t||i)(k(F))}}static{this.\u0275cmp=S({type:i,selectors:[["tge-context-menu"]],viewQuery:function(t,n){if(t&1&&ie(Ii,7),t&2){let r;j(r=z())&&(n.menu=r.first)}},decls:4,vars:0,consts:[["menu",""],["menuFrame",""],["cdkMenu","",1,"context-menu"],["cdkMenuItem","",1,"context-menu-item",3,"cdkMenuTriggerFor","cdkMenuTriggerData"],["cdkMenuItem","",1,"context-menu-item","text-danger",3,"click","cdkMenuItemDisabled"],[1,"arrow"],["cdkMenuItem","",1,"context-menu-item",3,"click"],[1,"icon"],["cdkMenuItem","",1,"context-menu-item","text-danger",3,"click"]],template:function(t,n){t&1&&_(0,Pi,7,6,"ng-template",null,0,Ke)(2,$i,25,3,"ng-template",null,1,Ke)},dependencies:[I,R,Ge,di,lt,at,K,U],styles:[".context-menu[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column;background-color:#fff;padding:6px 0;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.context-menu[_ngcontent-%COMP%]   .context-menu-item[_ngcontent-%COMP%]{outline:none;cursor:pointer;line-height:36px;padding:0 16px;display:flex;align-items:center;flex-direction:row}.context-menu[_ngcontent-%COMP%]   .context-menu-item[_ngcontent-%COMP%]   .mat-icon.arrow[_ngcontent-%COMP%]{flex:auto;display:flex;justify-content:flex-end}.context-menu[_ngcontent-%COMP%]   .context-menu-item[_ngcontent-%COMP%]   .mat-icon.icon[_ngcontent-%COMP%]{margin-right:10px}.context-menu[_ngcontent-%COMP%]   .context-menu-item.disabled[_ngcontent-%COMP%]{color:#c6c6c6;cursor:default}.context-menu[_ngcontent-%COMP%]   .context-menu-item[_ngcontent-%COMP%]:not(.disabled):hover{background-color:#e6effc}"],changeDetection:0})}}return i})();var Pe=class extends re{constructor(o,e,t,n){super(),this.tileX=o,this.tileY=e,this.tileWidth=t,this.tileHeight=n,this.rectBg=new ae,this.tiles=new Map,this.eventMode="static",this.sortableChildren=!0,this.rectBg.zIndex=10,this.addChild(this.rectBg)}drawTiles(o,e){let t=!0;for(let n of o)n.x===this.tileX&&n.y===this.tileY&&(t=!1,this.drawTile(n,e));t&&this.tiles.size>0&&this.clearTiles()}drawTile(o,e){let t,n=Number(o.referenceId);if(this.tiles.has(n))t=this.tiles.get(n);else{if(!e[n])return;let r=oe.from(e[n]);t=new se(r)}t.zIndex=o.zIndex,o.flipVertical?(t.anchor.y=1,t.scale.y=-1):(t.anchor.y=0,t.scale.y=1),o.flipHorizontal?(t.anchor.x=1,t.scale.x=-1):(t.anchor.x=0,t.scale.x=1),t.width=o.stretch?this.tileWidth:t.texture.width,t.height=o.stretch?this.tileHeight:t.texture.height,this.tiles.has(n)||(this.tiles.set(n,t),this.addChild(t))}addTile(o,e){if(this.tiles.has(o.id)||!o.canvas)return!1;e||this.clearTiles();let t=oe.from(o.canvas),n=new se(t);return this.addChild(n),this.tiles.set(o.id,n),!0}showBorder(o,e=13027014,t=.2){this.rectBg.clear().rect(1,1,this.tileWidth-2,this.tileHeight-2).fill({color:0,alpha:.001}).stroke({width:1,color:e,alpha:o?t:.001})}clearTiles(){let o=this.tiles.size>0;return this.tiles.forEach(e=>e.destroy()),this.tiles.clear(),o}};var Li=16041008,Fe=class extends re{constructor(){super(),this.toolState="move",this.cellOverEvent=new T,this.cellClickEvent=new T,this.cellHasDrawEvent=new T,this.cellHasRemoveEvent=new T,this.isModeOverlay=!1,this.gridWidth=0,this.gridHeight=0,this.cells=new Map,this.visibleGridValue=!0,this.isMouseDown=!1,this.drawTile=null,this.storeCoords=[],this.rectBg=new ae,this.eventMode="static",this.sortableChildren=!0,this.rectBg.zIndex=0,this.addChild(this.rectBg),this.on("mouseleave",()=>this.stopMouseDown()),this.on("mouseup",()=>this.stopMouseDown())}destroy(o){this.clearGrid(),super.destroy(o)}get visibleGrid(){return this.visibleGridValue}set visibleGrid(o){let e=this.visibleGridValue!==o;this.visibleGridValue=o,e&&this.cells.forEach(t=>t.showBorder(o))}clearTilesByCoord(o){let e=`${o.x}-${o.y}`;return this.cells.has(e)?this.cells.get(e).clearTiles():!1}setDrawTile(o){this.drawTile=o}clearGrid(){this.cells.forEach(o=>o.destroy()),this.cells.clear()}drawGrid(o,e,t,n){if(this.gridWidth===o.width*e.width&&this.gridHeight===o.height*e.height){this.cells.forEach(r=>r.drawTiles(t,n));return}this.gridWidth=o.width*e.width,this.gridHeight=o.height*e.height,this.rectBg.clear().rect(0,0,this.gridWidth,this.gridHeight).fill({color:0,alpha:.001});for(let r=0;r<o.width;r++)for(let a=0;a<o.height;a++){let g=`${r}-${a}`,y;this.cells.has(g)?(y=this.cells.get(g),y.tileWidth=e.width,y.tileHeight=e.height):(y=new Pe(r,a,e.width,e.height),y.zIndex=2,this.cells.set(g,y),this.addChild(y),y.on("mouseenter",()=>{["remove","draw","info"].includes(this.toolState)&&(this.cells.forEach(P=>P.showBorder(this.visibleGrid)),y.showBorder(!0,Li,1),this.cellOverEvent.next({x:r,y:a}))}),y.on("mouseleave",()=>{this.cellOverEvent.next(null),y.showBorder(this.visibleGrid)}),y.on("mousedown",()=>{this.isMouseDown=!0,this.storeCoords=[],this.actionCell(y,r,a)}),y.on("mouseup",P=>{this.toolState==="info"&&this.cellClickEvent.next({x:P.client.x,y:P.client.y})}),y.on("mousemove",()=>{this.isMouseDown&&this.actionCell(y,r,a)})),y.x=r*e.width,y.y=a*e.height,y.showBorder(this.visibleGrid),y.drawTiles(t,n)}}actionCell(o,e,t){switch(this.toolState){case"draw":this.drawTile&&o.addTile(this.drawTile,this.isModeOverlay)&&this.storeCoords.push({x:e,y:t});break;case"remove":o.clearTiles()&&this.storeCoords.push({x:e,y:t});break}}stopMouseDown(){if(this.isMouseDown&&this.storeCoords.length>0){switch(this.toolState){case"draw":this.cellHasDrawEvent.next(this.storeCoords);break;case"remove":this.cellHasRemoveEvent.next(this.storeCoords);break}this.storeCoords=[]}this.isMouseDown=!1}};var Ae=class extends re{constructor(){super(),this.cellOverEvent=new T,this.cellClickEvent=new T,this.cellHasDrawEvent=new T,this.cellHasRemoveEvent=new T,this.gridContainer=new Fe,this.rectBg=new ae,this.bgSprite=null,this.drawingSprite=null,this.bgFileInfo=null,this.hUnsubscribe=new T,this.tileWidth=0,this.tileHeight=0,this.toolStateValue="move",this.sortableChildren=!0,this.rectBg.zIndex=0,this.gridContainer.zIndex=2,this.addChild(this.rectBg),this.addChild(this.gridContainer),this.gridContainer.cellOverEvent.pipe(v(this.hUnsubscribe)).subscribe(o=>{this.cellOverEvent.next(o),this.setDrawingSpriteCoords(o)}),this.gridContainer.cellClickEvent.pipe(v(this.hUnsubscribe)).subscribe(o=>{this.cellClickEvent.next(o)}),this.gridContainer.cellHasDrawEvent.pipe(v(this.hUnsubscribe)).subscribe(o=>{this.cellHasDrawEvent.next(o)}),this.gridContainer.cellHasRemoveEvent.pipe(v(this.hUnsubscribe)).subscribe(o=>{this.cellHasRemoveEvent.next(o)})}destroy(o){this.hUnsubscribe.next(),this.hUnsubscribe.complete(),super.destroy(o)}set toolState(o){this.gridContainer.toolState=o,this.toolStateValue=o,this.drawingSprite&&(this.drawingSprite.visible=o==="draw")}clearTilesByCoord(o){return this.gridContainer.clearTilesByCoord(o)}setModeOverlay(o){this.gridContainer.isModeOverlay=o}setDrawTile(o){this.gridContainer.setDrawTile(o),this.drawingSprite&&(this.drawingSprite.destroy(),this.drawingSprite=null),!(!o||!o.canvas)&&(this.drawingSprite=new se(oe.from(o.canvas)),this.drawingSprite.zIndex=10,this.drawingSprite.visible=!1,this.addChild(this.drawingSprite))}drawBackground(o){return mt(this,null,function*(){if(!o||!o.file){this.clearBgSprite();return}if(this.compareBg(o.file))this.bgSprite&&(this.bgSprite.alpha=o.opacity);else{this.bgFileInfo={name:o.file.name,size:o.file.size},this.clearBgSprite();let e=yield $t.fileToCanvas(o.file);this.bgSprite=new se(oe.from(e)),this.bgSprite.zIndex=1,this.bgSprite.alpha=o.opacity,this.addChild(this.bgSprite)}})}setVisibleBackground(o){this.bgSprite&&(this.bgSprite.visible=o)}setVisibleGrid(o){this.gridContainer.visibleGrid=o}drawGrid(o,e,t,n){if(this.rectBg.clear(),o&&e){this.tileWidth=e.width,this.tileHeight=e.height;let r=o.width*e.width,a=o.height*e.height;this.rectBg.clear().rect(0,0,r,a).fill({color:0,alpha:.001}),this.gridContainer.drawGrid(o,e,t,n)}else this.gridContainer.clearGrid()}clearBgSprite(){this.bgSprite&&(this.bgSprite.destroy(),this.bgSprite=null)}compareBg(o){return!!(this.bgFileInfo&&this.bgFileInfo.name===o.name&&this.bgFileInfo.size===o.size)}setDrawingSpriteCoords(o){this.drawingSprite&&(o?(this.drawingSprite.x=o.x*this.tileWidth,this.drawingSprite.y=o.y*this.tileHeight,this.drawingSprite.visible=this.toolStateValue==="draw"):this.drawingSprite.visible=!1)}};function ji(i,o){i&1&&(s(0,"div",0),u(1,"\u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u0444\u0440\u0435\u0439\u043C\u043E\u0432.... \u041F\u043E\u0434\u043E\u0436\u0434\u0438\u0442\u0435, \u043F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430"),l())}var hi=(()=>{class i{constructor(e,t){this.tilesGridStore=e,this.elementRef=t,this.initializingFrames=Z(!0),this.appPixi=new Lt,this.drawContainer=new Ae,this.destroyRef$=m(J),this.cursor="move",this.toolState="move",this.lastToolState=null,this.storeKeyCanvas=null,this.currentCoord=null,this.onKeyDown=n=>{if(document.activeElement?.tagName!=="INPUT"&&this.toolState!=="move")switch(n.code){case"Space":this.lastToolState=this.toolState,this.tilesGridStore.setEditorToolState("move");break;case"Delete":this.clearTilesByCoord(this.currentCoord);break}},this.onKeyUp=n=>{document.activeElement?.tagName!=="INPUT"&&n.code==="Space"&&this.lastToolState&&(this.tilesGridStore.setEditorToolState(this.lastToolState,!1),this.lastToolState=null)},window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)}get cursorStyle(){return this.cursor}ngAfterViewInit(){this.initializePixi()}ngOnDestroy(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp),this.tilesGridStore.clearCurrentTileGrid(),this.appPixi.destroy()}initializePixi(){this.appPixi.useScale=!0,this.appPixi.initialize(this.elementRef.nativeElement).then(()=>{this.appPixi.attachScaleContainer(this.drawContainer),this.initializeSubscriptions()})}initializeSubscriptions(){X([this.tilesGridStore.currentTileGrid$,this.tilesGridStore.editorFlatTreeFrames$]).pipe(M(this.destroyRef$)).subscribe(([e,t])=>{if(t.length>0){if(this.storeKeyCanvas===null){this.storeKeyCanvas={};for(let n of t)for(let r of n.frames)r.canvas&&(this.storeKeyCanvas[r.id]=r.canvas)}e&&this.drawContainer.drawGrid(e.mapInfo,e.tileInfo,e.items,this.storeKeyCanvas)}}),this.tilesGridStore.initializingFrameTree$.pipe(M(this.destroyRef$)).subscribe(e=>this.initializingFrames.set(e)),this.tilesGridStore.currentTileGridBg$.pipe(M(this.destroyRef$)).subscribe(e=>{this.drawContainer.drawBackground(e)}),this.tilesGridStore.editorVisibleGrid$.pipe(M(this.destroyRef$)).subscribe(e=>{this.drawContainer.setVisibleGrid(e)}),this.tilesGridStore.editorVisibleBg$.pipe(M(this.destroyRef$)).subscribe(e=>{this.drawContainer.setVisibleBackground(e)}),this.tilesGridStore.editorDrawOverlay$.pipe(M(this.destroyRef$)).subscribe(e=>{this.drawContainer.setModeOverlay(e)}),this.tilesGridStore.editorDrawTile$.pipe(M(this.destroyRef$)).subscribe(e=>{this.drawContainer.setDrawTile(e)}),this.tilesGridStore.editorZoomEvent$.pipe(M(this.destroyRef$)).subscribe(e=>this.appPixi.setZoom(e,!1)),this.tilesGridStore.editorToolState$.pipe(M(this.destroyRef$)).subscribe(e=>{switch(this.toolState=e,this.drawContainer.toolState=e,this.appPixi.useMove=e==="move",e){case"move":this.cursor="move";break;case"info":this.cursor="help";break;case"remove":this.cursor="crosshair";break;case"draw":this.cursor="grabbing";break;default:this.cursor="default"}}),this.drawContainer.cellOverEvent.pipe(M(this.destroyRef$)).subscribe(e=>{this.tilesGridStore.setEditorCurrentCoords(e),this.currentCoord=e}),this.drawContainer.cellClickEvent.pipe(M(this.destroyRef$)).subscribe(e=>{this.toolState==="info"&&this.tilesGridStore.showContextMenu(e)}),this.drawContainer.cellHasDrawEvent.pipe(M(this.destroyRef$)).subscribe(e=>{this.tilesGridStore.setEditorDrawByCoors(e)}),this.drawContainer.cellHasRemoveEvent.pipe(M(this.destroyRef$)).subscribe(e=>{this.tilesGridStore.setEditorRemoveByCoors(e)})}clearTilesByCoord(e){e&&this.drawContainer.clearTilesByCoord(e)&&this.tilesGridStore.setEditorRemoveByCoors([e])}static{this.\u0275fac=function(t){return new(t||i)(k(F),k(ee))}}static{this.\u0275cmp=S({type:i,selectors:[["tge-edit-draw"]],hostVars:2,hostBindings:function(t,n){t&2&&St("cursor",n.cursorStyle)},decls:1,vars:1,consts:[[1,"load-message"]],template:function(t,n){t&1&&_(0,ji,2,0,"div",0),t&2&&C(n.initializingFrames()?0:-1)},dependencies:[I],styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:center;position:absolute;inset:0;overflow:hidden}.load-message[_ngcontent-%COMP%]{z-index:1;position:absolute;padding:20px;background-color:#fff;border-radius:6px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f;letter-spacing:.18px;color:#5b5b5b;font-size:24px;font-weight:400}"],changeDetection:0})}}return i})();var fi=(()=>{class i{constructor(){this.replaceType="add",this.properties={}}onApply(){this.dialogRef?.close({replaceType:this.replaceType,properties:this.properties})}onChangeProperties(e){this.properties=e}onClose(){this.dialogRef?.close()}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=S({type:i,selectors:[["tge-property-for-all-modal"]],decls:8,vars:2,consts:[[1,"jst-modal-container"],[1,"padding-10"],[3,"replaceTypeChange","changeEvent","replacerVisible","replaceType"],[1,"jst-modal-footer-buttons"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent",3,"click"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"div",1)(2,"smc-properties-container",2),Ot("replaceTypeChange",function(a){return Gt(n.replaceType,a)||(n.replaceType=a),a}),d("changeEvent",function(a){return n.onChangeProperties(a)}),l()()(),s(3,"div",3)(4,"button",4),d("click",function(){return n.onApply()}),u(5,"\u041F\u0440\u0438\u043C\u0435\u043D\u0438\u0442\u044C"),l(),s(6,"button",5),d("click",function(){return n.onClose()}),u(7,"\u0417\u0430\u043A\u0440\u044B\u0442\u044C"),l()()),t&2&&(c(2),E("replacerVisible",!0),Dt("replaceType",n.replaceType))},dependencies:[I,V,N,Ee],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:790px}"]})}}return i})();var zi=["scroll"],Ni=(i,o)=>o.id;function Ui(i,o){i&1&&(s(0,"div",6),u(1,"\u041D\u0435\u0442 \u0434\u0430\u043D\u043D\u044B\u0445"),l())}function Ki(i,o){i&1&&(s(0,"mat-icon",13),u(1,"expand_more"),l())}function Wi(i,o){i&1&&(s(0,"mat-icon",14),u(1,"expand_less"),l())}function Qi(i,o){i&1&&(s(0,"div",16),u(1,"\u041D\u0435\u0442 \u0444\u0440\u0435\u0439\u043C\u043E\u0432"),l())}function Zi(i,o){if(i&1){let e=w();s(0,"smc-tiles-list",18),d("selectedEvent",function(n){h(e);let r=p(3);return f(r.tilesGridStore.setEditorDrawTile(n))}),l()}if(i&2){let e=p().$implicit;E("tiles",e.frames)("scrolling",!1)("draggable",!1)("useCheckbox",!0)}}function Yi(i,o){if(i&1){let e=w();s(0,"div",10)(1,"div",11),d("click",function(){let n=h(e).$implicit;return f(n.collapse=!n.collapse)}),s(2,"div",12),u(3),l(),_(4,Ki,2,0,"mat-icon",13)(5,Wi,2,0,"mat-icon",14),l(),s(6,"div",15),_(7,Qi,2,0,"div",16)(8,Zi,1,4,"smc-tiles-list",17),l()()}if(i&2){let e=o.$implicit;c(3),ne(e.name),c(),C(e.collapse?4:5),c(2),D("display-none",e.collapse),c(),C(e.frames.length===0?7:8)}}function Xi(i,o){if(i&1&&(s(0,"div",7)(1,"div",8)(2,"div",9,0),xe(4,Yi,9,5,"div",10,Ni),l()()()),i&2){p();let e=B(0);c(4),Me(e)}}var _i=(()=>{class i{constructor(e){this.tilesGridStore=e,this.destroyRef$=m(J)}ngAfterViewInit(){X([this.tilesGridStore.editorDrawTile$,this.tilesGridStore.editorVisibleSidebar$]).pipe(M(this.destroyRef$)).subscribe(([e,t])=>{t&&e&&setTimeout(()=>{if(this.scrollRef?.nativeElement){let n=this.scrollRef.nativeElement.querySelector(`#tile-item-${e.id}`);n&&n.scrollIntoView({behavior:"smooth",block:"center"})}})})}static{this.\u0275fac=function(t){return new(t||i)(k(F))}}static{this.\u0275cmp=S({type:i,selectors:[["tge-edit-sidebar"]],viewQuery:function(t,n){if(t&1&&ie(zi,5),t&2){let r;j(r=z())&&(n.scrollRef=r.first)}},decls:15,vars:6,consts:[["scroll",""],[1,"flex-row-align-center","pl-10","pr-10","border-bottom"],[1,"flex-auto","flex-row-align-center"],["mat-icon-button","","title","\u0420\u0430\u0441\u043A\u0440\u044B\u0442\u044C \u0432\u0441\u0435",3,"click","disabled"],["mat-icon-button","","title","\u0421\u0445\u043B\u043E\u043F\u043D\u0443\u0442\u044C \u0432\u0441\u0435",1,"ml-10",3,"click","disabled"],["mat-icon-button","","color","accent",3,"click"],[1,"empty-message"],[1,"flex-auto","flex-col","pl-10","pr-10","mt-10"],[1,"scroll-container"],[1,"scroll"],[1,"frame-panel"],[1,"frame-panel_header",3,"click"],[1,"frame-panel_header-title"],["title","\u0420\u0430\u0441\u043A\u0440\u044B\u0442\u044C"],["title","\u0421\u0445\u043B\u043E\u043F\u043D\u0443\u0442\u044C"],[1,"flex-col"],[1,"empty-message","no-frame-message"],["backgroundIcon","draw",3,"tiles","scrolling","draggable","useCheckbox"],["backgroundIcon","draw",3,"selectedEvent","tiles","scrolling","draggable","useCheckbox"]],template:function(t,n){if(t&1){let r=w();O(0),b(1,"async"),s(2,"div",1)(3,"div",2)(4,"button",3),d("click",function(){return h(r),f(n.tilesGridStore.expandEditorFlatTreeFrames(!1))}),s(5,"mat-icon"),u(6,"keyboard_arrow_up"),l()(),s(7,"button",4),d("click",function(){return h(r),f(n.tilesGridStore.expandEditorFlatTreeFrames(!0))}),s(8,"mat-icon"),u(9,"keyboard_arrow_down"),l()()(),s(10,"button",5),d("click",function(){return h(r),f(n.tilesGridStore.setEditorVisibleSidebar(!1))}),s(11,"mat-icon"),u(12,"cancel"),l()()(),_(13,Ui,2,0,"div",6)(14,Xi,6,0,"div",7)}if(t&2){let r=H(x(1,3,n.tilesGridStore.editorFlatTreeFrames$));c(4),E("disabled",!r||r.length===0),c(3),E("disabled",!r||r.length===0),c(6),C(!r||r.length===0?13:14)}},dependencies:[I,R,V,Te,K,U,ri],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;position:absolute;right:0;bottom:0;top:0;width:375px;background-color:#fff}.frame-panel[_ngcontent-%COMP%]{margin-top:3px}.frame-panel[_ngcontent-%COMP%]   .frame-panel_header[_ngcontent-%COMP%]{display:flex;background-color:#0275d8;color:#fff;padding:3px 5px 3px 10px;font-weight:700;-webkit-user-select:none;user-select:none;border-radius:4px;cursor:pointer}.frame-panel[_ngcontent-%COMP%]   .frame-panel_header[_ngcontent-%COMP%]   .frame-panel_header-title[_ngcontent-%COMP%]{flex:auto}.frame-panel[_ngcontent-%COMP%]   .frame-panel_header[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{line-height:18px;height:18px;width:18px;font-size:16px;color:#fff}.no-frame-message[_ngcontent-%COMP%]{font-size:16px;padding:5px 0}"],changeDetection:0})}}return i})();function qi(i,o){if(i&1&&u(0),i&2){p();let e=B(0);ve(" ",e.x,"x",e.y," ")}}function Ji(i,o){i&1&&u(0," \u043D\u0435\u0442 ")}function en(i,o){i&1&&u(0," \u0434\u0430 ")}function tn(i,o){i&1&&u(0," \u043D\u0435\u0442 ")}function nn(i,o){if(i&1&&(s(0,"span",2),u(1),l()),i&2){p();let e=B(4);c(),ne(e)}}var gi=(()=>{class i{constructor(e){this.tilesGridStore=e}static{this.\u0275fac=function(t){return new(t||i)(k(F))}}static{this.\u0275cmp=S({type:i,selectors:[["tge-edit-statusbar"]],decls:15,vars:11,consts:[[1,"cell-coords","border-right"],[1,"cell-overlay","border-right","ml-10"],[1,"ml-10"]],template:function(t,n){if(t&1&&(O(0),b(1,"async"),O(2),b(3,"async"),O(4),b(5,"async"),s(6,"span",0),u(7," \u0422\u0435\u043A\u0443\u0449\u0430\u044F \u044F\u0447\u0435\u0439\u043A\u0430: "),_(8,qi,1,2)(9,Ji,1,0),l(),s(10,"span",1),u(11," \u041D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E \u0444\u0440\u0435\u0439\u043C\u043E\u0432 \u0432 \u044F\u0447\u0435\u0439\u043A\u0435: "),_(12,en,1,0)(13,tn,1,0),l(),_(14,nn,2,1,"span",2)),t&2){let r=H(x(1,3,n.tilesGridStore.editorCurrentCoords$)),a=x(3,6,n.tilesGridStore.editorDrawOverlay$);c(4);let g=H(x(5,8,n.tilesGridStore.editorStatusHint$));c(4),C(r?8:9),c(4),C(a?12:13),c(2),C(g?14:-1)}},dependencies:[I,R],styles:["[_nghost-%COMP%]{display:flex;align-items:center;font-size:12px;padding:5px 10px;height:26px}span[_ngcontent-%COMP%]{display:inline-block;padding:5px 0}.cell-coords[_ngcontent-%COMP%]{width:140px}.cell-overlay[_ngcontent-%COMP%]{width:202px}"],changeDetection:0})}}return i})();function on(i,o){if(i&1){let e=w();s(0,"div",1),G(1,"img",7),s(2,"div",8)(3,"div",9)(4,"strong"),u(5),l(),u(6),l(),s(7,"div")(8,"button",10),d("click",function(){h(e);let n=p();return f(n.onDownloadFrame(n.frameInfo()))}),u(9,"\u0421\u043A\u0430\u0447\u0430\u0442\u044C \u0444\u0440\u0435\u0439\u043C"),l()()()()}if(i&2){let e,t,n,r=p();c(),E("src",(e=r.frameInfo())==null?null:e.src,Tt),c(4),ne((t=r.frameInfo())==null?null:t.name),c(),ve(" (",(n=r.frameInfo())==null?null:n.width,"x",(n=r.frameInfo())==null?null:n.height,") ")}}var Ci=(()=>{class i{constructor(){this.frameInfo=Z(null),this.properties=Z({}),this.tileCoords=null,this.tileReferenceId=null,this.tileProps={}}onApply(){this.dialogRef?.close({coords:this.tileCoords,referenceId:this.tileReferenceId,props:this.tileProps})}onChangeProperties(e){this.tileProps=e}onDownloadFrame(e){if(e){let t=e.src,n=document.createElement("a");n.setAttribute("href",t),n.setAttribute("download",`${e.name}.png`),n.click()}}setData(e){this.tileCoords=e.tile?{x:e.tile.x,y:e.tile.y}:null,this.tileReferenceId=e.tile?e.tile.referenceId:null,this.properties.set(e?.tile?.properties??{}),e?.frame&&e.frame.file&&this.frameInfo.set({name:e.frame.name,width:e.frame.width,height:e.frame.height,src:URL.createObjectURL(e.frame.file)})}onClose(){this.dialogRef?.close()}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=S({type:i,selectors:[["tge-tile-info-modal"]],decls:9,vars:2,consts:[[1,"jst-modal-container"],[1,"flex-items-center","padding-10","border-bottom"],[1,"padding-10"],[3,"changeEvent","properties"],[1,"jst-modal-footer-buttons"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent",3,"click"],[2,"width","64px","height","64px",3,"src"],[1,"flex-col","flex-auto","ml-10"],[1,"ml-10"],["mat-button","","color","primary",3,"click"]],template:function(t,n){t&1&&(s(0,"div",0),_(1,on,10,4,"div",1),s(2,"div",2)(3,"smc-properties-container",3),d("changeEvent",function(a){return n.onChangeProperties(a)}),l()()(),s(4,"div",4)(5,"button",5),d("click",function(){return n.onApply()}),u(6,"\u041F\u0440\u0438\u043C\u0435\u043D\u0438\u0442\u044C"),l(),s(7,"button",6),d("click",function(){return n.onClose()}),u(8,"\u0417\u0430\u043A\u0440\u044B\u0442\u044C"),l()()),t&2&&(c(),C(n.frameInfo()?1:-1),c(2),E("properties",n.properties()))},dependencies:[I,V,N,Ee],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:790px}"]})}}return i})();function rn(i,o){if(i&1){let e=w();s(0,"button",11),d("click",function(){h(e);let n=p();return f(n.tilesGridStore.setEditorVisibleSidebar(!0))}),u(1," \u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0444\u0440\u0435\u0439\u043C \u0434\u043B\u044F \u043E\u0442\u0440\u0438\u0441\u043E\u0432\u043A\u0438 "),l()}if(i&2){p();let e=B(8);E("disabled",e)}}var yi=(()=>{class i{constructor(e){this.tilesGridStore=e}static{this.\u0275fac=function(t){return new(t||i)(k(F))}}static{this.\u0275cmp=S({type:i,selectors:[["tge-edit-toolbar"]],decls:36,vars:26,consts:[[1,"flex-auto","flex-row-align-center"],["mat-icon-button","","title","\u041F\u0435\u0440\u0435\u0442\u0430\u0441\u043A\u0438\u0432\u0430\u043D\u0438\u0435 \u0441\u0435\u0442\u043A\u0438","color","primary",3,"click"],["mat-icon-button","","title","\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E \u044F\u0447\u0435\u0439\u043A\u0435","color","primary",1,"ml-10",3,"click"],["mat-icon-button","","title","\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0444\u0440\u0435\u0439\u043C\u043E\u0432","color","primary",1,"ml-10",3,"click"],["mat-icon-button","","title","\u041E\u0442\u0440\u0438\u0441\u043E\u0432\u043A\u0430 \u0444\u0440\u0435\u0439\u043C\u043E\u0432","color","primary",1,"ml-10",3,"click"],[1,"tools-divider"],["buttonColor","primary",3,"zoomEvent"],["mat-icon-button","","title","\u041D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E \u0444\u0440\u0435\u0439\u043C\u043E\u0432 \u0432 \u044F\u0447\u0435\u0439\u043A\u0435","color","primary",3,"click"],["mat-icon-button","","title","\u0421\u043A\u0440\u044B\u0442\u044C/\u043F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u0441\u0435\u0442\u043A\u0443","color","primary",1,"ml-10",3,"click"],["mat-icon-button","","title","\u0421\u043A\u0440\u044B\u0442\u044C/\u043F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u043F\u043E\u0434\u043B\u043E\u0436\u043A\u0443","color","primary",1,"ml-10",3,"click"],["mat-button","","color","primary",3,"disabled"],["mat-button","","color","primary",3,"click","disabled"]],template:function(t,n){if(t&1){let r=w();O(0),b(1,"async"),O(2),b(3,"async"),O(4),b(5,"async"),O(6),b(7,"async"),O(8),b(9,"async"),s(10,"div",0)(11,"button",1),d("click",function(){return h(r),f(n.tilesGridStore.setEditorToolState("move"))}),s(12,"mat-icon"),u(13,"pan_tool"),l()(),s(14,"button",2),d("click",function(){return h(r),f(n.tilesGridStore.setEditorToolState("info"))}),s(15,"mat-icon"),u(16,"info"),l()(),s(17,"button",3),d("click",function(){return h(r),f(n.tilesGridStore.setEditorToolState("remove"))}),s(18,"mat-icon"),u(19,"delete"),l()(),s(20,"button",4),d("click",function(){return h(r),f(n.tilesGridStore.setEditorToolState("draw"))}),s(21,"mat-icon"),u(22,"app_registration"),l()(),G(23,"div",5),s(24,"smc-scale-buttons",6),d("zoomEvent",function(g){return h(r),f(n.tilesGridStore.sendEditorZoom(g))}),l(),G(25,"div",5),s(26,"button",7),d("click",function(){return h(r),f(n.tilesGridStore.switchEditorDrawOverlay())}),s(27,"mat-icon"),u(28,"layers"),l()(),s(29,"button",8),d("click",function(){return h(r),f(n.tilesGridStore.switchEditorVisibleGrid())}),s(30,"mat-icon"),u(31,"grid_on"),l()(),s(32,"button",9),d("click",function(){return h(r),f(n.tilesGridStore.switchEditorVisibleBg())}),s(33,"mat-icon"),u(34,"visibility"),l()()(),_(35,rn,2,1,"button",10)}if(t&2){let r=x(1,15,n.tilesGridStore.editorToolState$),a=x(3,17,n.tilesGridStore.editorDrawOverlay$),g=x(5,19,n.tilesGridStore.editorVisibleGrid$),y=x(7,21,n.tilesGridStore.editorVisibleBg$);c(8),H(x(9,23,n.tilesGridStore.editorVisibleSidebar$)),c(3),D("selected-button",r==="move"),c(3),D("selected-button",r==="info"),c(3),D("selected-button",r==="remove"),c(3),D("selected-button",r==="draw"),c(6),D("unselected-button",!a),c(3),D("unselected-button",!g),c(3),D("unselected-button",!y),c(3),C(r==="draw"?35:-1)}},dependencies:[I,R,V,N,Te,K,U,oi],styles:["[_nghost-%COMP%]{display:flex;align-items:center;padding:5px 10px;height:33px}"],changeDetection:0})}}return i})();function sn(i,o){i&1&&(s(0,"div",2),G(1,"mat-spinner"),l())}function an(i,o){if(i&1){let e=w();s(0,"button",6),d("click",function(){let n=h(e),r=p(3);return f(r.onExportGrid(n.id))}),u(1,"\u042D\u043A\u0441\u043F\u043E\u0440\u0442 \u0441\u0435\u0442\u043A\u0438"),l(),s(2,"button",7)(3,"div",8)(4,"span"),u(5,"\u0423\u0442\u0438\u043B\u0438\u0442\u044B"),l(),s(6,"mat-icon"),u(7,"arrow_drop_down"),l()()(),s(8,"button",6),d("click",function(){let n=h(e),r=p(),a=p(2);return f(a.onGridParams(r.id,n))}),u(9," \u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B \u0441\u0435\u0442\u043A\u0438 "),l()}if(i&2){p(3);let e=me(4);c(2),E("matMenuTriggerFor",e)}}function ln(i,o){i&1&&G(0,"tge-edit-sidebar",12)}function un(i,o){if(i&1){let e=w();s(0,"div",5),G(1,"tge-edit-toolbar",9),s(2,"div",10)(3,"tge-edit-draw",11),d("cdkContextMenuOpened",function(){h(e);let n=p(3);return f(n.tilesGridStore.onContextMenuState(!0))})("cdkContextMenuClosed",function(){h(e);let n=p(3);return f(n.tilesGridStore.onContextMenuState(!1))}),l(),G(4,"tge-context-menu",null,1),_(6,ln,1,0,"tge-edit-sidebar",12),b(7,"async"),l(),G(8,"tge-edit-statusbar",13),l()}if(i&2){let e=me(5),t=p(3);c(3),E("cdkContextMenuTriggerFor",e.menu)("cdkContextMenuDisabled",!t.tilesGridStore.canUseContextMenu()),c(3),C(x(7,3,t.tilesGridStore.editorVisibleSidebar$)?6:-1)}}function cn(i,o){i&1&&(s(0,"div",2),G(1,"mat-spinner"),l())}function dn(i,o){i&1&&G(0,"smc-page-not-found",14),i&2&&E("goHomeOnClick",!1)}function mn(i,o){if(i&1&&(_(0,cn,2,0,"div",2),b(1,"async"),_(2,dn,1,1,"smc-page-not-found",14)),i&2){let e=p(3);C(x(1,1,e.tilesGridStore.isCurrentTileGridInitializing$)?0:2)}}function pn(i,o){if(i&1&&(s(0,"smc-header",4),b(1,"async"),_(2,an,10,1),b(3,"async"),l(),_(4,un,9,5,"div",5),b(5,"async"),_(6,mn,3,3)),i&2){let e,t,n=p(2);E("project",o)("currentModule",n.currentModule)("currentModulePage",(e=(e=x(1,5,n.tilesGridStore.currentTileGrid$))==null?null:e.name)!==null&&e!==void 0?e:"\u0421\u0435\u0442\u043A\u0430 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u0430"),c(2),C((t=x(3,7,n.tilesGridStore.currentTileGrid$))?2:-1,t),c(2),C(x(5,9,n.tilesGridStore.currentTileGrid$)?4:6)}}function hn(i,o){i&1&&G(0,"smc-page-not-found")}function fn(i,o){if(i&1&&(_(0,pn,7,11),b(1,"async"),_(2,hn,1,0,"smc-page-not-found")),i&2){let e,t=p();C((e=x(1,1,t.projectStore.project$))?0:2,e)}}var mr=(()=>{class i{constructor(e,t,n,r,a,g,y){this.projectStore=e,this.tilesGridStore=t,this.titleService=n,this.activatedRoute=r,this.jstDialogService=a,this.framesService=g,this.exportTilesGridService=y,this.currentModule=ti,this.destroyRef$=m(J),this.activatedRoute.paramMap.pipe(M()).subscribe(P=>{this.projectStore.initialize(P.get("pid")),this.tilesGridStore.initializeGridEdit(Number(P.get("id")))}),this.projectStore.project$.pipe(M()).subscribe(P=>{P&&this.tilesGridStore.initializeFramesFlatTree(P.id)}),X([this.projectStore.project$,this.tilesGridStore.currentTileGrid$]).pipe(M()).subscribe(([P,ct])=>{P&&ct&&this.titleService.setTitle(`${ct.name} | ${this.currentModule.name} | ${P.name} | ${ei}`)})}ngOnInit(){this.tilesGridStore.editorContextMenu$.pipe(M(this.destroyRef$)).subscribe(e=>{e&&setTimeout(()=>this.menuTrigger.open({x:e.x,y:e.y}))}),this.tilesGridStore.editorShowTileInfo$.pipe(M(this.destroyRef$)).subscribe(e=>{e&&this.showTileInfoPopup(e)})}onExportGrid(e){this.jstDialogService.showWait("\u0413\u0435\u043D\u0435\u0440\u0430\u0446\u0438\u044F TileGridPack..."),pt(this.exportTilesGridService.exportTileGridPack(e)).pipe(Ct(()=>this.jstDialogService.hideWait())).subscribe({next:()=>this.jstDialogService.showToastSuccess("\u0410\u0440\u0445\u0438\u0432 \u0433\u043E\u0442\u043E\u0432 \u0438 \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D \u043D\u0430 \u0441\u043A\u0430\u0447\u0438\u0432\u0430\u043D\u0438\u0435"),error:t=>this.jstDialogService.showToastError(t.message)})}onGridParams(e,t){jt.blurActiveElement(),this.tilesGridStore.currentTileGridBg$.pipe(_t(1)).subscribe(n=>{this.jstDialogService.showModal("\u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B \u0441\u0435\u0442\u043A\u0438 \u0442\u0430\u0439\u043B\u043E\u0432",si,{projectId:e,tilesGrid:t,tilesGridBg:n},!0).subscribe()})}onUtils(e){switch(e){case"set-property-for-all":this.setPropertyForAll();break}}showTileInfoPopup(e){e.referenceId&&this.framesService.fetchTileById(e.referenceId).subscribe(t=>{let n=`\u0421\u0432\u043E\u0439\u0441\u0442\u0432\u0430 \u0442\u0430\u0439\u043B\u0430 #${t.id} (\u044F\u0447\u0435\u0439\u043A\u0430: ${e.x}x${e.y})`;this.jstDialogService.showModal(n,Ci,{tile:e,frame:t},!0,!1).subscribe(r=>{r?.coords&&r?.referenceId&&this.tilesGridStore.updateTileInGrid(r.coords,r.referenceId,r.props)})})}setPropertyForAll(){this.jstDialogService.showModal("\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C \u0441\u0432\u043E\u0439\u0441\u0442\u0432\u0430 \u0434\u043B\u044F \u0432\u0441\u0435\u0445 \u0442\u0430\u0439\u043B\u043E\u0432",fi,{},!0,!1).subscribe(e=>{e?.replaceType&&e?.properties&&this.tilesGridStore.updateTilesPropertiesInGrid(e.replaceType,e.properties)})}static{this.\u0275fac=function(t){return new(t||i)(k(Ut),k(F),k(At),k(Rt),k(Jt),k(Nt),k(zt))}}static{this.\u0275cmp=S({type:i,selectors:[["tge-edit"]],viewQuery:function(t,n){if(t&1&&ie(De,5),t&2){let r;j(r=z())&&(n.menuTrigger=r.first)}},decls:7,vars:3,consts:[["utilsMenu","matMenu"],["contextMenu",""],[1,"flex-auto","flex-row-centered"],["mat-menu-item","",3,"click"],[3,"project","currentModule","currentModulePage"],[1,"flex-auto","flex-col"],["mat-button","","color","primary",1,"ml-10",3,"click"],["mat-button","","color","primary",3,"matMenuTriggerFor"],[1,"flex-row-align-center"],[1,"border-bottom"],[1,"flex-auto","flex-col","p-relative"],[3,"cdkContextMenuOpened","cdkContextMenuClosed","cdkContextMenuTriggerFor","cdkContextMenuDisabled"],[1,"border-left"],[1,"border-top"],[3,"goHomeOnClick"]],template:function(t,n){if(t&1){let r=w();_(0,sn,2,0,"div",2),b(1,"async"),_(2,fn,3,3),s(3,"mat-menu",null,0)(5,"button",3),d("click",function(){return h(r),f(n.onUtils("set-property-for-all"))}),u(6,"\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C \u0441\u0432\u043E\u0439\u0441\u0442\u0432\u0430 \u0434\u043B\u044F \u0432\u0441\u0435\u0445 \u0444\u0440\u0435\u0439\u043C\u043E\u0432"),l()()}t&2&&C(x(1,1,n.projectStore.isInitializing$)?0:2)},dependencies:[I,R,Ht,Vt,V,N,K,U,qt,Yt,Zt,Xt,Ge,De,ii,ni,yi,gi,_i,hi,pi],styles:["[_nghost-%COMP%]{flex:auto;display:flex;flex-direction:column}"],changeDetection:0})}}return i})();export{mr as TGEEditComponent};
