(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{ebwL:function(t,e,i){"use strict";i.r(e),i.d(e,"MainModule",(function(){return Se}));var n=i("ofXK"),c=i("3Pt+"),o=i("tyNb"),r=i("AJDu"),a=i("BGmy"),s=i("z5rg"),l=i("fXoL"),b=i("wZkO"),u=i("Wp6s"),f=i("M9IT"),m=i("+0xr"),d=i("bTqV"),p=i("Svmg"),h=i("NFeN");const g=["class","list"];function v(t,e){if(1&t&&(l.Tb(0,"a",7),l.Ic(1),l.Sb()),2&t){const t=e.$implicit,i=l.fc();l.nc("routerLink",t.routerLink)("active",i.currentCode==t.code),l.Bb(1),l.Kc(" ",t.title," ")}}function S(t,e){1&t&&(l.Tb(0,"div",8),l.Ic(1,"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0442 \u043f\u0440\u0430\u0432 \u043d\u0430 \u044d\u0442\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435"),l.Sb())}function T(t,e){1&t&&(l.Tb(0,"button",29),l.Ic(1,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),l.Sb())}function I(t,e){if(1&t){const t=l.Ub();l.Tb(0,"ui-input",33),l.bc("onchange",(function(){return l.wc(t),l.fc(3).onChangeFilter()}))("enterClick",(function(){return l.wc(t),l.fc(3).onChangeFilter()})),l.Sb()}if(2&t){l.fc(3);const t=l.tc(5);l.nc("suffixTpl",t)}}const w=function(t){return{title:t}};function C(t,e){if(1&t&&(l.Tb(0,"th",30),l.Tb(1,"div",31),l.Ic(2,"\u041b\u043e\u0433\u0438\u043d"),l.Sb(),l.Gc(3,I,1,1,"ui-input",32),l.Sb()),2&t){const t=l.fc(2);l.Bb(1),l.nc("ngClass",l.qc(2,w,t.visibleFilter)),l.Bb(2),l.nc("ngIf",t.visibleFilter)}}function k(t,e){if(1&t&&(l.Tb(0,"td",34),l.Ic(1),l.Sb()),2&t){const t=e.$implicit;l.Bb(1),l.Kc(" ",t.login," ")}}function G(t,e){if(1&t){const t=l.Ub();l.Tb(0,"ui-input",36),l.bc("onchange",(function(){return l.wc(t),l.fc(3).onChangeFilter()}))("enterClick",(function(){return l.wc(t),l.fc(3).onChangeFilter()})),l.Sb()}if(2&t){l.fc(3);const t=l.tc(7);l.nc("suffixTpl",t)}}function B(t,e){if(1&t&&(l.Tb(0,"th",30),l.Tb(1,"div",31),l.Ic(2,"\u0424\u0418\u041e"),l.Sb(),l.Gc(3,G,1,1,"ui-input",35),l.Sb()),2&t){const t=l.fc(2);l.Bb(1),l.nc("ngClass",l.qc(2,w,t.visibleFilter)),l.Bb(2),l.nc("ngIf",t.visibleFilter)}}function y(t,e){if(1&t&&(l.Tb(0,"td",34),l.Ic(1),l.Sb()),2&t){const t=e.$implicit;l.Bb(1),l.Kc(" ",t.fullName," ")}}function x(t,e){if(1&t){const t=l.Ub();l.Tb(0,"ui-input",38),l.bc("onchange",(function(){return l.wc(t),l.fc(3).onChangeFilter()}))("enterClick",(function(){return l.wc(t),l.fc(3).onChangeFilter()})),l.Sb()}if(2&t){l.fc(3);const t=l.tc(9);l.nc("suffixTpl",t)}}function A(t,e){if(1&t&&(l.Tb(0,"th",30),l.Tb(1,"div",31),l.Ic(2,"Email"),l.Sb(),l.Gc(3,x,1,1,"ui-input",37),l.Sb()),2&t){const t=l.fc(2);l.Bb(1),l.nc("ngClass",l.qc(2,w,t.visibleFilter)),l.Bb(2),l.nc("ngIf",t.visibleFilter)}}function P(t,e){if(1&t&&(l.Tb(0,"td",34),l.Ic(1),l.Sb()),2&t){const t=e.$implicit;l.Bb(1),l.Kc(" ",t.email," ")}}function F(t,e){if(1&t){const t=l.Ub();l.Tb(0,"button",42),l.bc("click",(function(){l.wc(t);const e=l.fc(3);return e.visibleFilter=!e.visibleFilter})),l.Tb(1,"mat-icon",43),l.Ic(2,"block"),l.Sb(),l.Sb()}}function O(t,e){if(1&t){const t=l.Ub();l.Tb(0,"button",42),l.bc("click",(function(){l.wc(t);const e=l.fc(3);return e.visibleFilter=!e.visibleFilter})),l.Tb(1,"mat-icon"),l.Ic(2,"filter_list"),l.Sb(),l.Sb()}}function R(t,e){if(1&t&&(l.Tb(0,"th",39),l.Tb(1,"div",40),l.Gc(2,F,3,0,"button",41),l.Gc(3,O,3,0,"button",41),l.Sb(),l.Sb()),2&t){const t=l.fc(2);l.Bb(2),l.nc("ngIf",t.visibleFilter),l.Bb(1),l.nc("ngIf",!t.visibleFilter)}}function N(t,e){if(1&t){const t=l.Ub();l.Tb(0,"button",46),l.bc("click",(function(e){l.wc(t);const i=l.fc().$implicit;return l.fc(2).onRemoveClick(e,i)})),l.Tb(1,"mat-icon",43),l.Ic(2,"clear"),l.Sb(),l.Sb()}}function D(t,e){if(1&t&&(l.Tb(0,"td",44),l.Tb(1,"div",40),l.Gc(2,N,3,0,"button",45),l.Sb(),l.Sb()),2&t){const t=l.fc(2);l.Bb(2),l.nc("ngIf",t.deleteAvailable)}}function U(t,e){1&t&&(l.Tb(0,"td",47),l.Ic(1," \u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440 \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430. "),l.Sb())}function L(t,e){1&t&&l.Ob(0,"tr",48)}const V=function(t){return{selected:t}};function M(t,e){if(1&t){const t=l.Ub();l.Tb(0,"tr",49),l.bc("click",(function(){l.wc(t);const i=e.$implicit;return l.fc(2).onClickRow(i)})),l.Sb()}2&t&&l.nc("ngClass",l.qc(1,V,e.$implicit.selected))}function _(t,e){1&t&&l.Ob(0,"tr",50)}const E=function(){return[]},$=function(){return["notFound"]};function H(t,e){if(1&t){const t=l.Ub();l.Tb(0,"mat-card",9),l.Tb(1,"mat-card-header"),l.Tb(2,"mat-card-title"),l.Ic(3,"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439"),l.Sb(),l.Gc(4,T,2,0,"button",10),l.Sb(),l.Tb(5,"mat-card-content",11),l.Tb(6,"div",12),l.Tb(7,"h3",13),l.Ic(8,"\xa0"),l.Sb(),l.Tb(9,"mat-paginator",14),l.bc("changes",(function(){return l.wc(t),l.fc().updatePaginator}))("page",(function(e){return l.wc(t),l.fc().pageChanged(e)})),l.Sb(),l.Sb(),l.Tb(10,"table",15),l.Rb(11,16),l.Gc(12,C,4,4,"th",17),l.Gc(13,k,2,1,"td",18),l.Qb(),l.Rb(14,19),l.Gc(15,B,4,4,"th",17),l.Gc(16,y,2,1,"td",18),l.Qb(),l.Rb(17,20),l.Gc(18,A,4,4,"th",17),l.Gc(19,P,2,1,"td",18),l.Qb(),l.Rb(20,21),l.Gc(21,R,4,2,"th",22),l.Gc(22,D,3,1,"td",23),l.Qb(),l.Rb(23,24),l.Gc(24,U,2,0,"td",25),l.Qb(),l.Gc(25,L,1,0,"tr",26),l.Gc(26,M,1,3,"tr",27),l.Gc(27,_,1,0,"tr",28),l.Sb(),l.Sb(),l.Sb()}if(2&t){const t=l.fc();l.Bb(4),l.nc("ngIf",t.updateAvailable),l.Bb(1),l.nc("formGroup",t.formGroup),l.Bb(4),l.nc("length",t.total)("pageSize",t.pageSize)("hidePageSize",!0),l.Bb(1),l.nc("dataSource",t.dataSource),l.Bb(15),l.nc("matHeaderRowDef",t.displayedColumns),l.Bb(1),l.nc("matRowDefColumns",t.displayedColumns),l.Bb(1),l.nc("matFooterRowDef",t.dataSource&&t.dataSource.length?l.pc(9,E):l.pc(10,$))}}function j(t,e){if(1&t){const t=l.Ub();l.Tb(0,"button",51),l.bc("click",(function(){return l.wc(t),l.fc().clearField("login",!1)})),l.Tb(1,"mat-icon"),l.Ic(2,"highlight_off"),l.Sb(),l.Sb()}if(2&t){const t=l.fc();l.nc("disabled",""===t.formGroup.get("login").value||null===t.formGroup.get("login").value)}}function K(t,e){if(1&t){const t=l.Ub();l.Tb(0,"button",51),l.bc("click",(function(){return l.wc(t),l.fc().clearField("fullName",!1)})),l.Tb(1,"mat-icon"),l.Ic(2,"highlight_off"),l.Sb(),l.Sb()}if(2&t){const t=l.fc();l.nc("disabled",""===t.formGroup.get("fullName").value||null===t.formGroup.get("fullName").value)}}function J(t,e){if(1&t){const t=l.Ub();l.Tb(0,"button",51),l.bc("click",(function(){return l.wc(t),l.fc().clearField("email",!1)})),l.Tb(1,"mat-icon"),l.Ic(2,"highlight_off"),l.Sb(),l.Sb()}if(2&t){const t=l.fc();l.nc("disabled",""===t.formGroup.get("email").value||null===t.formGroup.get("email").value)}}let z=(()=>{class t extends a.a{constructor(){super(...arguments),this.currentCode="users",this.displayedColumns=["login","fullName","email","buttons"],this.firstBreadcrumbTitle=r.b,this.sideMenu=r.a,this.readPermission="readUsers",this.updatePermission="updateUsers",this.removePermission="removeUsers",this.methodSearch="userSearch",this.methodRemove="userRemove",this.askRemove="\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f?",this.baseRoute="/main/users"}ngOnInit(){this.formGroup=new c.g({login:new s.a(""),fullName:new s.a(""),email:new s.a("")}),super.ngOnInit()}onAfterRemoved(t){t.id===this.userService.getUserId()&&(this.dialogService.showToastError("\u0412\u044b \u0443\u0434\u0430\u043b\u0438\u043b\u0438 \u0441\u0432\u043e\u0435\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f!"),this.userService.clearUser(),this.router.navigate(["/login"]))}}return t.\u0275fac=function(e){return q(e||t)},t.\u0275cmp=l.Hb({type:t,selectors:[["app-user",8,"list"]],features:[l.yb],attrs:g,decls:10,vars:3,consts:[["mat-tab-nav-bar",""],["mat-tab-link","",3,"routerLink","active",4,"ngFor","ngForOf"],["class","alerts-message",4,"ngIf"],["class","page-card",4,"ngIf"],["LoginSuffixTpl",""],["FullNameSuffixTpl",""],["EmailSuffixTpl",""],["mat-tab-link","",3,"routerLink","active"],[1,"alerts-message"],[1,"page-card"],["mat-raised-button","","color","primary","routerLink","add",4,"ngIf"],[3,"formGroup"],[1,"flex-row"],[1,"col-flex-auto"],[1,"page-paginator",3,"length","pageSize","hidePageSize","changes","page"],["mat-table","",3,"dataSource"],["matColumnDef","login"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","fullName"],["matColumnDef","email"],["matColumnDef","buttons"],["mat-header-cell","","class","buttons-cell",4,"matHeaderCellDef"],["mat-cell","","class","buttons-cell",4,"matCellDef"],["matColumnDef","notFound"],["mat-footer-cell","","colspan","10","class","text-center text-danger",4,"matFooterCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","table-row",3,"ngClass","click",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef"],["mat-raised-button","","color","primary","routerLink","add"],["mat-header-cell",""],[3,"ngClass"],["formControlName","login",3,"suffixTpl","onchange","enterClick",4,"ngIf"],["formControlName","login",3,"suffixTpl","onchange","enterClick"],["mat-cell",""],["formControlName","fullName",3,"suffixTpl","onchange","enterClick",4,"ngIf"],["formControlName","fullName",3,"suffixTpl","onchange","enterClick"],["formControlName","email",3,"suffixTpl","onchange","enterClick",4,"ngIf"],["formControlName","email",3,"suffixTpl","onchange","enterClick"],["mat-header-cell","",1,"buttons-cell"],[1,"container"],["mat-button","",3,"click",4,"ngIf"],["mat-button","",3,"click"],["color","accent"],["mat-cell","",1,"buttons-cell"],["mat-button","","color","primary",3,"click",4,"ngIf"],["mat-button","","color","primary",3,"click"],["mat-footer-cell","","colspan","10",1,"text-center","text-danger"],["mat-header-row",""],["mat-row","",1,"table-row",3,"ngClass","click"],["mat-footer-row",""],["mat-button","","color","accent","title","\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c",3,"disabled","click"]],template:function(t,e){1&t&&(l.Tb(0,"nav",0),l.Gc(1,v,2,3,"a",1),l.Sb(),l.Gc(2,S,2,0,"div",2),l.Gc(3,H,28,11,"mat-card",3),l.Gc(4,j,3,1,"ng-template",null,4,l.Hc),l.Gc(6,K,3,1,"ng-template",null,5,l.Hc),l.Gc(8,J,3,1,"ng-template",null,6,l.Hc)),2&t&&(l.Bb(1),l.nc("ngForOf",e.links),l.Bb(1),l.nc("ngIf",!e.permittedAction),l.Bb(1),l.nc("ngIf",e.permittedAction))},directives:[b.b,n.j,n.k,o.e,b.a,u.a,u.c,u.e,u.b,c.o,c.h,f.a,m.n,m.c,m.i,m.b,m.e,m.k,m.m,m.g,d.b,o.c,m.h,n.i,p.a,c.n,c.f,m.a,h.a,m.d,m.j,m.l,m.f],encapsulation:2}),t})();const q=l.Vb(z);var W=i("nYR2"),Q=i("mhXe"),X=i("fri8"),Y=i("kmnG"),Z=i("qFsG"),tt=i("d3UM"),et=i("FKr1");function it(t,e){if(1&t&&l.Ob(0,"input",3),2&t){const t=l.fc();l.nc("value",t.getTitle())("readonly",!0)}}function nt(t,e){if(1&t&&(l.Tb(0,"mat-option",6),l.Ic(1),l.Sb()),2&t){const t=e.$implicit;l.nc("value",t.value),l.Bb(1),l.Kc(" ",t.title," ")}}function ct(t,e){if(1&t){const t=l.Ub();l.Tb(0,"mat-select",4),l.bc("selectionChange",(function(){return l.wc(t),l.fc().selectionChange()})),l.Gc(1,nt,2,2,"mat-option",5),l.Sb()}if(2&t){const t=l.fc();l.nc("formControl",t.control)("title",t.getTitle())("multiple",t.multiple),l.Bb(1),l.nc("ngForOf",t.options)}}function ot(t,e){if(1&t){const t=l.Ub();l.Tb(0,"div",7),l.Tb(1,"button",8),l.bc("click",(function(e){return l.wc(t),l.fc().clear(e)})),l.Tb(2,"mat-icon"),l.Ic(3,"highlight_off"),l.Sb(),l.Sb(),l.Sb()}if(2&t){const t=l.fc();l.Bb(1),l.nc("disabled",t.disabled||t.readonly||""===t.control.value||null===t.control.value)}}let rt=(()=>{class t extends X.a{constructor(){super(...arguments),this.options=[],this.multiple=!1}selectionChange(){this.onchange.emit()}clear(t){t.stopPropagation(),this.disabled||(this.control.setValue(null),this.onchange.emit())}getTitle(){if(!this.control.value||!this.options)return"";if(this.multiple){const t=Array.isArray(this.control.value)?this.control.value:Array(this.control.value),e=[];return t.forEach(t=>{const i=this.options.find(e=>e.value===t);i&&e.push(i.title)}),e.join(", ")}{const t=this.control.value,e=this.options.find(e=>e.value===t);return e?e.title:""}}}return t.\u0275fac=function(e){return at(e||t)},t.\u0275cmp=l.Hb({type:t,selectors:[["ui-select"]],inputs:{options:"options",multiple:"multiple"},features:[l.Ab([{provide:c.l,useExisting:Object(l.V)(()=>t),multi:!0}]),l.yb],decls:8,vars:5,consts:[["matInput","",3,"value","readonly",4,"ngIf"],[3,"formControl","title","multiple","selectionChange",4,"ngIf"],["matSuffix","",4,"ngIf"],["matInput","",3,"value","readonly"],[3,"formControl","title","multiple","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matSuffix",""],["mat-button","","color","accent","title","\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c",3,"disabled","click"]],template:function(t,e){1&t&&(l.Tb(0,"mat-form-field"),l.Tb(1,"mat-label"),l.Ic(2),l.Sb(),l.Gc(3,it,1,2,"input",0),l.Gc(4,ct,2,4,"mat-select",1),l.Gc(5,ot,4,1,"div",2),l.Tb(6,"mat-error"),l.Ic(7),l.Sb(),l.Sb()),2&t&&(l.Bb(2),l.Kc(" ",e.label,""),l.Bb(1),l.nc("ngIf",e.readonly),l.Bb(1),l.nc("ngIf",!e.readonly),l.Bb(1),l.nc("ngIf",!e.readonly),l.Bb(2),l.Jc(e.getErrorMessages()))},directives:[Y.c,Y.f,n.k,Y.b,Z.b,tt.a,c.n,c.e,n.j,et.m,Y.h,d.b,h.a],styles:["[_nghost-%COMP%]{display:block;padding:5px;box-sizing:border-box}.icon[_ngcontent-%COMP%]{font-size:18px}.mat-form-field[_ngcontent-%COMP%]{width:100%}.mat-form-field-prefix[_ngcontent-%COMP%]{margin-right:10px}"]}),t})();const at=l.Vb(rt);function st(t,e){1&t&&(l.Tb(0,"mat-icon"),l.Ic(1,"visibility"),l.Sb())}function lt(t,e){1&t&&(l.Tb(0,"mat-icon"),l.Ic(1,"visibility_off"),l.Sb())}let bt=(()=>{class t extends X.a{constructor(){super(...arguments),this.hintTitle="\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",this.typeInput="password"}toggleType(){this.typeInput="password"===this.typeInput?"text":"password",this.hintTitle="password"===this.typeInput?"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c":"\u0421\u043a\u0440\u044b\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"}onKeyUp(t){"Enter"!==(t.code||t.key)&&13!==t.keyCode||this.enterClick.emit()}}return t.\u0275fac=function(e){return ut(e||t)},t.\u0275cmp=l.Hb({type:t,selectors:[["ui-password-input"]],features:[l.Ab([{provide:c.l,useExisting:Object(l.V)(()=>t),multi:!0}]),l.yb],decls:10,vars:8,consts:[["matInput","",3,"formControl","type","readonly","blur","keyup"],["matSuffix",""],["mat-button","",3,"title","click"],[4,"ngIf"]],template:function(t,e){1&t&&(l.Tb(0,"mat-form-field"),l.Tb(1,"mat-label"),l.Ic(2),l.Sb(),l.Tb(3,"input",0),l.bc("blur",(function(){return e.onBlur()}))("keyup",(function(t){return e.onKeyUp(t)})),l.Sb(),l.Tb(4,"div",1),l.Tb(5,"button",2),l.bc("click",(function(){return e.toggleType()})),l.Gc(6,st,2,0,"mat-icon",3),l.Gc(7,lt,2,0,"mat-icon",3),l.Sb(),l.Sb(),l.Tb(8,"mat-error"),l.Ic(9),l.Sb(),l.Sb()),2&t&&(l.Bb(2),l.Kc(" ",e.label,""),l.Bb(1),l.nc("formControl",e.control)("type",e.typeInput)("readonly",e.readonly),l.Bb(2),l.nc("title",e.hintTitle),l.Bb(1),l.nc("ngIf","password"===e.typeInput),l.Bb(1),l.nc("ngIf","text"===e.typeInput),l.Bb(2),l.Jc(e.getErrorMessages()))},directives:[Y.c,Y.f,Z.b,c.c,c.n,c.e,Y.h,d.b,n.k,Y.b,h.a],styles:["[_nghost-%COMP%]{display:block;padding:5px;box-sizing:border-box}.mat-form-field[_ngcontent-%COMP%]{width:100%}.mat-form-field-prefix[_ngcontent-%COMP%]{margin-right:10px}"]}),t})();const ut=l.Vb(bt);function ft(t,e){if(1&t&&(l.Tb(0,"a",4),l.Ic(1),l.Sb()),2&t){const t=e.$implicit,i=l.fc();l.nc("routerLink",t.routerLink)("active",i.currentCode==t.code),l.Bb(1),l.Kc(" ",t.title," ")}}function mt(t,e){1&t&&(l.Tb(0,"div",5),l.Ic(1,"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0442 \u043f\u0440\u0430\u0432 \u043d\u0430 \u044d\u0442\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435"),l.Sb())}function dt(t,e){if(1&t){const t=l.Ub();l.Tb(0,"button",18),l.bc("click",(function(){return l.wc(t),l.fc(2).onSaveClick()})),l.Ic(1,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"),l.Sb()}}function pt(t,e){if(1&t){const t=l.Ub();l.Tb(0,"button",22),l.bc("click",(function(){return l.wc(t),l.fc(3).visiblePassword=!0})),l.Ic(1,"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"),l.Sb()}}function ht(t,e){1&t&&l.Ob(0,"ui-password-input",23)}function gt(t,e){if(1&t&&(l.Tb(0,"div",19),l.Gc(1,pt,2,0,"button",20),l.Gc(2,ht,1,0,"ui-password-input",21),l.Sb()),2&t){const t=l.fc(2);l.Fb("col-flex-auto",t.visiblePassword),l.Bb(1),l.nc("ngIf",!t.visiblePassword),l.Bb(1),l.nc("ngIf",t.visiblePassword)}}function vt(t,e){if(1&t&&(l.Tb(0,"mat-card",6),l.Tb(1,"mat-card-header"),l.Tb(2,"mat-card-title"),l.Ic(3),l.Sb(),l.Gc(4,dt,2,0,"button",7),l.Sb(),l.Tb(5,"mat-card-content",8),l.Tb(6,"div",9),l.Tb(7,"div",10),l.Ob(8,"ui-input",11),l.Sb(),l.Tb(9,"div",10),l.Ob(10,"ui-input",12),l.Sb(),l.Gc(11,gt,3,4,"div",13),l.Sb(),l.Tb(12,"div",9),l.Tb(13,"div",10),l.Ob(14,"ui-input",14),l.Sb(),l.Tb(15,"div",10),l.Ob(16,"ui-input",15),l.Sb(),l.Tb(17,"div",10),l.Ob(18,"ui-input",16),l.Sb(),l.Sb(),l.Tb(19,"div",9),l.Tb(20,"div",10),l.Ob(21,"ui-select",17),l.Sb(),l.Sb(),l.Sb(),l.Sb()),2&t){const t=l.fc();l.Bb(3),l.Jc(t.pageTitle),l.Bb(1),l.nc("ngIf",t.updateAvailable),l.Bb(1),l.nc("formGroup",t.formGroup),l.Bb(3),l.nc("readonly",!t.updateAvailable),l.Bb(2),l.nc("readonly",!t.updateAvailable),l.Bb(1),l.nc("ngIf",t.updateAvailable),l.Bb(3),l.nc("readonly",!t.updateAvailable),l.Bb(2),l.nc("readonly",!t.updateAvailable),l.Bb(2),l.nc("readonly",!t.updateAvailable),l.Bb(3),l.nc("options",t.rolesList)("readonly",!t.roleEditAvailable)}}const St="\u041d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c";let Tt=(()=>{class t extends Q.a{constructor(){super(...arguments),this.currentCode="users",this.visiblePassword=!1,this.firstBreadcrumbTitle=r.b,this.sideMenu=r.a,this.readPermission="readUsers",this.updatePermission="updateUsers",this.removePermission="removeUsers",this.roleEditAvailable=!1}ngOnInit(){super.ngOnInit(),this.breadcrumbs.push({title:St,routerLink:null}),this.roleEditAvailable=this.updateAvailable,this.activatedRoute.paramMap.subscribe(t=>{const e=t.get("id");if(this.formGroup.reset(),"add"===e)this.currentId=null,this.pageTitle=St,this.visiblePassword=!0,this.breadcrumbs[this.breadcrumbs.length-1].title=St,this.formGroup.get("pwd").setValidators(c.s.required),this.permittedAction=this.updateAvailable;else{this.currentId=+e,this.pageTitle=this.updateAvailable?"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f":"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",this.visiblePassword=!1,this.breadcrumbs[this.breadcrumbs.length-1].title=this.updateAvailable?"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f":"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",this.formGroup.get("pwd").clearValidators();const t=this.userService.getUserInfo("id");if(this.currentId===t){if(!this.readAvailable&&!this.updateAvailable&&!this.deleteAvailable){const t=this.sideMenu.children.find(t=>t.code===this.currentCode);t&&this.links.push(t)}this.updateAvailable=!0}this.permittedAction=this.readAvailable||this.updateAvailable,this.loadData(this.currentId)}})}onSaveClick(){this.formGroup.valid?(this.waitService.showWait("\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435..."),this.apiService.userSave(this.currentId,this.formGroup.value).pipe(Object(W.a)(()=>this.waitService.hideWait())).subscribe(t=>{this.dialogService.showToast(this.currentId?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043f\u0440\u043e\u0448\u043b\u043e \u0443\u0441\u043f\u0435\u0448\u043d\u043e":"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043f\u0440\u043e\u0448\u043b\u043e \u0443\u0441\u043f\u0435\u0448\u043d\u043e","\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435","success",3e3),this.currentId?(this.formGroup.patchValue(t),this.visiblePassword=!1,this.formGroup.markAsPristine()):this.router.navigate(["/main/users/"+t.id])},t=>{this.dialogService.showToastWarning(t.message.text||t.message.fulltext||t.message)})):this.formGroup.markAllAsTouched()}onConstructor(){this.formGroup=new c.g({login:new s.a("",c.s.required),email:new s.a(""),firstName:new s.a(""),lastName:new s.a(""),pwd:new s.a(""),parentName:new s.a(""),roles:new s.a("")}),this.rolesList=[],this.apiService.roleSearch().subscribe(t=>{this.rolesList=t.rowset.map(t=>({value:t.id,title:t.name}))})}loadData(t){this.permittedAction&&(this.waitService.showWait("\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."),this.apiService.userLoad(t).pipe(Object(W.a)(()=>this.waitService.hideWait())).subscribe(t=>{this.formGroup.patchValue(t),this.formGroup.get("pwd").setValue("")},t=>{this.dialogService.showToastError(t.message.text||t.message.fulltext||t.message),this.router.navigate(["/main/users"])}))}}return t.\u0275fac=function(e){return It(e||t)},t.\u0275cmp=l.Hb({type:t,selectors:[["app-user"]],features:[l.yb],decls:4,vars:3,consts:[["mat-tab-nav-bar",""],["mat-tab-link","",3,"routerLink","active",4,"ngFor","ngForOf"],["class","alerts-message",4,"ngIf"],["class","page-card",4,"ngIf"],["mat-tab-link","",3,"routerLink","active"],[1,"alerts-message"],[1,"page-card"],["mat-raised-button","","color","success",3,"click",4,"ngIf"],[3,"formGroup"],[1,"flex-row"],[1,"col-flex-auto","form-group"],["label","\u041b\u043e\u0433\u0438\u043d","formControlName","login",3,"readonly"],["label","Email","formControlName","email",3,"readonly"],["class","form-group",3,"col-flex-auto",4,"ngIf"],["label","\u0424\u0430\u043c\u0438\u043b\u0438\u044f","formControlName","lastName",3,"readonly"],["label","\u0418\u043c\u044f","formControlName","firstName",3,"readonly"],["label","\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e","formControlName","parentName",3,"readonly"],["label","\u0420\u043e\u043b\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f","formControlName","roles","multiple","true",3,"options","readonly"],["mat-raised-button","","color","success",3,"click"],[1,"form-group"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["label","\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c","formControlName","pwd",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],["label","\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c","formControlName","pwd"]],template:function(t,e){1&t&&(l.Tb(0,"nav",0),l.Gc(1,ft,2,3,"a",1),l.Sb(),l.Gc(2,mt,2,0,"div",2),l.Gc(3,vt,22,11,"mat-card",3)),2&t&&(l.Bb(1),l.nc("ngForOf",e.links),l.Bb(1),l.nc("ngIf",!e.permittedAction),l.Bb(1),l.nc("ngIf",e.permittedAction))},directives:[b.b,n.j,n.k,o.e,b.a,u.a,u.c,u.e,u.b,c.o,c.h,p.a,c.n,c.f,rt,d.b,bt],encapsulation:2}),t})();const It=l.Vb(Tt),wt=["class","list"];function Ct(t,e){if(1&t&&(l.Tb(0,"a",6),l.Ic(1),l.Sb()),2&t){const t=e.$implicit,i=l.fc();l.nc("routerLink",t.routerLink)("active",i.currentCode==t.code),l.Bb(1),l.Kc(" ",t.title," ")}}function kt(t,e){1&t&&(l.Tb(0,"div",7),l.Ic(1,"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0442 \u043f\u0440\u0430\u0432 \u043d\u0430 \u044d\u0442\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435"),l.Sb())}function Gt(t,e){1&t&&(l.Tb(0,"button",27),l.Ic(1,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0440\u043e\u043b\u044c"),l.Sb())}function Bt(t,e){if(1&t){const t=l.Ub();l.Tb(0,"ui-input",31),l.bc("onchange",(function(){return l.wc(t),l.fc(3).onChangeFilter()}))("enterClick",(function(){return l.wc(t),l.fc(3).onChangeFilter()})),l.Sb()}if(2&t){l.fc(3);const t=l.tc(5);l.nc("suffixTpl",t)}}const yt=function(t){return{title:t}};function xt(t,e){if(1&t&&(l.Tb(0,"th",28),l.Tb(1,"div",29),l.Ic(2,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),l.Sb(),l.Gc(3,Bt,1,1,"ui-input",30),l.Sb()),2&t){const t=l.fc(2);l.Bb(1),l.nc("ngClass",l.qc(2,yt,t.visibleFilter)),l.Bb(2),l.nc("ngIf",t.visibleFilter)}}function At(t,e){if(1&t&&(l.Tb(0,"td",32),l.Ic(1),l.Sb()),2&t){const t=e.$implicit;l.Bb(1),l.Kc(" ",t.name," ")}}function Pt(t,e){if(1&t){const t=l.Ub();l.Tb(0,"ui-input",34),l.bc("onchange",(function(){return l.wc(t),l.fc(3).onChangeFilter()}))("enterClick",(function(){return l.wc(t),l.fc(3).onChangeFilter()})),l.Sb()}if(2&t){l.fc(3);const t=l.tc(7);l.nc("suffixTpl",t)}}function Ft(t,e){if(1&t&&(l.Tb(0,"th",28),l.Tb(1,"div",29),l.Ic(2,"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),l.Sb(),l.Gc(3,Pt,1,1,"ui-input",33),l.Sb()),2&t){const t=l.fc(2);l.Bb(1),l.nc("ngClass",l.qc(2,yt,t.visibleFilter)),l.Bb(2),l.nc("ngIf",t.visibleFilter)}}function Ot(t,e){if(1&t&&(l.Tb(0,"td",32),l.Ic(1),l.Sb()),2&t){const t=e.$implicit;l.Bb(1),l.Kc(" ",t.description," ")}}function Rt(t,e){if(1&t){const t=l.Ub();l.Tb(0,"button",38),l.bc("click",(function(){l.wc(t);const e=l.fc(3);return e.visibleFilter=!e.visibleFilter})),l.Tb(1,"mat-icon",39),l.Ic(2,"block"),l.Sb(),l.Sb()}}function Nt(t,e){if(1&t){const t=l.Ub();l.Tb(0,"button",38),l.bc("click",(function(){l.wc(t);const e=l.fc(3);return e.visibleFilter=!e.visibleFilter})),l.Tb(1,"mat-icon"),l.Ic(2,"filter_list"),l.Sb(),l.Sb()}}function Dt(t,e){if(1&t&&(l.Tb(0,"th",35),l.Tb(1,"div",36),l.Gc(2,Rt,3,0,"button",37),l.Gc(3,Nt,3,0,"button",37),l.Sb(),l.Sb()),2&t){const t=l.fc(2);l.Bb(2),l.nc("ngIf",t.visibleFilter),l.Bb(1),l.nc("ngIf",!t.visibleFilter)}}function Ut(t,e){if(1&t){const t=l.Ub();l.Tb(0,"button",42),l.bc("click",(function(e){l.wc(t);const i=l.fc().$implicit;return l.fc(2).onRemoveClick(e,i)})),l.Tb(1,"mat-icon",39),l.Ic(2,"clear"),l.Sb(),l.Sb()}}function Lt(t,e){if(1&t&&(l.Tb(0,"td",40),l.Tb(1,"div",36),l.Gc(2,Ut,3,0,"button",41),l.Sb(),l.Sb()),2&t){const t=l.fc(2);l.Bb(2),l.nc("ngIf",t.deleteAvailable)}}function Vt(t,e){1&t&&(l.Tb(0,"td",43),l.Ic(1," \u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440 \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430. "),l.Sb())}function Mt(t,e){1&t&&l.Ob(0,"tr",44)}const _t=function(t){return{selected:t}};function Et(t,e){if(1&t){const t=l.Ub();l.Tb(0,"tr",45),l.bc("click",(function(){l.wc(t);const i=e.$implicit;return l.fc(2).onClickRow(i)})),l.Sb()}2&t&&l.nc("ngClass",l.qc(1,_t,e.$implicit.selected))}function $t(t,e){1&t&&l.Ob(0,"tr",46)}const Ht=function(){return[]},jt=function(){return["notFound"]};function Kt(t,e){if(1&t){const t=l.Ub();l.Tb(0,"mat-card",8),l.Tb(1,"mat-card-header"),l.Tb(2,"mat-card-title"),l.Ic(3,"\u0421\u043f\u0438\u0441\u043e\u043a \u0440\u043e\u043b\u0435\u0439"),l.Sb(),l.Gc(4,Gt,2,0,"button",9),l.Sb(),l.Tb(5,"mat-card-content",10),l.Tb(6,"div",11),l.Tb(7,"h3",12),l.Ic(8,"\xa0"),l.Sb(),l.Tb(9,"mat-paginator",13),l.bc("changes",(function(){return l.wc(t),l.fc().updatePaginator}))("page",(function(e){return l.wc(t),l.fc().pageChanged(e)})),l.Sb(),l.Sb(),l.Tb(10,"table",14),l.Rb(11,15),l.Gc(12,xt,4,4,"th",16),l.Gc(13,At,2,1,"td",17),l.Qb(),l.Rb(14,18),l.Gc(15,Ft,4,4,"th",16),l.Gc(16,Ot,2,1,"td",17),l.Qb(),l.Rb(17,19),l.Gc(18,Dt,4,2,"th",20),l.Gc(19,Lt,3,1,"td",21),l.Qb(),l.Rb(20,22),l.Gc(21,Vt,2,0,"td",23),l.Qb(),l.Gc(22,Mt,1,0,"tr",24),l.Gc(23,Et,1,3,"tr",25),l.Gc(24,$t,1,0,"tr",26),l.Sb(),l.Sb(),l.Sb()}if(2&t){const t=l.fc();l.Bb(4),l.nc("ngIf",t.updateAvailable),l.Bb(1),l.nc("formGroup",t.formGroup),l.Bb(4),l.nc("length",t.total)("pageSize",t.pageSize)("hidePageSize",!0),l.Bb(1),l.nc("dataSource",t.dataSource),l.Bb(12),l.nc("matHeaderRowDef",t.displayedColumns),l.Bb(1),l.nc("matRowDefColumns",t.displayedColumns),l.Bb(1),l.nc("matFooterRowDef",t.dataSource&&t.dataSource.length?l.pc(9,Ht):l.pc(10,jt))}}function Jt(t,e){if(1&t){const t=l.Ub();l.Tb(0,"button",47),l.bc("click",(function(){return l.wc(t),l.fc().clearField("name",!1)})),l.Tb(1,"mat-icon"),l.Ic(2,"highlight_off"),l.Sb(),l.Sb()}if(2&t){const t=l.fc();l.nc("disabled",""===t.formGroup.get("name").value||null===t.formGroup.get("name").value)}}function zt(t,e){if(1&t){const t=l.Ub();l.Tb(0,"button",47),l.bc("click",(function(){return l.wc(t),l.fc().clearField("description",!1)})),l.Tb(1,"mat-icon"),l.Ic(2,"highlight_off"),l.Sb(),l.Sb()}if(2&t){const t=l.fc();l.nc("disabled",""===t.formGroup.get("description").value||null===t.formGroup.get("description").value)}}let qt=(()=>{class t extends a.a{constructor(){super(...arguments),this.currentCode="roles",this.displayedColumns=["name","description","buttons"],this.firstBreadcrumbTitle=r.b,this.sideMenu=r.a,this.readPermission="readRoles",this.updatePermission="updateRoles",this.removePermission="removeRoles",this.methodSearch="roleSearch",this.methodRemove="roleRemove",this.askRemove="\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u0443\u044e \u0440\u043e\u043b\u044c?",this.baseRoute="/main/roles"}ngOnInit(){this.formGroup=new c.g({name:new s.a(""),description:new s.a("")}),super.ngOnInit()}}return t.\u0275fac=function(e){return Wt(e||t)},t.\u0275cmp=l.Hb({type:t,selectors:[["app-roles",8,"list"]],features:[l.yb],attrs:wt,decls:8,vars:3,consts:[["mat-tab-nav-bar",""],["mat-tab-link","",3,"routerLink","active",4,"ngFor","ngForOf"],["class","alerts-message",4,"ngIf"],["class","page-card",4,"ngIf"],["NameSuffixTpl",""],["DescriptionSuffixTpl",""],["mat-tab-link","",3,"routerLink","active"],[1,"alerts-message"],[1,"page-card"],["mat-raised-button","","color","primary","routerLink","add",4,"ngIf"],[3,"formGroup"],[1,"flex-row"],[1,"col-flex-auto"],[1,"page-paginator",3,"length","pageSize","hidePageSize","changes","page"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","description"],["matColumnDef","buttons"],["mat-header-cell","","class","buttons-cell",4,"matHeaderCellDef"],["mat-cell","","class","buttons-cell",4,"matCellDef"],["matColumnDef","notFound"],["mat-footer-cell","","colspan","10","class","text-center text-danger",4,"matFooterCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","table-row",3,"ngClass","click",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef"],["mat-raised-button","","color","primary","routerLink","add"],["mat-header-cell",""],[3,"ngClass"],["formControlName","name",3,"suffixTpl","onchange","enterClick",4,"ngIf"],["formControlName","name",3,"suffixTpl","onchange","enterClick"],["mat-cell",""],["formControlName","description",3,"suffixTpl","onchange","enterClick",4,"ngIf"],["formControlName","description",3,"suffixTpl","onchange","enterClick"],["mat-header-cell","",1,"buttons-cell"],[1,"container"],["mat-button","",3,"click",4,"ngIf"],["mat-button","",3,"click"],["color","accent"],["mat-cell","",1,"buttons-cell"],["mat-button","","color","primary",3,"click",4,"ngIf"],["mat-button","","color","primary",3,"click"],["mat-footer-cell","","colspan","10",1,"text-center","text-danger"],["mat-header-row",""],["mat-row","",1,"table-row",3,"ngClass","click"],["mat-footer-row",""],["mat-button","","color","accent","title","\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c",3,"disabled","click"]],template:function(t,e){1&t&&(l.Tb(0,"nav",0),l.Gc(1,Ct,2,3,"a",1),l.Sb(),l.Gc(2,kt,2,0,"div",2),l.Gc(3,Kt,25,11,"mat-card",3),l.Gc(4,Jt,3,1,"ng-template",null,4,l.Hc),l.Gc(6,zt,3,1,"ng-template",null,5,l.Hc)),2&t&&(l.Bb(1),l.nc("ngForOf",e.links),l.Bb(1),l.nc("ngIf",!e.permittedAction),l.Bb(1),l.nc("ngIf",e.permittedAction))},directives:[b.b,n.j,n.k,o.e,b.a,u.a,u.c,u.e,u.b,c.o,c.h,f.a,m.n,m.c,m.i,m.b,m.e,m.k,m.m,m.g,d.b,o.c,m.h,n.i,p.a,c.n,c.f,m.a,h.a,m.d,m.j,m.l,m.f],encapsulation:2}),t})();const Wt=l.Vb(qt);var Qt=i("7EHt");function Xt(t,e){if(1&t&&(l.Tb(0,"a",4),l.Ic(1),l.Sb()),2&t){const t=e.$implicit,i=l.fc();l.nc("routerLink",t.routerLink)("active",i.currentCode==t.code),l.Bb(1),l.Kc(" ",t.title," ")}}function Yt(t,e){1&t&&(l.Tb(0,"div",5),l.Ic(1,"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0442 \u043f\u0440\u0430\u0432 \u043d\u0430 \u044d\u0442\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435"),l.Sb())}function Zt(t,e){if(1&t){const t=l.Ub();l.Tb(0,"button",17),l.bc("click",(function(){return l.wc(t),l.fc(2).onSaveClick()})),l.Ic(1,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"),l.Sb()}}function te(t,e){1&t&&(l.Tb(0,"div",13),l.Tb(1,"h3"),l.Ic(2,"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u044f"),l.Sb(),l.Sb())}function ee(t,e){1&t&&(l.Tb(0,"div",19),l.Ic(1,"\u041d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0445 \u0440\u043e\u043b\u0435\u0439"),l.Sb())}function ie(t,e){if(1&t){const t=l.Ub();l.Tb(0,"mat-icon",24),l.bc("click",(function(){l.wc(t);const e=l.fc(2).$implicit;return l.fc(3).transferRoleToAvailable(e)})),l.Ic(1,"remove_circle_outline"),l.Sb()}}function ne(t,e){if(1&t&&(l.Tb(0,"div",21),l.Tb(1,"span",22),l.Ic(2),l.Sb(),l.Gc(3,ie,2,0,"mat-icon",23),l.Sb()),2&t){const t=l.fc().$implicit,e=l.fc(3);l.Bb(2),l.Jc(t.name),l.Bb(1),l.nc("ngIf",e.updateAvailable)}}function ce(t,e){if(1&t&&(l.Tb(0,"div"),l.Gc(1,ne,4,2,"div",20),l.Sb()),2&t){const t=e.$implicit;l.Bb(1),l.nc("ngIf",t.visible)}}function oe(t,e){if(1&t&&(l.Tb(0,"mat-expansion-panel"),l.Tb(1,"mat-expansion-panel-header"),l.Tb(2,"mat-panel-title"),l.Ic(3),l.Sb(),l.Sb(),l.Gc(4,ee,2,0,"div",18),l.Gc(5,ce,2,1,"div",15),l.Sb()),2&t){const t=e.$implicit,i=l.fc(2);l.Bb(3),l.Jc(t.name),l.Bb(1),l.nc("ngIf",!i.hasVisiblePermission(t.permissions)),l.Bb(1),l.nc("ngForOf",t.permissions)}}function re(t,e){1&t&&(l.Tb(0,"div",19),l.Ic(1,"\u041d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0445 \u0440\u043e\u043b\u0435\u0439"),l.Sb())}function ae(t,e){if(1&t){const t=l.Ub();l.Tb(0,"div",26),l.bc("click",(function(){l.wc(t);const e=l.fc().$implicit;return l.fc(4).transferRoleToUser(e)})),l.Tb(1,"mat-icon",27),l.Ic(2,"add_circle_outline"),l.Sb(),l.Tb(3,"span",28),l.Ic(4),l.Sb(),l.Sb()}if(2&t){const t=l.fc().$implicit;l.Bb(4),l.Jc(t.name)}}function se(t,e){if(1&t&&(l.Tb(0,"div"),l.Gc(1,ae,5,1,"div",25),l.Sb()),2&t){const t=e.$implicit;l.Bb(1),l.nc("ngIf",t.visible)}}function le(t,e){if(1&t&&(l.Tb(0,"mat-expansion-panel"),l.Tb(1,"mat-expansion-panel-header"),l.Tb(2,"mat-panel-title"),l.Ic(3),l.Sb(),l.Sb(),l.Gc(4,re,2,0,"div",18),l.Gc(5,se,2,1,"div",15),l.Sb()),2&t){const t=e.$implicit,i=l.fc(3);l.Bb(3),l.Jc(t.name),l.Bb(1),l.nc("ngIf",!i.hasVisiblePermission(t.permissions)),l.Bb(1),l.nc("ngForOf",t.permissions)}}function be(t,e){if(1&t&&(l.Tb(0,"div",10),l.Tb(1,"mat-accordion"),l.Gc(2,le,6,3,"mat-expansion-panel",15),l.Sb(),l.Sb()),2&t){const t=l.fc(2);l.Bb(2),l.nc("ngForOf",t.availablePermissions)}}function ue(t,e){if(1&t&&(l.Tb(0,"mat-card",6),l.Tb(1,"mat-card-header"),l.Tb(2,"mat-card-title"),l.Ic(3),l.Sb(),l.Gc(4,Zt,2,0,"button",7),l.Sb(),l.Tb(5,"mat-card-content",8),l.Tb(6,"div",9),l.Tb(7,"div",10),l.Ob(8,"ui-input",11),l.Sb(),l.Tb(9,"div",10),l.Ob(10,"ui-input",12),l.Sb(),l.Sb(),l.Tb(11,"div",9),l.Tb(12,"div",13),l.Tb(13,"h3"),l.Ic(14,"\u0420\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u044f \u0434\u043b\u044f \u0440\u043e\u043b\u0438"),l.Sb(),l.Sb(),l.Gc(15,te,3,0,"div",14),l.Sb(),l.Tb(16,"div",9),l.Tb(17,"div",10),l.Tb(18,"mat-accordion"),l.Gc(19,oe,6,3,"mat-expansion-panel",15),l.Sb(),l.Sb(),l.Gc(20,be,3,1,"div",16),l.Sb(),l.Sb(),l.Sb()),2&t){const t=l.fc();l.Bb(3),l.Jc(t.pageTitle),l.Bb(1),l.nc("ngIf",t.updateAvailable),l.Bb(1),l.nc("formGroup",t.formGroup),l.Bb(3),l.nc("readonly",!t.updateAvailable),l.Bb(2),l.nc("readonly",!t.updateAvailable),l.Bb(5),l.nc("ngIf",t.updateAvailable),l.Bb(4),l.nc("ngForOf",t.rolePermissions),l.Bb(1),l.nc("ngIf",t.updateAvailable)}}let fe=(()=>{class t extends Q.a{constructor(){super(...arguments),this.currentCode="roles",this.firstBreadcrumbTitle=r.b,this.sideMenu=r.a,this.readPermission="readRoles",this.updatePermission="updateRoles",this.removePermission="removeRoles"}ngOnInit(){super.ngOnInit(),this.breadcrumbs.push({title:"\u041d\u043e\u0432\u0430\u044f \u0440\u043e\u043b\u044c",routerLink:null}),this.activatedRoute.paramMap.subscribe(t=>{const e=t.get("id");this.formGroup.reset(),"add"===e?(this.currentId=null,this.pageTitle="\u041d\u043e\u0432\u0430\u044f \u0440\u043e\u043b\u044c",this.breadcrumbs[this.breadcrumbs.length-1].title="\u041d\u043e\u0432\u0430\u044f \u0440\u043e\u043b\u044c",this.permittedAction=this.updateAvailable):(this.currentId=+e,this.pageTitle=this.updateAvailable?"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0440\u043e\u043b\u0438":"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0440\u043e\u043b\u0438",this.breadcrumbs[this.breadcrumbs.length-1].title=this.updateAvailable?"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0440\u043e\u043b\u0438":"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0440\u043e\u043b\u0438",this.permittedAction=this.readAvailable||this.updateAvailable,this.loadData(this.currentId))})}hasVisiblePermission(t){return t.some(t=>t.visible)}transferRoleToUser(t){t.visible=!1;const e=this.findPermission(this.rolePermissions,t.id);e&&(e.visible=!0)}transferRoleToAvailable(t){t.visible=!1;const e=this.findPermission(this.availablePermissions,t.id);e&&(e.visible=!0)}onSaveClick(){if(this.formGroup.valid){this.waitService.showWait("\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...");const t=this.getRolePermissions();this.formGroup.get("permissions").setValue(t),this.apiService.roleSave(this.currentId,this.formGroup.value).pipe(Object(W.a)(()=>this.waitService.hideWait())).subscribe(t=>{this.dialogService.showToast(this.currentId?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0440\u043e\u043b\u0438 \u043f\u0440\u043e\u0448\u043b\u043e \u0443\u0441\u043f\u0435\u0448\u043d\u043e":"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0440\u043e\u043b\u0438 \u043f\u0440\u043e\u0448\u043b\u043e \u0443\u0441\u043f\u0435\u0448\u043d\u043e","\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435","success",3e3),this.currentId?(this.formGroup.patchValue(t),this.formGroup.markAsPristine()):this.router.navigate(["/main/roles/"+t.id])},t=>{this.dialogService.showToastError(t.message.text||t.message.fulltext||t.message)})}else this.formGroup.markAllAsTouched()}onConstructor(){this.formGroup=new c.g({name:new s.a("",c.s.required),description:new s.a(""),permissions:new s.a("")}),this.pageReady=!1,this.apiService.permissionsList().pipe(Object(W.a)(()=>this.pageReady=!0)).subscribe(t=>{this.availablePermissions=JSON.parse(JSON.stringify(t)),this.rolePermissions=JSON.parse(JSON.stringify(t)),this.setVisibleAllPermission(this.rolePermissions,!1),this.setVisibleAllPermission(this.availablePermissions,!0)})}loadData(t){this.pageReady?this.permittedAction&&(this.waitService.showWait("\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."),this.setVisibleAllPermission(this.rolePermissions,!1),this.setVisibleAllPermission(this.availablePermissions,!1),this.apiService.roleLoad(t).pipe(Object(W.a)(()=>this.waitService.hideWait())).subscribe(t=>{this.formGroup.patchValue(t),this.setVisiblePermission(this.rolePermissions,t.permissions),this.setVisiblePermission(this.availablePermissions,t.permissions,!0)},t=>{this.dialogService.showToastError(t.message.text||t.message.fulltext||t.message),this.router.navigate(["/main/roles"])})):setTimeout(()=>this.loadData(t),100)}setVisibleAllPermission(t,e){Array.isArray(t)&&t.forEach(t=>{Array.isArray(t.permissions)&&t.permissions.forEach(t=>t.visible=e)})}setVisiblePermission(t,e,i=!1){Array.isArray(t)&&t.forEach(t=>{t.permissions.forEach(t=>{t.visible=e.some(e=>e.id===t.id),i&&(t.visible=!t.visible)})})}findPermission(t,e){let i;return Array.isArray(t)&&t.forEach(t=>{const n=t.permissions.find(t=>t.id===e);n&&(i=n)}),i}getRolePermissions(){const t=[];return this.rolePermissions.forEach(e=>{e.permissions.forEach(e=>{e.visible&&t.push(e)})}),t}}return t.\u0275fac=function(e){return me(e||t)},t.\u0275cmp=l.Hb({type:t,selectors:[["app-role"]],features:[l.yb],decls:4,vars:3,consts:[["mat-tab-nav-bar",""],["mat-tab-link","",3,"routerLink","active",4,"ngFor","ngForOf"],["class","alerts-message",4,"ngIf"],["class","page-card",4,"ngIf"],["mat-tab-link","",3,"routerLink","active"],[1,"alerts-message"],[1,"page-card"],["mat-raised-button","","color","success",3,"click",4,"ngIf"],[3,"formGroup"],[1,"flex-row"],[1,"col-flex-auto","form-group"],["label","\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435","formControlName","name",3,"readonly"],["label","\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435","formControlName","description",3,"readonly"],[1,"col-flex-auto","text-center"],["class","col-flex-auto text-center",4,"ngIf"],[4,"ngFor","ngForOf"],["class","col-flex-auto form-group",4,"ngIf"],["mat-raised-button","","color","success",3,"click"],["class","text-center text-danger pt-15 pb-15",4,"ngIf"],[1,"text-center","text-danger","pt-15","pb-15"],["class","role-item hover-second",4,"ngIf"],[1,"role-item","hover-second"],[1,"col-flex-auto","role-item-title"],["color","accent","class","cursor-pointer no-select",3,"click",4,"ngIf"],["color","accent",1,"cursor-pointer","no-select",3,"click"],["class","role-item hover no-select",3,"click",4,"ngIf"],[1,"role-item","hover","no-select",3,"click"],["color","success"],[1,"role-item-title"]],template:function(t,e){1&t&&(l.Tb(0,"nav",0),l.Gc(1,Xt,2,3,"a",1),l.Sb(),l.Gc(2,Yt,2,0,"div",2),l.Gc(3,ue,21,8,"mat-card",3)),2&t&&(l.Bb(1),l.nc("ngForOf",e.links),l.Bb(1),l.nc("ngIf",!e.permittedAction),l.Bb(1),l.nc("ngIf",e.permittedAction))},directives:[b.b,n.j,n.k,o.e,b.a,u.a,u.c,u.e,u.b,c.o,c.h,p.a,c.n,c.f,Qt.a,d.b,Qt.c,Qt.d,Qt.e,h.a],styles:[".role-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:5px 10px}.role-item[_ngcontent-%COMP%]   .role-item-title[_ngcontent-%COMP%]{margin-left:5px}.role-item.hover-second[_ngcontent-%COMP%]:hover{background-color:#d6e6fc}.role-item.hover[_ngcontent-%COMP%]{cursor:pointer}.role-item.hover[_ngcontent-%COMP%]:hover{background-color:rgba(2,117,216,.9);color:#fff}"]}),t})();const me=l.Vb(fe);var de=i("dJ3e");const pe=o.f.forChild([{path:"",component:(()=>{class t{constructor(t,e){this.userService=t,this.router=e,r.a.children.some(t=>!!this.userService.hasPermissions(t.code)&&(e.navigate([t.routerLink]),!0))}}return t.\u0275fac=function(e){return new(e||t)(l.Nb(de.j),l.Nb(o.b))},t.\u0275cmp=l.Hb({type:t,selectors:[["app-resolve"]],decls:2,vars:0,consts:[[1,"alerts-message","mt-15"]],template:function(t,e){1&t&&(l.Tb(0,"div",0),l.Ic(1,"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0442 \u043f\u0440\u0430\u0432 \u043d\u0430 \u044d\u0442\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435"),l.Sb())},encapsulation:2}),t})()},{path:"users/:id",component:Tt},{path:"users",component:z},{path:"roles/:id",component:fe},{path:"roles",component:qt}]);var he=i("PCNd"),ge=i("5dmV"),ve=i("oRDy");let Se=(()=>{class t{}return t.\u0275mod=l.Lb({type:t}),t.\u0275inj=l.Kb({factory:function(e){return new(e||t)},providers:[],imports:[[n.c,c.i,c.r,pe,ge.a,he.a,ve.a]]}),t})()}}]);