(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{fBhi:function(t,e,n){"use strict";n.r(e),n.d(e,"PreviewModule",(function(){return R}));var c=n("ofXK"),i=n("tyNb"),r=n("1ua0"),o=n("PCNd"),l=n("LXLN"),s=n("s0Cq"),a=n("fXoL"),f=n("ZF+8"),u=n("bTqV"),d=n("4eAp"),p=n("XNiG"),g=n("1G5W");class b{constructor(){this.elements=[]}loadFromJson(t){this.ngUnsubscribe&&(this.ngUnsubscribe.next(),this.ngUnsubscribe.complete(),this.ngUnsubscribe=null),this.ngUnsubscribe=new p.a;const e=JSON.parse(JSON.stringify(t));this.elements=this.initForm(e)}initForm(t){return Array.isArray(t)&&t.forEach(t=>{Array.isArray(t.children)&&this.findAndInitControl(t.children)}),t}findAndInitControl(t){Array.isArray(t)&&t.forEach(t=>{var e;["ROW","PANEL"].includes(t.type)?this.findAndInitControl(t.children):(t.control=new d.e(t.value),void 0!==(null===(e=t.events)||void 0===e?void 0:e.changed)&&t.control.valueChanges.pipe(Object(g.a)(this.ngUnsubscribe)).subscribe(e=>{var n;this.fireChangeEvent(e,t.type,null===(n=t.events)||void 0===n?void 0:n.changed)}))})}fireChangeEvent(t,e,n){Array.isArray(n)&&n.forEach(n=>{const c=this.findElementById(n.elementId);c&&this.isCondition(t,e,n.condition)&&Array.isArray(n.fires)&&n.fires.forEach(t=>{void 0!==t.property&&void 0!==c[t.property]&&(c[t.property]=this.propertyCastValue(t.property,t.params))})})}isCondition(t,e,n){if(n)switch(n.value.operation){case"eq":return t===this.typeCastValue(e,n.value.values);case"in":return String(n.value.values).split(",").map(t=>this.typeCastValue(e,t)).includes(t)}return!1}typeCastValue(t,e){switch(t){case"CHECKBOX":return"true"===String(e)||"false"!==String(e)&&Boolean(e);case"TEXT":return String(e);default:return e}}propertyCastValue(t,e){switch(t){case"visible":case"disabled":case"readonly":case"autofill":return"true"===String(e)||"false"!==String(e)&&Boolean(e);default:return e}}findElementById(t){const e=(n,c)=>{for(const i of c){if(i.id===t)return i;if(["ROW","PANEL"].includes(i.type)&&Array.isArray(i.children)){const t=e(n,i.children);if(t)return t}}return null};return e(t,this.elements)}}var m=n("Wp6s");const h=function(t){return{row:t}};function v(t,e){if(1&t&&a.Pb(0,7),2&t){const t=e.$implicit;a.fc();const n=a.sc(2);a.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",a.pc(2,h,t))}}const O=function(t){return{child:t}};function x(t,e){if(1&t&&a.Pb(0,7),2&t){const t=e.$implicit;a.fc(3);const n=a.sc(4);a.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",a.pc(2,O,t))}}function y(t,e){if(1&t&&(a.Tb(0,"div",9),a.Fc(1,x,1,4,"ng-container",0),a.Sb()),2&t){const t=a.fc().row;a.Bb(1),a.nc("ngForOf",t.children)}}function C(t,e){1&t&&a.Fc(0,y,2,1,"div",8),2&t&&a.nc("ngIf",e.row.visible)}const w=function(t){return{panel:t}};function T(t,e){if(1&t&&a.Pb(0,7),2&t){const t=a.fc().child;a.fc();const e=a.sc(6);a.nc("ngTemplateOutlet",e)("ngTemplateOutletContext",a.pc(2,w,t))}}const F=function(t){return{field:t}};function S(t,e){if(1&t&&a.Pb(0,7),2&t){const t=a.fc().child;a.fc();const e=a.sc(8);a.nc("ngTemplateOutlet",e)("ngTemplateOutletContext",a.pc(2,F,t))}}function I(t,e){if(1&t&&(a.Fc(0,T,1,4,"ng-container",10),a.Fc(1,S,1,4,"ng-container",10)),2&t){const t=e.child;a.nc("ngIf","PANEL"===t.type),a.Bb(1),a.nc("ngIf","PANEL"!==t.type)}}function P(t,e){if(1&t&&(a.Tb(0,"mat-card-header"),a.Tb(1,"mat-card-title"),a.Hc(2),a.Sb(),a.Sb()),2&t){const t=a.fc(2).panel;a.Bb(2),a.Ic(t.label)}}function A(t,e){if(1&t&&a.Pb(0,7),2&t){const t=e.$implicit;a.fc(3);const n=a.sc(2);a.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",a.pc(2,h,t))}}function B(t,e){if(1&t&&(a.Tb(0,"mat-card"),a.Fc(1,P,3,1,"mat-card-header",12),a.Tb(2,"mat-card-content"),a.Fc(3,A,1,4,"ng-container",0),a.Sb(),a.Sb()),2&t){const t=a.fc().panel;a.Fb("flex-auto",t.autofill),a.Bb(1),a.nc("ngIf",t.label),a.Bb(2),a.nc("ngForOf",t.children)}}function k(t,e){1&t&&a.Fc(0,B,4,4,"mat-card",11),2&t&&a.nc("ngIf",e.panel.visible)}function E(t,e){if(1&t&&a.Pb(0,7),2&t){const t=a.fc(2).field;a.fc();const e=a.sc(10);a.nc("ngTemplateOutlet",e)("ngTemplateOutletContext",a.pc(2,F,t))}}function U(t,e){if(1&t&&a.Pb(0,7),2&t){const t=a.fc(2).field;a.fc();const e=a.sc(12);a.nc("ngTemplateOutlet",e)("ngTemplateOutletContext",a.pc(2,F,t))}}function N(t,e){if(1&t&&(a.Tb(0,"div",14),a.Fc(1,E,1,4,"ng-container",15),a.Fc(2,U,1,4,"ng-container",15),a.Sb()),2&t){const t=a.fc().field;a.Fb("flex-auto",t.autofill),a.nc("ngSwitch",t.type),a.Bb(1),a.nc("ngSwitchCase","TEXT"),a.Bb(1),a.nc("ngSwitchCase","CHECKBOX")}}function H(t,e){1&t&&a.Fc(0,N,3,5,"div",13),2&t&&a.nc("ngIf",e.field.visible)}function G(t,e){if(1&t&&a.Ob(0,"ugsk-input",16),2&t){const t=e.field;a.nc("readonly",t.readonly)("label",t.label)("formControl",t.control)}}function L(t,e){if(1&t&&a.Ob(0,"ugsk-checkbox",16),2&t){const t=e.field;a.nc("readonly",t.readonly)("label",t.label)("formControl",t.control)}}let M=(()=>{class t{constructor(){this.formOrm=new b}get formElements(){return this.formOrm.elements}ngOnChanges(t){t.hasOwnProperty("elements")&&this.formOrm.loadFromJson(this.elements)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Hb({type:t,selectors:[["preview-form-container"]],inputs:{elements:"elements"},features:[a.zb],decls:13,vars:1,consts:[[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],["tplRow",""],["tplRowChild",""],["tplPanel",""],["tplField",""],["tplFieldText",""],["tplFieldCheckbox",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","flex-row",4,"ngIf"],[1,"flex-row"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[3,"flex-auto",4,"ngIf"],[4,"ngIf"],["class","element-container",3,"flex-auto","ngSwitch",4,"ngIf"],[1,"element-container",3,"ngSwitch"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngSwitchCase"],[3,"readonly","label","formControl"]],template:function(t,e){1&t&&(a.Fc(0,v,1,4,"ng-container",0),a.Fc(1,C,1,1,"ng-template",null,1,a.Gc),a.Fc(3,I,2,2,"ng-template",null,2,a.Gc),a.Fc(5,k,1,1,"ng-template",null,3,a.Gc),a.Fc(7,H,1,1,"ng-template",null,4,a.Gc),a.Fc(9,G,1,3,"ng-template",null,5,a.Gc),a.Fc(11,L,1,3,"ng-template",null,6,a.Gc)),2&t&&a.nc("ngForOf",e.formElements)},directives:[c.j,c.p,c.k,m.a,m.b,m.c,m.e,c.m,c.n,d.c,d.a],styles:["[_nghost-%COMP%]{box-sizing:border-box}.element-container[_ngcontent-%COMP%]{padding:5px 10px}.element-container[_ngcontent-%COMP%]:first-child{padding-left:0}.element-container[_ngcontent-%COMP%]:last-child{padding-right:0}"]}),t})();function X(t,e){1&t&&(a.Tb(0,"div",3),a.Hc(1,"\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e \u0443 \u0432\u0430\u0441 \u043d\u0435\u0442 \u043d\u0438 \u043e\u0434\u043d\u043e\u0439 \u0444\u043e\u0440\u043c\u044b \u0434\u043b\u044f \u043f\u043e\u043a\u0430\u0437\u0430"),a.Sb())}function J(t,e){if(1&t){const t=a.Ub();a.Tb(0,"button",8),a.bc("click",(function(){return a.vc(t),a.fc(2).goBackUrl()})),a.Hc(1,"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434"),a.Sb()}}function _(t,e){if(1&t){const t=a.Ub();a.Tb(0,"div",4),a.Fc(1,J,2,0,"button",5),a.Tb(2,"div",6),a.Hc(3,"\u0417\u0434\u0435\u0441\u044c \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u0443\u044e \u0444\u043e\u0440\u043c\u0443 \u0432 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0438"),a.Sb(),a.Tb(4,"button",7),a.bc("click",(function(){return a.vc(t),a.fc().loadForm()})),a.Hc(5,"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u043e\u0440\u043c\u0443 \u0438\u0437 \u0444\u0430\u0439\u043b\u0430"),a.Sb(),a.Sb()}if(2&t){const t=a.fc();a.Bb(1),a.nc("ngIf",t.backUrl)}}function V(t,e){if(1&t&&(a.Tb(0,"div",9),a.Ob(1,"preview-form-container",10),a.Sb()),2&t){const t=a.fc();a.Bb(1),a.nc("elements",t.elements)}}const K=[{path:"",component:(()=>{class t{constructor(t,e){this.storageService=t,this.router=e,this.hasPreview=!1}ngOnInit(){this.backUrl=this.storageService.get(s.a);const t=this.storageService.get(s.b);t&&(this.hasPreview=!0,this.elements=t)}goBackUrl(){this.backUrl&&this.router.navigate([this.backUrl])}loadForm(){l.a.uploadJson().subscribe(t=>{this.elements=t})}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(f.a),a.Nb(i.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["preview-home"]],decls:3,vars:3,consts:[["class","flex-auto flex-col-centered text-center text-danger text-bold",4,"ngIf"],["class","preview-head",4,"ngIf"],["class","preview-container",4,"ngIf"],[1,"flex-auto","flex-col-centered","text-center","text-danger","text-bold"],[1,"preview-head"],["mat-button","",3,"click",4,"ngIf"],[1,"flex-auto","text-center"],["mat-raised-button","","color","primary",3,"click"],["mat-button","",3,"click"],[1,"preview-container"],[3,"elements"]],template:function(t,e){1&t&&(a.Fc(0,X,2,0,"div",0),a.Fc(1,_,6,1,"div",1),a.Fc(2,V,2,1,"div",2)),2&t&&(a.nc("ngIf",!e.hasPreview),a.Bb(1),a.nc("ngIf",e.hasPreview),a.Bb(1),a.nc("ngIf",e.hasPreview))},directives:[c.k,u.b,M],styles:["[_nghost-%COMP%]{flex:auto;display:flex;flex-direction:column}.preview-head[_ngcontent-%COMP%]{display:flex;align-items:center;padding:5px 15px;border-bottom:1px dotted #004990}.preview-container[_ngcontent-%COMP%]{padding:10px 15px;display:flex;flex-direction:column}"]}),t})()},{path:"**",component:r.a}];let R=(()=>{class t{}return t.\u0275mod=a.Lb({type:t}),t.\u0275inj=a.Kb({factory:function(e){return new(e||t)},imports:[[c.c,i.d.forChild(K),o.a]]}),t})()}}]);