(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{BE0I:function(e,t,n){"use strict";n.r(t),n.d(t,"EditorModule",(function(){return ye}));var c=n("ofXK"),o=n("tyNb"),i=n("1ua0"),l=n("PCNd"),r=n("XNiG"),s=n("LXLN"),a=n("s0Cq"),b=n("fXoL"),u=n("ZF+8"),d=n("jhN1"),f=n("4eAp");class h{constructor(e){this.selected=!1,this.controlType=new f.e("property"),this.controlEvent=new f.e("request"),this.controlProperty=new f.e("value"),this.controlValue=new f.e(null),e&&this.initFromJson(e)}get title(){switch(this.controlType.value){case"property":return`\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e ${this.controlProperty.value} = ${this.controlValue.value}`;case"event":return`\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0441\u043e\u0431\u044b\u0442\u0438\u0435 '${this.controlEvent.value}'`}return"\u043d\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043e"}isEventFire(){return"event"===this.controlType.value}isPropertyFire(){return"property"===this.controlType.value}isTextValue(){return this.isPropertyFire()&&["value"].includes(this.controlProperty.value)}isBooleanValue(){return this.isPropertyFire()&&["disabled","readonly","visible"].includes(this.controlProperty.value)}getJson(){return this.isPropertyFire()?{property:this.controlProperty.value,params:this.controlValue.value}:this.isEventFire()?{event:this.controlEvent.value}:null}initFromJson(e){void 0!==e.property?(this.controlType.setValue("property"),this.controlProperty.setValue(e.property),this.controlValue.setValue(e.params)):void 0!==e.event&&(this.controlType.setValue("event"),this.controlEvent.setValue(e.event))}}class m{constructor(e){this.selected=!1,this.elementId=new f.e("\u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"),this.conditionOp=new f.e("eq"),this.conditionValues=new f.e(null),this.fires=[],e&&this.initFromJson(e)}get id(){return this.elementId.value}get condition(){const e=this.conditionOp.value;return"in"===e?`value ${e} [${this.conditionValues.value}]`:`value ${e} ${this.conditionValues.value}`}get conditionValueLabel(){return"in"===this.conditionOp.value?"\u0443\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u043f\u0438\u0441\u043e\u043a \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439 \u0447\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u044f\u0442\u0443\u044e":"\u0443\u043a\u0430\u0436\u0438\u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435"}get firesList(){const e=[];return this.fires.forEach(t=>e.push(t.title)),e.length>0?e.join("<br>"):"-"}removeFire(e,t,n){e.stopPropagation(),n.selected&&(this.currentFire=null),this.fires.splice(t,1)}addFire(){const e=new h;this.fires.push(e),this.currentFire=e,this.deactiveFires(),e.selected=!0}selectFire(e){this.deactiveFires(),e.selected=!0,this.currentFire=e}getJson(){const e={elementId:this.id,condition:{value:{operation:this.conditionOp.value,values:this.conditionValues.value}},fires:[]};return this.fires.forEach(t=>{const n=t.getJson();n&&e.fires.push(n)}),e}deactiveFires(){this.fires.forEach(e=>e.selected=!1)}initFromJson(e){this.elementId.setValue(e.elementId),e.condition&&e.condition.value&&(this.conditionOp.setValue(e.condition.value.operation),this.conditionValues.setValue(e.condition.value.values)),this.fires=[],Array.isArray(e.fires)&&e.fires.forEach(e=>{this.fires.push(new h(e))})}}class p{constructor(e){this.selected=!1,this.controlId=new f.e("\u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"),this.controlProperty=new f.e(null),e&&this.initFromJson(e)}get id(){return this.controlId.value}get property(){return this.controlProperty.value}getJson(){return{elementId:this.id,property:this.property}}initFromJson(e){this.controlId.setValue(e.elementId),this.controlProperty.setValue(e.property)}}var g=n("bTqV"),v=n("NFeN");function E(e,t){1&e&&(b.Tb(0,"div",9),b.Hc(1,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u0435"),b.Sb())}function O(e,t){if(1&e){const e=b.Ub();b.Tb(0,"tr",19),b.bc("click",(function(){b.vc(e);const n=t.$implicit;return b.fc(2).selectObject(n)})),b.Tb(1,"td",20),b.Hc(2),b.Sb(),b.Tb(3,"td",20),b.Hc(4),b.Sb(),b.Ob(5,"td",21),b.Tb(6,"td",22),b.Tb(7,"button",23),b.bc("click",(function(n){b.vc(e);const c=t.index,o=t.$implicit;return b.fc(2).removeObject(n,c,o)})),b.Tb(8,"mat-icon"),b.Hc(9,"delete_forever"),b.Sb(),b.Sb(),b.Sb(),b.Sb()}if(2&e){const e=t.$implicit;b.Fb("selected",e.selected),b.Bb(2),b.Ic(e.id),b.Bb(2),b.Ic(e.condition),b.Bb(1),b.nc("innerHtml",e.firesList,b.wc)}}function C(e,t){1&e&&(b.Tb(0,"tfoot"),b.Tb(1,"tr"),b.Tb(2,"td",24),b.Hc(3,"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"),b.Sb(),b.Sb(),b.Sb())}function y(e,t){if(1&e&&b.Ob(0,"ugsk-input",37),2&e){const e=b.fc(3);b.nc("label",e.currentObjChange.conditionValueLabel)("formControl",e.currentObjChange.conditionValues)}}function x(e,t){if(1&e&&b.Ob(0,"ugsk-select",38),2&e){const e=b.fc(3);b.nc("label",e.currentObjChange.conditionValueLabel)("options",e.booleanList)("clearButton",!1)("formControl",e.currentObjChange.conditionValues)}}function T(e,t){if(1&e){const e=b.Ub();b.Tb(0,"tr",19),b.bc("click",(function(){b.vc(e);const n=t.$implicit;return b.fc(3).currentObjChange.selectFire(n)})),b.Tb(1,"td"),b.Hc(2),b.Sb(),b.Tb(3,"td",22),b.Tb(4,"button",23),b.bc("click",(function(n){b.vc(e);const c=t.index,o=t.$implicit;return b.fc(3).currentObjChange.removeFire(n,c,o)})),b.Tb(5,"mat-icon"),b.Hc(6,"delete_forever"),b.Sb(),b.Sb(),b.Sb(),b.Sb()}if(2&e){const e=t.$implicit;b.Fb("selected",e.selected),b.Bb(2),b.Ic(e.title)}}function P(e,t){1&e&&(b.Tb(0,"tfoot"),b.Tb(1,"tr"),b.Tb(2,"td",39),b.Hc(3,"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"),b.Sb(),b.Sb(),b.Sb())}function k(e,t){if(1&e&&b.Ob(0,"ugsk-select",30),2&e){const e=b.fc(4);b.nc("options",e.eventsList)("clearButton",!1)("formControl",e.currentObjChange.currentFire.controlEvent)}}function S(e,t){if(1&e&&b.Ob(0,"ugsk-select",45),2&e){const e=b.fc(4);b.nc("options",e.propertiesList)("clearButton",!1)("formControl",e.currentObjChange.currentFire.controlProperty)}}function w(e,t){if(1&e&&b.Ob(0,"ugsk-input",46),2&e){const e=b.fc(4);b.nc("formControl",e.currentObjChange.currentFire.controlValue)}}function F(e,t){if(1&e&&b.Ob(0,"ugsk-select",47),2&e){const e=b.fc(4);b.nc("options",e.booleanList)("clearButton",!1)("formControl",e.currentObjChange.currentFire.controlValue)}}function I(e,t){if(1&e&&(b.Tb(0,"div",40),b.Ob(1,"ugsk-select",30),b.Fc(2,k,1,3,"ugsk-select",41),b.Fc(3,S,1,3,"ugsk-select",42),b.Fc(4,w,1,1,"ugsk-input",43),b.Fc(5,F,1,3,"ugsk-select",44),b.Sb()),2&e){const e=b.fc(3);b.Bb(1),b.nc("options",e.fireTypeList)("clearButton",!1)("formControl",e.currentObjChange.currentFire.controlType),b.Bb(1),b.nc("ngIf",e.currentObjChange.currentFire.isEventFire()),b.Bb(1),b.nc("ngIf",e.currentObjChange.currentFire.isPropertyFire()),b.Bb(1),b.nc("ngIf",e.currentObjChange.currentFire.isTextValue()),b.Bb(1),b.nc("ngIf",e.currentObjChange.currentFire.isBooleanValue())}}function M(e,t){if(1&e){const e=b.Ub();b.Tb(0,"div",25),b.Tb(1,"div",26),b.Ob(2,"ugsk-input",27),b.Tb(3,"div",28),b.Tb(4,"div",29),b.Hc(5,"\u041f\u0440\u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u0438:"),b.Sb(),b.Tb(6,"ugsk-select",30),b.Rb(7,31),b.Tb(8,"button",32),b.Hc(9," \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430 "),b.Sb(),b.Qb(),b.Sb(),b.Fc(10,y,1,2,"ugsk-input",33),b.Fc(11,x,1,4,"ugsk-select",34),b.Sb(),b.Sb(),b.Tb(12,"div",35),b.Tb(13,"div",11),b.Tb(14,"div",12),b.Hc(15,"\u0421\u043e\u0431\u044b\u0442\u0438\u044f \u0438\u0437\u043c\u0435\u043d\u044f\u0435\u043c\u043e\u0433\u043e \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430"),b.Sb(),b.Tb(16,"button",13),b.bc("click",(function(){return b.vc(e),b.fc(2).currentObjChange.addFire()})),b.Hc(17,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u0431\u044b\u0442\u0438\u0435"),b.Sb(),b.Sb(),b.Tb(18,"table",15),b.Tb(19,"tbody"),b.Fc(20,T,7,3,"tr",16),b.Sb(),b.Fc(21,P,4,0,"tfoot",17),b.Sb(),b.Fc(22,I,6,7,"div",36),b.Sb(),b.Sb()}if(2&e){const e=b.fc(2);b.Bb(2),b.nc("formControl",e.currentObjChange.elementId),b.Bb(4),b.nc("options",e.operationList)("clearButton",!1)("formControl",e.currentObjChange.conditionOp),b.Bb(4),b.nc("ngIf","CHECKBOX"!==e.elementType),b.Bb(1),b.nc("ngIf","CHECKBOX"===e.elementType),b.Bb(9),b.nc("ngForOf",e.currentObjChange.fires),b.Bb(1),b.nc("ngIf",0===e.currentObjChange.fires.length),b.Bb(1),b.nc("ngIf",e.currentObjChange.currentFire)}}function _(e,t){if(1&e){const e=b.Ub();b.Tb(0,"div",10),b.Tb(1,"div",11),b.Tb(2,"div",12),b.Hc(3,"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0441 \u0434\u0440\u0443\u0433\u0438\u043c\u0438 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430\u043c\u0438"),b.Sb(),b.Tb(4,"button",13),b.bc("click",(function(){return b.vc(e),b.fc().addObjChange()})),b.Hc(5,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u044d\u043b\u0435\u043c\u0435\u043d\u0442"),b.Sb(),b.Sb(),b.Tb(6,"div",14),b.Tb(7,"table",15),b.Tb(8,"thead"),b.Tb(9,"tr"),b.Tb(10,"th"),b.Hc(11,"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430"),b.Sb(),b.Tb(12,"th"),b.Hc(13,"\u0423\u0441\u043b\u043e\u0432\u0438\u0435"),b.Sb(),b.Tb(14,"th"),b.Hc(15,"\u0421\u043e\u0431\u044b\u0442\u0438\u044f"),b.Sb(),b.Tb(16,"th"),b.Hc(17,"\xa0"),b.Sb(),b.Sb(),b.Sb(),b.Tb(18,"tbody"),b.Fc(19,O,10,5,"tr",16),b.Sb(),b.Fc(20,C,4,0,"tfoot",17),b.Sb(),b.Sb(),b.Fc(21,M,23,9,"div",18),b.Sb()}if(2&e){const e=b.fc();b.Bb(19),b.nc("ngForOf",e.objectEvents.changed),b.Bb(1),b.nc("ngIf",0===e.objectEvents.changed.length),b.Bb(1),b.nc("ngIf",e.currentObjChange)}}function B(e,t){if(1&e){const e=b.Ub();b.Tb(0,"tr",19),b.bc("click",(function(){b.vc(e);const n=t.$implicit;return b.fc(2).selectRequest(n)})),b.Tb(1,"td",20),b.Hc(2),b.Sb(),b.Tb(3,"td",20),b.Hc(4),b.Sb(),b.Tb(5,"td",22),b.Tb(6,"button",23),b.bc("click",(function(n){b.vc(e);const c=t.index,o=t.$implicit;return b.fc(2).removeRequest(n,c,o)})),b.Tb(7,"mat-icon"),b.Hc(8,"delete_forever"),b.Sb(),b.Sb(),b.Sb(),b.Sb()}if(2&e){const e=t.$implicit;b.Fb("selected",e.selected),b.Bb(2),b.Ic(e.id),b.Bb(2),b.Ic(e.property)}}function j(e,t){1&e&&(b.Tb(0,"tfoot"),b.Tb(1,"tr"),b.Tb(2,"td",50),b.Hc(3,"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"),b.Sb(),b.Sb(),b.Sb())}function H(e,t){if(1&e&&(b.Tb(0,"div",51),b.Ob(1,"ugsk-input",52),b.Ob(2,"ugsk-select",53),b.Sb()),2&e){const e=b.fc(2);b.Bb(1),b.nc("formControl",e.currentObjRequest.controlId),b.Bb(1),b.nc("options",e.propertiesList)("clearButton",!1)("formControl",e.currentObjRequest.controlProperty)}}function R(e,t){if(1&e){const e=b.Ub();b.Tb(0,"div",48),b.Tb(1,"div",11),b.Tb(2,"div",12),b.Hc(3,"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043a\u0430\u043a\u0438\u0435 \u0434\u043e\u043f. \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043d\u0443\u0436\u043d\u043e \u043f\u0435\u0440\u0435\u0434\u0430\u0442\u044c \u0432 \u0437\u0430\u043f\u0440\u043e\u0441"),b.Sb(),b.Tb(4,"button",13),b.bc("click",(function(){return b.vc(e),b.fc().addObjRequest()})),b.Hc(5,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440"),b.Sb(),b.Sb(),b.Tb(6,"div",14),b.Tb(7,"table",15),b.Tb(8,"thead"),b.Tb(9,"tr"),b.Tb(10,"th"),b.Hc(11,"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430"),b.Sb(),b.Tb(12,"th"),b.Hc(13,"\u0421\u0432\u043e\u0439\u0441\u0442\u0432\u043e"),b.Sb(),b.Tb(14,"th"),b.Hc(15,"\xa0"),b.Sb(),b.Sb(),b.Sb(),b.Tb(16,"tbody"),b.Fc(17,B,9,4,"tr",16),b.Sb(),b.Fc(18,j,4,0,"tfoot",17),b.Sb(),b.Sb(),b.Fc(19,H,3,4,"div",49),b.Sb()}if(2&e){const e=b.fc();b.Bb(17),b.nc("ngForOf",e.objectEvents.request),b.Bb(1),b.nc("ngIf",0===e.objectEvents.request.length),b.Bb(1),b.nc("ngIf",e.currentObjRequest)}}let N=(()=>{class e{constructor(){this.currentEvent="NONE",this.objectEvents={changed:[],request:[]},this.operationList=[{value:"eq",title:"\u0440\u0430\u0432\u043d\u043e"},{value:"in",title:"\u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442"}],this.fireTypeList=[{value:"property",title:"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e"},{value:"event",title:"\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0441\u043e\u0431\u044b\u0442\u0438\u0435"}],this.eventsList=[{value:"request",title:"\u0437\u0430\u043f\u0440\u043e\u0441 \u0434\u0430\u043d\u043d\u044b\u0445"}],this.propertiesList=[{value:"visible"},{value:"disabled"},{value:"readonly"},{value:"value"}],this.booleanList=[{value:"true"},{value:"false"}]}get elementType(){var e,t;return null===(t=null===(e=this.modalChildData)||void 0===e?void 0:e.element)||void 0===t?void 0:t.type}ngOnInit(){if(this.modalChildData.element&&this.modalChildData.element.events){const e=this.modalChildData.element.events;Array.isArray(e.changed)&&e.changed.forEach(e=>{const t=new m(e);this.objectEvents.changed.push(t)}),e.request&&e.request.params&&Array.isArray(e.request.params)&&e.request.params.forEach(e=>{const t=new p(e);this.objectEvents.request.push(t)})}}disabledEvent(e){if(!this.modalChildData.element)return!0;switch(e){case"REQUEST":return["PANEL","ROW"].includes(this.modalChildData.element.type)}return!1}setCurrentEvent(e){this.disabledEvent(e)||(this.currentEvent=e)}close(){this.dialogRef.close()}addObjChange(){const e=new m;this.objectEvents.changed.push(e),this.currentObjChange=e,this.deactiveObjChanged(),e.selected=!0}selectObject(e){this.deactiveObjChanged(),e.selected=!0,this.currentObjChange=e}removeObject(e,t,n){e.stopPropagation(),n.selected&&(this.currentObjChange=null),this.objectEvents.changed.splice(t,1)}addObjRequest(){const e=new p;this.objectEvents.request.push(e),this.currentObjRequest=e,this.deactiveRequest(),e.selected=!0}selectRequest(e){this.deactiveRequest(),e.selected=!0,this.currentObjRequest=e}removeRequest(e,t,n){e.stopPropagation(),n.selected&&(this.currentObjRequest=null),this.objectEvents.request.splice(t,1)}apply(){const e=[],t=[];this.objectEvents.changed.forEach(t=>{const n=t.getJson();e.push(n)}),this.objectEvents.request.forEach(e=>{const n=e.getJson();t.push(n)}),this.dialogRef.close({changed:e,request:{params:t}})}deactiveObjChanged(){this.objectEvents.changed.forEach(e=>e.selected=!1)}deactiveRequest(){this.objectEvents.request.forEach(e=>e.selected=!1)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=b.Hb({type:e,selectors:[["editor-events-modal"]],decls:14,vars:11,consts:[[1,"events-container"],[1,"events-list"],[1,"events-list-item",3,"click"],["class","flex-auto flex-col-centered text-danger",4,"ngIf"],["class","flex-auto event-changed",4,"ngIf"],["class","flex-auto event-request",4,"ngIf"],[1,"events-footer"],["mat-raised-button","","color","success",3,"click"],["mat-raised-button","","color","accent",3,"click"],[1,"flex-auto","flex-col-centered","text-danger"],[1,"flex-auto","event-changed"],[1,"action-head"],[1,"flex-auto","text-bold"],["mat-raised-button","","color","primary",3,"click"],[1,"action-list"],[1,"table"],[3,"selected","click",4,"ngFor","ngForOf"],[4,"ngIf"],["class","action-control",4,"ngIf"],[3,"click"],[1,"text-center"],[3,"innerHtml"],[1,"operation"],["mat-button","","color","accent",3,"click"],["colspan","4",1,"text-center","text-danger"],[1,"action-control"],[1,"flex-col","pt-9"],["label","\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0438\u0437\u043c\u0435\u043d\u044f\u0435\u043c\u043e\u0433\u043e \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430",3,"formControl"],[1,"flex-auto"],[1,"text-center","text-bold"],[3,"options","clearButton","formControl"],["ugskPrefix",""],["mat-button",""],[3,"label","formControl",4,"ngIf"],[3,"label","options","clearButton","formControl",4,"ngIf"],[1,"action-fires"],["class","fire-edit",4,"ngIf"],[3,"label","formControl"],[3,"label","options","clearButton","formControl"],[1,"text-center","text-danger"],[1,"fire-edit"],[3,"options","clearButton","formControl",4,"ngIf"],["label","\u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e",3,"options","clearButton","formControl",4,"ngIf"],["label","\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435",3,"formControl",4,"ngIf"],["label","\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435",3,"options","clearButton","formControl",4,"ngIf"],["label","\u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e",3,"options","clearButton","formControl"],["label","\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435",3,"formControl"],["label","\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435",3,"options","clearButton","formControl"],[1,"flex-auto","event-request"],["class","fire-edit pad-10",4,"ngIf"],["colspan","3",1,"text-center","text-danger"],[1,"fire-edit","pad-10"],["label","\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430",3,"formControl"],["label","\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e",3,"options","clearButton","formControl"]],template:function(e,t){1&e&&(b.Tb(0,"div",0),b.Tb(1,"div",1),b.Tb(2,"div",2),b.bc("click",(function(){return t.setCurrentEvent("CHANGED")})),b.Hc(3," \u0423 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430 \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u043e\u0441\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u0430 "),b.Sb(),b.Tb(4,"div",2),b.bc("click",(function(){return t.setCurrentEvent("REQUEST")})),b.Hc(5," \u042d\u043b\u0435\u043c\u0435\u043d\u0442 \u0437\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 "),b.Sb(),b.Sb(),b.Fc(6,E,2,0,"div",3),b.Fc(7,_,22,3,"div",4),b.Fc(8,R,20,3,"div",5),b.Sb(),b.Tb(9,"div",6),b.Tb(10,"button",7),b.bc("click",(function(){return t.apply()})),b.Hc(11,"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c"),b.Sb(),b.Tb(12,"button",8),b.bc("click",(function(){return t.close()})),b.Hc(13,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),b.Sb(),b.Sb()),2&e&&(b.Bb(2),b.Fb("selected","CHANGED"===t.currentEvent)("disabled",t.disabledEvent("CHANGED")),b.Bb(2),b.Fb("selected","REQUEST"===t.currentEvent)("disabled",t.disabledEvent("REQUEST")),b.Bb(2),b.nc("ngIf","NONE"===t.currentEvent),b.Bb(1),b.nc("ngIf","CHANGED"===t.currentEvent),b.Bb(1),b.nc("ngIf","REQUEST"===t.currentEvent))},directives:[c.k,g.b,c.j,v.a,f.c,f.d,f.g],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;min-width:80vw;min-height:70vh}.events-container[_ngcontent-%COMP%]{flex:auto;display:flex}.events-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;border-top:1px solid #004990;padding:5px 10px}.events-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}.events-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-left:0}.events-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:10px 5px;border-right:1px solid #004990}.events-list[_ngcontent-%COMP%]   .events-list-item[_ngcontent-%COMP%]{padding:3px 5px;cursor:pointer;-webkit-user-select:none;user-select:none}.events-list[_ngcontent-%COMP%]   .events-list-item[_ngcontent-%COMP%]:hover{background-color:#d6e6fc}.events-list[_ngcontent-%COMP%]   .events-list-item.selected[_ngcontent-%COMP%]{background-color:#004990;color:#fff}.events-list[_ngcontent-%COMP%]   .events-list-item.disabled[_ngcontent-%COMP%]{cursor:default;color:#c6c6c6;background-color:hsla(0,0%,77.6%,.5)}.event-changed[_ngcontent-%COMP%]{flex:auto;display:flex;flex-direction:column}.action-head[_ngcontent-%COMP%]{padding:3px 5px;border-bottom:1px dotted #004990;margin-bottom:10px;display:flex;align-items:center}.action-head[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px;line-height:28px}.action-head[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-left:0}.action-head.start-right[_ngcontent-%COMP%]{justify-content:flex-end}.event-request[_ngcontent-%COMP%]{flex:auto;display:flex;flex-direction:column}.action-list[_ngcontent-%COMP%]{max-height:40vh;overflow-y:auto}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center;font-weight:700}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{position:sticky;top:0;background-color:#fff;z-index:1}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#d6e6fc}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.selected[_ngcontent-%COMP%]{background-color:#004990;color:#fff}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.operation[_ngcontent-%COMP%]{width:50px}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.operation[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:auto;padding:0 5px}.action-control[_ngcontent-%COMP%]{flex:auto;display:flex;padding:5px 10px;border-top:1px dotted #004990;margin-top:10px}.action-fires[_ngcontent-%COMP%]{flex:auto;display:flex;flex-direction:column;padding-left:15px;border-left:1px dotted #004990}.pt-9[_ngcontent-%COMP%]{padding-top:9px}.fire-edit[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:10px;margin-top:10px;border-top:1px dotted #004990}.pad-10[_ngcontent-%COMP%]{padding:10px}"]}),e})();function A(e,t){1&e&&(b.Tb(0,"div",2),b.Hc(1,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u044d\u043b\u0435\u043c\u0435\u043d\u0442"),b.Sb())}function V(e,t){if(1&e&&b.Ob(0,"ugsk-input",14),2&e){const e=b.fc(2);b.nc("formControl",e.controlLabel)}}function L(e,t){if(1&e&&b.Ob(0,"ugsk-checkbox",15),2&e){const e=b.fc(2);b.nc("formControl",e.controlDisabled)}}function q(e,t){if(1&e&&b.Ob(0,"ugsk-checkbox",16),2&e){const e=b.fc(2);b.nc("formControl",e.controlReadonly)}}function $(e,t){if(1&e&&b.Ob(0,"ugsk-checkbox",17),2&e){const e=b.fc(2);b.nc("formControl",e.controlAutofill)}}function J(e,t){if(1&e&&b.Ob(0,"ugsk-checkbox",19),2&e){const e=b.fc(3);b.nc("formControl",e.controlValue)}}function U(e,t){if(1&e&&b.Ob(0,"ugsk-input",19),2&e){const e=b.fc(3);b.nc("formControl",e.controlValue)}}function W(e,t){if(1&e&&(b.Tb(0,"div"),b.Fc(1,J,1,1,"ugsk-checkbox",18),b.Fc(2,U,1,1,"ugsk-input",18),b.Sb()),2&e){const e=b.fc(2);b.Bb(1),b.nc("ngIf","CHECKBOX"===e.elementType),b.Bb(1),b.nc("ngIf","CHECKBOX"!==e.elementType)}}function D(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",20),b.bc("click",(function(){return b.vc(e),b.fc(2).showEventsModal()})),b.Hc(1,"\u0421\u043e\u0431\u044b\u0442\u0438\u044f \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430"),b.Sb()}}function X(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",20),b.bc("click",(function(){return b.vc(e),b.fc(2).selectParent()})),b.Hc(1,"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f"),b.Sb()}}const G=function(){return["ROW"]},z=function(){return["PANEL","ROW"]};function K(e,t){if(1&e&&(b.Tb(0,"div",3),b.Tb(1,"div",4),b.Hc(2),b.Sb(),b.Ob(3,"ugsk-input",5),b.Fc(4,V,1,1,"ugsk-input",6),b.Ob(5,"ugsk-checkbox",7),b.Fc(6,L,1,1,"ugsk-checkbox",8),b.Fc(7,q,1,1,"ugsk-checkbox",9),b.Fc(8,$,1,1,"ugsk-checkbox",10),b.Fc(9,W,3,2,"div",11),b.Tb(10,"div",12),b.Fc(11,D,2,0,"button",13),b.Sb(),b.Tb(12,"div",12),b.Fc(13,X,2,0,"button",13),b.Sb(),b.Sb()),2&e){const e=b.fc();b.Bb(2),b.Ic(e.elementType),b.Bb(1),b.nc("formControl",e.controlId),b.Bb(1),b.nc("ngIf",!b.oc(10,G).includes(e.elementType)),b.Bb(1),b.nc("formControl",e.controlCheckbox),b.Bb(1),b.nc("ngIf",!b.oc(11,z).includes(e.elementType)),b.Bb(1),b.nc("ngIf",!b.oc(12,z).includes(e.elementType)),b.Bb(1),b.nc("ngIf",!b.oc(13,G).includes(e.elementType)),b.Bb(1),b.nc("ngIf",!b.oc(14,z).includes(e.elementType)),b.Bb(2),b.nc("ngIf",e.visibleEvents),b.Bb(2),b.nc("ngIf",e.element.parentId)}}let Q=(()=>{class e{constructor(e){this.dialogService=e,this.changedElementId=new b.o,this.selectParentEvent=new b.o,this.visibleEvents=!1,this.controlId=new f.e(null),this.controlLabel=new f.e(null),this.controlCheckbox=new f.e(null),this.controlDisabled=new f.e(null),this.controlReadonly=new f.e(null),this.controlAutofill=new f.e(null),this.controlValue=new f.e(null)}get elementType(){var e;return null===(e=this.element)||void 0===e?void 0:e.type}ngOnInit(){this.controlId.valueChanges.subscribe(e=>{this.element&&(this.element.id=e,this.changedElementId.emit())}),this.controlLabel.valueChanges.subscribe(e=>{this.element&&!["ROW"].includes(this.element.type)&&(this.element.label=e)}),this.controlCheckbox.valueChanges.subscribe(e=>{this.element&&(this.element.visible=e)}),this.controlDisabled.valueChanges.subscribe(e=>{this.element&&!["PANEL","ROW"].includes(this.element.type)&&(this.element.disabled=e)}),this.controlReadonly.valueChanges.subscribe(e=>{this.element&&!["PANEL","ROW"].includes(this.element.type)&&(this.element.readonly=e)}),this.controlAutofill.valueChanges.subscribe(e=>{this.element&&!["ROW"].includes(this.element.type)&&(this.element.autofill=e)}),this.controlValue.valueChanges.subscribe(e=>{this.element&&!["PANEL","ROW"].includes(this.element.type)&&(this.element.value=e)})}ngOnChanges(e){e.hasOwnProperty("element")&&e.element.currentValue?(this.controlId.setValue(this.element.id,{emitEvent:!1}),this.controlCheckbox.setValue(this.element.visible,{emitEvent:!1}),"ROW"!==this.element.type?(this.controlLabel.setValue(this.element.label,{emitEvent:!1}),this.controlAutofill.setValue(this.element.autofill,{emitEvent:!1})):["PANEL","ROW"].includes(this.element.type)||(this.controlDisabled.setValue(this.element.disabled,{emitEvent:!1}),this.controlReadonly.setValue(this.element.readonly,{emitEvent:!1}),this.controlValue.setValue(this.element.value,{emitEvent:!1})),this.visibleEvents=!["PANEL","ROW"].includes(this.element.type)):this.visibleEvents=!1}selectParent(){this.selectParentEvent.emit(this.element.parentId)}showEventsModal(){["PANEL","ROW"].includes(this.element.type)||this.dialogService.showModal("\u0421\u043e\u0431\u044b\u0442\u0438\u044f \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430",N,{element:this.element},!0,null,!0).subscribe(e=>{e&&(this.element.events=JSON.parse(JSON.stringify(e)))})}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(f.b))},e.\u0275cmp=b.Hb({type:e,selectors:[["editor-inspector"]],inputs:{element:"element"},outputs:{changedElementId:"changedElementId",selectParentEvent:"selectParentEvent"},features:[b.zb],decls:2,vars:2,consts:[["class","text-center text-danger property-row",4,"ngIf"],["class","property-list",4,"ngIf"],[1,"text-center","text-danger","property-row"],[1,"property-list"],[1,"element-type"],["label","\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440",3,"formControl"],["label","\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",3,"formControl",4,"ngIf"],["label","\u0412\u0438\u0434\u0438\u043c\u043e\u0441\u0442\u044c \u043e\u0431\u044a\u0435\u043a\u0442\u0430",3,"formControl"],["label","Disabled \u043e\u0431\u044a\u0435\u043a\u0442\u0430",3,"formControl",4,"ngIf"],["label","Readonly \u043e\u0431\u044a\u0435\u043a\u0442\u0430",3,"formControl",4,"ngIf"],["label","\u041d\u0430 \u0432\u0441\u044e \u0448\u0438\u0440\u0438\u043d\u0443",3,"formControl",4,"ngIf"],[4,"ngIf"],[1,"property-row"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["label","\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",3,"formControl"],["label","Disabled \u043e\u0431\u044a\u0435\u043a\u0442\u0430",3,"formControl"],["label","Readonly \u043e\u0431\u044a\u0435\u043a\u0442\u0430",3,"formControl"],["label","\u041d\u0430 \u0432\u0441\u044e \u0448\u0438\u0440\u0438\u043d\u0443",3,"formControl"],["label","\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e",3,"formControl",4,"ngIf"],["label","\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e",3,"formControl"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,t){1&e&&(b.Fc(0,A,2,0,"div",0),b.Fc(1,K,14,15,"div",1)),2&e&&(b.nc("ngIf",!t.element),b.Bb(1),b.nc("ngIf",t.element))},directives:[c.k,f.c,f.a,g.b],styles:["[_nghost-%COMP%]{margin-bottom:15px}.property-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:5px 0}.property-list[_ngcontent-%COMP%]   .element-type[_ngcontent-%COMP%]{font-weight:700;text-align:center;border-bottom:1px dotted #004990;padding-top:5px 0;margin-bottom:5px}.property-row[_ngcontent-%COMP%]{padding:5px 0}.property-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}"]}),e})();var Z=n("1G5W"),Y=n("Wp6s");const ee=function(e){return{row:e}};function te(e,t){if(1&e&&b.Pb(0,7),2&e){const e=t.$implicit;b.fc();const n=b.sc(2);b.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",b.pc(2,ee,e))}}const ne=function(e){return{child:e}};function ce(e,t){if(1&e&&b.Pb(0,7),2&e){const e=t.$implicit;b.fc(2);const n=b.sc(4);b.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",b.pc(2,ne,e))}}function oe(e,t){if(1&e){const e=b.Ub();b.Tb(0,"div",8),b.bc("click",(function(n){b.vc(e);const c=t.row;return b.fc().selectElement(n,c)})),b.Tb(1,"div",9),b.Fc(2,ce,1,4,"ng-container",0),b.Sb(),b.Sb()}if(2&e){const e=t.row;b.Fb("actived",e.active)("not-visible",!e.visible),b.Bb(2),b.nc("ngForOf",e.children)}}const ie=function(e){return{panel:e}};function le(e,t){if(1&e&&b.Pb(0,7),2&e){const e=b.fc().child;b.fc();const t=b.sc(6);b.nc("ngTemplateOutlet",t)("ngTemplateOutletContext",b.pc(2,ie,e))}}const re=function(e){return{field:e}};function se(e,t){if(1&e&&b.Pb(0,7),2&e){const e=b.fc().child;b.fc();const t=b.sc(8);b.nc("ngTemplateOutlet",t)("ngTemplateOutletContext",b.pc(2,re,e))}}function ae(e,t){if(1&e&&(b.Fc(0,le,1,4,"ng-container",10),b.Fc(1,se,1,4,"ng-container",10)),2&e){const e=t.child;b.nc("ngIf","PANEL"===e.type),b.Bb(1),b.nc("ngIf","PANEL"!==e.type)}}function be(e,t){if(1&e&&(b.Tb(0,"mat-card-header"),b.Tb(1,"mat-card-title"),b.Hc(2),b.Sb(),b.Sb()),2&e){const e=b.fc().panel;b.Bb(2),b.Ic(e.label)}}function ue(e,t){if(1&e&&b.Pb(0,7),2&e){const e=t.$implicit;b.fc(2);const n=b.sc(2);b.nc("ngTemplateOutlet",n)("ngTemplateOutletContext",b.pc(2,ee,e))}}function de(e,t){if(1&e){const e=b.Ub();b.Tb(0,"div",8),b.bc("click",(function(n){b.vc(e);const c=t.panel;return b.fc().selectElement(n,c)})),b.Tb(1,"mat-card"),b.Fc(2,be,3,1,"mat-card-header",11),b.Tb(3,"mat-card-content"),b.Fc(4,ue,1,4,"ng-container",0),b.Sb(),b.Sb(),b.Sb()}if(2&e){const e=t.panel;b.Fb("actived",e.active)("not-visible",!e.visible)("flex-auto",e.autofill),b.Bb(2),b.nc("ngIf",e.label),b.Bb(2),b.nc("ngForOf",e.children)}}function fe(e,t){if(1&e&&b.Pb(0,7),2&e){const e=b.fc().field;b.fc();const t=b.sc(10);b.nc("ngTemplateOutlet",t)("ngTemplateOutletContext",b.pc(2,re,e))}}function he(e,t){if(1&e&&b.Pb(0,7),2&e){const e=b.fc().field;b.fc();const t=b.sc(12);b.nc("ngTemplateOutlet",t)("ngTemplateOutletContext",b.pc(2,re,e))}}function me(e,t){if(1&e){const e=b.Ub();b.Tb(0,"div",12),b.bc("click",(function(n){b.vc(e);const c=t.field;return b.fc().selectElement(n,c)})),b.Fc(1,fe,1,4,"ng-container",13),b.Fc(2,he,1,4,"ng-container",13),b.Sb()}if(2&e){const e=t.field;b.Fb("actived",e.active)("not-visible",!e.visible)("flex-auto",e.autofill),b.nc("ngSwitch",e.type),b.Bb(1),b.nc("ngSwitchCase","TEXT"),b.Bb(1),b.nc("ngSwitchCase","CHECKBOX")}}function pe(e,t){if(1&e&&b.Ob(0,"ugsk-input",14),2&e){const e=t.field;b.nc("readonly",e.readonly)("label",e.label)("value",e.value)}}function ge(e,t){if(1&e&&b.Ob(0,"ugsk-checkbox",14),2&e){const e=t.field;b.nc("readonly",e.readonly)("label",e.label)("value",e.value)}}const ve=["panel","text","checkbox"];let Ee=(()=>{class e{constructor(){this.elements=[],this.selectedElement=new b.o,this.ngUnsubscribe=new r.a,this.indNewRowElement=0,this.indNewPanelElement=0,this.indNewField={TEXT:0,CHECKBOX:0}}onHostClick(){this.currentElement=null,this.deactiveElements(),this.selectedElement.emit(null)}ngOnInit(){"function"==typeof this.addElementEvent.subscribe&&this.addElementEvent.pipe(Object(Z.a)(this.ngUnsubscribe)).subscribe(e=>{this.addElement(e)}),"function"==typeof this.removeElementEvent.subscribe&&this.removeElementEvent.pipe(Object(Z.a)(this.ngUnsubscribe)).subscribe(e=>{this.removeElement(e)}),"function"==typeof this.selectElementEvent.subscribe&&this.selectElementEvent.pipe(Object(Z.a)(this.ngUnsubscribe)).subscribe(e=>{this.selectElementById(e)})}ngOnChanges(e){e.hasOwnProperty("elements")&&e.elements.previousValue&&(this.currentElement=null,setTimeout(()=>this.selectedElement.emit(null)))}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}selectElement(e,t){e.stopPropagation(),this.deactiveElements(),t.active=!0,this.currentElement=t,this.selectedElement.emit(this.currentElement)}selectElementById(e){if(e){const t=this.findElementById(e);t&&(this.deactiveElements(),t.active=!0,this.currentElement=t,this.selectedElement.emit(this.currentElement))}}removeElement(e){let t;const n=this.findElementById(e);if(n)if(n.parentId){const e=this.findElementById(n.parentId);e&&Array.isArray(e.children)&&(t=e.children.findIndex(e=>e.id===n.id),t>=0&&e.children.splice(t,1))}else t=this.elements.findIndex(e=>e.id===n.id),t>=0&&this.elements.splice(t,1);this.currentElement=null,this.deactiveElements(),this.selectedElement.emit(null)}addElement(e){if(!ve.includes(e))return;let t,n;if(this.deactiveElements(),this.currentElement)switch(this.currentElement.type){case"ROW":t=this.currentElement;break;case"PANEL":t=this.createRowElement(this.currentElement.id),this.currentElement.children.push(t);break;default:t=this.findElementById(this.currentElement.parentId)}else t=this.createRowElement(),this.elements.push(t);switch(e){case"panel":n=this.createPanelElement(t);break;case"text":n=this.createFieldElement(t,"TEXT");break;case"checkbox":n=this.createFieldElement(t,"CHECKBOX")}n.active=!0,this.currentElement=n,this.selectedElement.emit(this.currentElement)}deactiveElements(){const e=t=>{Array.isArray(t)&&t.forEach(t=>{t.active=!1,["ROW","PANEL"].includes(t.type)&&Array.isArray(t.children)&&e(t.children)})};this.elements.forEach(t=>{t.active=!1,e(t.children)})}findElementById(e){const t=(n,c)=>{for(const o of c){if(o.id===e)return o;if(["ROW","PANEL"].includes(o.type)&&Array.isArray(o.children)){const e=t(n,o.children);if(e)return e}}return null};return t(e,this.elements)}createPanelElement(e){this.indNewPanelElement++;const t={id:"panel-"+this.indNewPanelElement,type:"PANEL",parentId:e.id,active:!1,visible:!0,autofill:!1,children:[]};return e.children.push(t),t}createRowElement(e=null){return this.indNewRowElement++,{id:"row-"+this.indNewRowElement,type:"ROW",parentId:e,active:!1,visible:!0,children:[]}}createFieldElement(e,t){this.indNewField[t]++;const n=`${String(t).toLowerCase()}-${this.indNewField[t]}`,c={id:n,label:n,type:t,parentId:e.id,active:!1,visible:!0};return e.children.push(c),c}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=b.Hb({type:e,selectors:[["editor-workspace"]],hostBindings:function(e,t){1&e&&b.bc("click",(function(){return t.onHostClick()}))},inputs:{elements:"elements",addElementEvent:"addElementEvent",removeElementEvent:"removeElementEvent",selectElementEvent:"selectElementEvent"},outputs:{selectedElement:"selectedElement"},features:[b.zb],decls:13,vars:1,consts:[[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],["tplRow",""],["tplRowChild",""],["tplPanel",""],["tplField",""],["tplFieldText",""],["tplFieldCheckbox",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"element-container",3,"click"],[1,"flex-row"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[4,"ngIf"],[1,"element-container",3,"ngSwitch","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngSwitchCase"],[3,"readonly","label","value"]],template:function(e,t){1&e&&(b.Fc(0,te,1,4,"ng-container",0),b.Fc(1,oe,3,5,"ng-template",null,1,b.Gc),b.Fc(3,ae,2,2,"ng-template",null,2,b.Gc),b.Fc(5,de,5,8,"ng-template",null,3,b.Gc),b.Fc(7,me,3,9,"ng-template",null,4,b.Gc),b.Fc(9,pe,1,3,"ng-template",null,5,b.Gc),b.Fc(11,ge,1,3,"ng-template",null,6,b.Gc)),2&e&&b.nc("ngForOf",t.elements)},directives:[c.j,c.p,c.k,Y.a,Y.b,Y.c,Y.e,c.m,c.n,f.c,f.a],styles:["[_nghost-%COMP%]{flex:auto;box-sizing:border-box;display:flex;flex-direction:column;-webkit-user-select:none;user-select:none;position:relative;max-width:100%;overflow:auto}.element-container[_ngcontent-%COMP%]{border:2px dotted transparent}.element-container.actived[_ngcontent-%COMP%]{border:2px dotted #004990}.element-container.not-visible[_ngcontent-%COMP%]{opacity:.3}"]}),e})();function Oe(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",24),b.bc("click",(function(){return b.vc(e),b.fc().removeCurrentObject()})),b.Hc(1,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),b.Sb()}}const Ce=[{path:"",component:(()=>{class e{constructor(e,t,n){this.storageService=e,this.router=t,this.elements=[],this.addElementEvent=new r.a,this.removeElementEvent=new r.a,this.selectElementEvent=new r.a,this.indSavedForm=0,n.setTitle("\u0420\u0435\u0434\u0430\u043a\u0442\u043e\u0440 \u0444\u043e\u0440\u043c\u044b | Form.ORM"),this.addElementEvent$=this.addElementEvent.asObservable(),this.removeElementEvent$=this.removeElementEvent.asObservable(),this.selectElementEvent$=this.selectElementEvent.asObservable()}ngOnInit(){this.storageService.remove(a.a);const e=this.storageService.get(a.b);e&&(this.storageService.remove(a.b),this.elements=e)}addElement(e){this.addElementEvent.next(e)}onSelectedElement(e){this.currentElement=e}removeCurrentObject(){this.currentElement&&this.removeElementEvent.next(this.currentElement.id)}onChangedElementId(){this.updateElementsParents(this.elements)}onSelectParent(e){e&&this.selectElementEvent.next(e)}clearElements(){this.elements=[]}saveForm(){this.indSavedForm++;const e=this.cleanElementExt(this.elements);s.a.downloadJson(e,`form.orm-${this.indSavedForm}.json`)}loadForm(){s.a.uploadJson().subscribe(e=>{e=this.normalizeElementExt(e),this.updateElementsParents(e),this.elements=e})}showPreview(){this.storageService.set(a.b,JSON.parse(JSON.stringify(this.elements))),this.storageService.set(a.a,"editor"),this.router.navigate(["preview"])}updateElementsParents(e){const t=(e,n)=>{Array.isArray(e)&&e.forEach(e=>{e.parentId=n,Array.isArray(e.children)&&t(e.children,e.id)})};t(e,null)}cleanElementExt(e){const t=JSON.parse(JSON.stringify(e)),n=e=>{Array.isArray(e)&&e.forEach(e=>{delete e.active,delete e.parentId,Array.isArray(e.children)&&n(e.children)})};return n(t),t}normalizeElementExt(e){const t=JSON.parse(JSON.stringify(e)),n=e=>{Array.isArray(e)&&e.forEach(e=>{e.active=!1,e.parentId=null,Array.isArray(e.children)&&n(e.children)})};return n(t),t}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(u.a),b.Nb(o.a),b.Nb(d.c))},e.\u0275cmp=b.Hb({type:e,selectors:[["editor-home"]],decls:30,vars:9,consts:[[1,"sidebar"],[1,"inspector"],[1,"inspector-title"],[3,"element","changedElementId","selectParentEvent"],["mat-raised-button","","color","accent",3,"click",4,"ngIf"],[1,"viewport"],[1,"toolbar"],[1,"flex-auto"],["mat-button","","title","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0430\u043d\u0435\u043b\u044c",3,"click"],[1,"toolbar-icon","ico-panel"],["mat-button","","title","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c input-\u044d\u043b\u0435\u043c\u0435\u043d\u0442",3,"click"],[1,"toolbar-icon","ico-input"],["mat-button","","title","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c checkbox-\u044d\u043b\u0435\u043c\u0435\u043d\u0442",3,"click"],[1,"toolbar-icon","ico-checkbox"],["mat-button","","title","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c select-\u044d\u043b\u0435\u043c\u0435\u043d\u0442",3,"click"],[1,"toolbar-icon","ico-select"],["mat-button","","title","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c datepicker-\u044d\u043b\u0435\u043c\u0435\u043d\u0442",3,"click"],[1,"toolbar-icon","ico-datepicker"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","success",3,"disabled","click"],["mat-raised-button","","color","accent",3,"disabled","click"],[1,"workspace"],[3,"elements","addElementEvent","removeElementEvent","selectElementEvent","selectedElement"],["mat-raised-button","","color","accent",3,"click"]],template:function(e,t){1&e&&(b.Tb(0,"div",0),b.Tb(1,"div",1),b.Tb(2,"div",2),b.Hc(3,"\u0418\u043d\u0441\u043f\u0435\u043a\u0442\u043e\u0440 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430"),b.Sb(),b.Tb(4,"editor-inspector",3),b.bc("changedElementId",(function(){return t.onChangedElementId()}))("selectParentEvent",(function(e){return t.onSelectParent(e)})),b.Sb(),b.Fc(5,Oe,2,0,"button",4),b.Sb(),b.Sb(),b.Tb(6,"div",5),b.Tb(7,"div",6),b.Tb(8,"div",7),b.Tb(9,"button",8),b.bc("click",(function(){return t.addElement("panel")})),b.Ob(10,"div",9),b.Sb(),b.Tb(11,"button",10),b.bc("click",(function(){return t.addElement("text")})),b.Ob(12,"div",11),b.Sb(),b.Tb(13,"button",12),b.bc("click",(function(){return t.addElement("checkbox")})),b.Ob(14,"div",13),b.Sb(),b.Tb(15,"button",14),b.bc("click",(function(){return t.addElement("select")})),b.Ob(16,"div",15),b.Sb(),b.Tb(17,"button",16),b.bc("click",(function(){return t.addElement("datepicker")})),b.Ob(18,"div",17),b.Sb(),b.Sb(),b.Tb(19,"div"),b.Tb(20,"button",18),b.bc("click",(function(){return t.showPreview()})),b.Hc(21,"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"),b.Sb(),b.Tb(22,"button",19),b.bc("click",(function(){return t.loadForm()})),b.Hc(23,"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"),b.Sb(),b.Tb(24,"button",20),b.bc("click",(function(){return t.saveForm()})),b.Hc(25,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),b.Sb(),b.Tb(26,"button",21),b.bc("click",(function(){return t.clearElements()})),b.Hc(27,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0432\u0441\u0435"),b.Sb(),b.Sb(),b.Sb(),b.Tb(28,"div",22),b.Tb(29,"editor-workspace",23),b.bc("selectedElement",(function(e){return t.onSelectedElement(e)})),b.Sb(),b.Sb(),b.Sb()),2&e&&(b.Bb(4),b.nc("element",t.currentElement),b.Bb(1),b.nc("ngIf",t.currentElement),b.Bb(15),b.nc("disabled",0===t.elements.length),b.Bb(4),b.nc("disabled",0===t.elements.length),b.Bb(2),b.nc("disabled",0===t.elements.length),b.Bb(3),b.nc("elements",t.elements)("addElementEvent",t.addElementEvent$)("removeElementEvent",t.removeElementEvent$)("selectElementEvent",t.selectElementEvent$))},directives:[Q,c.k,g.b,Ee],styles:["[_nghost-%COMP%]{flex:auto;display:flex}.sidebar[_ngcontent-%COMP%]{border-right:1px dotted #004990;min-width:215px}.sidebar[_ngcontent-%COMP%]   .inspector[_ngcontent-%COMP%]{position:sticky;top:56px;padding:5px;box-sizing:border-box;display:flex;flex-direction:column}.sidebar[_ngcontent-%COMP%]   .inspector[_ngcontent-%COMP%]   .inspector-title[_ngcontent-%COMP%]{font-weight:700;text-align:center;border-bottom:1px dotted #004990}.viewport[_ngcontent-%COMP%]{flex:auto;flex-direction:column}.viewport[_ngcontent-%COMP%], .viewport[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{box-sizing:border-box;display:flex}.viewport[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{position:sticky;top:56px;padding:5px;border-bottom:1px dotted #004990;align-items:center;background-color:#e5e4e6;z-index:1}.viewport[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:auto;padding:3px 5px}.viewport[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]   .mat-raised-button[_ngcontent-%COMP%]{margin-left:5px;padding:0 15px}.viewport[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]   .mat-raised-button[_ngcontent-%COMP%]:first-child{margin-left:0}.viewport[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-icon[_ngcontent-%COMP%]{width:25px;height:20px;background-color:initial;background-position:50%;background-repeat:no-repeat}.viewport[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-icon.ico-input[_ngcontent-%COMP%]{background-image:url(input.0b3e6f3d1e9cae0dc5fb.png)}.viewport[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-icon.ico-checkbox[_ngcontent-%COMP%]{background-image:url(checkbox.9b47e8676d6a804f0bfe.png)}.viewport[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-icon.ico-select[_ngcontent-%COMP%]{background-image:url(select.c86f8c3f34410bfd18fc.png)}.viewport[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-icon.ico-datepicker[_ngcontent-%COMP%]{background-image:url(datepicker.44071b98d11c326005fa.png)}.viewport[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-icon.ico-panel[_ngcontent-%COMP%]{background-image:url(panel.a877c13217a66c0afb64.png)}.viewport[_ngcontent-%COMP%]   .workspace[_ngcontent-%COMP%]{padding:10px;flex:auto;box-sizing:border-box;display:flex;flex-direction:column}"]}),e})()},{path:"**",component:i.a}];let ye=(()=>{class e{}return e.\u0275mod=b.Lb({type:e}),e.\u0275inj=b.Kb({factory:function(t){return new(t||e)},imports:[[c.c,o.d.forChild(Ce),l.a]]}),e})()}}]);