import{b as an,c as lt,d as ln,f as un}from"./chunk-HSAWKYNS.js";import{a as cn,b as ut,c as ct,d as dt,e as dn}from"./chunk-RYDHLPZU.js";import{$a as Ne,$c as ot,A as wt,Aa as mi,Ac as Ie,B as ii,Ba as C,Bc as de,C as Ae,Ca as _,Cc as zi,D as ni,Da as pi,Dc as Ui,Ea as hi,Eb as Y,Ec as Ji,F as oi,Fc as me,G as Le,Ga as ye,Gc as Zi,H as ve,Ha as we,Hb as bi,Hc as qi,I as Ee,Ia as Se,Ib as xi,Ja as O,Jb as Ti,K as h,Ka as Qe,Kc as Ki,La as j,Lb as Pi,Lc as Yi,M as g,Mb as Ii,Mc as Qi,N as f,Na as c,Nb as Xe,Nc as Xi,O as ri,Oa as oe,Ob as Fi,Oc as $i,P as he,Pa as ue,Pb as Ri,Pc as Ft,Q as se,Qb as Te,Qc as en,R as B,Ra as D,Rb as Mi,S as ae,Sa as y,Sb as ki,T as si,Ta as w,Tb as $e,Tc as Fe,U as L,Ua as be,Ub as We,Uc as z,Va as _i,Vb as Bi,Vc as U,Wa as X,Wb as xt,Wc as et,Xa as gi,Xb as ce,Xc as tt,Y as d,Ya as H,Yc as tn,Zb as Oi,Zc as it,_ as St,_b as Ai,_c as nt,aa as ai,ab as xe,ac as Li,ad as rt,ba as li,bb as fi,bd as nn,ca as E,cd as on,da as De,dc as Tt,dd as Q,ea as le,eb as Ci,ec as Pt,ed as k,fa as ui,fd as st,ga as Ve,gd as te,ha as R,hc as It,hd as Re,i as Ce,ia as Ke,ib as vi,ic as Vi,id as He,j as yt,ja as ci,jb as Ei,jc as Ni,jd as at,k as I,kc as M,l as Qt,la as Ye,lb as Di,lc as V,m as Xt,ma as S,na as b,nd as J,od as ie,pa as di,pb as bt,pc as Wi,pd as rn,q as $t,qa as q,qb as yi,qd as sn,ra as K,rb as wi,rc as Hi,s as ei,sa as p,sb as Si,sc as Gi,t as qe,ta as a,ua as u,va as P,vc as $,w as ti,wa as _e,wc as ee,xa as ge,xc as N,yc as Pe,za as T,zc as ji}from"./chunk-SGQHKCG3.js";var mt=class{static blurActiveElement(){typeof document.activeElement.blur=="function"&&document.activeElement.blur()}};var po=["nameInput"];function ho(r,e){r&1&&(a(0,"mat-icon",2),c(1,"edit"),u())}var mn=(()=>{let e=class e{constructor(t){this.controlContainer=t,this.value=null,this.valueChange=new R,this.visibleIconNameEdit=B(!1),this.onChange=()=>{},this.onTouched=()=>{},this.destroyRef$=h(se),this.initialValue=null}ngOnInit(){this.formControl?this.control=this.formControl:this.controlContainer&&this.formControlName?this.control=this.controlContainer.control?.get(this.formControlName)??new Xe(null):this.control=Ft.hasValue(this.value)?new Xe(this.value):new Xe(null),this.initialValue=this.control.value,this.control.valueChanges.pipe(Y(this.destroyRef$)).subscribe(t=>{this.valueChange.emit(t)})}ngOnChanges(t){t.hasOwnProperty("value")&&this.control?.setValue(t.value.currentValue),t.hasOwnProperty("formControl")&&this.formControl&&(this.control=this.formControl)}writeValue(t){!this.formControl&&!this.formControlName&&setTimeout(()=>this.control.setValue(t))}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}onInputBlur(t=!1){(t||!Ft.hasValue(this.control.value))&&this.control.setValue(this.initialValue),this.visibleIconNameEdit.set(!1),mt.blurActiveElement()}onInputFocus(){this.initialValue=this.control.value,this.visibleIconNameEdit.set(!0),this.nameInput.nativeElement&&this.nameInput.nativeElement.select()}};e.\u0275fac=function(n){return new(n||e)(ai(Pi,13))},e.\u0275cmp=E({type:e,selectors:[["autosize-flat-input"]],viewQuery:function(n,o){if(n&1&&ye(po,5),n&2){let s;we(s=Se())&&(o.nameInput=s.first)}},inputs:{formControlName:"formControlName",formControl:"formControl",value:"value"},outputs:{valueChange:"valueChange"},features:[be([{provide:xi,useExisting:oi(()=>e),multi:!0}]),ae],decls:3,vars:3,consts:[["nameInput",""],[3,"blur","focus","keyup.enter","keyup.escape","size","formControl"],[1,"ml-10"]],template:function(n,o){if(n&1){let s=T();a(0,"input",1,0),C("blur",function(){return g(s),f(o.onInputBlur())})("focus",function(){return g(s),f(o.onInputFocus())})("keyup.enter",function(){return g(s),f(o.onInputBlur())})("keyup.escape",function(){return g(s),f(o.onInputBlur(!0))}),u(),S(2,ho,2,0,"mat-icon",2)}n&2&&(p("size",o.control.value.length||1)("formControl",o.control),d(2),b(o.visibleIconNameEdit()?2:-1))},dependencies:[Te,Ti,Ii,Fi,V,M],styles:["[_nghost-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{padding:0;border:none;background-color:transparent;outline:none;font-size:18px;font-family:monospace;cursor:pointer}"],changeDetection:0});let r=e;return r})();var _o=["inputCond"],Me=(()=>{let e=class e{constructor(){this.label="\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430",this.trueTitle="\u0412\u043A\u043B\u044E\u0447\u0435\u043D\u043E",this.falseTitle="\u0412\u044B\u043A\u043B\u044E\u0447\u0435\u043D\u043E",this.condTitle="\u041F\u043E \u0443\u0441\u043B\u043E\u0432\u0438\u044E",this.value=null,this.valueChange=new R,this.state=B(!1),this.cond=B(null),this.holdEvents=!0}onSetState(t){t===void 0||this.holdEvents||(this.state.set(t),typeof t=="boolean"?(this.cond.set(null),this.valueChange.emit(t)):(this.valueChange.emit(""),this.inputCond?.focus()))}onCondChange(t){this.holdEvents||(this.cond.set(t),this.state()==="cond"&&this.valueChange.emit(t))}ngOnChanges(t){t.hasOwnProperty("value")&&(typeof this.value=="boolean"?(this.state.set(this.value),this.cond.set(null)):(this.state.set("cond"),this.cond.set(this.value)))}ngAfterViewInit(){this.holdEvents=!1}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=E({type:e,selectors:[["true-false-cond"]],viewQuery:function(n,o){if(n&1&&ye(_o,5),n&2){let s;we(s=Se())&&(o.inputCond=s.first)}},inputs:{label:"label",trueTitle:"trueTitle",falseTitle:"falseTitle",condTitle:"condTitle",value:"value"},outputs:{valueChange:"valueChange"},features:[ae],decls:14,vars:9,consts:[["inputCond",""],[1,"mt-10"],[1,"flex-row-align-center"],[1,"button-toggle",3,"valueChange","value"],[3,"value"],["value","cond"],[1,"flex-auto","ml-10"],["label","\u0423\u0441\u043B\u043E\u0432\u0438\u0435",1,"mat-without-hint",3,"valueChange","disabledState","value"]],template:function(n,o){if(n&1){let s=T();a(0,"fieldset",1)(1,"legend"),c(2),u(),a(3,"div",2)(4,"mat-button-toggle-group",3),C("valueChange",function(m){return g(s),f(o.onSetState(m))}),a(5,"mat-button-toggle",4),c(6),u(),a(7,"mat-button-toggle",4),c(8),u(),a(9,"mat-button-toggle",5),c(10),u()(),a(11,"div",6)(12,"jst-input",7,0),C("valueChange",function(m){return g(s),f(o.onCondChange(m))}),u()()()()}n&2&&(d(2),oe(o.label),d(2),p("value",o.state()),d(),p("value",!1),d(),oe(o.falseTitle),d(),p("value",!0),d(),oe(o.trueTitle),d(2),oe(o.condTitle),d(2),p("disabledState",o.state()!=="cond")("value",o.cond()))},dependencies:[me,Ui,Ji,U,z,Te],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}"],changeDetection:0});let r=e;return r})();var pn=(()=>{let e=class e{constructor(){this.elementTypeEnum=Q,this.widthUnitList=[{value:Re.Pixels,title:"\u041F\u0438\u043A\u0441\u0435\u043B\u0438"},{value:Re.Percents,title:"\u041F\u0440\u043E\u0446\u0435\u043D\u0442\u044B"}]}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=E({type:e,selectors:[["common-settings"]],inputs:{element:"element"},decls:18,vars:11,consts:[[1,"flex-row"],["label","\u0418\u0434\u0435\u043D\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u043E\u0440",1,"mat-without-hint",3,"valueChange","disabledState","value"],[1,"flex-auto","ml-10"],["label","\u0417\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",1,"mat-without-hint",3,"valueChange","value"],[1,"mt-10"],[1,"flex-row-align-center"],[1,"flex-auto"],["label","\u0412\u0441\u0435 \u0441\u0432\u043E\u0431\u043E\u0434\u043D\u043E\u0435 \u043F\u0440\u043E\u0441\u0442\u0440\u0430\u043D\u0441\u0442\u0432\u043E",3,"valueChange","value"],[1,"width-container"],["label","\u0428\u0438\u0440\u0438\u043D\u0430",1,"mat-without-hint",3,"valueChange","disabledState","value"],[1,"unit-container"],["label","\u0415\u0434\u0438\u043D\u0438\u0446\u044B \u0438\u0437\u043C\u0435\u0440\u0435\u043D\u0438\u044F",1,"mat-without-hint",3,"valueChange","disabledState","options","value"],["label","\u0412\u0438\u0434\u0438\u043C\u043E\u0441\u0442\u044C \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430","trueTitle","\u0412\u0438\u0434\u0438\u043C\u044B\u0439","falseTitle","\u041D\u0435\u0432\u0438\u0434\u0438\u043C\u044B\u0439",3,"valueChange","value"],["label","\u0414\u0435\u0430\u043A\u0442\u0438\u0432\u0430\u0446\u0438\u044F \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430","trueTitle","\u0412\u043A\u043B\u044E\u0447\u0435\u043D\u043E","falseTitle","\u0412\u044B\u043A\u043B\u044E\u0447\u0435\u043D\u043E",1,"mt-10",3,"valueChange","value"]],template:function(n,o){n&1&&(a(0,"div",0)(1,"div")(2,"jst-input",1),w("valueChange",function(l){return y(o.element.id,l)||(o.element.id=l),l}),u()(),a(3,"div",2)(4,"jst-input",3),w("valueChange",function(l){return y(o.element.label,l)||(o.element.label=l),l}),u()()(),a(5,"fieldset",4)(6,"legend"),c(7,"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430 \u0448\u0438\u0440\u0438\u043D\u044B \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430"),u(),a(8,"div",5)(9,"div",6)(10,"jst-checkbox",7),w("valueChange",function(l){return y(o.element.autofill,l)||(o.element.autofill=l),l}),u()(),a(11,"div",8)(12,"jst-touchspin",9),w("valueChange",function(l){return y(o.element.width,l)||(o.element.width=l),l}),u()(),a(13,"div",10)(14,"jst-select",11),w("valueChange",function(l){return y(o.element.widthUnit,l)||(o.element.widthUnit=l),l}),u()()()(),a(15,"div",4)(16,"true-false-cond",12),w("valueChange",function(l){return y(o.element.visible,l)||(o.element.visible=l),l}),u(),a(17,"true-false-cond",13),w("valueChange",function(l){return y(o.element.disabled,l)||(o.element.disabled=l),l}),u()()),n&2&&(d(2),p("disabledState",o.element.type===o.elementTypeEnum.Tabs),D("value",o.element.id),d(2),D("value",o.element.label),d(6),D("value",o.element.autofill),d(2),p("disabledState",o.element.autofill),D("value",o.element.width),d(2),p("disabledState",o.element.autofill)("options",o.widthUnitList),D("value",o.element.widthUnit),d(2),D("value",o.element.visible),d(),D("value",o.element.disabled))},dependencies:[Ri,Te,me,U,z,nt,it,rt,ot,tt,et,Me],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;margin-top:10px}.width-container[_ngcontent-%COMP%]{margin-left:10px;width:150px}.unit-container[_ngcontent-%COMP%]{margin-left:10px;width:215px}"],changeDetection:0});let r=e;return r})();var Rt=class{constructor(e){this.storage=e}get(e){let i=this.storage.getItem(e);return i?this.getValue(i):null}set(e,i){this.storage.setItem(e,this.normalizeValue(i))}remove(e){this.storage.removeItem(e)}clear(){this.storage.clear()}getValue(e){try{return JSON.parse(e)}catch{return e}}normalizeValue(e){return typeof e=="string"?e:JSON.stringify(e)}};var hn=(()=>{let e=class e extends Rt{constructor(){super(sessionStorage)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Le({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();var go=(r,e)=>e.id;function fo(r,e){if(r&1){let i=T();a(0,"div",16),C("click",function(){let n=g(i).$implicit,o=_(2);return f(o.onChooseDto(n))}),c(1),u()}if(r&2){let i,t=e.$implicit,n=_(2);j("selected",t.id===((i=n.currentDto())==null?null:i.id)),d(),ue(" ",t.name," ")}}function Co(r,e){if(r&1&&(a(0,"div",5)(1,"div",14),q(2,fo,2,3,"div",15,go),u()()),r&2){let i=_();d(2),K(i.availableDto)}}function vo(r,e){r&1&&(a(0,"div",6),c(1,"\u041D\u0435\u0442 \u0434\u0430\u043D\u043D\u044B\u0445"),u())}function Eo(r,e){if(r&1){let i=T();a(0,"div",16),C("click",function(){let n=g(i).$implicit,o=_(2);return f(o.onChooseProp(n))}),c(1),u()}if(r&2){let i=e.$implicit,t=_(2);j("selected",i===t.currentProp()),d(),ue(" ",i," ")}}function Do(r,e){if(r&1&&(a(0,"div",5)(1,"div",14),q(2,Eo,2,3,"div",15,di),u()()),r&2){let i=_();d(2),K(i.availableProps())}}function yo(r,e){if(r&1&&(a(0,"div",6),c(1),u()),r&2){let i,t=_();d(),ue(" ",(i=t.currentDto())!=null&&i.id?"\u041D\u0435\u0442 \u0441\u0432\u043E\u0439\u0441\u0442\u0432":"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 DTO"," ")}}var _n="fl:last-dto-store",gn=(()=>{let e=class e{constructor(){this.availableDto=[],this.availableProps=B([]),this.currentChoice=B(null),this.currentDto=B(null),this.currentProp=B(null),this.sessionStorageService=h(hn)}onChooseProp(t){this.currentProp.set(t),this.currentChoice.set(`${this.currentDto()?.name}: ${t}`)}onChooseDto(t){this.currentDto.set(t),this.availableProps.set(t.props),this.sessionStorageService.set(_n,t.id)}setData(t){if(t?.availableDto){this.setLists(t.availableDto);let n=this.sessionStorageService.get(_n);if(n!==null){let o=this.availableDto.find(s=>s.id===n);o&&this.onChooseDto(o)}}}onApply(){this.currentProp()&&this.dialogRef.close(this.currentProp())}onClose(){this.dialogRef.close(null)}setLists(t){for(let n of t){let o=[];dn.parseJsonKeysToArray(o,n.source),this.availableDto.push({id:Number(n.id),name:n.name,props:o})}}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=E({type:e,selectors:[["ng-component"]],decls:29,vars:4,consts:[[1,"jst-modal-container"],[1,"container"],[1,"dto-list"],[1,"flex-col","flex-auto"],[1,"list-container"],[1,"scroll-container"],[1,"empty-message"],[1,"flex-col","flex-auto","ml-10"],[1,"jst-modal-footer-buttons","jst-not-align"],[1,"flex-row-align-center"],[1,"choice-container"],[1,"ml-10"],["mat-raised-button","","color","primary",3,"click","disabled"],["mat-raised-button","","color","accent",3,"click"],[1,"scroll"],[1,"list-item",3,"selected"],[1,"list-item",3,"click"]],template:function(n,o){n&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"fieldset",3)(4,"legend"),c(5,"\u0414\u043E\u0441\u0442\u0443\u043F\u043D\u044B\u0435 DTO"),u(),a(6,"div",4),S(7,Co,4,0,"div",5)(8,vo,2,0,"div",6),u()()(),a(9,"div",7)(10,"fieldset",3)(11,"legend"),c(12,"\u0421\u0432\u043E\u0439\u0441\u0442\u0432\u0430 DTO"),u(),a(13,"div",4),S(14,Do,4,0,"div",5)(15,yo,2,1,"div",6),u()()()(),a(16,"div",8)(17,"div",9)(18,"div",10)(19,"strong"),c(20,"\u0412\u044B\u0431\u0440\u0430\u043D\u043E:"),u(),c(21," \xA0 "),a(22,"span"),c(23),u()(),a(24,"div",11)(25,"button",12),C("click",function(){return o.onApply()}),c(26,"\u041F\u0440\u0438\u043C\u0435\u043D\u0438\u0442\u044C"),u(),a(27,"button",13),C("click",function(){return o.onClose()}),c(28,"\u0417\u0430\u043A\u0440\u044B\u0442\u044C"),u()()()()()),n&2&&(d(7),b(o.availableDto.length>0?7:8),d(7),b(o.availableProps().length>0?14:15),d(9),oe(o.currentChoice()??"\u2039\u043D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D\u043E\u203A"),d(2),p("disabled",!o.currentChoice()))},dependencies:[N,ee],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:800px}.container[_ngcontent-%COMP%]{display:flex;height:350px;padding:10px}.choice-container[_ngcontent-%COMP%]{flex:auto;overflow:hidden;text-overflow:ellipsis}.dto-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:250px}.list-container[_ngcontent-%COMP%]{flex:auto;display:flex;flex-direction:column}.list-item[_ngcontent-%COMP%]{cursor:default;padding:0 10px}.list-item.selected[_ngcontent-%COMP%]{background-color:#0275d8;color:#fff}.list-item[_ngcontent-%COMP%]:hover:not(.selected){background-color:#e6effc;color:#5b5b5b}fieldset[_ngcontent-%COMP%]{padding:5px 0}fieldset[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{margin-left:10px}"],changeDetection:0});let r=e;return r})();var fn=(()=>{let e=class e{constructor(){this.label="bind DTO",this.clearButton=!1,this.valueChange=new R,this.bindDTO=B(null),this.jstDialogService=h(tn),this.dtoStore=h(sn),this.destroyRef=h(se)}set value(t){this.bindDTO.set(t)}onValueChange(t){this.valueChange.emit(t)}onChooseDto(){this.dtoStore.dtoList$.pipe(Y(this.destroyRef)).subscribe(t=>{this.jstDialogService.showModal("\u0412\u044B\u0431\u043E\u0440 DTO",gn,{availableDto:t},!0).subscribe(n=>{n&&(this.bindDTO.set(n),this.valueChange.emit(n))})})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=E({type:e,selectors:[["input-bind-dto"]],inputs:{label:"label",clearButton:"clearButton",value:"value"},outputs:{valueChange:"valueChange"},decls:5,vars:3,consts:[[1,"mat-without-hint",3,"valueChange","label","clearButton","value"],["JSTIconSuffix",""],["matIconButton","","color","primary",3,"click"]],template:function(n,o){n&1&&(a(0,"jst-input",0),C("valueChange",function(l){return o.onValueChange(l)}),_e(1,1),a(2,"button",2),C("click",function(){return o.onChooseDto()}),a(3,"mat-icon"),c(4,"more_horiz"),u()(),ge(),u()),n&2&&p("label",o.label)("clearButton",o.clearButton)("value",o.bindDTO())},dependencies:[V,M,N,$,U,Fe,z],styles:["[_nghost-%COMP%]{display:flex}"],changeDetection:0});let r=e;return r})();var Cn="<\u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D>",vn=(()=>{let e=class e{constructor(){this.dataSourceChange=new R,this.slidePanelService=h(lt),this.dataSourceValue=null,this.sourceDataTitle=Cn}set dataSource(t){this.dataSourceValue=t,this.updateTitle(t)}onPopupEdit(){let t=this.dataSourceValue?JSON.parse(JSON.stringify(this.dataSourceValue)):{id:null,type:at.List,name:"",source:[]};this.slidePanelService.showPanel$(un,{dataSource:t,editSourceAsValue:!0},{disabledClose:!0}).subscribe(n=>{n&&(this.updateTitle(n),this.dataSourceChange.emit(n))})}updateTitle(t){if(!t){this.sourceDataTitle=Cn;return}let n=t.id?`#${t.id} `:"";switch(t.type){case at.Request:let o=t.source;this.sourceDataTitle=`${n}${o.methodHttp} \u0417\u0430\u043F\u0440\u043E\u0441: ${o.apiUrl}${o.methodApi}`;break;case at.List:this.sourceDataTitle=`${n}\u0417\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u043D\u044B\u0439 \u0441\u043F\u0438\u0441\u043E\u043A`;break}}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=E({type:e,selectors:[["input-data-source"]],inputs:{dataSource:"dataSource"},outputs:{dataSourceChange:"dataSourceChange"},decls:5,vars:2,consts:[["label","\u0418\u0441\u0442\u043E\u0447\u043D\u0438\u043A \u0434\u0430\u043D\u043D\u044B\u0445",1,"mat-without-hint",3,"readonlyState","value"],["JSTIconSuffix",""],["matIconButton","","color","primary",3,"click"]],template:function(n,o){n&1&&(a(0,"jst-input",0),_e(1,1),a(2,"button",2),C("click",function(){return o.onPopupEdit()}),a(3,"mat-icon"),c(4,"more_horiz"),u()(),ge(),u()),n&2&&p("readonlyState",!0)("value",o.sourceDataTitle)},dependencies:[V,M,N,$,U,Fe,z],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}"],changeDetection:0});let r=e;return r})();function wo(r,e){if(r&1){let i=T();a(0,"div",9)(1,"jst-select",21),w("valueChange",function(n){g(i);let o=_(2);return y(o.element.controlProperties.maskType,n)||(o.element.controlProperties.maskType=n),f(n)}),u()(),a(2,"div",5)(3,"jst-input",22),w("valueChange",function(n){g(i);let o=_(2);return y(o.element.controlProperties.maskValue,n)||(o.element.controlProperties.maskValue=n),f(n)}),u()()}if(r&2){let i=_(2);d(),p("clearButton",!0)("options",i.maskTypeList),D("value",i.element.controlProperties.maskType),d(2),p("clearButton",!0)("disabledState",i.isDisabledCutomMask),D("value",i.element.controlProperties.maskValue)}}function So(r,e){if(r&1){let i=T();a(0,"div",9)(1,"input-data-source",23),w("dataSourceChange",function(n){g(i);let o=_(2);return y(o.element.controlProperties.dataSource,n)||(o.element.controlProperties.dataSource=n),f(n)}),u()()}if(r&2){let i=_(2);d(),D("dataSource",i.element.controlProperties.dataSource)}}function bo(r,e){if(r&1){let i=T();a(0,"div",11)(1,"div",24)(2,"jst-touchspin",25),w("valueChange",function(n){g(i);let o=_(2);return y(o.element.controlProperties.min,n)||(o.element.controlProperties.min=n),f(n)}),u()(),a(3,"div",26)(4,"jst-touchspin",27),w("valueChange",function(n){g(i);let o=_(2);return y(o.element.controlProperties.max,n)||(o.element.controlProperties.max=n),f(n)}),u()(),a(5,"div",28)(6,"jst-touchspin",29),w("valueChange",function(n){g(i);let o=_(2);return y(o.element.controlProperties.step,n)||(o.element.controlProperties.step=n),f(n)}),u()()(),a(7,"div",11)(8,"div",12)(9,"jst-checkbox",30),w("valueChange",function(n){g(i);let o=_(2);return y(o.element.controlProperties.allowDecimals,n)||(o.element.controlProperties.allowDecimals=n),f(n)}),u()(),a(10,"div",31)(11,"jst-touchspin",32),w("valueChange",function(n){g(i);let o=_(2);return y(o.element.controlProperties.step,n)||(o.element.controlProperties.step=n),f(n)}),u()()()}if(r&2){let i=_(2);d(2),D("value",i.element.controlProperties.min),d(2),D("value",i.element.controlProperties.max),d(2),D("value",i.element.controlProperties.step),d(3),D("value",i.element.controlProperties.allowDecimals),d(2),p("disabledState",!i.element.controlProperties.allowDecimals),D("value",i.element.controlProperties.step)}}function xo(r,e){if(r&1){let i=T();a(0,"div",11)(1,"div",24)(2,"jst-datepicker",33),w("valueChange",function(n){g(i);let o=_(2);return y(o.element.controlProperties.min,n)||(o.element.controlProperties.min=n),f(n)}),u()(),a(3,"div",26)(4,"jst-datepicker",34),w("valueChange",function(n){g(i);let o=_(2);return y(o.element.controlProperties.max,n)||(o.element.controlProperties.max=n),f(n)}),u()()()}if(r&2){let i=_(2);d(2),D("value",i.element.controlProperties.min),d(2),D("value",i.element.controlProperties.max)}}function To(r,e){if(r&1){let i=T();a(0,"div",5)(1,"input-bind-dto",6),w("valueChange",function(n){g(i);let o=_();return y(o.element.controlProperties.bindDTO,n)||(o.element.controlProperties.bindDTO=n),f(n)}),u()(),a(2,"true-false-cond",7),w("valueChange",function(n){g(i);let o=_();return y(o.element.controlProperties.readonly,n)||(o.element.controlProperties.readonly=n),f(n)}),u(),a(3,"true-false-cond",8),w("valueChange",function(n){g(i);let o=_();return y(o.element.controlProperties.required,n)||(o.element.controlProperties.required=n),f(n)}),u(),a(4,"div",9)(5,"jst-checkbox",10),w("valueChange",function(n){g(i);let o=_();return y(o.element.controlProperties.clearButton,n)||(o.element.controlProperties.clearButton=n),f(n)}),u()(),a(6,"div",11)(7,"div",12)(8,"jst-checkbox",13),w("valueChange",function(n){g(i);let o=_();return y(o.element.controlProperties.usePrefix,n)||(o.element.controlProperties.usePrefix=n),f(n)}),u()(),a(9,"div",3)(10,"jst-input",14),w("valueChange",function(n){g(i);let o=_();return y(o.element.controlProperties.prefixIcon,n)||(o.element.controlProperties.prefixIcon=n),f(n)}),_e(11,15),a(12,"a",16)(13,"mat-icon"),c(14,"open_in_new"),u()(),ge(),u()(),a(15,"div",3)(16,"jst-input",17),w("valueChange",function(n){g(i);let o=_();return y(o.element.controlProperties.prefixHint,n)||(o.element.controlProperties.prefixHint=n),f(n)}),u()()(),a(17,"div",11)(18,"div",12)(19,"jst-checkbox",18),w("valueChange",function(n){g(i);let o=_();return y(o.element.controlProperties.useSuffix,n)||(o.element.controlProperties.useSuffix=n),f(n)}),u()(),a(20,"div",3)(21,"jst-input",19),w("valueChange",function(n){g(i);let o=_();return y(o.element.controlProperties.suffixIcon,n)||(o.element.controlProperties.suffixIcon=n),f(n)}),_e(22,15),a(23,"a",16)(24,"mat-icon"),c(25,"open_in_new"),u()(),ge(),u()(),a(26,"div",3)(27,"jst-input",20),w("valueChange",function(n){g(i);let o=_();return y(o.element.controlProperties.suffixHint,n)||(o.element.controlProperties.suffixHint=n),f(n)}),u()()(),S(28,wo,4,6)(29,So,2,1,"div",9)(30,bo,12,6)(31,xo,5,2,"div",11)}if(r&2){let i,t=_();d(),p("clearButton",!0),D("value",t.element.controlProperties.bindDTO),d(),D("value",t.element.controlProperties.readonly),d(),D("value",t.element.controlProperties.required),d(2),D("value",t.element.controlProperties.clearButton),d(3),D("value",t.element.controlProperties.usePrefix),d(2),p("clearButton",!0)("disabledState",!t.element.controlProperties.usePrefix),D("value",t.element.controlProperties.prefixIcon),d(6),p("disabledState",!t.element.controlProperties.usePrefix)("clearButton",!0),D("value",t.element.controlProperties.prefixHint),d(3),D("value",t.element.controlProperties.useSuffix),d(2),p("clearButton",!0)("disabledState",!t.element.controlProperties.useSuffix),D("value",t.element.controlProperties.suffixIcon),d(6),p("disabledState",!t.element.controlProperties.useSuffix)("clearButton",!0),D("value",t.element.controlProperties.suffixHint),d(),b((i=t.element.controlType)===t.controlTypeEnum.Text?28:i===t.controlTypeEnum.List?29:i===t.controlTypeEnum.Number?30:i===t.controlTypeEnum.Datetime?31:-1)}}var En=(()=>{let e=class e{constructor(){this.disabledSubType=B(!0),this.subTypesList=B([]),this.controlTypeEnum=k,this.controlTypesList=[{value:k.Text,title:J.typeControlToString(k.Text)},{value:k.List,title:J.typeControlToString(k.List)},{value:k.Number,title:J.typeControlToString(k.Number)},{value:k.Datetime,title:J.typeControlToString(k.Datetime)},{value:k.Checkbox,title:J.typeControlToString(k.Checkbox)}],this.maskTypeList=[{value:te.Text,title:"\u041B\u044E\u0431\u043E\u0439 \u0442\u0435\u043A\u0441\u0442 (\u0438\u0441\u043A\u043B\u044E\u0447\u0430\u044F \u0441\u043F\u0435\u0446. \u0441\u0438\u043C\u0432\u043E\u043B\u044B)"},{value:te.Rus,title:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439 \u0442\u0435\u043A\u0441\u0442"},{value:te.Eng,title:"\u0410\u043D\u0433\u043B\u0438\u0439\u0441\u043A\u0438\u0439 \u0442\u0435\u043A\u0441\u0442"},{value:te.Ruseng,title:"\u0420\u0443\u0441\u0441\u043A\u043E-\u0430\u043D\u0433\u043B\u0438\u0439\u0441\u043A\u0438\u0439 \u0442\u0435\u043A\u0441\u0442"},{value:te.Number,title:"\u0422\u043E\u043B\u044C\u043A\u043E \u0446\u0438\u0444\u0440\u044B"},{value:te.Email,title:"Email"},{value:te.Phone,title:"\u0422\u0435\u043B\u0435\u0444\u043E\u043D"},{value:te.Custom,title:"\u0423\u043A\u0430\u0437\u0430\u0442\u044C \u0432\u0440\u0443\u0447\u043D\u0443\u044E"}],this.textSubTypesList=[{value:st.Textarea,title:"\u041C\u043D\u043E\u0433\u043E\u0441\u0442\u0440\u043E\u0447\u043D\u044B\u0439 \u0442\u0435\u043A\u0441\u0442"}]}get isDisabledCutomMask(){return this.element.controlProperties?.maskType!==te.Custom}get controlSubType(){switch(this.element.controlType){case k.Text:return this.element.controlProperties?.controlSubType??null}return null}set controlSubType(t){this.element.controlProperties&&(this.element.controlProperties.controlSubType=t)}ngOnInit(){this.onChangeControlType()}onChangeControlType(){switch(this.element.controlType){case k.Text:this.disabledSubType.set(!1),this.subTypesList.set(this.textSubTypesList);break;default:this.disabledSubType.set(!0),this.subTypesList.set([])}}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=E({type:e,selectors:[["control-settings"]],inputs:{element:"element"},decls:6,vars:7,consts:[[1,"flex-row"],[1,"flex-auto"],["label","\u0422\u0438\u043F \u043A\u043E\u043D\u0442\u0440\u043E\u043B\u0430",1,"mat-without-hint",3,"valueChange","changeEvent","options","value"],[1,"flex-auto","ml-10"],["label","\u041F\u043E\u0434\u0442\u0438\u043F \u043A\u043E\u043D\u0442\u0440\u043E\u043B\u0430",1,"mat-without-hint",3,"valueChange","disabledState","clearButton","options","value"],[1,"mt-16"],["label","\u041F\u0440\u0438\u0432\u044F\u0437\u043A\u0430 \u043A DTO",1,"mat-without-hint",3,"valueChange","clearButton","value"],["label","\u0422\u043E\u043B\u044C\u043A\u043E \u0434\u043B\u044F \u0447\u0442\u0435\u043D\u0438\u044F","trueTitle","\u0422\u043E\u043B\u044C\u043A\u043E \u0434\u043B\u044F \u0447\u0442\u0435\u043D\u0438\u044F","falseTitle","\u041E\u0442\u043A\u043B\u044E\u0447\u0435\u043D\u043E",3,"valueChange","value"],["label","\u041E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C \u0437\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F","trueTitle","\u041E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E","falseTitle","\u041E\u0442\u043A\u043B\u044E\u0447\u0435\u043D\u043E",3,"valueChange","value"],[1,"mt-10"],["label","\u0421\u043A\u0440\u044B\u0442\u044C/\u043F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u043A\u043D\u043E\u043F\u043A\u0443 \u043E\u0447\u0438\u0441\u0442\u043A\u0438 \u043A\u043E\u043D\u0442\u0440\u043E\u043B\u0430",3,"valueChange","value"],[1,"mt-10","flex-row-align-center"],[1,"nowrap"],["label","\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C \u043F\u0440\u0435\u0444\u0438\u043A\u0441",3,"valueChange","value"],["label","\u0418\u043A\u043E\u043D\u043A\u0430 \u043F\u0440\u0435\u0444\u0438\u043A\u0441\u0430",1,"mat-without-hint",3,"valueChange","clearButton","disabledState","value"],["JSTIconSuffix",""],["href","https://fonts.google.com/icons","target","=_blank"],["label","\u0425\u0438\u043D\u0442 \u043F\u0440\u0435\u0444\u0438\u043A\u0441\u0430",1,"mat-without-hint",3,"valueChange","disabledState","clearButton","value"],["label","\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C \u0441\u0443\u0444\u0444\u0438\u043A\u0441",3,"valueChange","value"],["label","\u0418\u043A\u043E\u043D\u043A\u0430 \u0441\u0443\u0444\u0444\u0438\u043A\u0441\u0430",1,"mat-without-hint",3,"valueChange","clearButton","disabledState","value"],["label","\u0425\u0438\u043D\u0442 \u0441\u0443\u0444\u0444\u0438\u043A\u0441\u0430",1,"mat-without-hint",3,"valueChange","disabledState","clearButton","value"],["label","\u041C\u0430\u0441\u043A\u0430 \u0432\u0432\u043E\u0434\u0430",1,"mat-without-hint",3,"valueChange","clearButton","options","value"],["label","\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u043C\u0430\u0441\u043A\u0443 \u0432\u0440\u0443\u0447\u043D\u044E",1,"mat-without-hint",3,"valueChange","clearButton","disabledState","value"],[3,"dataSourceChange","dataSource"],[1,"minmax-container"],["label","\u041C\u0438\u043D\u0438\u043C\u0430\u043B\u044C\u043D\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435",1,"mat-without-hint",3,"valueChange","value"],[1,"minmax-container","ml-10"],["label","\u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435",1,"mat-without-hint",3,"valueChange","value"],[1,"step-container","ml-10"],["label","\u0428\u0430\u0433",1,"mat-without-hint",3,"valueChange","value"],["label","\u0414\u0440\u043E\u0431\u043D\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435",3,"valueChange","value"],[1,"decimal-container","ml-10"],["label","\u041A\u043E\u043B-\u0432\u043E \u0447\u0438\u0441\u0435\u043B \u043F\u043E\u0441\u043B\u0435 \u0437\u0430\u043F\u044F\u0442\u043E\u0439",1,"mat-without-hint",3,"valueChange","disabledState","value"],["label","\u041C\u0438\u043D\u0438\u043C\u0430\u043B\u044C\u043D\u0430\u044F \u0434\u0430\u0442\u0430",1,"mat-without-hint",3,"valueChange","value"],["label","\u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u0430\u044F \u0434\u0430\u0442\u0430",1,"mat-without-hint",3,"valueChange","value"]],template:function(n,o){n&1&&(a(0,"div",0)(1,"div",1)(2,"jst-select",2),w("valueChange",function(l){return y(o.element.controlType,l)||(o.element.controlType=l),l}),C("changeEvent",function(){return o.onChangeControlType()}),u()(),a(3,"div",3)(4,"jst-select",4),w("valueChange",function(l){return y(o.controlSubType,l)||(o.controlSubType=l),l}),u()()(),S(5,To,32,20)),n&2&&(d(2),p("options",o.controlTypesList),D("value",o.element.controlType),d(2),p("disabledState",o.disabledSubType())("clearButton",!0)("options",o.subTypesList()),D("value",o.controlSubType),d(),b(o.element.controlProperties?5:-1))},dependencies:[me,V,M,U,Fe,z,nt,it,rt,ot,tt,et,on,nn,Me,vn,fn],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;margin-top:10px}.minmax-container[_ngcontent-%COMP%]{width:300px}.step-container[_ngcontent-%COMP%]{width:150px}.decimal-container[_ngcontent-%COMP%]{width:285px}.mt-16[_ngcontent-%COMP%]{margin-top:16px!important}"],changeDetection:0});let r=e;return r})();function On(r){let e=r.cloneNode(!0),i=e.querySelectorAll("[id]"),t=r.nodeName.toLowerCase();e.removeAttribute("id");for(let n=0;n<i.length;n++)i[n].removeAttribute("id");return t==="canvas"?wn(r,e):(t==="input"||t==="select"||t==="textarea")&&yn(r,e),Dn("canvas",r,e,wn),Dn("input, textarea, select",r,e,yn),e}function Dn(r,e,i,t){let n=e.querySelectorAll(r);if(n.length){let o=i.querySelectorAll(r);for(let s=0;s<n.length;s++)t(n[s],o[s])}}var Po=0;function yn(r,e){e.type!=="file"&&(e.value=r.value),e.type==="radio"&&e.name&&(e.name=`mat-clone-${e.name}-${Po++}`)}function wn(r,e){let i=e.getContext("2d");if(i)try{i.drawImage(r,0,0)}catch{}}function Wt(r){let e=r.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function Bt(r,e,i){let{top:t,bottom:n,left:o,right:s}=r;return i>=t&&i<=n&&e>=o&&e<=s}function Io(r,e){let i=e.left<r.left,t=e.left+e.width>r.right,n=e.top<r.top,o=e.top+e.height>r.bottom;return i||t||n||o}function Ue(r,e,i){r.top+=e,r.bottom=r.top+r.height,r.left+=i,r.right=r.left+r.width}function Sn(r,e,i,t){let{top:n,right:o,bottom:s,left:l,width:m,height:v}=r,x=m*e,W=v*e;return t>n-W&&t<s+W&&i>l-x&&i<o+x}var pt=class{_document;positions=new Map;constructor(e){this._document=e}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(i=>{this.positions.set(i,{scrollPosition:{top:i.scrollTop,left:i.scrollLeft},clientRect:Wt(i)})})}handleScroll(e){let i=We(e),t=this.positions.get(i);if(!t)return null;let n=t.scrollPosition,o,s;if(i===this._document){let v=this.getViewportScrollPosition();o=v.top,s=v.left}else o=i.scrollTop,s=i.scrollLeft;let l=n.top-o,m=n.left-s;return this.positions.forEach((v,x)=>{v.clientRect&&i!==x&&i.contains(x)&&Ue(v.clientRect,l,m)}),n.top=o,n.left=s,{top:l,left:m}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function An(r,e){let i=r.rootNodes;if(i.length===1&&i[0].nodeType===e.ELEMENT_NODE)return i[0];let t=e.createElement("div");return i.forEach(n=>t.appendChild(n)),t}function Ht(r,e,i){for(let t in e)if(e.hasOwnProperty(t)){let n=e[t];n?r.setProperty(t,n,i?.has(t)?"important":""):r.removeProperty(t)}return r}function ke(r,e){let i=e?"":"none";Ht(r.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":i,"-ms-user-select":i,"-webkit-user-select":i,"-moz-user-select":i})}function bn(r,e,i){Ht(r.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},i)}function ht(r,e){return e&&e!="none"?r+" "+e:r}function xn(r,e){r.style.width=`${e.width}px`,r.style.height=`${e.height}px`,r.style.transform=Je(e.left,e.top)}function Je(r,e){return`translate3d(${Math.round(r)}px, ${Math.round(e)}px, 0)`}function Tn(r){let e=r.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(r)*e}function Fo(r){let e=getComputedStyle(r),i=Mt(e,"transition-property"),t=i.find(l=>l==="transform"||l==="all");if(!t)return 0;let n=i.indexOf(t),o=Mt(e,"transition-duration"),s=Mt(e,"transition-delay");return Tn(o[n])+Tn(s[n])}function Mt(r,e){return r.getPropertyValue(e).split(",").map(t=>t.trim())}var Ro=new Set(["position"]),Ot=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(e,i,t,n,o,s,l,m,v,x){this._document=e,this._rootElement=i,this._direction=t,this._initialDomRect=n,this._previewTemplate=o,this._previewClass=s,this._pickupPositionOnPage=l,this._initialTransform=m,this._zIndex=v,this._renderer=x}attach(e){this._preview=this._createPreview(),e.appendChild(this._preview),Pn(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(e){this._preview.style.transform=e}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(e){this._preview.classList.add(e)}getTransitionDuration(){return Fo(this._preview)}addEventListener(e,i){return this._renderer.listen(this._preview,e,i)}_createPreview(){let e=this._previewTemplate,i=this._previewClass,t=e?e.template:null,n;if(t&&e){let o=e.matchSize?this._initialDomRect:null,s=e.viewContainer.createEmbeddedView(t,e.context);s.detectChanges(),n=An(s,this._document),this._previewEmbeddedView=s,e.matchSize?xn(n,o):n.style.transform=Je(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else n=On(this._rootElement),xn(n,this._initialDomRect),this._initialTransform&&(n.style.transform=this._initialTransform);return Ht(n.style,{"pointer-events":"none",margin:Pn(n)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},Ro),ke(n,!1),n.classList.add("cdk-drag-preview"),n.setAttribute("popover","manual"),n.setAttribute("dir",this._direction),i&&(Array.isArray(i)?i.forEach(o=>n.classList.add(o)):n.classList.add(i)),n}};function Pn(r){return"showPopover"in r}var Mo={passive:!0},In={passive:!1},ko={passive:!1,capture:!0},Bo=800,Fn=new Set(["position"]),At=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_anchor;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=B(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new I;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=Ce.EMPTY;_pointerUpSubscription=Ce.EMPTY;_scrollSubscription=Ce.EMPTY;_resizeSubscription=Ce.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(e){e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(i=>ke(i,e)))}_disabled=!1;beforeStarted=new I;started=new I;released=new I;ended=new I;entered=new I;exited=new I;dropped=new I;moved=this._moveEvents;data;constrainPosition;constructor(e,i,t,n,o,s,l){this._config=i,this._document=t,this._ngZone=n,this._viewportRuler=o,this._dragDropRegistry=s,this._renderer=l,this.withRootElement(e).withParent(i.parentDragRef||null),this._parentPositions=new pt(t),s.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(t=>ce(t)),this._handles.forEach(t=>ke(t,this.disabled)),this._toggleNativeDragInteractions();let i=new Set;return this._disabledHandles.forEach(t=>{this._handles.indexOf(t)>-1&&i.add(t)}),this._disabledHandles=i,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){let i=ce(e);if(i!==this._rootElement){this._removeRootElementListeners();let t=this._renderer;this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[t.listen(i,"mousedown",this._pointerDown,In),t.listen(i,"touchstart",this._pointerDown,Mo),t.listen(i,"dragstart",this._nativeDragStart,In)]),this._initialTransform=void 0,this._rootElement=i}return typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?ce(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}resetToBoundary(){if(this._boundaryElement&&this._rootElement&&Io(this._boundaryElement.getBoundingClientRect(),this._rootElement.getBoundingClientRect())){let e=this._boundaryElement.getBoundingClientRect(),i=this._rootElement.getBoundingClientRect(),t=0,n=0;i.left<e.left?t=e.left-i.left:i.right>e.right&&(t=e.right-i.right),i.top<e.top?n=e.top-i.top:i.bottom>e.bottom&&(n=e.bottom-i.bottom);let o=this._activeTransform.x,s=this._activeTransform.y,l=o+t,m=s+n;this._rootElement.style.transform=Je(l,m),this._activeTransform={x:l,y:m},this._passiveTransform={x:l,y:m}}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),ke(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),ke(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){let e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){let e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_pointerDown=e=>{if(this.beforeStarted.next(),this._handles.length){let i=this._getTargetHandle(e);i&&!this._disabledHandles.has(i)&&!this.disabled&&this._initializeDragSequence(i,e)}else this.disabled||this._initializeDragSequence(this._rootElement,e)};_pointerMove=e=>{let i=this._getPointerPositionOnPage(e);if(!this._hasStartedDragging()){let n=Math.abs(i.x-this._pickupPositionOnPage.x),o=Math.abs(i.y-this._pickupPositionOnPage.y);if(n+o>=this._config.dragStartThreshold){let l=Date.now()>=this._dragStartTime+this._getDragStartDelay(e),m=this._dropContainer;if(!l){this._endDragSequence(e);return}(!m||!m.isDragging()&&!m.isReceiving())&&(e.cancelable&&e.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(e)))}return}e.cancelable&&e.preventDefault();let t=this._getConstrainedPointerPosition(i);if(this._hasMoved=!0,this._lastKnownPointerPosition=i,this._updatePointerDirectionDelta(t),this._dropContainer)this._updateActiveDropContainer(t,i);else{let n=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,o=this._activeTransform;o.x=t.x-n.x+this._passiveTransform.x,o.y=t.y-n.y+this._passiveTransform.y,this._applyRootElementTransform(o.x,o.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:t,event:e,distance:this._getDragDistance(t),delta:this._pointerDirectionDelta})})};_pointerUp=e=>{this._endDragSequence(e)};_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let i=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(i),dropPoint:i,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){je(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let i=this._getShadowRoot(),t=this._dropContainer;if(i&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=this._renderer.listen(i,"selectstart",Oo,ko)}),t){let n=this._rootElement,o=n.parentNode,s=this._placeholder=this._createPlaceholderElement(),l=this._anchor=this._anchor||this._document.createComment("");o.insertBefore(l,n),this._initialTransform=n.style.transform||"",this._preview=new Ot(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(o,i)),bn(n,!1,Fn),this._document.body.appendChild(o.replaceChild(s,n)),this.started.next({source:this,event:e}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(e,i){this._parentDragRef&&i.stopPropagation();let t=this.isDragging(),n=je(i),o=!n&&i.button!==0,s=this._rootElement,l=We(i),m=!n&&this._lastTouchEventTime&&this._lastTouchEventTime+Bo>Date.now(),v=n?ki(i):Mi(i);if(l&&l.draggable&&i.type==="mousedown"&&i.preventDefault(),t||o||m||v)return;if(this._handles.length){let ne=s.style;this._rootElementTapHighlight=ne.webkitTapHighlightColor||"",ne.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(ne=>this._updateOnScroll(ne)),this._boundaryElement&&(this._boundaryRect=Wt(this._boundaryElement));let x=this._previewTemplate;this._pickupPositionInElement=x&&x.template&&!x.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,e,i);let W=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(i);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:W.x,y:W.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,i)}_cleanupDragArtifacts(e){bn(this._rootElement,!0,Fn),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let i=this._dropContainer,t=i.getItemIndex(this),n=this._getPointerPositionOnPage(e),o=this._getDragDistance(n),s=i._isOverContainer(n.x,n.y);this.ended.next({source:this,distance:o,dropPoint:n,event:e}),this.dropped.next({item:this,currentIndex:t,previousIndex:this._initialIndex,container:i,previousContainer:this._initialContainer,isPointerOverContainer:s,distance:o,dropPoint:n,event:e}),i.drop(this,t,this._initialIndex,this._initialContainer,s,o,n,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:i},{x:t,y:n}){let o=this._initialContainer._getSiblingContainerFromPosition(this,e,i);!o&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,i)&&(o=this._initialContainer),o&&o!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=o,this._dropContainer.enter(this,e,i,o===this._initialContainer&&o.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:o,currentIndex:o.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(t,n),this._dropContainer._sortItem(this,e,i,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,i):this._applyPreviewTransform(e-this._pickupPositionInElement.x,i-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let e=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);let i=this._preview.getTransitionDuration();return i===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(t=>{let n=l=>{(!l||this._preview&&We(l)===this._preview.element&&l.propertyName==="transform")&&(s(),t(),clearTimeout(o))},o=setTimeout(n,i*1.5),s=this._preview.addEventListener("transitionend",n)}))}_createPlaceholderElement(){let e=this._placeholderTemplate,i=e?e.template:null,t;return i?(this._placeholderRef=e.viewContainer.createEmbeddedView(i,e.context),this._placeholderRef.detectChanges(),t=An(this._placeholderRef,this._document)):t=On(this._rootElement),t.style.pointerEvents="none",t.classList.add("cdk-drag-placeholder"),t}_getPointerPositionInElement(e,i,t){let n=i===this._rootElement?null:i,o=n?n.getBoundingClientRect():e,s=je(t)?t.targetTouches[0]:t,l=this._getViewportScrollPosition(),m=s.pageX-o.left-l.left,v=s.pageY-o.top-l.top;return{x:o.left-e.left+m,y:o.top-e.top+v}}_getPointerPositionOnPage(e){let i=this._getViewportScrollPosition(),t=je(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,n=t.pageX-i.left,o=t.pageY-i.top;if(this._ownerSVGElement){let s=this._ownerSVGElement.getScreenCTM();if(s){let l=this._ownerSVGElement.createSVGPoint();return l.x=n,l.y=o,l.matrixTransform(s.inverse())}}return{x:n,y:o}}_getConstrainedPointerPosition(e){let i=this._dropContainer?this._dropContainer.lockAxis:null,{x:t,y:n}=this.constrainPosition?this.constrainPosition(e,this,this._initialDomRect,this._pickupPositionInElement):e;if(this.lockAxis==="x"||i==="x"?n=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||i==="y")&&(t=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:o,y:s}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,l=this._boundaryRect,{width:m,height:v}=this._getPreviewRect(),x=l.top+s,W=l.bottom-(v-s),ne=l.left+o,Et=l.right-(m-o);t=Rn(t,ne,Et),n=Rn(n,x,W)}return{x:t,y:n}}_updatePointerDirectionDelta(e){let{x:i,y:t}=e,n=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,s=Math.abs(i-o.x),l=Math.abs(t-o.y);return s>this._config.pointerDirectionChangeThreshold&&(n.x=i>o.x?1:-1,o.x=i),l>this._config.pointerDirectionChangeThreshold&&(n.y=t>o.y?1:-1,o.y=t),n}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,ke(this._rootElement,e))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(e=>e()),this._rootElementCleanups=void 0}_applyRootElementTransform(e,i){let t=1/this.scale,n=Je(e*t,i*t),o=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=o.transform&&o.transform!="none"?o.transform:""),o.transform=ht(n,this._initialTransform)}_applyPreviewTransform(e,i){let t=this._previewTemplate?.template?void 0:this._initialTransform,n=Je(e,i);this._preview.setTransform(ht(n,t))}_getDragDistance(e){let i=this._pickupPositionOnPage;return i?{x:e.x-i.x,y:e.y-i.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:i}=this._passiveTransform;if(e===0&&i===0||this.isDragging()||!this._boundaryElement)return;let t=this._rootElement.getBoundingClientRect(),n=this._boundaryElement.getBoundingClientRect();if(n.width===0&&n.height===0||t.width===0&&t.height===0)return;let o=n.left-t.left,s=t.right-n.right,l=n.top-t.top,m=t.bottom-n.bottom;n.width>t.width?(o>0&&(e+=o),s>0&&(e-=s)):e=0,n.height>t.height?(l>0&&(i+=l),m>0&&(i-=m)):i=0,(e!==this._passiveTransform.x||i!==this._passiveTransform.y)&&this.setFreeDragPosition({y:i,x:e})}_getDragStartDelay(e){let i=this.dragStartDelay;return typeof i=="number"?i:je(e)?i.touch:i?i.mouse:0}_updateOnScroll(e){let i=this._parentPositions.handleScroll(e);if(i){let t=We(e);this._boundaryRect&&t!==this._boundaryElement&&t.contains(this._boundaryElement)&&Ue(this._boundaryRect,i.top,i.left),this._pickupPositionOnPage.x+=i.left,this._pickupPositionOnPage.y+=i.top,this._dropContainer||(this._activeTransform.x-=i.left,this._activeTransform.y-=i.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=$e(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,i){let t=this._previewContainer||"global";if(t==="parent")return e;if(t==="global"){let n=this._document;return i||n.fullscreenElement||n.webkitFullscreenElement||n.mozFullScreenElement||n.msFullscreenElement||n.body}return ce(t)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=e=>{if(this._handles.length){let i=this._getTargetHandle(e);i&&!this._disabledHandles.has(i)&&!this.disabled&&e.preventDefault()}else this.disabled||e.preventDefault()};_getTargetHandle(e){return this._handles.find(i=>e.target&&(e.target===i||i.contains(e.target)))}};function Rn(r,e,i){return Math.max(e,Math.min(i,r))}function je(r){return r.type[0]==="t"}function Oo(r){r.preventDefault()}function gt(r,e,i){let t=Mn(e,r.length-1),n=Mn(i,r.length-1);if(t===n)return;let o=r[t],s=n<t?-1:1;for(let l=t;l!==n;l+=s)r[l]=r[l+s];r[n]=o}function Mn(r,e){return Math.max(0,Math.min(e,r))}var _t=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(e){this._dragDropRegistry=e}_previousSwap={drag:null,delta:0,overlaps:!1};start(e){this.withItems(e)}sort(e,i,t,n){let o=this._itemPositions,s=this._getItemIndexFromPointerPosition(e,i,t,n);if(s===-1&&o.length>0)return null;let l=this.orientation==="horizontal",m=o.findIndex(G=>G.drag===e),v=o[s],x=o[m].clientRect,W=v.clientRect,ne=m>s?1:-1,Et=this._getItemOffsetPx(x,W,ne),uo=this._getSiblingOffsetPx(m,o,ne),co=o.slice();return gt(o,m,s),o.forEach((G,mo)=>{if(co[mo]===G)return;let qt=G.drag===e,Dt=qt?Et:uo,Kt=qt?e.getPlaceholderElement():G.drag.getRootElement();G.offset+=Dt;let Yt=Math.round(G.offset*(1/G.drag.scale));l?(Kt.style.transform=ht(`translate3d(${Yt}px, 0, 0)`,G.initialTransform),Ue(G.clientRect,0,Dt)):(Kt.style.transform=ht(`translate3d(0, ${Yt}px, 0)`,G.initialTransform),Ue(G.clientRect,Dt,0))}),this._previousSwap.overlaps=Bt(W,i,t),this._previousSwap.drag=v.drag,this._previousSwap.delta=l?n.x:n.y,{previousIndex:m,currentIndex:s}}enter(e,i,t,n){let o=n==null||n<0?this._getItemIndexFromPointerPosition(e,i,t):n,s=this._activeDraggables,l=s.indexOf(e),m=e.getPlaceholderElement(),v=s[o];if(v===e&&(v=s[o+1]),!v&&(o==null||o===-1||o<s.length-1)&&this._shouldEnterAsFirstChild(i,t)&&(v=s[0]),l>-1&&s.splice(l,1),v&&!this._dragDropRegistry.isDragging(v)){let x=v.getRootElement();x.parentElement.insertBefore(m,x),s.splice(o,0,e)}else this._element.appendChild(m),s.push(e);m.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables?.forEach(e=>{let i=e.getRootElement();if(i){let t=this._itemPositions.find(n=>n.drag===e)?.initialTransform;i.style.transform=t||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return(this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions).findIndex(t=>t.drag===e)}updateOnScroll(e,i){this._itemPositions.forEach(({clientRect:t})=>{Ue(t,e,i)}),this._itemPositions.forEach(({drag:t})=>{this._dragDropRegistry.isDragging(t)&&t._sortFromLastPointerPosition()})}withElementContainer(e){this._element=e}_cacheItemPositions(){let e=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(i=>{let t=i.getVisibleElement();return{drag:i,offset:0,initialTransform:t.style.transform||"",clientRect:Wt(t)}}).sort((i,t)=>e?i.clientRect.left-t.clientRect.left:i.clientRect.top-t.clientRect.top)}_getItemOffsetPx(e,i,t){let n=this.orientation==="horizontal",o=n?i.left-e.left:i.top-e.top;return t===-1&&(o+=n?i.width-e.width:i.height-e.height),o}_getSiblingOffsetPx(e,i,t){let n=this.orientation==="horizontal",o=i[e].clientRect,s=i[e+t*-1],l=o[n?"width":"height"]*t;if(s){let m=n?"left":"top",v=n?"right":"bottom";t===-1?l-=s.clientRect[m]-o[v]:l+=o[m]-s.clientRect[v]}return l}_shouldEnterAsFirstChild(e,i){if(!this._activeDraggables.length)return!1;let t=this._itemPositions,n=this.orientation==="horizontal";if(t[0].drag!==this._activeDraggables[0]){let s=t[t.length-1].clientRect;return n?e>=s.right:i>=s.bottom}else{let s=t[0].clientRect;return n?e<=s.left:i<=s.top}}_getItemIndexFromPointerPosition(e,i,t,n){let o=this.orientation==="horizontal",s=this._itemPositions.findIndex(({drag:l,clientRect:m})=>{if(l===e)return!1;if(n){let v=o?n.x:n.y;if(l===this._previousSwap.drag&&this._previousSwap.overlaps&&v===this._previousSwap.delta)return!1}return o?i>=Math.floor(m.left)&&i<Math.floor(m.right):t>=Math.floor(m.top)&&t<Math.floor(m.bottom)});return s===-1||!this._sortPredicate(s,e)?-1:s}},Lt=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(e,i){this._document=e,this._dragDropRegistry=i}start(e){let i=this._element.childNodes;this._relatedNodes=[];for(let t=0;t<i.length;t++){let n=i[t];this._relatedNodes.push([n,n.nextSibling])}this.withItems(e)}sort(e,i,t,n){let o=this._getItemIndexFromPointerPosition(e,i,t),s=this._previousSwap;if(o===-1||this._activeItems[o]===e)return null;let l=this._activeItems[o];if(s.drag===l&&s.overlaps&&s.deltaX===n.x&&s.deltaY===n.y)return null;let m=this.getItemIndex(e),v=e.getPlaceholderElement(),x=l.getRootElement();o>m?x.after(v):x.before(v),gt(this._activeItems,m,o);let W=this._getRootNode().elementFromPoint(i,t);return s.deltaX=n.x,s.deltaY=n.y,s.drag=l,s.overlaps=x===W||x.contains(W),{previousIndex:m,currentIndex:o}}enter(e,i,t,n){let o=n==null||n<0?this._getItemIndexFromPointerPosition(e,i,t):n;o===-1&&(o=this._getClosestItemIndexToPointer(e,i,t));let s=this._activeItems[o],l=this._activeItems.indexOf(e);l>-1&&this._activeItems.splice(l,1),s&&!this._dragDropRegistry.isDragging(s)?(this._activeItems.splice(o,0,e),s.getRootElement().before(e.getPlaceholderElement())):(this._activeItems.push(e),this._element.appendChild(e.getPlaceholderElement()))}withItems(e){this._activeItems=e.slice()}withSortPredicate(e){this._sortPredicate=e}reset(){let e=this._element,i=this._previousSwap;for(let t=this._relatedNodes.length-1;t>-1;t--){let[n,o]=this._relatedNodes[t];n.parentNode===e&&n.nextSibling!==o&&(o===null?e.appendChild(n):o.parentNode===e&&e.insertBefore(n,o))}this._relatedNodes=[],this._activeItems=[],i.drag=null,i.deltaX=i.deltaY=0,i.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(e){return this._activeItems.indexOf(e)}updateOnScroll(){this._activeItems.forEach(e=>{this._dragDropRegistry.isDragging(e)&&e._sortFromLastPointerPosition()})}withElementContainer(e){e!==this._element&&(this._element=e,this._rootNode=void 0)}_getItemIndexFromPointerPosition(e,i,t){let n=this._getRootNode().elementFromPoint(Math.floor(i),Math.floor(t)),o=n?this._activeItems.findIndex(s=>{let l=s.getRootElement();return n===l||l.contains(n)}):-1;return o===-1||!this._sortPredicate(o,e)?-1:o}_getRootNode(){return this._rootNode||(this._rootNode=$e(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(e,i,t){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let n=1/0,o=-1;for(let s=0;s<this._activeItems.length;s++){let l=this._activeItems[s];if(l!==e){let{x:m,y:v}=l.getRootElement().getBoundingClientRect(),x=Math.hypot(i-m,t-v);x<n&&(n=x,o=s)}}return o}},kn=.05,Ln=.05,Z=function(r){return r[r.NONE=0]="NONE",r[r.UP=1]="UP",r[r.DOWN=2]="DOWN",r}(Z||{}),A=function(r){return r[r.NONE=0]="NONE",r[r.LEFT=1]="LEFT",r[r.RIGHT=2]="RIGHT",r}(A||{}),Vt=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis;autoScrollDisabled=!1;autoScrollStep=2;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new I;entered=new I;exited=new I;dropped=new I;sorted=new I;receivingStarted=new I;receivingStopped=new I;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=Ce.EMPTY;_verticalScrollDirection=Z.NONE;_horizontalScrollDirection=A.NONE;_scrollNode;_stopScrollTimers=new I;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(e,i,t,n,o){this._dragDropRegistry=i,this._ngZone=n,this._viewportRuler=o;let s=this.element=ce(e);this._document=t,this.withOrientation("vertical").withElementContainer(s),i.registerDropContainer(this),this._parentPositions=new pt(t)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,i,t,n){this._draggingStarted(),n==null&&this.sortingDisabled&&(n=this._draggables.indexOf(e)),this._sortStrategy.enter(e,i,t,n),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,i,t,n,o,s,l,m={}){this._reset(),this.dropped.next({item:e,currentIndex:i,previousIndex:t,container:this,previousContainer:n,isPointerOverContainer:o,distance:s,dropPoint:l,event:m})}withItems(e){let i=this._draggables;return this._draggables=e,e.forEach(t=>t._withDropContainer(this)),this.isDragging()&&(i.filter(n=>n.isDragging()).every(n=>e.indexOf(n)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._direction=e,this._sortStrategy instanceof _t&&(this._sortStrategy.direction=e),this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){if(e==="mixed")this._sortStrategy=new Lt(this._document,this._dragDropRegistry);else{let i=new _t(this._dragDropRegistry);i.direction=this._direction,i.orientation=e,this._sortStrategy=i}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((i,t)=>this.sortPredicate(i,t,this)),this}withScrollableParents(e){let i=this._container;return this._scrollableElements=e.indexOf(i)===-1?[i,...e]:e.slice(),this}withElementContainer(e){if(e===this._container)return this;let i=ce(this.element),t=this._scrollableElements.indexOf(this._container),n=this._scrollableElements.indexOf(e);return t>-1&&this._scrollableElements.splice(t,1),n>-1&&this._scrollableElements.splice(n,1),this._sortStrategy&&this._sortStrategy.withElementContainer(e),this._cachedShadowRoot=null,this._scrollableElements.unshift(e),this._container=e,this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,i,t,n){if(this.sortingDisabled||!this._domRect||!Sn(this._domRect,kn,i,t))return;let o=this._sortStrategy.sort(e,i,t,n);o&&this.sorted.next({previousIndex:o.previousIndex,currentIndex:o.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,i){if(this.autoScrollDisabled)return;let t,n=Z.NONE,o=A.NONE;if(this._parentPositions.positions.forEach((s,l)=>{l===this._document||!s.clientRect||t||Sn(s.clientRect,kn,e,i)&&([n,o]=Ao(l,s.clientRect,this._direction,e,i),(n||o)&&(t=l))}),!n&&!o){let{width:s,height:l}=this._viewportRuler.getViewportSize(),m={width:s,height:l,top:0,right:s,bottom:l,left:0};n=Vn(m,i),o=Nn(m,e),t=window}t&&(n!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||t!==this._scrollNode)&&(this._verticalScrollDirection=n,this._horizontalScrollDirection=o,this._scrollNode=t,(n||o)&&t?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let e=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let e=this._container.style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(i=>i._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),ei(0,Xt).pipe(Ae(this._stopScrollTimers)).subscribe(()=>{let e=this._scrollNode,i=this.autoScrollStep;this._verticalScrollDirection===Z.UP?e.scrollBy(0,-i):this._verticalScrollDirection===Z.DOWN&&e.scrollBy(0,i),this._horizontalScrollDirection===A.LEFT?e.scrollBy(-i,0):this._horizontalScrollDirection===A.RIGHT&&e.scrollBy(i,0)})};_isOverContainer(e,i){return this._domRect!=null&&Bt(this._domRect,e,i)}_getSiblingContainerFromPosition(e,i,t){return this._siblings.find(n=>n._canReceive(e,i,t))}_canReceive(e,i,t){if(!this._domRect||!Bt(this._domRect,i,t)||!this.enterPredicate(e,this))return!1;let n=this._getShadowRoot().elementFromPoint(i,t);return n?n===this._container||this._container.contains(n):!1}_startReceiving(e,i){let t=this._activeSiblings;!t.has(e)&&i.every(n=>this.enterPredicate(n,this)||this._draggables.indexOf(n)>-1)&&(t.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:i}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){let i=this._parentPositions.handleScroll(e);i&&this._sortStrategy.updateOnScroll(i.top,i.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let e=$e(this._container);this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let e=this._sortStrategy.getActiveItemsSnapshot().filter(i=>i.isDragging());this._siblings.forEach(i=>i._startReceiving(this,e))}};function Vn(r,e){let{top:i,bottom:t,height:n}=r,o=n*Ln;return e>=i-o&&e<=i+o?Z.UP:e>=t-o&&e<=t+o?Z.DOWN:Z.NONE}function Nn(r,e){let{left:i,right:t,width:n}=r,o=n*Ln;return e>=i-o&&e<=i+o?A.LEFT:e>=t-o&&e<=t+o?A.RIGHT:A.NONE}function Ao(r,e,i,t,n){let o=Vn(e,n),s=Nn(e,t),l=Z.NONE,m=A.NONE;if(o){let v=r.scrollTop;o===Z.UP?v>0&&(l=Z.UP):r.scrollHeight-v>r.clientHeight&&(l=Z.DOWN)}if(s){let v=r.scrollLeft;i==="rtl"?s===A.RIGHT?v<0&&(m=A.RIGHT):r.scrollWidth+v>r.clientWidth&&(m=A.LEFT):s===A.LEFT?v>0&&(m=A.LEFT):r.scrollWidth-v>r.clientWidth&&(m=A.RIGHT)}return[l,m]}var ze={capture:!0},kt={passive:!1,capture:!0},Lo=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=E({type:r,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(t,n){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return r})(),Gt=(()=>{class r{_ngZone=h(Ke);_document=h(he);_styleLoader=h(Oi);_renderer=h(St).createRenderer(null,null);_cleanupDocumentTouchmove;_scroll=new I;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=B([]);_globalListeners;_draggingPredicate=i=>i.isDragging();_domNodesToDirectives=null;pointerMove=new I;pointerUp=new I;constructor(){}registerDropContainer(i){this._dropInstances.has(i)||this._dropInstances.add(i)}registerDragItem(i){this._dragInstances.add(i),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=this._renderer.listen(this._document,"touchmove",this._persistentTouchmoveListener,kt)})}removeDropContainer(i){this._dropInstances.delete(i)}removeDragItem(i){this._dragInstances.delete(i),this.stopDragging(i),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(i,t){if(!(this._activeDragInstances().indexOf(i)>-1)&&(this._styleLoader.load(Lo),this._activeDragInstances.update(n=>[...n,i]),this._activeDragInstances().length===1)){let n=t.type.startsWith("touch"),o=l=>this.pointerUp.next(l),s=[["scroll",l=>this._scroll.next(l),ze],["selectstart",this._preventDefaultWhileDragging,kt]];n?s.push(["touchend",o,ze],["touchcancel",o,ze]):s.push(["mouseup",o,ze]),n||s.push(["mousemove",l=>this.pointerMove.next(l),kt]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=s.map(([l,m,v])=>this._renderer.listen(this._document,l,m,v))})}}stopDragging(i){this._activeDragInstances.update(t=>{let n=t.indexOf(i);return n>-1?(t.splice(n,1),[...t]):t}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(i){return this._activeDragInstances().indexOf(i)>-1}scrolled(i){let t=[this._scroll];return i&&i!==this._document&&t.push(new yt(n=>this._ngZone.runOutsideAngular(()=>{let o=this._renderer.listen(i,"scroll",s=>{this._activeDragInstances().length&&n.next(s)},ze);return()=>{o()}}))),qe(...t)}registerDirectiveNode(i,t){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(i,t)}removeDirectiveNode(i){this._domNodesToDirectives?.delete(i)}getDragDirectiveForNode(i){return this._domNodesToDirectives?.get(i)||null}ngOnDestroy(){this._dragInstances.forEach(i=>this.removeDragItem(i)),this._dropInstances.forEach(i=>this.removeDropContainer(i)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=i=>{this._activeDragInstances().length>0&&i.preventDefault()};_persistentTouchmoveListener=i=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&i.preventDefault(),this.pointerMove.next(i))};_clearGlobalListeners(){this._globalListeners?.forEach(i=>i()),this._globalListeners=void 0}static \u0275fac=function(t){return new(t||r)};static \u0275prov=Le({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Vo={dragStartThreshold:5,pointerDirectionChangeThreshold:5},jt=(()=>{class r{_document=h(he);_ngZone=h(Ke);_viewportRuler=h(Hi);_dragDropRegistry=h(Gt);_renderer=h(St).createRenderer(null,null);constructor(){}createDrag(i,t=Vo){return new At(i,t,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(i){return new Vt(i,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=Le({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Nt=new Ee("CDK_DRAG_PARENT");var Wn=new Ee("CdkDragHandle"),Hn=(()=>{class r{element=h(L);_parentDrag=h(Nt,{optional:!0,skipSelf:!0});_dragDropRegistry=h(Gt);_stateChanges=new I;get disabled(){return this._disabled}set disabled(i){this._disabled=i,this._stateChanges.next(this)}_disabled=!1;constructor(){this._parentDrag?._addHandle(this)}ngAfterViewInit(){if(!this._parentDrag){let i=this.element.nativeElement.parentElement;for(;i;){let t=this._dragDropRegistry.getDragDirectiveForNode(i);if(t){this._parentDrag=t,t._addHandle(this);break}i=i.parentElement}}}ngOnDestroy(){this._parentDrag?._removeHandle(this),this._stateChanges.complete()}static \u0275fac=function(t){return new(t||r)};static \u0275dir=le({type:r,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:[2,"cdkDragHandleDisabled","disabled",xe]},features:[be([{provide:Wn,useExisting:r}])]})}return r})(),Gn=new Ee("CDK_DRAG_CONFIG"),jn=new Ee("CdkDropList"),zn=(()=>{class r{element=h(L);dropContainer=h(jn,{optional:!0,skipSelf:!0});_ngZone=h(Ke);_viewContainerRef=h(li);_dir=h(Tt,{optional:!0});_changeDetectorRef=h(Ne);_selfHandle=h(Wn,{optional:!0,self:!0});_parentDrag=h(Nt,{optional:!0,skipSelf:!0});_dragDropRegistry=h(Gt);_destroyed=new I;_handles=new Qt([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(i){this._disabled=i,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new R;released=new R;ended=new R;entered=new R;exited=new R;dropped=new R;moved=new yt(i=>{let t=this._dragRef.moved.pipe($t(n=>({source:this,pointerPosition:n.pointerPosition,event:n.event,delta:n.delta,distance:n.distance}))).subscribe(i);return()=>{t.unsubscribe()}});_injector=h(ri);constructor(){let i=this.dropContainer,t=h(Gn,{optional:!0}),n=h(jt);this._dragRef=n.createDrag(this.element,{dragStartThreshold:t&&t.dragStartThreshold!=null?t.dragStartThreshold:5,pointerDirectionChangeThreshold:t&&t.pointerDirectionChangeThreshold!=null?t.pointerDirectionChangeThreshold:5,zIndex:t?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),t&&this._assignDefaults(t),i&&(this._dragRef._withDropContainer(i._dropListRef),i.addItem(this),i._dropListRef.beforeStarted.pipe(Ae(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}resetToBoundary(){this._dragRef.resetToBoundary()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(i){this._dragRef.setFreeDragPosition(i)}ngAfterViewInit(){ci(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(i){let t=i.rootElementSelector,n=i.freeDragPosition;t&&!t.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,n&&!n.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(i){let t=this._handles.getValue();t.push(i),this._handles.next(t)}_removeHandle(i){let t=this._handles.getValue(),n=t.indexOf(i);n>-1&&(t.splice(n,1),this._handles.next(t))}_setPreviewTemplate(i){this._previewTemplate=i}_resetPreviewTemplate(i){i===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(i){this._placeholderTemplate=i}_resetPlaceholderTemplate(i){i===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let i=this.element.nativeElement,t=i;this.rootElementSelector&&(t=i.closest!==void 0?i.closest(this.rootElementSelector):i.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(t||i)}_getBoundaryElement(){let i=this.boundaryElement;return i?typeof i=="string"?this.element.nativeElement.closest(i):ce(i):null}_syncInputs(i){i.beforeStarted.subscribe(()=>{if(!i.isDragging()){let t=this._dir,n=this.dragStartDelay,o=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,s=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;i.disabled=this.disabled,i.lockAxis=this.lockAxis,i.scale=this.scale,i.dragStartDelay=typeof n=="object"&&n?n:xt(n),i.constrainPosition=this.constrainPosition,i.previewClass=this.previewClass,i.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(o).withPreviewTemplate(s).withPreviewContainer(this.previewContainer||"global"),t&&i.withDirection(t.value)}}),i.beforeStarted.pipe(ti(1)).subscribe(()=>{if(this._parentDrag){i.withParent(this._parentDrag._dragRef);return}let t=this.element.nativeElement.parentElement;for(;t;){let n=this._dragDropRegistry.getDragDirectiveForNode(t);if(n){i.withParent(n._dragRef);break}t=t.parentElement}})}_handleEvents(i){i.started.subscribe(t=>{this.started.emit({source:this,event:t.event}),this._changeDetectorRef.markForCheck()}),i.released.subscribe(t=>{this.released.emit({source:this,event:t.event})}),i.ended.subscribe(t=>{this.ended.emit({source:this,distance:t.distance,dropPoint:t.dropPoint,event:t.event}),this._changeDetectorRef.markForCheck()}),i.entered.subscribe(t=>{this.entered.emit({container:t.container.data,item:this,currentIndex:t.currentIndex})}),i.exited.subscribe(t=>{this.exited.emit({container:t.container.data,item:this})}),i.dropped.subscribe(t=>{this.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,isPointerOverContainer:t.isPointerOverContainer,item:this,distance:t.distance,dropPoint:t.dropPoint,event:t.event})})}_assignDefaults(i){let{lockAxis:t,dragStartDelay:n,constrainPosition:o,previewClass:s,boundaryElement:l,draggingDisabled:m,rootElementSelector:v,previewContainer:x}=i;this.disabled=m??!1,this.dragStartDelay=n||0,t&&(this.lockAxis=t),o&&(this.constrainPosition=o),s&&(this.previewClass=s),l&&(this.boundaryElement=l),v&&(this.rootElementSelector=v),x&&(this.previewContainer=x)}_setupHandlesListener(){this._handles.pipe(ni(i=>{let t=i.map(n=>n.element);this._selfHandle&&this.rootElementSelector&&t.push(this.element),this._dragRef.withHandles(t)}),ii(i=>qe(...i.map(t=>t._stateChanges.pipe(wt(t))))),Ae(this._destroyed)).subscribe(i=>{let t=this._dragRef,n=i.element.nativeElement;i.disabled?t.disableHandle(n):t.enableHandle(n)})}static \u0275fac=function(t){return new(t||r)};static \u0275dir=le({type:r,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,n){t&2&&j("cdk-drag-disabled",n.disabled)("cdk-drag-dragging",n._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",xe],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",fi]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[be([{provide:Nt,useExisting:r}]),ae]})}return r})(),Bn=new Ee("CdkDropListGroup");var Un=(()=>{class r{element=h(L);_changeDetectorRef=h(Ne);_scrollDispatcher=h(Wi);_dir=h(Tt,{optional:!0});_group=h(Bn,{optional:!0,skipSelf:!0});_latestSortedRefs;_destroyed=new I;_scrollableParentsResolved;static _dropLists=[];_dropListRef;connectedTo=[];data;orientation;id=h(Li).getId("cdk-drop-list-");lockAxis;get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(i){this._dropListRef.disabled=this._disabled=i}_disabled;sortingDisabled;enterPredicate=()=>!0;sortPredicate=()=>!0;autoScrollDisabled;autoScrollStep;elementContainerSelector;dropped=new R;entered=new R;exited=new R;sorted=new R;_unsortedItems=new Set;constructor(){let i=h(jt),t=h(Gn,{optional:!0});this._dropListRef=i.createDropList(this.element),this._dropListRef.data=this,t&&this._assignDefaults(t),this._dropListRef.enterPredicate=(n,o)=>this.enterPredicate(n.data,o.data),this._dropListRef.sortPredicate=(n,o,s)=>this.sortPredicate(n,o.data,s.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),r._dropLists.push(this),this._group&&this._group._items.add(this)}addItem(i){this._unsortedItems.add(i),this._dropListRef.isDragging()&&this._syncItemsWithRef(this.getSortedItems().map(t=>t._dragRef))}removeItem(i){if(this._unsortedItems.delete(i),this._latestSortedRefs){let t=this._latestSortedRefs.indexOf(i._dragRef);t>-1&&(this._latestSortedRefs.splice(t,1),this._syncItemsWithRef(this._latestSortedRefs))}}getSortedItems(){return Array.from(this._unsortedItems).sort((i,t)=>i._dragRef.getVisibleElement().compareDocumentPosition(t._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let i=r._dropLists.indexOf(this);i>-1&&r._dropLists.splice(i,1),this._group&&this._group._items.delete(this),this._latestSortedRefs=void 0,this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(i){this._dir&&this._dir.change.pipe(wt(this._dir.value),Ae(this._destroyed)).subscribe(t=>i.withDirection(t)),i.beforeStarted.subscribe(()=>{let t=Ai(this.connectedTo).map(n=>{if(typeof n=="string"){let o=r._dropLists.find(s=>s.id===n);return o}return n});if(this._group&&this._group._items.forEach(n=>{t.indexOf(n)===-1&&t.push(n)}),!this._scrollableParentsResolved){let n=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(o=>o.getElementRef().nativeElement);this._dropListRef.withScrollableParents(n),this._scrollableParentsResolved=!0}if(this.elementContainerSelector){let n=this.element.nativeElement.querySelector(this.elementContainerSelector);i.withElementContainer(n)}i.disabled=this.disabled,i.lockAxis=this.lockAxis,i.sortingDisabled=this.sortingDisabled,i.autoScrollDisabled=this.autoScrollDisabled,i.autoScrollStep=xt(this.autoScrollStep,2),i.connectedTo(t.filter(n=>n&&n!==this).map(n=>n._dropListRef)).withOrientation(this.orientation)})}_handleEvents(i){i.beforeStarted.subscribe(()=>{this._syncItemsWithRef(this.getSortedItems().map(t=>t._dragRef)),this._changeDetectorRef.markForCheck()}),i.entered.subscribe(t=>{this.entered.emit({container:this,item:t.item.data,currentIndex:t.currentIndex})}),i.exited.subscribe(t=>{this.exited.emit({container:this,item:t.item.data}),this._changeDetectorRef.markForCheck()}),i.sorted.subscribe(t=>{this.sorted.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,container:this,item:t.item.data})}),i.dropped.subscribe(t=>{this.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,item:t.item.data,isPointerOverContainer:t.isPointerOverContainer,distance:t.distance,dropPoint:t.dropPoint,event:t.event}),this._changeDetectorRef.markForCheck()}),qe(i.receivingStarted,i.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(i){let{lockAxis:t,draggingDisabled:n,sortingDisabled:o,listAutoScrollDisabled:s,listOrientation:l}=i;this.disabled=n??!1,this.sortingDisabled=o??!1,this.autoScrollDisabled=s??!1,this.orientation=l||"vertical",t&&(this.lockAxis=t)}_syncItemsWithRef(i){this._latestSortedRefs=i,this._dropListRef.withItems(i)}static \u0275fac=function(t){return new(t||r)};static \u0275dir=le({type:r,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(t,n){t&2&&(Ye("id",n.id),j("cdk-drop-list-disabled",n.disabled)("cdk-drop-list-dragging",n._dropListRef.isDragging())("cdk-drop-list-receiving",n._dropListRef.isReceiving()))},inputs:{connectedTo:[0,"cdkDropListConnectedTo","connectedTo"],data:[0,"cdkDropListData","data"],orientation:[0,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[0,"cdkDropListLockAxis","lockAxis"],disabled:[2,"cdkDropListDisabled","disabled",xe],sortingDisabled:[2,"cdkDropListSortingDisabled","sortingDisabled",xe],enterPredicate:[0,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[0,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[2,"cdkDropListAutoScrollDisabled","autoScrollDisabled",xe],autoScrollStep:[0,"cdkDropListAutoScrollStep","autoScrollStep"],elementContainerSelector:[0,"cdkDropListElementContainer","elementContainerSelector"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[be([{provide:Bn,useValue:void 0},{provide:jn,useExisting:r}])]})}return r})();var Jn=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=De({type:r});static \u0275inj=ve({providers:[jt],imports:[Gi]})}return r})();var Wo=(r,e)=>e.guid;function Ho(r,e){if(r&1){let i=T();a(0,"div",5)(1,"div",7)(2,"mat-icon",8),c(3,"open_with"),u(),a(4,"div",9)(5,"jst-input",10),w("valueChange",function(n){let o=g(i).$implicit;return y(o.label,n)||(o.label=n),f(n)}),u()(),a(6,"button",11),C("click",function(){let n=g(i).$index,o=_();return f(o.onRemoveTab(n))}),a(7,"mat-icon"),c(8,"delete"),u()()(),a(9,"true-false-cond",12),w("valueChange",function(n){let o=g(i).$implicit;return y(o.visible,n)||(o.visible=n),f(n)}),u()()}if(r&2){let i=e.$implicit;d(5),D("value",i.label),d(4),D("value",i.visible)}}function Go(r,e){r&1&&(a(0,"div",6),c(1,"\u041D\u0435\u0442 \u0432\u043A\u043B\u0430\u0434\u043E\u043A"),u())}var Zn=(()=>{let e=class e{onRemoveTab(t){this.element.children?.splice(t,1)}onAddTab(){Array.isArray(this.element.children)&&this.element.children.push(J.getEmptyElement(Q.Tab))}onDropListDropped(t){t.previousContainer===t.container&&gt(t.container.data,t.previousIndex,t.currentIndex)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=E({type:e,selectors:[["tabs-settings"]],inputs:{element:"element"},decls:9,vars:2,consts:[[1,"flex-justify-end"],["mat-raised-button","","color","primary",3,"click"],[1,"scroll-container","mt-10"],[1,"scroll"],["cdkDropList","","cdkDropListOrientation","vertical",1,"flex-auto","flex-col","mt-10",3,"cdkDropListDropped","cdkDropListData"],["cdkDrag","",1,"tab-container"],[1,"empty-message"],[1,"flex-row-align-center"],["title","\u041F\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u044C \u0432\u043A\u043B\u0430\u0434\u043A\u0443","cdkDragHandle","",1,"icon-drag"],[1,"flex-auto","ml-10","mt-5"],["label","\u0417\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A \u0432\u043A\u043B\u0430\u0434\u043A\u0438",1,"mat-without-hint",3,"valueChange","value"],["mat-icon-button","","color","accent","title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u043A\u043B\u0430\u0434\u043A\u0443",1,"ml-10",3,"click"],["label","\u0412\u0438\u0434\u0438\u043C\u043E\u0441\u0442\u044C \u0432\u043A\u043B\u0430\u0434\u043A\u0438","trueTitle","\u0412\u0438\u0434\u0438\u043C\u0430\u044F","falseTitle","\u041D\u0435\u0432\u0438\u0434\u0438\u043C\u0430\u044F",3,"valueChange","value"]],template:function(n,o){n&1&&(a(0,"div",0)(1,"button",1),C("click",function(){return o.onAddTab()}),c(2,"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432\u043A\u043B\u0430\u0434\u043A\u0443"),u()(),a(3,"div",2)(4,"div",3)(5,"div",4),C("cdkDropListDropped",function(l){return o.onDropListDropped(l)}),q(6,Ho,10,2,"div",5,Wo,!1,Go,2,0,"div",6),u()()()),n&2&&(d(5),p("cdkDropListData",o.element.children),d(),K(o.element.children))},dependencies:[Ci,Jn,Un,zn,Hn,V,M,N,ee,$,me,U,z,Me],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}.tab-container[_ngcontent-%COMP%]{padding:10px;border:1px solid rgb(229,229,229);margin-top:10px}.tab-container[_ngcontent-%COMP%]:first-child{margin-top:0}.mt-5[_ngcontent-%COMP%]{margin-top:5px!important}"],changeDetection:0});let r=e;return r})();function zo(r,e){if(r&1&&(a(0,"mat-tab",2)(1,"div",5)(2,"div",6)(3,"div",7),P(4,"common-settings",8),a(5,"div",9)(6,"p"),c(7,"\u041F\u0430\u043C\u044F\u0442\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0434\u0430\u043D\u0438\u0438 \u0443\u0441\u043B\u043E\u0432\u0438\u0439."),u(),a(8,"ul")(9,"li"),c(10," \u041F\u0440\u0438 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u0438 DTO \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u043E\u0432 \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0432 \u043D\u0430\u0447\u0430\u043B\u0435 \u0443\u043A\u0430\u0437\u0430\u0442\u044C $, \u0430 \u0432 \u043A\u043E\u043D\u0446\u0435 \u0434\u043E\u043B\u0436\u0435\u043D \u0431\u044B\u0442\u044C \u043F\u0440\u043E\u0431\u0435\u043B, \u043D\u0430\u043F\u0440\u0438\u043C\u0435\u0440, $fio == 122 "),u(),a(11,"li"),c(12," \u041F\u0440\u0438 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u0438 \u0438\u0434\u0435\u043D\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u043E\u0440\u043E\u0432 \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0432 \u043D\u0430\u0447\u0430\u043B\u0435 \u0443\u043A\u0430\u0437\u0430\u0442\u044C ^, \u0430 \u0432 \u043A\u043E\u043D\u0446\u0435 \u0434\u043E\u043B\u0436\u0435\u043D \u0431\u044B\u0442\u044C \u043F\u0440\u043E\u0431\u0435\u043B, \u043D\u0430\u043F\u0440\u0438\u043C\u0435\u0440, ^MyId == 122 "),u(),a(13,"li"),c(14," \u041F\u0440\u0438 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u0438 \u043A\u043E\u043D\u0441\u0442\u0430\u043D\u0442 \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0432 \u043D\u0430\u0447\u0430\u043B\u0435 \u0443\u043A\u0430\u0437\u0430\u0442\u044C #, \u0430 \u0432 \u043A\u043E\u043D\u0446\u0435 \u0434\u043E\u043B\u0436\u0435\u043D \u0431\u044B\u0442\u044C \u043F\u0440\u043E\u0431\u0435\u043B, \u043D\u0430\u043F\u0440\u0438\u043C\u0435\u0440, $fio == #PI_VALUE "),u(),a(15,"li"),c(16,"\u0414\u043B\u044F \u0441\u0440\u0430\u0432\u043D\u0435\u043D\u0438\u044F \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C =="),u(),a(17,"li"),c(18,"\u0414\u043B\u044F \u043E\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043B\u044C\u043D\u043E\u0433\u043E \u0441\u0440\u0430\u0432\u043D\u0435\u043D\u0438\u044F !="),u(),a(19,"li"),c(20,"\u041E\u0431\u044A\u0435\u0434\u0438\u043D\u0435\u043D\u0438\u0435 \u0443\u0441\u043B\u043E\u0432\u0438\u0439: & (\u0438) \u0438 | (\u0438\u043B\u0438)"),u()()()()()()()),r&2){let i=_();d(4),p("element",i.element)}}function Uo(r,e){if(r&1&&(a(0,"mat-tab",3)(1,"div",5)(2,"div",6)(3,"div",7),P(4,"control-settings",8),u()()()()),r&2){let i=_();d(4),p("element",i.element)}}function Jo(r,e){if(r&1&&(a(0,"mat-tab",4)(1,"div",5),P(2,"tabs-settings",10),u()()),r&2){let i=_();d(2),p("element",i.element)}}var qn=(()=>{let e=class e extends an{constructor(){super(...arguments),this.tabIndex=0,this.elementTypeEnum=Q}ngOnChanges(){this.tabIndex=0}getSettingsTitle(){return`\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430 "${J.typeElementToString(this.element)}"`}onApply(){this.closePanel(this.element)}onClose(){this.closePanel(null)}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=si(e)))(o||e)}})(),e.\u0275cmp=E({type:e,selectors:[["element-settings"]],inputs:{element:"element"},features:[ui,ae],decls:5,vars:5,consts:[[1,"flex-auto",3,"closeEvent","applyEvent","title"],[1,"flex-auto","tabs-panel-container",3,"selectedIndexChange","selectedIndex"],["label","\u041E\u0431\u0449\u0435\u0435"],["label","\u041A\u043E\u043D\u0442\u0440\u043E\u043B"],["label","\u0412\u043A\u043B\u0430\u0434\u043A\u0438"],[1,"tab-content"],[1,"scroll-container"],[1,"scroll"],[3,"element"],[1,"warning-block","mt-10"],[1,"flex-auto",3,"element"]],template:function(n,o){n&1&&(a(0,"panel-container",0),C("closeEvent",function(){return o.onClose()})("applyEvent",function(){return o.onApply()}),a(1,"mat-tab-group",1),w("selectedIndexChange",function(l){return y(o.tabIndex,l)||(o.tabIndex=l),l}),S(2,zo,21,1,"mat-tab",2),S(3,Uo,5,1,"mat-tab",3),S(4,Jo,3,1,"mat-tab",4),u()()),n&2&&(p("title",o.getSettingsTitle()),d(),D("selectedIndex",o.tabIndex),d(),b(o.element?2:-1),d(),b(o.element&&o.element.type===o.elementTypeEnum.Control?3:-1),d(),b(o.element&&o.element.type===o.elementTypeEnum.Tabs?4:-1))},dependencies:[dt,ut,ct,N,ln,pn,En,Zn],styles:["[_nghost-%COMP%]{flex:auto;display:flex;flex-direction:column;width:800px}.tab-content[_ngcontent-%COMP%]{flex:auto;display:flex;flex-direction:column;padding:16px}"],changeDetection:0});let r=e;return r})();var ft=(()=>{class r{get vertical(){return this._vertical}set vertical(i){this._vertical=Pt(i)}_vertical=!1;get inset(){return this._inset}set inset(i){this._inset=Pt(i)}_inset=!1;static \u0275fac=function(t){return new(t||r)};static \u0275cmp=E({type:r,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(t,n){t&2&&(Ye("aria-orientation",n.vertical?"vertical":"horizontal"),j("mat-divider-vertical",n.vertical)("mat-divider-horizontal",!n.vertical)("mat-divider-inset",n.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(t,n){},styles:[`.mat-divider{display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color, var(--mat-sys-outline));border-top-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color, var(--mat-sys-outline));border-right-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}
`],encapsulation:2,changeDetection:0})}return r})(),Kn=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=De({type:r});static \u0275inj=ve({imports:[It,It]})}return r})();var Ze="uf-dragging",zt="uf-not-dragging",Ct="is-can-drag";var Be=(()=>{let e=class e{constructor(){this.elementRef=h(L),this.document=h(he),this.currentFormStore=h(ie),this.platform=h(Bi)}onDrop(t){this.removeDragClass();let n=this.getTransferData(t);n&&(t.preventDefault(),this.document.body.classList.remove(Ze),n.type==="row"&&this.dropInfo.mode==="row"?this.currentFormStore.moveRow(n.parentGuid,n.idx,this.dropInfo.parentGuid,this.dropInfo.type==="push"?-1:this.dropInfo.idx):n.type==="element"&&(this.dropInfo.mode==="row"?this.currentFormStore.moveElement(String(n.parentGuid),n.idx,this.dropInfo.parentGuid,this.dropInfo.type==="push"?this.dropInfo.idx+1:this.dropInfo.idx,!0):this.currentFormStore.moveElement(String(n.parentGuid),n.idx,this.dropInfo.parentGuid,this.dropInfo.type==="before"?this.dropInfo.idx:this.dropInfo.idx+1)))}onDragEnd(t){this.platform.FIREFOX?this.getTransferData(t)&&t.preventDefault():t.preventDefault()}onDragEnter(t){this.platform.FIREFOX?this.getTransferData(t)&&this.elementRef.nativeElement.classList.add(Ct):this.elementRef.nativeElement.classList.add(Ct)}onDragLeave(){this.removeDragClass()}removeDragClass(){this.elementRef.nativeElement.classList.remove(Ct)}getTransferData(t){let n=t.dataTransfer;if(n){let o=n.getData("text/plain");try{let s=JSON.parse(o);if(s.type==="row"&&this.dropInfo.mode==="element")return null;if(this.dropInfo.parentGuid===s.parentGuid)switch(s.type){case"row":return this.dropInfo.idx===-1||this.dropInfo.idx<s.idx||this.dropInfo.idx-s.idx>1?s:null;case"element":if(s.idx-1===this.dropInfo.idx&&this.dropInfo.type==="after"||s.idx+1===this.dropInfo.idx&&this.dropInfo.type==="before")return null;break}return s}catch{}}return null}};e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=le({type:e,selectors:[["","ufDrop",""]],hostBindings:function(n,o){n&1&&C("drop",function(l){return o.onDrop(l)})("dragover",function(l){return o.onDragEnd(l)})("dragenter",function(l){return o.onDragEnter(l)})("dragleave",function(){return o.onDragLeave()})},inputs:{dropInfo:[0,"ufDrop","dropInfo"]},standalone:!1});let r=e;return r})();var Zo=(r,e)=>({mode:"element",type:"after",idx:r,parentGuid:e}),qo=(r,e)=>({mode:"element",type:"before",idx:r,parentGuid:e});function Ko(r,e){r&1&&(a(0,"mat-icon"),c(1,"remove"),u())}function Yo(r,e){r&1&&(a(0,"mat-icon"),c(1,"check_box_outline_blank"),u())}function Qo(r,e){r&1&&(a(0,"mat-icon"),c(1,"add"),u())}function Xo(r,e){r&1&&(a(0,"mat-icon"),c(1,"arrow_drop_down"),u())}function $o(r,e){r&1&&(a(0,"mat-icon"),c(1,"close"),u())}function er(r,e){r&1&&(a(0,"mat-icon"),c(1,"date_range"),u())}var Xn=(()=>{let e=class e{constructor(){this.idx=0,this.rowGuid="unknown",this.guid="unknown",this.type=null,this.label="",this.clearButton=!1,this.controlTypeEnum=k,this.elementRef=h(L)}get isWithoutBorder(){return this.type===k.Checkbox}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=E({type:e,selectors:[["form-control"]],hostVars:2,hostBindings:function(n,o){n&2&&j("without-border",o.isWithoutBorder)},inputs:{idx:"idx",rowGuid:"rowGuid",guid:"guid",element:"element",type:"type",label:"label",clearButton:"clearButton"},standalone:!1,decls:10,vars:15,consts:[[1,"drop-element-container","drop-element-right",3,"ufDrop"],[1,"drop-element-container","drop-element-left",3,"ufDrop"],[1,"flex-auto","ml-10"]],template:function(n,o){n&1&&(P(0,"div",0)(1,"div",1),S(2,Ko,2,0,"mat-icon"),S(3,Yo,2,0,"mat-icon"),a(4,"div",2),c(5),u(),S(6,Qo,2,0,"mat-icon"),S(7,Xo,2,0,"mat-icon"),S(8,$o,2,0,"mat-icon"),S(9,er,2,0,"mat-icon")),n&2&&(p("ufDrop",H(9,Zo,o.idx,o.rowGuid)),d(),p("ufDrop",H(12,qo,o.idx,o.rowGuid)),d(),b(o.type===o.controlTypeEnum.Number?2:-1),d(),b(o.type===o.controlTypeEnum.Checkbox?3:-1),d(2),ue(" ",o.label,`
`),d(),b(o.type===o.controlTypeEnum.Number?6:-1),d(),b(o.type===o.controlTypeEnum.List?7:-1),d(),b(o.clearButton&&o.type!==o.controlTypeEnum.Checkbox?8:-1),d(),b(o.type===o.controlTypeEnum.Datetime?9:-1))},dependencies:[M,Be],styles:["[_nghost-%COMP%]{position:relative;display:flex;align-items:center;height:48px;border:1px solid #333333;border-radius:6px;pointer-events:none;box-sizing:border-box;padding:0 5px;background-color:#fff}.without-border[_nghost-%COMP%]{border:none;background-color:transparent}"],changeDetection:0});let r=e;return r})();var vt=(()=>{let e=class e{constructor(){this.document=h(he)}get getDraggable(){return!0}onDragStart(t){this.toggleClassDragging(!0);let n=t.dataTransfer;n&&(n.setData("text/plain",JSON.stringify(this.dragInfo)),this.hostComponent?.elementRef?.nativeElement&&n.setDragImage(this.hostComponent.elementRef.nativeElement,0,0))}onDragEnd(){this.toggleClassDragging(!1)}toggleClassDragging(t){t?(this.document.body.classList.add(Ze),this.hostComponent?.elementRef?.nativeElement?.classList?.add(zt)):(this.document.body.classList.remove(Ze),this.hostComponent?.elementRef?.nativeElement?.classList?.remove(zt))}};e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=le({type:e,selectors:[["","ufDrag",""]],hostVars:1,hostBindings:function(n,o){n&1&&C("dragstart",function(l){return o.onDragStart(l)})("dragend",function(){return o.onDragEnd()}),n&2&&mi("draggable",o.getDraggable)},inputs:{hostComponent:[0,"ufDrag","hostComponent"],dragInfo:"dragInfo"},standalone:!1});let r=e;return r})();var eo=(r,e)=>({mode:"row",type:"push",idx:r,parentGuid:e}),ir=()=>({position:"NONE"}),nr=(r,e)=>e.guid;function or(r,e){if(r&1&&P(0,"form-row",1),r&2){let i=e.$implicit,t=e.$index,n=_();p("idx",t)("guid",i.guid)("parentGuid",n.parentGuid)("children",i.children)("verticalAlign",i.verticalAlign)}}function rr(r,e){if(r&1&&(a(0,"div",2),P(1,"div",5),a(2,"button",6)(3,"mat-icon"),c(4,"add"),u(),a(5,"span"),c(6,"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u044D\u043B\u0435\u043C\u0435\u043D\u0442"),u()()()),r&2){let i=_(),t=O(5);d(),p("ufDrop",H(3,eo,-1,i.parentGuid)),d(),p("matMenuTriggerFor",t.menu)("matMenuTriggerData",X(6,ir))}}function sr(r,e){if(r&1&&P(0,"div",3),r&2){let i=_();p("ufDrop",H(1,eo,i.rows.length,i.parentGuid))}}var pe=(()=>{let e=class e{constructor(){this.rows=[],this.parentGuid=null,this.currentFormStore=h(ie)}onAddElement(t){this.currentFormStore.addRowWithElement(this.parentGuid,t)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=E({type:e,selectors:[["form-rows"]],inputs:{rows:"rows",parentGuid:"parentGuid"},standalone:!1,decls:6,vars:2,consts:[["menuAddElement",""],[1,"form-row",3,"idx","guid","parentGuid","children","verticalAlign"],[1,"flex-col-centered","flex-auto","p-relative"],[1,"drop-row-container","drop-row-bottom",3,"ufDrop"],[3,"addElementEvent"],[1,"drop-row-container","drop-row-top",3,"ufDrop"],["mat-button","","color","primary",3,"matMenuTriggerFor","matMenuTriggerData"]],template:function(n,o){if(n&1){let s=T();q(0,or,1,5,"form-row",1,nr,!1,rr,7,7,"div",2),S(3,sr,1,4,"div",3),a(4,"menu-add-element",4,0),C("addElementEvent",function(m){return g(s),f(o.onAddElement(m.typeElement))}),u()}n&2&&(K(o.rows),d(3),b(o.rows.length>0?3:-1))},styles:["[_nghost-%COMP%]{position:relative;flex:auto;display:flex;flex-direction:column;border:1px dotted transparent;box-sizing:border-box}.form-row[_ngcontent-%COMP%]{margin-top:10px}.form-row[_ngcontent-%COMP%]:first-child{margin-top:0}"],changeDetection:0});let r=e;return r})();var ar=["*"],lr=(r,e)=>e.guid;function ur(r,e){if(r&1&&(a(0,"mat-tab",1)(1,"div",4),P(2,"form-rows",5),u()()),r&2){let i=e.$implicit;p("label",i.label),d(2),p("rows",i.children)("parentGuid",i.guid)}}function cr(r,e){r&1&&hi(0)}var to=(()=>{let e=class e{constructor(){this.guid="unknown",this.children=[],this.elementRef=h(L)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=E({type:e,selectors:[["form-tabs"]],inputs:{guid:"guid",children:"children"},standalone:!1,ngContentSelectors:ar,decls:5,vars:0,consts:[["mat-stretch-tabs","false"],[3,"label"],["disabled",""],["mat-tab-label",""],[1,"workspace"],[3,"rows","parentGuid"]],template:function(n,o){n&1&&(pi(),a(0,"mat-tab-group",0),q(1,ur,3,3,"mat-tab",1,lr),a(3,"mat-tab",2),Ve(4,cr,1,0,"ng-template",3),u()()),n&2&&(d(),K(o.children))},dependencies:[cn,ut,ct,pe],styles:[".workspace[_ngcontent-%COMP%]{flex:auto;display:flex;flex-direction:column;padding:10px}[_nghost-%COMP%]     .mat-mdc-tab-labels .mat-mdc-tab:last-child.mat-mdc-tab-disabled{opacity:1;min-width:auto;padding:0 10px}"]});let r=e;return r})();var io=(()=>{let e=class e{constructor(){this.guid="unknown",this.label="unknown",this.children=[],this.elementRef=h(L)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=E({type:e,selectors:[["form-panel"]],inputs:{guid:"guid",label:"label",children:"children"},standalone:!1,decls:6,vars:3,consts:[["appearance","outlined"],[3,"rows","parentGuid"]],template:function(n,o){n&1&&(a(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),c(3),u()(),a(4,"mat-card-content"),P(5,"form-rows",1),u()()),n&2&&(d(3),ue(" ",o.label||"\xA0"," "),d(2),p("rows",o.children)("parentGuid",o.guid))},dependencies:[Ki,Qi,Xi,Yi,pe],encapsulation:2,changeDetection:0});let r=e;return r})();var pr=["menuAddElements"],hr=r=>({position:r});function _r(r,e){if(r&1){let i=T();a(0,"button",3),C("click",function(){let n=g(i).position,o=_();return f(o.onAddElement(n,"tabs"))}),c(1,"\u0412\u043A\u043B\u0430\u0434\u043A\u0438"),u(),a(2,"button",3),C("click",function(){let n=g(i).position,o=_();return f(o.onAddElement(n,"panel"))}),c(3,"\u041F\u0430\u043D\u0435\u043B\u044C"),u(),a(4,"button",4),c(5,"\u041A\u043E\u043D\u0442\u0440\u043E\u043B"),u()}if(r&2){let i=e.position;_();let t=O(4);d(4),p("matMenuTriggerFor",t)("matMenuTriggerData",gi(2,hr,i))}}function gr(r,e){if(r&1){let i=T();a(0,"button",3),C("click",function(){let n=g(i).position,o=_();return f(o.onAddElement(n,"text"))}),c(1,"\u0421\u0442\u0440\u043E\u043A\u0430"),u(),a(2,"button",3),C("click",function(){let n=g(i).position,o=_();return f(o.onAddElement(n,"list"))}),c(3,"\u0421\u043F\u0438\u0441\u043E\u043A"),u(),a(4,"button",3),C("click",function(){let n=g(i).position,o=_();return f(o.onAddElement(n,"number"))}),c(5,"\u0427\u0438\u0441\u043B\u043E"),u(),a(6,"button",3),C("click",function(){let n=g(i).position,o=_();return f(o.onAddElement(n,"datetime"))}),c(7,"\u0414\u0430\u0442\u0430/\u0432\u0440\u0435\u043C\u044F"),u(),a(8,"button",3),C("click",function(){let n=g(i).position,o=_();return f(o.onAddElement(n,"checkbox"))}),c(9,"\u0424\u043B\u0430\u0436\u043E\u043A"),u()}}var Oe=(()=>{let e=class e{constructor(){this.addElementEvent=new R}onAddElement(t,n){this.addElementEvent.emit({position:t,typeElement:n})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=E({type:e,selectors:[["menu-add-element"]],viewQuery:function(n,o){if(n&1&&ye(pr,7),n&2){let s;we(s=Se())&&(o.menu=s.first)}},outputs:{addElementEvent:"addElementEvent"},standalone:!1,decls:6,vars:0,consts:[["menuAddElements","matMenu"],["menuAddControls","matMenu"],["matMenuContent",""],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"matMenuTriggerFor","matMenuTriggerData"]],template:function(n,o){n&1&&(a(0,"mat-menu",null,0),Ve(2,_r,6,4,"ng-template",2),u(),a(3,"mat-menu",null,1),Ve(5,gr,10,0,"ng-template",2),u())},dependencies:[Ie,Pe,ji,de],encapsulation:2,changeDetection:0});let r=e;return r})();var fr=()=>({position:"LEFT"}),Cr=()=>({position:"RIGHT"}),Zt=(r,e)=>({type:"element",idx:r,parentGuid:e}),ro=()=>[];function vr(r,e){if(r&1&&(P(0,"form-control",15,2),a(2,"div",16)(3,"div",17)(4,"div",18)(5,"mat-icon",19),c(6," open_with "),u()(),a(7,"div",20)(8,"button",21)(9,"mat-icon",22),c(10,"settings"),u()()()()()),r&2){let i=O(1),t=_(),n=O(5);p("idx",t.idx)("rowGuid",t.rowGuid)("guid",t.guid)("type",t.controlType)("element",t.element)("label",t.label)("clearButton",t.clearButton),d(5),p("ufDrag",i)("dragInfo",H(10,Zt,t.idx,t.rowGuid)),d(3),p("matMenuTriggerFor",n)}}function Er(r,e){if(r&1&&(P(0,"form-panel",23,3),a(2,"div",24)(3,"div",17)(4,"div",18)(5,"mat-icon",25),c(6," open_with "),u()(),a(7,"div",20)(8,"button",26)(9,"mat-icon",22),c(10,"settings"),u()()()()()),r&2){let i=O(1),t=_(),n=O(5);p("guid",t.guid)("children",t.children??X(6,ro))("label",t.label),d(5),p("ufDrag",i)("dragInfo",H(7,Zt,t.idx,t.rowGuid)),d(3),p("matMenuTriggerFor",n)}}function Dr(r,e){if(r&1&&(a(0,"form-tabs",5,4)(2,"mat-icon",27),c(3," open_with "),u(),a(4,"button",28)(5,"mat-icon"),c(6,"settings"),u()()()),r&2){let i=O(1),t=_(),n=O(5);p("guid",t.guid)("children",t.children??X(5,ro)),d(2),p("ufDrag",i)("dragInfo",H(6,Zt,t.idx,t.rowGuid)),d(2),p("matMenuTriggerFor",n)}}function yr(r,e){r&1&&(a(0,"div",6),c(1,"\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u044B\u0439 \u044D\u043B\u0435\u043C\u0435\u043D\u0442"),u())}function wr(r,e){r&1&&(a(0,"mat-icon",9),c(1,"compress"),u())}function Sr(r,e){r&1&&(a(0,"mat-icon",9),c(1,"expand"),u())}function br(r,e){r&1&&(a(0,"mat-icon"),c(1,"disabled_visible"),u())}function xr(r,e){r&1&&(a(0,"mat-icon"),c(1,"block"),u())}function Tr(r,e){if(r&1){let i=T();a(0,"button",8),C("click",function(){g(i);let n=_(2);return f(n.onRunCommand("toggle-clear-button"))}),S(1,br,2,0,"mat-icon")(2,xr,2,0,"mat-icon"),a(3,"span"),c(4,"\u0421\u043A\u0440\u044B\u0442\u044C/\u043F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u043A\u043D\u043E\u043F\u043A\u0443 \u043E\u0447\u0438\u0441\u0442\u043A\u0438"),u()()}if(r&2){let i=_(2);d(),b(i.element.controlProperties!=null&&i.element.controlProperties.clearButton?1:2)}}function Pr(r,e){if(r&1&&S(0,Tr,5,1,"button",10),r&2){let i=_();b(i.controlType!==i.controlTypeEnum.Checkbox?0:-1)}}function Ir(r,e){if(r&1){let i=T();a(0,"button",8),C("click",function(){g(i);let n=_();return f(n.onRunCommand("add-tab"))}),a(1,"mat-icon"),c(2,"add"),u(),a(3,"span"),c(4,"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432\u043A\u043B\u0430\u0434\u043A\u0443"),u()()}}var oo=35,so=(()=>{let e=class e{constructor(){this.guid="unknown",this.rowGuid="unknown",this.idx=0,this.type=null,this.autofill=!1,this.controlType=null,this.label="",this.clearButton=!1,this.children=[],this.elementTypeEnum=Q,this.controlTypeEnum=k,this.currentFormStore=h(ie),this.cdr=h(Ne),this.destroyRef$=h(se)}get isAutofill(){return this.autofill}get isNotVisible(){return this.element.visible===!1}get isDisabled(){return this.element.disabled===!0}get getMinWidth(){return this.element.width&&this.element.widthUnit?"auto":"300px"}get getWidth(){if(this.element.width&&this.element.widthUnit)switch(this.element.widthUnit){case Re.Percents:return`${this.element.width}%`;case Re.Pixels:return`${this.element.width}px`}return"auto"}get asTextarea(){return this.element.controlProperties?.controlSubType===st.Textarea}ngOnInit(){this.currentFormStore.currentFormChanged$.pipe(Y(this.destroyRef$)).subscribe(()=>{this.cdr.markForCheck()})}onShowSettings(){this.currentFormStore.fireElementSettings(JSON.parse(JSON.stringify(this.element)))}onRunCommand(t){this.currentFormStore.runElementCommand(this.guid,t)}onRemoveElement(){this.currentFormStore.removeElement(this.rowGuid,this.guid)}onAddElement(t,n){let o=t=="RIGHT"?this.idx+1:this.idx;this.currentFormStore.addElementToRow(this.rowGuid,n,o)}getTitleMenuByElement(){switch(this.element.type){case Q.Tabs:return"\u0412\u043A\u043B\u0430\u0434\u043A\u0438";case Q.Panel:return this.element.label?`\u041F\u0430\u043D\u0435\u043B\u044C: ${this.element.label}`:"\u041F\u0430\u043D\u0435\u043B\u044C";case Q.Control:let t=J.typeControlToString(this.element.controlType),n=this.element.label.length>oo?this.element.label.slice(0,oo)+"...":this.element.label;return this.element.label?`\u041A\u043E\u043D\u0442\u0440\u043E\u043B (${t}): ${n}`:`\u041A\u043E\u043D\u0442\u0440\u043E\u043B (${t})`;default:return""}}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=E({type:e,selectors:[["form-element"]],hostVars:12,hostBindings:function(n,o){n&2&&(Qe("min-width",o.getMinWidth)("width",o.getWidth),j("autofill",o.isAutofill)("not-visible",o.isNotVisible)("disabled",o.isDisabled)("as-textarea",o.asTextarea))},inputs:{guid:"guid",rowGuid:"rowGuid",idx:"idx",element:"element",type:"type",autofill:"autofill",controlType:"controlType",label:"label",clearButton:"clearButton",children:"children"},standalone:!1,decls:39,vars:11,consts:[["menuSettingsElement","matMenu"],["menuAddElement",""],["controlRef",""],["panelRef",""],["tabsRef",""],[1,"flex-auto",3,"guid","children"],[1,"text-danger"],[1,"menu-settings-title"],["mat-menu-item","",3,"click"],[1,"rotate-90"],["mat-menu-item",""],["mat-menu-item","",3,"matMenuTriggerFor","matMenuTriggerData"],[1,"rotate-180"],["mat-menu-item","",1,"text-danger",3,"click"],[3,"addElementEvent"],[1,"flex-auto",3,"idx","rowGuid","guid","type","element","label","clearButton"],[1,"menu-element-container"],[1,"flex-row","flex-auto"],[1,"element-drag-handle-container"],["title","\u041F\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u044C \u043A\u043E\u043D\u0442\u0440\u043E\u043B",1,"cursor-move","color-blue",3,"ufDrag","dragInfo"],[1,"flex-col","flex-auto"],["matButton","","title","\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F \u0434\u043B\u044F \u043A\u043E\u043D\u0442\u0440\u043E\u043B\u0430",1,"width-100-percent","flex-auto",3,"matMenuTriggerFor"],[1,"color-white"],[1,"flex-auto",3,"guid","children","label"],[1,"menu-panel-container"],["title","\u041F\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u044C \u043F\u0430\u043D\u0435\u043B\u044C",1,"cursor-move","color-blue",3,"ufDrag","dragInfo"],["matButton","","title","\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F \u0434\u043B\u044F \u043F\u0430\u043D\u0435\u043B\u0438",1,"width-100-percent",3,"matMenuTriggerFor"],["title","\u041F\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u044C \u0432\u043A\u043B\u0430\u0434\u043A\u0438",1,"cursor-move","color-blue","pointer-events-all",3,"ufDrag","dragInfo"],["mat-icon-button","","color","primary","title","\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F \u0434\u043B\u044F \u0432\u043A\u043B\u0430\u0434\u043E\u043A",1,"pointer-events-all",3,"matMenuTriggerFor"]],template:function(n,o){if(n&1){let s=T();S(0,vr,11,13)(1,Er,11,10)(2,Dr,7,9,"form-tabs",5)(3,yr,2,0,"div",6),a(4,"mat-menu",null,0)(6,"div",7),c(7),u(),a(8,"button",8),C("click",function(){return g(s),f(o.onRunCommand("toggle-autofill"))}),S(9,wr,2,0,"mat-icon",9)(10,Sr,2,0,"mat-icon",9),a(11,"span"),c(12,"\u041F\u0435\u0440\u0435\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u0435 \u0430\u0432\u0442\u043E\u0448\u0438\u0440\u0438\u043D\u044B \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430"),u()(),S(13,Pr,1,1),S(14,Ir,5,0,"button",10),a(15,"button",11)(16,"mat-icon",12),c(17,"start"),u(),a(18,"span"),c(19,"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u044D\u043B\u0435\u043C\u0435\u043D\u0442 \u0441\u043B\u0435\u0432\u0430"),u()(),a(20,"button",11)(21,"mat-icon"),c(22,"start"),u(),a(23,"span"),c(24,"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u044D\u043B\u0435\u043C\u0435\u043D\u0442 \u0441\u043F\u0440\u0430\u0432\u0430"),u()(),P(25,"mat-divider"),a(26,"button",8),C("click",function(){return g(s),f(o.onShowSettings())}),a(27,"mat-icon"),c(28,"settings"),u(),a(29,"span"),c(30,"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430"),u()(),P(31,"mat-divider"),a(32,"button",13),C("click",function(){return g(s),f(o.onRemoveElement())}),a(33,"mat-icon",6),c(34,"delete"),u(),a(35,"span"),c(36,"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u043B\u0435\u043C\u0435\u043D\u0442"),u()()(),a(37,"menu-add-element",14,1),C("addElementEvent",function(m){return g(s),f(o.onAddElement(m.position,m.typeElement))}),u()}if(n&2){let s,l=O(38);b((s=o.type)===o.elementTypeEnum.Control?0:s===o.elementTypeEnum.Panel?1:s===o.elementTypeEnum.Tabs?2:3),d(7),oe(o.getTitleMenuByElement()),d(2),b(o.autofill?9:10),d(4),b(o.type===o.elementTypeEnum.Control?13:-1),d(),b(o.type===o.elementTypeEnum.Tabs?14:-1),d(),p("matMenuTriggerFor",l.menu)("matMenuTriggerData",X(9,fr)),d(5),p("matMenuTriggerFor",l.menu)("matMenuTriggerData",X(10,Cr))}},dependencies:[M,Ie,Pe,de,ee,$,ft,to,io,Xn,vt,Oe],styles:['[_nghost-%COMP%]{position:relative;display:flex;flex-direction:column}.autofill[_nghost-%COMP%]{flex:auto}.not-visible[_nghost-%COMP%]{opacity:.1}.disabled[_nghost-%COMP%]{opacity:.3}.as-textarea[_nghost-%COMP%]{height:96px}[_nghost-%COMP%]:hover > .menu-element-container[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]:hover > .menu-panel-container[_ngcontent-%COMP%]{display:flex}.menu-element-container[_ngcontent-%COMP%]{display:none;position:absolute;inset:5px;flex-direction:column;z-index:1}.menu-element-container[_ngcontent-%COMP%]:after{display:block;position:absolute;content:"";inset:0 0 0 34px;border-radius:6px;background-color:#0275d8;pointer-events:none}.element-drag-handle-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:0 5px;background-color:#fff}.menu-panel-container[_ngcontent-%COMP%]{--mat-button-text-container-height: 22px;display:none;position:absolute;top:0;left:0;right:0;height:22px;flex-direction:column;z-index:1}.menu-panel-container[_ngcontent-%COMP%]:after{display:block;position:absolute;content:"";inset:0 0 0 28px;border-radius:6px;background-color:#0275d8;pointer-events:none}.menu-panel-container[_ngcontent-%COMP%]   .element-drag-handle-container[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{height:20px;width:20px;font-size:19px}.width-100-percent[_ngcontent-%COMP%]{width:100%}.menu-settings-title[_ngcontent-%COMP%]{font-weight:700;font-size:12px;text-align:center;border-bottom:1px solid #c6c6c6;padding:0 10px}.pointer-events-all[_ngcontent-%COMP%]{pointer-events:all}'],changeDetection:0});let r=e;return r})();var Rr=(r,e)=>({mode:"row",type:"insert",idx:r,parentGuid:e}),Mr=(r,e)=>({type:"row",idx:r,parentGuid:e}),kr=()=>({position:"BEFORE"}),Br=()=>({position:"AFTER"}),Or=(r,e)=>e.guid;function Ar(r,e){if(r&1&&P(0,"form-element",4),r&2){let i=e.$implicit,t=e.$index,n=_();p("guid",i.guid)("rowGuid",n.guid)("idx",t)("element",i)("type",i.type)("autofill",i.autofill)("controlType",i.controlType??null)("label",i.label)("children",i.children)("clearButton",(i.controlProperties==null?null:i.controlProperties.clearButton)??!1)}}var ao=(()=>{let e=class e{constructor(){this.guid="unknown",this.idx=0,this.parentGuid=null,this.verticalAlign=He.Middle,this.hostComponent=this,this.verticalAlignEnum=He,this.elementRef=h(L),this.currentFormStore=h(ie)}get align(){switch(this.verticalAlign){case He.Top:return"flex-start";case He.Bottom:return"flex-end";default:return"center"}}onSetVerticalAlign(t){this.currentFormStore.setRowVerticalAlign(this.guid,t)}onRemoveRow(){this.currentFormStore.removeRow(this.parentGuid,this.guid)}onAddRow(t,n){let o=t=="AFTER"?this.idx+1:this.idx;this.currentFormStore.addRowWithElement(this.parentGuid,n,o)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=E({type:e,selectors:[["form-row"]],hostVars:2,hostBindings:function(n,o){n&2&&Qe("align-items",o.align)},inputs:{guid:"guid",idx:"idx",parentGuid:"parentGuid",children:"children",verticalAlign:"verticalAlign"},standalone:!1,decls:51,vars:17,consts:[["menuSettingsRow","matMenu"],["menuVerticalAlign","matMenu"],["menuAddElement",""],[1,"drop-row-container","drop-row-top",3,"ufDrop"],[3,"guid","rowGuid","idx","element","type","autofill","controlType","label","children","clearButton"],[1,"menu-container"],["title","\u041F\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u044C \u0441\u0442\u0440\u043E\u043A\u0443",1,"cursor-move",3,"ufDrag","dragInfo"],["mat-icon-button","","color","primary","title","\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F \u0434\u043B\u044F \u0441\u0442\u0440\u043E\u043A\u0438",1,"mat-small-button-icon",3,"matMenuTriggerFor"],["mat-menu-item","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"matMenuTriggerFor","matMenuTriggerData"],[1,"rotate-270"],[1,"rotate-90"],["mat-menu-item","",1,"text-danger",3,"click"],[1,"text-danger"],["mat-menu-item","",3,"click"],[3,"addElementEvent"]],template:function(n,o){if(n&1){let s=T();P(0,"div",3),q(1,Ar,1,10,"form-element",4,Or),a(3,"div",5)(4,"mat-icon",6),c(5," open_with "),u(),a(6,"button",7)(7,"mat-icon"),c(8,"settings"),u()()(),a(9,"mat-menu",null,0)(11,"button",8)(12,"mat-icon"),c(13,"align_vertical_center"),u(),a(14,"span"),c(15,"\u0412\u0435\u0440\u0442\u0438\u043A\u0430\u043B\u044C\u043D\u043E\u0435 \u0432\u044B\u0440\u0430\u0432\u043D\u0438\u0432\u0430\u043D\u0438\u0435"),u()(),a(16,"button",9)(17,"mat-icon",10),c(18,"start"),u(),a(19,"span"),c(20,"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0441\u0442\u0440\u043E\u043A\u0443 \u0434\u043E"),u()(),a(21,"button",9)(22,"mat-icon",11),c(23,"start"),u(),a(24,"span"),c(25,"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0441\u0442\u0440\u043E\u043A\u0443 \u043F\u043E\u0441\u043B\u0435"),u()(),P(26,"mat-divider"),a(27,"button",12),C("click",function(){return g(s),f(o.onRemoveRow())}),a(28,"mat-icon",13),c(29,"delete"),u(),a(30,"span"),c(31,"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0441\u0442\u0440\u043E\u043A\u0443"),u()()(),a(32,"mat-menu",null,1)(34,"button",14),C("click",function(){return g(s),f(o.onSetVerticalAlign(o.verticalAlignEnum.Top))}),a(35,"mat-icon"),c(36,"align_vertical_top"),u(),a(37,"span"),c(38,"\u0421\u0432\u0435\u0440\u0445\u0443"),u()(),a(39,"button",14),C("click",function(){return g(s),f(o.onSetVerticalAlign(o.verticalAlignEnum.Middle))}),a(40,"mat-icon"),c(41,"align_vertical_center"),u(),a(42,"span"),c(43,"\u041F\u043E \u0441\u0435\u0440\u0435\u0434\u0438\u043D\u0435"),u()(),a(44,"button",14),C("click",function(){return g(s),f(o.onSetVerticalAlign(o.verticalAlignEnum.Bottom))}),a(45,"mat-icon"),c(46,"align_vertical_bottom"),u(),a(47,"span"),c(48,"\u0421\u043D\u0438\u0437\u0443"),u()()(),a(49,"menu-add-element",15,2),C("addElementEvent",function(m){return g(s),f(o.onAddRow(m.position,m.typeElement))}),u()}if(n&2){let s=O(10),l=O(33),m=O(50);p("ufDrop",H(9,Rr,o.idx,o.parentGuid)),d(),K(o.children),d(3),p("ufDrag",o.hostComponent)("dragInfo",H(12,Mr,o.idx,o.parentGuid)),d(2),p("matMenuTriggerFor",s),d(5),p("matMenuTriggerFor",l),d(5),p("matMenuTriggerFor",m.menu)("matMenuTriggerData",X(15,kr)),d(5),p("matMenuTriggerFor",m.menu)("matMenuTriggerData",X(16,Br))}},dependencies:[M,Ie,Pe,de,$,ft,so,vt,Be,Oe],styles:["[_nghost-%COMP%]{position:relative;display:flex;box-sizing:border-box;border:1px dotted transparent;min-height:36px;padding-top:10px}[_nghost-%COMP%]:hover{border-color:#000000b3}[_nghost-%COMP%]:hover:not(.no-menu-container) > .menu-container[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%] > *[_ngcontent-%COMP%]:not(:first-child):not(:last-child){margin-left:12px}.menu-container[_ngcontent-%COMP%]{display:none;position:absolute;align-items:center;left:-12px;top:-12px;width:48px;height:24px;margin-left:0!important;z-index:2;color:#0275d8}"],changeDetection:0});let r=e;return r})();var lo=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=De({type:e}),e.\u0275inj=ve({imports:[V,dt,$i,zi,N,Kn,Vi,Ni]});let r=e;return r})();_i(pe,[M,de,ee,ao,Be,Oe],[]);function Lr(r,e){r&1&&P(0,"app-page-not-found")}function Vr(r,e){r&1&&(a(0,"div",0),P(1,"mat-spinner"),a(2,"div",11),c(3,"\u041F\u043E\u0434\u043E\u0436\u0434\u0438\u0442\u0435, \u043F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430..."),u()())}function Nr(r,e){if(r&1){let i=T();S(0,Vr,4,0,"div",0),a(1,"common-header")(2,"div",1)(3,"div",2),c(4,"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435 \u0444\u043E\u0440\u043C\u044B:"),u(),a(5,"autosize-flat-input",3),w("valueChange",function(n){g(i);let o=_();return y(o.currentFormStore.currentFormName,n)||(o.currentFormStore.currentFormName=n),f(n)}),u()(),a(6,"button",4),C("click",function(){g(i);let n=_();return f(n.onViewForm())}),a(7,"mat-icon"),c(8,"visibility"),u(),a(9,"span"),c(10,"\u041F\u0440\u043E\u0441\u043C\u043E\u0442\u0440 \u0444\u043E\u0440\u043C\u044B"),u()(),a(11,"button",5),C("click",function(){g(i);let n=_();return f(n.onDownloadForm())}),a(12,"mat-icon"),c(13,"download"),u(),a(14,"span"),c(15,"\u0421\u043A\u0430\u0447\u0430\u0442\u044C JSON \u0444\u043E\u0440\u043C\u044B"),u()(),a(16,"button",6),C("click",function(){g(i);let n=_();return f(n.onSaveForm())}),a(17,"mat-icon"),c(18,"save"),u(),a(19,"span"),c(20,"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"),u()()(),a(21,"div",7)(22,"div",8)(23,"div",9),P(24,"form-rows",10),u()()()}if(r&2){let i=_();b(i.currentFormStore.isLoadingState()?0:-1),d(5),D("value",i.currentFormStore.currentFormName),d(11),p("disabled",!i.currentFormStore.hasChangedForm()),d(8),p("rows",i.currentFormStore.currentFormRows())}}var ju=(()=>{let e=class e{constructor(){this.currentFormStore=h(ie),this.destroyRef$=h(se),this.activatedRoute=h(Ei),this.titleService=h(vi),this.router=h(Di),this.slidePanelService=h(lt)}ngOnInit(){this.titleService.setTitle(bt),this.currentFormStore.currentFormName$.pipe(Y(this.destroyRef$)).subscribe(t=>{this.titleService.setTitle(`${t} | ${bt}`)}),this.currentFormStore.doElementSettings$.pipe(Y(this.destroyRef$)).subscribe(t=>{this.editElement(t)}),this.activatedRoute.paramMap.pipe(Y(this.destroyRef$)).subscribe(t=>{this.currentFormStore.loadForm(t.get("id"))})}onDownloadForm(){let t=JSON.parse(JSON.stringify(this.currentFormStore.currentForm));delete t.id,en.downloadJson(t,`${t.name}.json`)}onViewForm(){this.router.navigate([wi,this.currentFormStore.currentFormId??Si])}onSaveForm(){this.currentFormStore.saveForm().pipe(Y(this.destroyRef$)).subscribe(t=>{this.router.navigate([yi,t.id])})}editElement(t){this.slidePanelService.showPanel$(qn,{element:t},{disabledClose:!0}).subscribe(n=>{n&&this.currentFormStore.updateElementSettings(n)})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=E({type:e,selectors:[["fe-home-page"]],decls:2,vars:1,consts:[[1,"loading-container"],[1,"flex-auto","flex-row-align-center"],[1,"text-weight-500"],[1,"ml-10",3,"valueChange","value"],["mat-button","","color","primary",3,"click"],["mat-button","","color","primary",1,"ml-10",3,"click"],["mat-button","","color","success",1,"ml-10",3,"click","disabled"],[1,"scroll-container"],[1,"scroll"],[1,"workspace"],[1,"flex-auto",3,"rows"],[1,"loading-container__message"]],template:function(n,o){n&1&&S(0,Lr,1,0,"app-page-not-found")(1,Nr,25,4),n&2&&b(o.currentFormStore.is404Form()?0:1)},dependencies:[V,M,N,ee,qi,Zi,rn,mn,bi,lo,pe],styles:["[_nghost-%COMP%]{position:relative;flex:auto;display:flex;flex-direction:column;background-color:#c6c6c6}.drawer-container[_ngcontent-%COMP%]{flex:auto;display:flex;flex-direction:column;background-color:#c6c6c6}mat-drawer-content[_ngcontent-%COMP%]{flex:auto;display:flex;flex-direction:column}mat-drawer[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:800px}.drawer-head[_ngcontent-%COMP%]{display:flex;align-items:center;padding:10px}.drawer-head-title[_ngcontent-%COMP%]{flex:auto;font-size:22px}.workspace[_ngcontent-%COMP%]{flex:auto;display:flex;flex-direction:column;padding:10px}"],changeDetection:0});let r=e;return r})();export{ju as FEHomePageComponent};
