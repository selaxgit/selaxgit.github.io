"use strict";(self.webpackChunku_forms=self.webpackChunku_forms||[]).push([[201],{2201:($t,q,s)=>{s.r(q),s.d(q,{BuilderModule:()=>Kt});var d=s(9808),Q=s(520),m=s(3075),N=s(4100),a=s(5759),K=s(2959),E=s(7579),x=s(2722),$=s(8746),D=s(8306),W=s(6360),X=s(136),e=s(5e3),z=s(2313);const L=["TEXT","SELECT","NUMBER","DATEPICKER"],ee=["BUTTON"],b={clearButton:!0,readonly:!1,callMethod:null,bindDTO:null,usePrefix:!1,prefixIcon:null,prefixHint:null,useSuffix:!1,suffixIcon:null,suffixHint:null},H=[{value:"TEXT",title:"\u0421\u0442\u0440\u043e\u043a\u0430"},{value:"SELECT",title:"\u0421\u043f\u0438\u0441\u043e\u043a"},{value:"NUMBER",title:"\u0427\u0438\u0441\u043b\u043e"},{value:"DATEPICKER",title:"\u0414\u0430\u0442\u0430/\u0432\u0440\u0435\u043c\u044f"},{value:"CHECKBOX",title:"\u0424\u043b\u0430\u0436\u043e\u043a"},{value:"BUTTON",title:"\u041a\u043d\u043e\u043f\u043a\u0430"}];var M=s(4016);let A=(()=>{class o{constructor(t){this.projectsService=t,this.formRows=[],this.resetRows=new E.x,this.changeForm=new E.x,this.rowId=0,this.containerId=0,this.rowsDropListConnected=[],this.containerDropListConnected=[0],this.resetRows$=this.resetRows.asObservable(),this.changeForm$=this.changeForm.asObservable(),this.setInitialRows()}fromJSON(t){let n=0,i=0;const l=r=>{Array.isArray(r)&&r.forEach(c=>{n++,c.idx=n,Array.isArray(c.children)&&c.children.forEach(p=>{"PANEL"===p.type&&(i++,p.idx=i),p.children&&l(p.children),Array.isArray(p.tabs)&&p.tabs.forEach(f=>{f.children&&l(f.children)})})})};l(t),this.formRows=t,this.collectDataForm(),this.resetRows.next()}toJSON(){const t=i=>{Array.isArray(i)&&i.forEach(l=>{delete l.idx,Array.isArray(l.children)&&l.children.forEach(r=>{"PANEL"===r.type&&delete r.idx,r.children&&t(r.children),Array.isArray(r.tabs)&&r.tabs.forEach(c=>{c.children&&t(c.children)})})})},n=JSON.parse(JSON.stringify(this.formRows));return t(n),n}setChangedProject(){this.changeForm.next()}removeProject(t){return new D.y(n=>{this.projectsService.removeProject(t).subscribe({complete:()=>{n.next(),n.complete()}})})}loadProject(t){return new D.y(n=>{this.projectsService.loadProject(t).subscribe({next:i=>{this.formRows=i.data,this.collectDataForm(),n.next({name:i.name}),n.complete()},error:i=>n.error(i)})})}saveProject(t,n){return new D.y(i=>{this.projectsService.saveProject(n,t,this.formRows).subscribe({next:l=>{i.next(l),i.complete()},error:l=>i.error(l)})})}isEmptyForm(){return 0===this.formRows.length}removeEmptyRow(t){this.removeRowById(t,this.formRows)}setInitialRows(){this.rowId=1,this.containerId=0,this.rowsDropListConnected=[],this.containerDropListConnected=[0],this.formRows=this.getInitialRows(),this.resetRows.next()}getRowsDropListConnectedTo(t){const n=[];return this.parentsRowsForId(t,this.formRows,n),[...this.rowsDropListConnected.filter(l=>l!==t&&!n.includes(l)).map(l=>`uf-row-${l}`)]}getContainerDropListConnectedTo(){return this.containerDropListConnected.map(t=>`uf-container-${t}`)}getTemplateTabs(){return{type:"TABS",autofill:!0,visible:!0,tabs:[this.getTemplateTab()]}}getTemplateTab(){return{label:"\u0412\u043a\u043b\u0430\u0434\u043a\u0430",children:[this.getTemplateRow("PANEL")]}}getTemplatePanel(){return this.containerId++,this.containerDropListConnected.push(this.containerId),{idx:this.containerId,type:"PANEL",label:"\u041f\u0430\u043d\u0435\u043b\u044c",autofill:!1,visible:!0,children:[this.getTemplateRow()]}}getTemplateControl(t){switch(t){case"TEXT":return this.getTemplateControlText();case"SELECT":return this.getTemplateControlSelect();case"NUMBER":return this.getTemplateControlNumber();case"DATEPICKER":return this.getTemplateControlDatepicker();case"CHECKBOX":return this.getTemplateControlCheckbox();case"BUTTON":return this.getTemplateControlButton();default:return null}}getTemplateControlButton(){return{type:"CONTROL",controlType:"BUTTON",label:'\u041a\u043e\u043d\u0442\u0440\u043e\u043b: "\u041a\u043d\u043e\u043f\u043a\u0430"',autofill:!1,visible:!0,controlProperties:Object.assign({},b)}}getTemplateControlCheckbox(){return{type:"CONTROL",controlType:"CHECKBOX",label:'\u041a\u043e\u043d\u0442\u0440\u043e\u043b: "\u0424\u043b\u0430\u0436\u043e\u043a"',autofill:!1,visible:!0,controlProperties:Object.assign({},b)}}getTemplateControlDatepicker(){return{type:"CONTROL",controlType:"DATEPICKER",label:'\u041a\u043e\u043d\u0442\u0440\u043e\u043b: "\u0414\u0430\u0442\u0430"',autofill:!1,visible:!0,controlProperties:Object.assign({},b,{clearButton:!0})}}getTemplateControlNumber(){return{type:"CONTROL",controlType:"NUMBER",label:'\u041a\u043e\u043d\u0442\u0440\u043e\u043b: "\u0427\u0418\u0421\u041b\u041e"',autofill:!1,visible:!0,controlProperties:Object.assign({},b,{clearButton:!0})}}getTemplateControlSelect(){return{type:"CONTROL",controlType:"SELECT",label:'\u041a\u043e\u043d\u0442\u0440\u043e\u043b: "\u0421\u041f\u0418\u0421\u041e\u041a"',autofill:!1,visible:!0,controlProperties:Object.assign({},b,{clearButton:!0})}}getTemplateControlText(){return{type:"CONTROL",controlType:"TEXT",label:'\u041a\u043e\u043d\u0442\u0440\u043e\u043b: "\u0422\u0415\u041a\u0421\u0422"',autofill:!1,visible:!0,controlProperties:Object.assign({},b,{clearButton:!0})}}getTemplateRow(t,n){let i=null;switch(t){case"PANEL":i=this.getTemplatePanel();break;case"TABS":i=this.getTemplateTabs();break;case"CONTROL":n&&(i=this.getTemplateControl(n));break;default:i=this.getTemplateControlText()}return i||(i=this.getTemplateControlText()),this.rowId++,this.rowsDropListConnected.push(this.rowId),{idx:this.rowId,children:[i]}}getInitialRows(){return[this.getTemplateRow()]}removeRowById(t,n){for(let i=0;i<n.length;i++){if(n[i].idx===t)return n.splice(i,1),!0;if(Array.isArray(n[i].children))for(let l=0;l<n[i].children.length;l++){const r=n[i].children[l];if("TABS"===r.type&&Array.isArray(r.tabs))for(let c=0;c<r.tabs.length;c++){const p=r.tabs[c];if(Array.isArray(p.children)&&this.removeRowById(t,p.children))return!0}if("PANEL"===r.type&&Array.isArray(r.children)&&this.removeRowById(t,r.children))return!0}}return!1}parentsRowsForId(t,n,i){for(let l=0;l<n.length;l++){if(n[l].idx===t)return!0;if(Array.isArray(n[l].children))for(let r=0;r<n[l].children.length;r++){const c=n[l].children[r];if("TABS"===c.type&&Array.isArray(c.tabs))for(let p=0;p<c.tabs.length;p++){const f=c.tabs[p];if(Array.isArray(f.children)&&this.parentsRowsForId(t,f.children,i))return i.push(Number(n[l].idx)),!0}if("PANEL"===c.type&&Array.isArray(c.children)&&this.parentsRowsForId(t,c.children,i))return i.push(Number(n[l].idx)),!0}}return!1}collectDataForm(){const t=[],n=[0],i=l=>{Array.isArray(l)&&l.forEach(r=>{Array.isArray(r.children)&&r.children.forEach(c=>{i(c.children),Array.isArray(c.tabs)&&c.tabs.forEach(p=>{i(p.children)}),"PANEL"===c.type&&void 0!==c.idx&&n.push(c.idx)}),void 0!==r.idx&&t.push(r.idx)})};i(this.formRows),this.rowsDropListConnected=[...t],this.containerDropListConnected=[...n],this.rowId=Math.max(...t),this.containerId=Math.max(...n)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(M.m9))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var te=s(1969),C=s(5245),v=s(7423),_=s(4409),h=s(2181),J=s(1125);const ne=["scroll"],oe=["props"];function ie(o,u){1&o&&e._UZ(0,"div",6)}function le(o,u){if(1&o&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.criticalError," ")}}function ue(o,u){if(1&o&&(e.TgZ(0,"div",3),e.YNc(1,ie,1,0,"div",4),e.YNc(2,le,2,1,"div",5),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.criticalError),e.xp6(1),e.Q6J("ngIf",t.criticalError)}}function re(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"div",19),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.onSelectDto(l))}),e._uU(1),e.qZA()}if(2&o){const t=u.$implicit;e.ekj("selected",t.selected),e.xp6(1),e.hij(" ",t.title," ")}}function ae(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"div",25),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(3).$implicit,c=e.oxw(2);return e.KtG(c.onSelectValue(r,l))})("dblclick",function(){e.CHM(t);const i=e.oxw(5);return e.KtG(i.apply())}),e._uU(1),e.qZA()}if(2&o){const t=u.$implicit,n=u.index,i=e.oxw().index,l=e.oxw(2).index;e.ekj("selected",t.selected),e.s9C("id","item-"+l+"-"+i+"-"+n),e.xp6(1),e.hij(" ",t.title," ")}}function ce(o,u){if(1&o&&(e.TgZ(0,"mat-expansion-panel",23)(1,"mat-expansion-panel-header")(2,"mat-panel-title"),e._uU(3),e.qZA()(),e.YNc(4,ae,2,4,"div",24),e.qZA()),2&o){const t=u.$implicit;e.Q6J("expanded",!0),e.xp6(3),e.Oqu(t.title),e.xp6(1),e.Q6J("ngForOf",t.values)}}function se(o,u){if(1&o&&(e.TgZ(0,"div",21),e.YNc(1,ce,5,3,"mat-expansion-panel",22),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.properties)}}function pe(o,u){if(1&o&&(e.ynx(0),e.YNc(1,se,2,1,"div",20),e.BQk()),2&o){const t=u.$implicit;e.xp6(1),e.Q6J("ngIf",t.selected)}}function de(o,u){if(1&o&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"fieldset",11)(4,"legend"),e._uU(5,"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 DTO"),e.qZA(),e.YNc(6,re,2,3,"div",12),e.qZA(),e.TgZ(7,"fieldset",13,14)(9,"legend"),e._uU(10,"\u0421\u0432\u043e\u0439\u0441\u0442\u0432\u0430 DTO"),e.qZA(),e.TgZ(11,"div",15)(12,"div",16,17),e.YNc(14,pe,2,1,"ng-container",18),e.qZA()()()()()()),2&o){const t=e.oxw();e.xp6(6),e.Q6J("ngForOf",t.dtoList),e.xp6(8),e.Q6J("ngForOf",t.dtoList)}}function me(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"div",26)(1,"button",27),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.apply())}),e._uU(2," \u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c "),e.qZA(),e.TgZ(3,"button",28),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.close())}),e._uU(4,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("disabled",!t.currentValue)}}let j=(()=>{class o{constructor(t){this.dtoService=t,this.dtoList=[],this.currentValue=null,this.loading=!0,this.criticalError="",this.itemSelectedId=""}ngAfterViewInit(){this.dtoService.getDTOList(["id","name","type","dto"]).subscribe({next:t=>{this.setDTOList(t),this.loading=!1,setTimeout(()=>this.selectedCurrent())},error:t=>{this.criticalError=t.message||"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a..."}})}onSelectDto(t){this.dtoList.forEach(n=>{n.selected=!1,this.clearPropertySelected(n.properties)}),t.selected=!0,this.currentValue=null}onSelectValue(t,n){this.clearPropertySelected(t.properties),n.selected=!0,this.currentValue=n}clearPropertySelected(t){t.forEach(n=>{n.values.forEach(i=>i.selected=!1)})}apply(){var t;null===(t=this.dialogRef)||void 0===t||t.close({RESULT:this.currentValue})}close(){var t;null===(t=this.dialogRef)||void 0===t||t.close()}collectKiasAgreementProperties(t){const n=[],i=Object.keys(t).filter(l=>"object"!=typeof t[l]);return n.push({title:"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",values:(i||[]).map(l=>({selected:!1,value:l,title:l}))}),Array.isArray(t.AGREEMENT_ADDATTR)&&t.AGREEMENT_ADDATTR.length>0&&n.push({title:"\u0410\u0442\u0440\u0438\u0431\u0443\u0442\u044b \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",values:(t.AGREEMENT_ADDATTR||[]).map(l=>({selected:!1,value:`AGREEMENT_ADDATTR[ATTRISN=${l.ATTRISN}].VAL`,title:`AGREEMENT_ADDATTR[ATTRISN=${l.ATTRISN}].VAL: ${l.FULLNAME}`}))}),n}collectCustomFlatProperties(t){const n=[],i=[];return Object.keys(t).forEach(l=>{i.push({selected:!1,value:l,title:l})}),n.push({title:"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b",values:i}),n}collectKiasCalcProperties(t){const n=[];if(Array.isArray(t.AgrCalc)){const i=[];t.AgrCalc.forEach((l,r)=>{Object.keys(l).forEach(c=>{i.push({selected:!1,value:`AgrCalc[${r}].${c}`,title:`AgrCalc[${r}].${c}`})})}),n.push({title:"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043a\u043e\u0442\u0438\u0440\u043e\u0432\u043a\u0438",values:i})}return n.push({title:"\u0410\u0442\u0440\u0438\u0431\u0443\u0442\u044b \u043a\u043e\u0442\u0438\u0440\u043e\u0432\u043a\u0438",values:(t.CalcParams||[]).map(i=>({selected:!1,value:`CalcParams[ATTRISN=${i.ATTRISN}].VAL`,title:`CalcParams[ATTRISN=${i.ATTRISN}].VAL: ${i.FULLNAME}`}))}),n}setDTOList(t){var n;let i,l;const r=[];if(t.forEach(c=>{switch(c.type){case"kiasCalc":i=`\u041a\u043e\u0442\u0438\u0440\u043e\u0432\u043a\u0430: ${c.name}`,l=this.collectKiasCalcProperties(JSON.parse(c.dto)),r.push({title:i,properties:l,selected:!1});break;case"kiasAgreement":i=`\u0414\u043e\u0433\u043e\u0432\u043e\u0440: ${c.name}`,l=this.collectKiasAgreementProperties(JSON.parse(c.dto)),r.push({title:i,properties:l,selected:!1});break;case"custom":i=`DTO: ${c.name}`,l=this.collectCustomFlatProperties(JSON.parse(c.dto)),r.push({title:i,properties:l,selected:!1})}}),r.sort((c,p)=>c.title.localeCompare(p.title)),r.length>0)if(null!==(n=this.modalChildData)&&void 0!==n&&n.value){const c=this.modalChildData.value;let p=!1;r.forEach((f,B)=>{p=!1,f.properties.forEach((w,Z)=>{w.values.forEach((T,P)=>{T.value===c&&(T.selected=!0,p=!0,this.currentValue=T,this.itemSelectedId=`#item-${B}-${Z}-${P}`)})}),p&&(f.selected=!0)})}else r[0].selected=!0;this.dtoList=r}selectedCurrent(){var t;if(this.itemSelectedId&&(null===(t=this.scrollElementRef)||void 0===t?void 0:t.nativeElement)){const n=this.scrollElementRef.nativeElement.querySelector(this.itemSelectedId);n&&(this.scrollElementRef.nativeElement.scrollTop=(l=>{let r=0;if(l.offsetParent)do{r+=l.offsetTop}while(l.offsetParent!==this.scrollElementRef.nativeElement&&(l=l.offsetParent));return r})(n))}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(M.K$))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-choice-dto"]],viewQuery:function(t,n){if(1&t&&(e.Gf(ne,5),e.Gf(oe,5)),2&t){let i;e.iGM(i=e.CRH())&&(n.scrollElementRef=i.first),e.iGM(i=e.CRH())&&(n.propsElementRef=i.first)}},decls:3,vars:3,consts:[["class","loading",4,"ngIf"],["class","inside-modal-body-container",4,"ngIf"],["class","footer-buttons",4,"ngIf"],[1,"loading"],["class","loading-block",4,"ngIf"],["class","text-center text-danger",4,"ngIf"],[1,"loading-block"],[1,"text-center","text-danger"],[1,"inside-modal-body-container"],[1,"flex-col","flex-auto"],[1,"flex-row","flex-auto"],[1,"flex-col","available-dto"],["class","dto-item",3,"selected","click",4,"ngFor","ngForOf"],[1,"flex-auto","flex-col"],["props",""],[1,"scroll-container"],[1,"scroll"],["scroll",""],[4,"ngFor","ngForOf"],[1,"dto-item",3,"click"],["class","flex-col",4,"ngIf"],[1,"flex-col"],[3,"expanded",4,"ngFor","ngForOf"],[3,"expanded"],["class","dto-item",3,"id","selected","click","dblclick",4,"ngFor","ngForOf"],[1,"dto-item",3,"id","click","dblclick"],[1,"footer-buttons"],["mat-raised-button","","color","success",3,"disabled","click"],["mat-raised-button","","color","accent",3,"click"]],template:function(t,n){1&t&&(e.YNc(0,ue,3,2,"div",0),e.YNc(1,de,15,2,"div",1),e.YNc(2,me,5,1,"div",2)),2&t&&(e.Q6J("ngIf",n.loading),e.xp6(1),e.Q6J("ngIf",!n.loading),e.xp6(1),e.Q6J("ngIf",!n.loading))},dependencies:[d.sg,d.O5,v.lW,J.ib,J.yz,J.yK],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex:auto;min-width:800px;max-width:100%;height:350px;box-sizing:border-box}[_nghost-%COMP%]     .mat-expansion-panel{margin-top:10px}[_nghost-%COMP%]     .mat-expansion-panel:first-child{margin-top:0}[_nghost-%COMP%]     .mat-expansion-panel-body{padding:10px 0!important}.loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:auto;align-items:center;justify-content:center}.available-dto[_ngcontent-%COMP%]{padding:0}.available-dto[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{margin-left:10px}.dto-item[_ngcontent-%COMP%]{cursor:default;padding:3px 10px}.dto-item.selected[_ngcontent-%COMP%]{background-color:#0275d8;color:#fff}.dto-item[_ngcontent-%COMP%]:hover:not(.selected){background-color:#d6e6fc;color:#333}"]}),o})();const _e=["urlAPI"];function fe(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.onApplyDataSource(l))}),e._uU(1),e.qZA()}if(2&o){const t=u.$implicit;e.xp6(1),e.hij(" ",t.title," ")}}function ge(o,u){1&o&&(e.TgZ(0,"div",29),e._uU(1," \u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043f\u0440\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u0438 "),e.qZA())}function he(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"div",18)(1,"div",2)(2,"uf-input",30),e.NdJ("valueChange",function(i){const r=e.CHM(t).$implicit;return e.KtG(r.name=i)}),e.qZA()(),e.TgZ(3,"div",8)(4,"uf-input",31),e.NdJ("valueChange",function(i){const r=e.CHM(t).$implicit;return e.KtG(r.value=i)}),e.ynx(5,32),e.TgZ(6,"button",33),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.onChoiceDTO(l))}),e.TgZ(7,"mat-icon"),e._uU(8,"more_horiz"),e.qZA()(),e.BQk(),e.qZA()(),e.TgZ(9,"button",34),e.NdJ("click",function(){const l=e.CHM(t).index,r=e.oxw();return e.KtG(r.onRemoveParam(l))}),e.TgZ(10,"mat-icon"),e._uU(11,"highlight_off"),e.qZA()()()}if(2&o){const t=u.$implicit;e.xp6(2),e.Q6J("clearButton",!1)("value",t.name),e.xp6(2),e.Q6J("clearButton",!1)("value",t.value)}}let Ce=(()=>{class o{constructor(t,n){this.dialogService=t,this.dsService=n,this.controlTypeApi=new a.M_(a.PA),this.controlCustomApi=new a.M_(null),this.controlMethodHttp=new a.M_("GET"),this.controlMethodApi=new a.M_(null),this.paramsList=[],this.dataSourceList=[],this.typeApiList=[{value:a.PA,title:"{\u041a\u0418\u0410\u0421 API}"},{value:a.Q8,title:"{\u042e\u041f\u0420\u041e API}"},{value:a.dN,title:"{\u0410\u0434\u043c\u0438\u043d\u043a\u0430 API}"},{value:"CUSTOM",title:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 API"}],this.methodHttpList=[{value:"GET"},{value:"POST"}],this.selectedTabIndex=0,this.responseBindFormGoup=new m.cw({root:new a.M_(null),value:new a.M_(null),title:new a.M_(null)}),this.ngUnsubscribe=new E.x}ngOnInit(){var t,n,i;if(this.dsService.getDSList(["id","name","apiUrl","methodHttp","methodApi","paramsList"]).subscribe(l=>{this.dataSourceList=(l||[]).map(r=>({value:r.id,title:r.name,data:{apiUrl:r.apiUrl,methodHttp:r.methodHttp,methodApi:r.methodApi,paramsList:r.paramsList}}))}),null!==(t=this.modalChildData)&&void 0!==t&&t.dataSource)switch(this.controlMethodHttp.setValue(this.modalChildData.dataSource.methodHttp),!(null===(i=null===(n=this.modalChildData)||void 0===n?void 0:n.dataSource)||void 0===i)&&i.responseBind&&this.responseBindFormGoup.patchValue(this.modalChildData.dataSource.responseBind),this.controlMethodApi.setValue(this.modalChildData.dataSource.methodApi),this.paramsList=Array.isArray(this.modalChildData.dataSource.paramsList)?JSON.parse(JSON.stringify(this.modalChildData.dataSource.paramsList)):[],this.modalChildData.dataSource.apiUrl){case a.PA:this.controlTypeApi.setValue(a.PA);break;case a.Q8:this.controlTypeApi.setValue(a.Q8);break;case a.dN:this.controlTypeApi.setValue(a.dN);break;default:this.controlTypeApi.setValue("CUSTOM"),this.controlCustomApi.setValue(this.modalChildData.dataSource.apiUrl)}this.controlTypeApi.valueChanges.pipe((0,x.R)(this.ngUnsubscribe)).subscribe(l=>{"CUSTOM"===l?(this.controlCustomApi.enable(),this.urlAPIElementRef&&this.urlAPIElementRef.focus()):(this.controlCustomApi.disable(),this.controlCustomApi.setValue(null))}),[a.PA,a.Q8,a.dN].includes(this.controlTypeApi.value)?this.controlCustomApi.disable():this.controlCustomApi.enable()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}onApplyDataSource(t){switch(this.controlMethodHttp.setValue(t.data.methodHttp),this.controlMethodApi.setValue(t.data.methodApi),this.paramsList=Array.isArray(t.data.paramsList)?JSON.parse(JSON.stringify(t.data.paramsList)):[],t.data.apiUrl){case a.PA:this.controlTypeApi.setValue(a.PA);break;case a.Q8:this.controlTypeApi.setValue(a.Q8);break;case a.dN:this.controlTypeApi.setValue(a.dN);break;default:this.controlTypeApi.setValue("CUSTOM"),this.controlCustomApi.setValue(t.data.apiUrl)}}onChoiceDTO(t){this.dialogService.showModal("\u0412\u044b\u0431\u043e\u0440 DTO",j,{value:t.value},!0).subscribe(n=>{null!=n&&n.RESULT&&(t.value="$"+(null==n?void 0:n.RESULT.value))})}onRemoveParam(t){this.paramsList.splice(t,1)}onAddParam(){this.selectedTabIndex=0,setTimeout(()=>{this.paramsList.push({name:"",value:""})})}apply(){var t;let n=this.controlCustomApi.value;switch(this.controlTypeApi.value){case a.PA:n=a.PA;break;case a.Q8:n=a.Q8;break;case a.dN:n=a.dN}null===(t=this.dialogRef)||void 0===t||t.close({RESULT:{apiUrl:n,methodHttp:this.controlMethodHttp.value,methodApi:this.controlMethodApi.value,paramsList:this.paramsList,responseBind:this.responseBindFormGoup.value}})}close(){var t;null===(t=this.dialogRef)||void 0===t||t.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.xA),e.Y36(M.XI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-control-datasource"]],viewQuery:function(t,n){if(1&t&&e.Gf(_e,5),2&t){let i;e.iGM(i=e.CRH())&&(n.urlAPIElementRef=i.first)}},decls:57,vars:22,consts:[[1,"inside-modal-body-container"],[1,"flex-row"],[1,"flex-auto"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","primary",1,"ml-10",3,"disabled","matMenuTriggerFor"],["dsMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["label","\u0422\u0438\u043f URL \u0434\u043b\u044f API",3,"options","clearButton","formControl"],[1,"flex-auto","ml-10"],["label","URL \u0434\u043b\u044f API",3,"clearButton","formControl"],["urlAPI",""],["label","\u041c\u0435\u0442\u043e\u0434 HTTP",3,"options","clearButton","formControl"],["label","\u041c\u0435\u0442\u043e\u0434 API",3,"clearButton","formControl"],[1,"fieldset","flex-col","flex-auto"],[1,"legend"],["class","no-params",4,"ngIf"],["class","flex-align-center",4,"ngFor","ngForOf"],[1,"fieldset","flex-col","flex-auto","ml-10",3,"formGroup"],[1,"flex-align-center"],["label","\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440","value","root",3,"readonly"],["label","\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435","formControlName","root",3,"clearButton"],["label","\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440","value","value",3,"readonly"],["label","\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435","formControlName","value",3,"clearButton"],["label","\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440","value","title",3,"readonly"],["label","\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435","formControlName","title",3,"clearButton"],[1,"footer-buttons"],["mat-raised-button","","color","success",3,"click"],["mat-raised-button","","color","accent",3,"click"],["mat-menu-item","",3,"click"],[1,"no-params"],["label","\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440",3,"clearButton","value","valueChange"],["label","\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435",3,"clearButton","value","valueChange"],["ufSuffix",""],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","accent",3,"click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"\xa0"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return n.onAddParam()}),e.TgZ(5,"mat-icon"),e._uU(6,"add"),e.qZA(),e._uU(7," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 "),e.qZA(),e.TgZ(8,"button",4)(9,"mat-icon"),e._uU(10,"search"),e.qZA(),e._uU(11," \u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 "),e.TgZ(12,"mat-icon"),e._uU(13,"arrow_drop_down"),e.qZA()(),e.TgZ(14,"mat-menu",null,5),e.YNc(16,fe,2,1,"button",6),e.qZA()(),e.TgZ(17,"div",1)(18,"div"),e._UZ(19,"uf-select",7),e.qZA(),e.TgZ(20,"div",8),e._UZ(21,"uf-input",9,10),e.qZA()(),e.TgZ(23,"div",1)(24,"div"),e._UZ(25,"uf-select",11),e.qZA(),e.TgZ(26,"div",8),e._UZ(27,"uf-input",12),e.qZA()(),e.TgZ(28,"div",1)(29,"div",13)(30,"div",14),e._uU(31,"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043c\u0435\u0442\u043e\u0434\u0430"),e.qZA(),e.YNc(32,ge,2,0,"div",15),e.YNc(33,he,12,4,"div",16),e.qZA(),e.TgZ(34,"div",17)(35,"div",14),e._uU(36,"\u041f\u0440\u0438\u0432\u044f\u0437\u043a\u0430 \u043e\u0442\u0432\u0435\u0442\u0430"),e.qZA(),e.TgZ(37,"div",18)(38,"div",2),e._UZ(39,"uf-input",19),e.qZA(),e.TgZ(40,"div",8),e._UZ(41,"uf-input",20),e.qZA()(),e.TgZ(42,"div",18)(43,"div",2),e._UZ(44,"uf-input",21),e.qZA(),e.TgZ(45,"div",8),e._UZ(46,"uf-input",22),e.qZA()(),e.TgZ(47,"div",18)(48,"div",2),e._UZ(49,"uf-input",23),e.qZA(),e.TgZ(50,"div",8),e._UZ(51,"uf-input",24),e.qZA()()()()(),e.TgZ(52,"div",25)(53,"button",26),e.NdJ("click",function(){return n.apply()}),e._uU(54,"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c"),e.qZA(),e.TgZ(55,"button",27),e.NdJ("click",function(){return n.close()}),e._uU(56,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),e.qZA()()),2&t){const i=e.MAs(15);e.xp6(8),e.Q6J("disabled",0===n.dataSourceList.length)("matMenuTriggerFor",i),e.xp6(8),e.Q6J("ngForOf",n.dataSourceList),e.xp6(3),e.Q6J("options",n.typeApiList)("clearButton",!1)("formControl",n.controlTypeApi),e.xp6(2),e.Q6J("clearButton",!1)("formControl",n.controlCustomApi),e.xp6(4),e.Q6J("options",n.methodHttpList)("clearButton",!1)("formControl",n.controlMethodHttp),e.xp6(2),e.Q6J("clearButton",!1)("formControl",n.controlMethodApi),e.xp6(5),e.Q6J("ngIf",0===n.paramsList.length),e.xp6(1),e.Q6J("ngForOf",n.paramsList),e.xp6(1),e.Q6J("formGroup",n.responseBindFormGoup),e.xp6(5),e.Q6J("readonly",!0),e.xp6(2),e.Q6J("clearButton",!1),e.xp6(3),e.Q6J("readonly",!0),e.xp6(2),e.Q6J("clearButton",!1),e.xp6(3),e.Q6J("readonly",!0),e.xp6(2),e.Q6J("clearButton",!1)}},dependencies:[d.sg,d.O5,m.JJ,m.JL,m.oH,m.sg,m.u,C.Hw,h.VK,h.OP,h.p6,v.lW,a.oD,a.Oy,a.tt],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex:auto;min-width:800px;max-width:100%;height:435px;box-sizing:border-box}.no-params[_ngcontent-%COMP%]{flex:auto;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#e32636}[_nghost-%COMP%]     .mat-tab-body-content{padding-top:10px;scrollbar-width:thin;scrollbar-color:#004990 #d6e6fc;box-sizing:border-box}[_nghost-%COMP%]     .mat-tab-body-content::-webkit-scrollbar{width:6px;height:6px;background-color:#d6e6fc}[_nghost-%COMP%]     .mat-tab-body-content::-webkit-scrollbar-thumb{background-color:#004990;border-radius:4px}"]}),o})();var G=s(9832),F=s(3251);const xe=["labelElement"],ve=["visibleCond"],Te=["readonlyCond"],be=["requiredCond"];function Ae(o,u){if(1&o&&e.GkF(0,33),2&o){e.oxw();const t=e.MAs(52);e.Q6J("ngTemplateOutlet",t)}}function Ee(o,u){if(1&o&&e.GkF(0,33),2&o){e.oxw();const t=e.MAs(54);e.Q6J("ngTemplateOutlet",t)}}function Fe(o,u){if(1&o&&e.GkF(0,33),2&o){e.oxw();const t=e.MAs(56);e.Q6J("ngTemplateOutlet",t)}}function Be(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"div",39)(1,"div",40)(2,"uf-input",41),e.NdJ("valueChange",function(i){const r=e.CHM(t).$implicit;return e.KtG(r.label=i)}),e.qZA()(),e.TgZ(3,"button",42),e.NdJ("click",function(){const l=e.CHM(t).index,r=e.oxw(2);return e.KtG(r.onMoveTabUp(l))}),e.TgZ(4,"mat-icon"),e._uU(5,"arrow_drop_up"),e.qZA()(),e.TgZ(6,"button",43),e.NdJ("click",function(){const l=e.CHM(t).index,r=e.oxw(2);return e.KtG(r.onMoveTabDown(l))}),e.TgZ(7,"mat-icon"),e._uU(8,"arrow_drop_down"),e.qZA()(),e.TgZ(9,"button",44),e.NdJ("click",function(){const l=e.CHM(t).index,r=e.oxw(2);return e.KtG(r.onRemoveTab(l))}),e.TgZ(10,"mat-icon"),e._uU(11,"close"),e.qZA()()()}if(2&o){const t=u.$implicit,n=u.index,i=e.oxw(2);e.xp6(2),e.Q6J("clearButton",!1)("value",t.label),e.xp6(1),e.Q6J("disabled",0===n),e.xp6(3),e.Q6J("disabled",n>=i.elementTabs.length-1)}}function we(o,u){if(1&o&&(e.TgZ(0,"fieldset",34)(1,"legend"),e._uU(2,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0432\u043a\u043b\u0430\u0434\u043e\u043a"),e.qZA(),e.TgZ(3,"div",35)(4,"div",36)(5,"div",37),e.YNc(6,Be,12,4,"div",38),e.qZA()()()()),2&o){const t=e.oxw();e.xp6(6),e.Q6J("ngForOf",t.elementTabs)}}function Ze(o,u){}function Pe(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"uf-input",62),e.NdJ("valueChange",function(i){e.CHM(t);const l=e.oxw(2);return e.KtG(l.controlProperties.callMethod=i)}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("value",t.controlProperties.callMethod)}}function ye(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"uf-input",63),e.NdJ("valueChange",function(i){e.CHM(t);const l=e.oxw(2);return e.KtG(l.controlProperties.bindDTO=i)}),e.ynx(1,56),e.TgZ(2,"button",64),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.onChoiceDTO())}),e.TgZ(3,"mat-icon"),e._uU(4,"more_horiz"),e.qZA()(),e.BQk(),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("value",t.controlProperties.bindDTO)}}function De(o,u){if(1&o&&(e.TgZ(0,"fieldset")(1,"legend"),e._uU(2,"\u041a\u043e\u043d\u0442\u0440\u043e\u043b \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f \u0447\u0442\u0435\u043d\u0438\u044f"),e.qZA(),e.TgZ(3,"div",10)(4,"mat-button-toggle-group",15)(5,"mat-button-toggle",16),e._uU(6,"\u041e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u043e"),e.qZA(),e.TgZ(7,"mat-button-toggle",16),e._uU(8," \u0422\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f \u0447\u0442\u0435\u043d\u0438\u044f "),e.qZA(),e.TgZ(9,"mat-button-toggle",17),e._uU(10,"\u041f\u043e \u0443\u0441\u043b\u043e\u0432\u0438\u044e"),e.qZA()(),e.TgZ(11,"div",7),e._UZ(12,"uf-input",65,66),e.qZA()()()),2&o){const t=e.oxw(2);e.xp6(4),e.Q6J("formControl",t.controlReadonlyType),e.xp6(1),e.Q6J("value",!1),e.xp6(2),e.Q6J("value",!0),e.xp6(5),e.Q6J("clearButton",!1)("formControl",t.controlReadonlyCond)}}function Se(o,u){if(1&o&&(e.TgZ(0,"fieldset",14)(1,"legend"),e._uU(2,"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"),e.qZA(),e.TgZ(3,"div",10)(4,"mat-button-toggle-group",15)(5,"mat-button-toggle",16),e._uU(6,"\u041e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u043e"),e.qZA(),e.TgZ(7,"mat-button-toggle",16),e._uU(8,"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e"),e.qZA(),e.TgZ(9,"mat-button-toggle",17),e._uU(10,"\u041f\u043e \u0443\u0441\u043b\u043e\u0432\u0438\u044e"),e.qZA()(),e.TgZ(11,"div",7),e._UZ(12,"uf-input",65,67),e.qZA()()()),2&o){const t=e.oxw(2);e.xp6(4),e.Q6J("formControl",t.controlRequiredType),e.xp6(1),e.Q6J("value",!1),e.xp6(2),e.Q6J("value",!0),e.xp6(5),e.Q6J("clearButton",!1)("formControl",t.controlRequiredCond)}}function Oe(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"div",1)(1,"uf-checkbox",68),e.NdJ("valueChange",function(i){e.CHM(t);const l=e.oxw(2);return e.KtG(l.controlProperties.clearButton=i)}),e.qZA()()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("value",t.controlProperties.clearButton)}}function Ne(o,u){if(1&o&&e.GkF(0,33),2&o){e.oxw(2);const t=e.MAs(58);e.Q6J("ngTemplateOutlet",t)}}function Me(o,u){if(1&o&&e.GkF(0,33),2&o){e.oxw(2);const t=e.MAs(60);e.Q6J("ngTemplateOutlet",t)}}function Je(o,u){if(1&o&&e.GkF(0,33),2&o){e.oxw(2);const t=e.MAs(62);e.Q6J("ngTemplateOutlet",t)}}function ke(o,u){if(1&o&&e.GkF(0,33),2&o){e.oxw(2);const t=e.MAs(64);e.Q6J("ngTemplateOutlet",t)}}const Re=function(){return["BUTTON"]},Ie=function(){return["BUTTON","CHECKBOX"]};function Ue(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"fieldset",34)(1,"legend"),e._uU(2,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u0430"),e.qZA(),e.TgZ(3,"div",45)(4,"div"),e._UZ(5,"uf-select",46),e.qZA(),e.TgZ(6,"div"),e.YNc(7,Pe,1,1,"uf-input",47),e.qZA(),e.TgZ(8,"div"),e.YNc(9,ye,5,1,"uf-input",48),e.qZA(),e.YNc(10,De,14,5,"fieldset",49),e.YNc(11,Se,14,5,"fieldset",50),e.TgZ(12,"div",51),e.YNc(13,Oe,2,1,"div",52),e.qZA(),e.TgZ(14,"div",10)(15,"div")(16,"uf-checkbox",53),e.NdJ("valueChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.controlProperties.usePrefix=i)}),e.qZA()(),e.TgZ(17,"div",54)(18,"uf-input",55),e.NdJ("valueChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.controlProperties.prefixIcon=i)}),e.ynx(19,56),e.TgZ(20,"button",57),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openUrlNewWindow("https://fonts.google.com/icons?selected=Material+Icons"))}),e.TgZ(21,"mat-icon"),e._uU(22,"open_in_new"),e.qZA()(),e.BQk(),e.qZA()(),e.TgZ(23,"div",7)(24,"uf-input",58),e.NdJ("valueChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.controlProperties.prefixHint=i)}),e.qZA()()(),e.TgZ(25,"div",10)(26,"div")(27,"uf-checkbox",59),e.NdJ("valueChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.controlProperties.useSuffix=i)}),e.qZA()(),e.TgZ(28,"div",54)(29,"uf-input",55),e.NdJ("valueChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.controlProperties.suffixIcon=i)}),e.ynx(30,56),e.TgZ(31,"button",57),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openUrlNewWindow("https://fonts.google.com/icons?selected=Material+Icons"))}),e.TgZ(32,"mat-icon"),e._uU(33,"open_in_new"),e.qZA()(),e.BQk(),e.qZA()(),e.TgZ(34,"div",7)(35,"uf-input",60),e.NdJ("valueChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.controlProperties.suffixHint=i)}),e.qZA()()(),e.TgZ(36,"div",61),e.YNc(37,Ne,1,1,"ng-container",22),e.YNc(38,Me,1,1,"ng-container",22),e.YNc(39,Je,1,1,"ng-container",22),e.YNc(40,ke,1,1,"ng-container",22),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(5),e.Q6J("options",t.controlTypesList)("clearButton",!1)("formControl",t.controlType),e.xp6(2),e.Q6J("ngIf",t.hasCallMethod),e.xp6(2),e.Q6J("ngIf","BUTTON"!==t.controlType.value),e.xp6(1),e.Q6J("ngIf",!e.DdM(23,Re).includes(t.controlType.value)),e.xp6(1),e.Q6J("ngIf",!e.DdM(24,Ie).includes(t.controlType.value)),e.xp6(2),e.Q6J("ngIf",t.hasClearButton),e.xp6(3),e.Q6J("value",t.controlProperties.usePrefix),e.xp6(2),e.Q6J("disabled",!t.controlProperties.usePrefix)("value",t.controlProperties.prefixIcon),e.xp6(6),e.Q6J("disabled",!t.controlProperties.usePrefix)("value",t.controlProperties.prefixHint),e.xp6(3),e.Q6J("value",t.controlProperties.useSuffix),e.xp6(2),e.Q6J("disabled",!t.controlProperties.useSuffix)("value",t.controlProperties.suffixIcon),e.xp6(6),e.Q6J("disabled",!t.controlProperties.useSuffix)("value",t.controlProperties.suffixHint),e.xp6(1),e.Q6J("ngSwitch",t.controlType.value),e.xp6(1),e.Q6J("ngSwitchCase","TEXT"),e.xp6(1),e.Q6J("ngSwitchCase","SELECT"),e.xp6(1),e.Q6J("ngSwitchCase","NUMBER"),e.xp6(1),e.Q6J("ngSwitchCase","DATEPICKER")}}function qe(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"uf-input",71),e.NdJ("valueChange",function(i){e.CHM(t);const l=e.oxw(2);return e.KtG(l.controlProperties.maskValue=i)}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("value",t.controlProperties.maskValue)}}function Qe(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"fieldset",45)(1,"uf-select",69),e.NdJ("valueChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.controlProperties.maskType=i)}),e.qZA(),e.YNc(2,qe,1,1,"uf-input",70),e.qZA()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("options",t.controlMaskList)("value",t.controlProperties.maskType),e.xp6(1),e.Q6J("ngIf","custom"===t.controlProperties.maskType)}}function Le(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"uf-input",72),e.ynx(1,56),e.TgZ(2,"button",73)(3,"mat-icon"),e._uU(4,"highlight_off"),e.qZA()(),e.TgZ(5,"button",64),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onControlDataSource())}),e.TgZ(6,"mat-icon"),e._uU(7,"more_horiz"),e.qZA()(),e.BQk(),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("readonly",!0)("disabled",!t.controlProperties.dataSource)("value",t.dataSourceValue),e.xp6(2),e.Q6J("disabled",!t.controlProperties.dataSource)}}function He(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"fieldset",45)(1,"div",5)(2,"div",1)(3,"uf-touchspin",74),e.NdJ("valueChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.controlProperties.min=i)}),e.qZA()(),e.TgZ(4,"div",7)(5,"uf-touchspin",75),e.NdJ("valueChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.controlProperties.max=i)}),e.qZA()(),e.TgZ(6,"div",7)(7,"uf-touchspin",76),e.NdJ("valueChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.controlProperties.step=i)}),e.qZA()()(),e.TgZ(8,"div",10)(9,"div")(10,"uf-checkbox",77),e.NdJ("valueChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.controlProperties.allowDecimal=i)})("changeEvent",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onChangeAllowDecimal())}),e.qZA()(),e.TgZ(11,"div",54)(12,"uf-touchspin",78),e.NdJ("valueChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.controlProperties.decimal=i)}),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("value",t.controlProperties.min),e.xp6(2),e.Q6J("value",t.controlProperties.max),e.xp6(2),e.Q6J("allowDecimal",t.controlProperties.allowDecimal)("decimal",t.controlProperties.decimal)("value",t.controlProperties.step),e.xp6(3),e.Q6J("value",t.controlProperties.allowDecimal),e.xp6(1),e.Udp("width",240,"px"),e.xp6(1),e.Q6J("clearButton",!1)("disabled",!t.controlProperties.allowDecimal)("value",t.controlProperties.decimal)}}function je(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"fieldset",45)(1,"div",5)(2,"div")(3,"uf-datepicker",74),e.NdJ("valueChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.controlProperties.min=i)}),e.qZA()(),e.TgZ(4,"div",54)(5,"uf-datepicker",75),e.NdJ("valueChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.controlProperties.max=i)}),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("value",t.controlProperties.min),e.xp6(2),e.Q6J("value",t.controlProperties.max)}}let Ge=(()=>{class o{constructor(t){this.dialogService=t,this.generalLabel="",this.unitsList=[{value:"pixels",title:"\u041f\u0438\u043a\u0441\u0435\u043b\u0438"},{value:"percent",title:"\u041f\u0440\u043e\u0446\u0435\u043d\u0442\u044b"}],this.controlTypesList=[{value:"TEXT",title:"\u0421\u0442\u0440\u043e\u043a\u0430"},{value:"SELECT",title:"\u0421\u043f\u0438\u0441\u043e\u043a"},{value:"NUMBER",title:"\u0427\u0438\u0441\u043b\u043e"},{value:"DATEPICKER",title:"\u0414\u0430\u0442\u0430/\u0432\u0440\u0435\u043c\u044f"},{value:"CHECKBOX",title:"\u0424\u043b\u0430\u0436\u043e\u043a"},{value:"BUTTON",title:"\u041a\u043d\u043e\u043f\u043a\u0430"}],this.controlMaskList=[{value:"text",title:"\u041b\u044e\u0431\u043e\u0439 \u0442\u0435\u043a\u0441\u0442 (\u0438\u0441\u043a\u043b\u044e\u0447\u0430\u044f \u0441\u043f\u0435\u0446. \u0441\u0438\u043c\u0432\u043e\u043b\u044b)"},{value:"rus",title:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439 \u0442\u0435\u043a\u0441\u0442"},{value:"eng",title:"\u0410\u043d\u0433\u043b\u0438\u0439\u0441\u043a\u0438\u0439 \u0442\u0435\u043a\u0441\u0442"},{value:"ruseng",title:"\u0420\u0443\u0441\u0441\u043a\u043e-\u0430\u043d\u0433\u043b\u0438\u0439\u0441\u043a\u0438\u0439 \u0442\u0435\u043a\u0441\u0442"},{value:"number",title:"\u0422\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b"},{value:"email",title:"Email"},{value:"phone",title:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"},{value:"custom",title:"\u0423\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0440\u0443\u0447\u043d\u0443\u044e"}],this.generalFormGroup=new m.cw({id:new a.M_(null),label:new a.M_(null),autofill:new a.M_(!1),width:new a.M_(null),widthUnit:new a.M_("pixels")}),this.elementTabs=[],this.controlType=new a.M_(null),this.controlVisibleType=new a.M_(!0),this.controlVisibleCond=new a.M_(null),this.controlReadonlyType=new a.M_(!0),this.controlReadonlyCond=new a.M_(null),this.controlRequiredType=new a.M_(!0),this.controlRequiredCond=new a.M_(null),this.controlProperties={clearButton:!1,readonly:!1,callMethod:null,dataSource:null,bindDTO:null,usePrefix:!1,prefixIcon:null,prefixHint:null,useSuffix:!1,suffixIcon:null,suffixHint:null,min:null,max:null,step:null,allowDecimal:!1,decimal:null,maskType:null,maskValue:null},this.ngUnsubscribe=new E.x}get isAutofill(){var t;return null===(t=this.generalFormGroup.get("autofill"))||void 0===t?void 0:t.value}get elementType(){var t,n;return null!==(n=null===(t=this.modalChildData)||void 0===t?void 0:t.element.type)&&void 0!==n?n:""}get hasCallMethod(){return ee.includes(String(this.controlType.value))}get hasClearButton(){return L.includes(String(this.controlType.value))}get dataSourceValue(){if(this.controlProperties.dataSource){let t=this.controlProperties.dataSource.apiUrl;switch(this.controlProperties.dataSource.apiUrl){case a.PA:t="{\u041a\u0418\u0410\u0421 API}/";break;case a.Q8:t="{\u042e\u041f\u0420\u041e API}/";break;case a.dN:t="{\u0410\u0434\u043c\u0438\u043d\u043a\u0430 API}/"}return[`[${this.controlProperties.dataSource.methodHttp}] `,t,this.controlProperties.dataSource.methodApi].join("")}return""}ngOnInit(){var t,n,i,l,r,c,p,f,B,w,Z,T,P,R,I,U;if(this.controlVisibleType.valueChanges.pipe((0,x.R)(this.ngUnsubscribe)).subscribe(y=>{var g;"cond"===y?(this.controlVisibleCond.enable(),null===(g=this.visibleCondRef)||void 0===g||g.focus()):(this.controlVisibleCond.setValue(null),this.controlVisibleCond.disable())}),this.controlReadonlyType.valueChanges.pipe((0,x.R)(this.ngUnsubscribe)).subscribe(y=>{var g;"cond"===y?(this.controlReadonlyCond.enable(),null===(g=this.readonlyCondRef)||void 0===g||g.focus()):(this.controlReadonlyCond.setValue(null),this.controlReadonlyCond.disable())}),this.controlRequiredType.valueChanges.pipe((0,x.R)(this.ngUnsubscribe)).subscribe(y=>{var g;"cond"===y?(this.controlRequiredCond.enable(),null===(g=this.requiredCondRef)||void 0===g||g.focus()):(this.controlRequiredCond.setValue(null),this.controlRequiredCond.disable())}),null!==(t=this.modalChildData)&&void 0!==t&&t.element)switch("boolean"==typeof this.modalChildData.element.visible?this.controlVisibleType.setValue(this.modalChildData.element.visible):(this.controlVisibleCond.setValue(this.modalChildData.element.visible),this.controlVisibleType.setValue("cond")),null===(n=this.generalFormGroup.get("id"))||void 0===n||n.setValue(this.modalChildData.element.id),null===(i=this.generalFormGroup.get("label"))||void 0===i||i.setValue(this.modalChildData.element.label),null===(l=this.generalFormGroup.get("autofill"))||void 0===l||l.setValue(this.modalChildData.element.autofill),null===(r=this.generalFormGroup.get("width"))||void 0===r||r.setValue(this.modalChildData.element.width),null===(c=this.generalFormGroup.get("widthUnit"))||void 0===c||c.setValue(null!==(p=this.modalChildData.element.widthUnit)&&void 0!==p?p:"pixels"),this.modalChildData.element.type){case"TABS":this.generalLabel="\u042d\u043b\u0435\u043c\u0435\u043d\u0442: \u0412\u043a\u043b\u0430\u0434\u043a\u0438",null===(f=this.generalFormGroup.get("label"))||void 0===f||f.disable(),"TABS"===(null===(B=this.modalChildData)||void 0===B?void 0:B.element.type)&&Array.isArray(null===(w=this.modalChildData)||void 0===w?void 0:w.element.tabs)&&(this.elementTabs=JSON.parse(JSON.stringify(this.modalChildData.element.tabs)));break;case"PANEL":this.generalLabel="\u042d\u043b\u0435\u043c\u0435\u043d\u0442: \u041f\u0430\u043d\u0435\u043b\u044c";break;case"CONTROL":this.generalLabel="\u042d\u043b\u0435\u043c\u0435\u043d\u0442: \u041a\u043e\u043d\u0442\u0440\u043e\u043b","boolean"==typeof(null===(Z=this.modalChildData.element.controlProperties)||void 0===Z?void 0:Z.readonly)?this.controlReadonlyType.setValue(this.modalChildData.element.controlProperties.readonly):"string"==typeof(null===(T=this.modalChildData.element.controlProperties)||void 0===T?void 0:T.readonly)?(this.controlReadonlyCond.setValue(this.modalChildData.element.controlProperties.readonly),this.controlReadonlyType.setValue("cond")):(this.controlReadonlyType.setValue(!1),this.controlReadonlyCond.setValue(null)),"boolean"==typeof(null===(P=this.modalChildData.element.controlProperties)||void 0===P?void 0:P.required)?this.controlRequiredType.setValue(this.modalChildData.element.controlProperties.required):"string"==typeof(null===(R=this.modalChildData.element.controlProperties)||void 0===R?void 0:R.required)?(this.controlRequiredCond.setValue(this.modalChildData.element.controlProperties.required),this.controlRequiredType.setValue("cond")):(this.controlRequiredType.setValue(!1),this.controlRequiredCond.setValue(null)),!(null===(I=this.modalChildData)||void 0===I)&&I.element.controlType&&this.controlType.setValue(this.modalChildData.element.controlType),null!==(U=this.modalChildData)&&void 0!==U&&U.element.controlProperties&&(void 0!==this.modalChildData.element.controlProperties.clearButton&&(this.controlProperties.clearButton=this.modalChildData.element.controlProperties.clearButton),this.controlProperties.bindDTO=this.modalChildData.element.controlProperties.bindDTO,this.controlProperties.usePrefix=this.modalChildData.element.controlProperties.usePrefix,this.controlProperties.prefixIcon=this.modalChildData.element.controlProperties.prefixIcon,this.controlProperties.prefixHint=this.modalChildData.element.controlProperties.prefixHint,this.controlProperties.useSuffix=this.modalChildData.element.controlProperties.useSuffix,this.controlProperties.suffixIcon=this.modalChildData.element.controlProperties.suffixIcon,this.controlProperties.suffixHint=this.modalChildData.element.controlProperties.suffixHint,this.controlProperties.min=this.modalChildData.element.controlProperties.min,this.controlProperties.max=this.modalChildData.element.controlProperties.max,this.controlProperties.step=this.modalChildData.element.controlProperties.step,this.controlProperties.allowDecimal=this.modalChildData.element.controlProperties.allowDecimal,this.controlProperties.decimal=this.modalChildData.element.controlProperties.decimal,this.controlProperties.maskType=this.modalChildData.element.controlProperties.maskType,this.controlProperties.maskValue=this.modalChildData.element.controlProperties.maskValue,this.controlProperties.dataSource=this.modalChildData.element.controlProperties.dataSource?JSON.parse(JSON.stringify(this.modalChildData.element.controlProperties.dataSource)):null)}}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}ngAfterViewInit(){var t;null===(t=this.labelElementRef)||void 0===t||t.focus()}onControlDataSource(){this.dialogService.showModal("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445",Ce,{dataSource:this.controlProperties.dataSource},!0).subscribe(t=>{null!=t&&t.RESULT&&(this.controlProperties.dataSource=t.RESULT)})}onChoiceDTO(){this.dialogService.showModal("\u0412\u044b\u0431\u043e\u0440 DTO",j,{value:this.controlProperties.bindDTO},!0).subscribe(t=>{null!=t&&t.RESULT&&(this.controlProperties.bindDTO=t.RESULT.value)})}onChangeAllowDecimal(){this.controlProperties.allowDecimal?a.ZH.hasValue(this.controlProperties.decimal)||(this.controlProperties.decimal=5):this.controlProperties.decimal=null}openUrlNewWindow(t){window.open(t)}onRemoveTab(t){this.dialogService.showConfirm("\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u0443 \u0432\u043a\u043b\u0430\u0434\u043a\u0443?").subscribe({next:()=>{this.elementTabs.splice(t,1)},error:()=>{}})}onMoveTabUp(t){(0,_.bA)(this.elementTabs,t,t-1)}onMoveTabDown(t){(0,_.bA)(this.elementTabs,t,t+1)}apply(){var t,n;let i=this.generalFormGroup.getRawValue();switch(i.visible="cond"===this.controlVisibleType.value?this.controlVisibleCond.value:Boolean(this.controlVisibleType.value),null===(t=this.modalChildData)||void 0===t?void 0:t.element.type){case"TABS":i=Object.assign(Object.assign({},i),{tabs:this.elementTabs});break;case"CONTROL":this.controlProperties.readonly="cond"===this.controlReadonlyType.value?this.controlReadonlyCond.value:Boolean(this.controlReadonlyType.value),this.controlProperties.required="cond"===this.controlRequiredType.value?this.controlRequiredCond.value:Boolean(this.controlRequiredType.value),this.controlProperties.usePrefix||(this.controlProperties.prefixIcon=null,this.controlProperties.prefixHint=null),this.controlProperties.useSuffix||(this.controlProperties.suffixIcon=null,this.controlProperties.suffixHint=null),this.controlProperties.allowDecimal||(this.controlProperties.decimal=null),"custom"!==this.controlProperties.maskType&&(this.controlProperties.maskValue=null),i=Object.assign(Object.assign({},i),{controlType:this.controlType.value,controlProperties:this.controlProperties})}null===(n=this.dialogRef)||void 0===n||n.close({element:i})}close(){var t;null===(t=this.dialogRef)||void 0===t||t.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.xA))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-control-settings"]],viewQuery:function(t,n){if(1&t&&(e.Gf(xe,5),e.Gf(ve,5),e.Gf(Te,5),e.Gf(be,5)),2&t){let i;e.iGM(i=e.CRH())&&(n.labelElementRef=i.first),e.iGM(i=e.CRH())&&(n.visibleCondRef=i.first),e.iGM(i=e.CRH())&&(n.readonlyCondRef=i.first),e.iGM(i=e.CRH())&&(n.requiredCondRef=i.first)}},decls:65,vars:16,consts:[[1,"inside-modal-body-container"],[1,"flex-auto"],[3,"label"],[1,"flex-row","flex-auto","mt-10"],[1,"flex-col","general-group",3,"formGroup"],[1,"flex-row"],["label","\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440","formControlName","id"],[1,"flex-auto","ml-10"],["label","\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430","formControlName","label",3,"enterClick"],["labelElement",""],[1,"flex-align-center"],["label","\u0412\u0441\u0435 \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u043e\u0435 \u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u043e","formControlName","autofill"],["label","\u0428\u0438\u0440\u0438\u043d\u0430","formControlName","width",1,"ml-10",3,"disabled","clearButton"],["label","\u0415\u0434\u0438\u043d\u0438\u0446\u044b \u0438\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u044f","formControlName","widthUnit",3,"disabled","clearButton","options"],[1,"mt-10"],[3,"formControl"],[3,"value"],["value","cond"],["label","\u0423\u0441\u043b\u043e\u0432\u0438\u0435 \u0432\u0438\u0434\u0438\u043c\u043e\u0441\u0442\u0438",3,"clearButton","formControl"],["visibleCond",""],[1,"warning-block","mt-10"],[1,"flex-col","flex-auto",3,"ngSwitch"],[3,"ngTemplateOutlet",4,"ngSwitchCase"],[1,"footer-buttons"],["mat-raised-button","","color","success",3,"click"],["mat-raised-button","","color","accent",3,"click"],["tplAdditionalTabs",""],["tplAdditionalPanel",""],["tplAdditionalControl",""],["tplControlPropertiesText",""],["tplControlPropertiesSelect",""],["tplControlPropertiesNumber",""],["tplControlPropertiesDatepicker",""],[3,"ngTemplateOutlet"],[1,"flex-col","flex-auto","ml-10"],[1,"flex-col","flex-auto"],[1,"scroll-container"],[1,"scroll"],["class","tab-item",4,"ngFor","ngForOf"],[1,"tab-item"],[1,"tab-item_title"],["label","\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0432\u043a\u043b\u0430\u0434\u043a\u0438",3,"clearButton","value","valueChange"],["mat-icon-button","","color","primary","title","\u041f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u044c \u0432\u043a\u043b\u0430\u0434\u043a\u0443 \u0432\u044b\u0448\u0435",3,"disabled","click"],["mat-icon-button","","color","primary","title","\u041f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u044c \u0432\u043a\u043b\u0430\u0434\u043a\u0443 \u043d\u0438\u0436\u0435",3,"disabled","click"],["mat-icon-button","","color","accent","title","\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u043a\u043b\u0430\u0434\u043a\u0443",3,"click"],[1,"flex-col"],["label","\u0422\u0438\u043f \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u0430",3,"options","clearButton","formControl"],["label","\u0412\u044b\u0437\u044b\u0432\u0430\u0435\u043c\u044b\u0439 \u043c\u0435\u0442\u043e\u0434",3,"value","valueChange",4,"ngIf"],["label","\u041f\u0440\u0438\u0432\u044f\u0437\u043a\u0430 \u043a DTO",3,"value","valueChange",4,"ngIf"],[4,"ngIf"],["class","mt-10",4,"ngIf"],[1,"flex-align-center","mt-10"],["class","flex-auto",4,"ngIf"],["label","\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u0435\u0444\u0438\u043a\u0441",3,"value","valueChange"],[1,"ml-10"],["label","\u0418\u043a\u043e\u043d\u043a\u0430 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u0430",3,"disabled","value","valueChange"],["ufSuffix",""],["mat-icon-button","","title","\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0438\u043a\u043e\u043d\u043a\u0438",3,"click"],["label","\u0425\u0438\u043d\u0442 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u0430",3,"disabled","value","valueChange"],["label","\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u0443\u0444\u0444\u0438\u043a\u0441",3,"value","valueChange"],["label","\u0425\u0438\u043d\u0442 \u0441\u0443\u0444\u0444\u0438\u043a\u0441\u0430",3,"disabled","value","valueChange"],[1,"flex-col",3,"ngSwitch"],["label","\u0412\u044b\u0437\u044b\u0432\u0430\u0435\u043c\u044b\u0439 \u043c\u0435\u0442\u043e\u0434",3,"value","valueChange"],["label","\u041f\u0440\u0438\u0432\u044f\u0437\u043a\u0430 \u043a DTO",3,"value","valueChange"],["mat-icon-button","","color","primary",3,"click"],["label","\u0423\u0441\u043b\u043e\u0432\u0438\u0435",3,"clearButton","formControl"],["readonlyCond",""],["requiredCond",""],["label","\u0421\u043a\u0440\u044b\u0442\u044c/\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043a\u043d\u043e\u043f\u043a\u0443 \u043e\u0447\u0438\u0441\u0442\u043a\u0438 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u0430",3,"value","valueChange"],["label","\u041c\u0430\u0441\u043a\u0430 \u0432\u0432\u043e\u0434\u0430",3,"options","value","valueChange"],["label","\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043c\u0430\u0441\u043a\u0443 \u0432\u0440\u0443\u0447\u043d\u0443\u044e",3,"value","valueChange",4,"ngIf"],["label","\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043c\u0430\u0441\u043a\u0443 \u0432\u0440\u0443\u0447\u043d\u0443\u044e",3,"value","valueChange"],["label","\u0418\u0441\u0442\u043e\u0447\u043d\u0438\u043a \u0434\u0430\u043d\u043d\u044b\u0445",3,"readonly","disabled","value"],["mat-icon-button","","color","accent",3,"disabled"],["label","\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435",3,"value","valueChange"],["label","\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435",3,"value","valueChange"],["label","\u0428\u0430\u0433",3,"allowDecimal","decimal","value","valueChange"],["label","\u0414\u0440\u043e\u0431\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435",3,"value","valueChange","changeEvent"],["label","\u041a\u043e\u043b-\u0432\u043e \u0447\u0438\u0441\u0435\u043b \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u043f\u044f\u0442\u043e\u0439",3,"clearButton","disabled","value","valueChange"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"mat-tab-group",1)(2,"mat-tab",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div"),e._UZ(7,"uf-input",6),e.qZA(),e.TgZ(8,"div",7)(9,"uf-input",8,9),e.NdJ("enterClick",function(){return n.apply()}),e.qZA()()(),e.TgZ(11,"fieldset")(12,"legend"),e._uU(13,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0448\u0438\u0440\u0438\u043d\u044b \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430"),e.qZA(),e.TgZ(14,"div",10),e._UZ(15,"uf-checkbox",11)(16,"uf-touchspin",12)(17,"uf-select",13),e.qZA()(),e.TgZ(18,"fieldset",14)(19,"legend"),e._uU(20,"\u0412\u0438\u0434\u0438\u043c\u043e\u0441\u0442\u044c \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430"),e.qZA(),e.TgZ(21,"div",10)(22,"mat-button-toggle-group",15)(23,"mat-button-toggle",16),e._uU(24,"\u0412\u0438\u0434\u0438\u043c\u044b\u0439"),e.qZA(),e.TgZ(25,"mat-button-toggle",16),e._uU(26,"\u041d\u0435\u0432\u0438\u0434\u0438\u043c\u044b\u0439"),e.qZA(),e.TgZ(27,"mat-button-toggle",17),e._uU(28,"\u041f\u043e \u0443\u0441\u043b\u043e\u0432\u0438\u044e"),e.qZA()(),e.TgZ(29,"div",7),e._UZ(30,"uf-input",18,19),e.qZA()()(),e.TgZ(32,"div",20)(33,"p"),e._uU(34,"\u041f\u0430\u043c\u044f\u0442\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0434\u0430\u043d\u0438\u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u0439."),e.qZA(),e.TgZ(35,"ul")(36,"li"),e._uU(37," \u041f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 DTO \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432 \u043d\u0430\u0447\u0430\u043b\u0435 \u0443\u043a\u0430\u0437\u0430\u0442\u044c $, \u0430 \u0432 \u043a\u043e\u043d\u0446\u0435 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043f\u0440\u043e\u0431\u0435\u043b, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, $CalcParams[ATTRISN=868391].VAL == 122 "),e.qZA(),e.TgZ(38,"li"),e._uU(39,"\u0414\u043b\u044f \u0441\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c =="),e.qZA(),e.TgZ(40,"li"),e._uU(41,"\u0414\u043b\u044f \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u0441\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u044f !="),e.qZA()()()(),e.TgZ(42,"div",21),e.YNc(43,Ae,1,1,"ng-container",22),e.YNc(44,Ee,1,1,"ng-container",22),e.YNc(45,Fe,1,1,"ng-container",22),e.qZA()()()()(),e.TgZ(46,"div",23)(47,"button",24),e.NdJ("click",function(){return n.apply()}),e._uU(48,"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c"),e.qZA(),e.TgZ(49,"button",25),e.NdJ("click",function(){return n.close()}),e._uU(50,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),e.qZA()(),e.YNc(51,we,7,1,"ng-template",null,26,e.W1O),e.YNc(53,Ze,0,0,"ng-template",null,27,e.W1O),e.YNc(55,Ue,41,25,"ng-template",null,28,e.W1O),e.YNc(57,Qe,3,3,"ng-template",null,29,e.W1O),e.YNc(59,Le,8,4,"ng-template",null,30,e.W1O),e.YNc(61,He,13,11,"ng-template",null,31,e.W1O),e.YNc(63,je,6,2,"ng-template",null,32,e.W1O)),2&t&&(e.xp6(2),e.Q6J("label",n.generalLabel),e.xp6(2),e.Q6J("formGroup",n.generalFormGroup),e.xp6(12),e.Q6J("disabled",n.isAutofill)("clearButton",!1),e.xp6(1),e.Q6J("disabled",n.isAutofill)("clearButton",!1)("options",n.unitsList),e.xp6(5),e.Q6J("formControl",n.controlVisibleType),e.xp6(1),e.Q6J("value",!0),e.xp6(2),e.Q6J("value",!1),e.xp6(5),e.Q6J("clearButton",!1)("formControl",n.controlVisibleCond),e.xp6(12),e.Q6J("ngSwitch",n.elementType),e.xp6(1),e.Q6J("ngSwitchCase","TABS"),e.xp6(1),e.Q6J("ngSwitchCase","PANEL"),e.xp6(1),e.Q6J("ngSwitchCase","CONTROL"))},dependencies:[d.sg,d.O5,d.tP,d.RF,d.n9,m.JJ,m.JL,m.oH,m.sg,m.u,C.Hw,G.A9,G.Yi,v.lW,F.SP,F.uX,a.oD,a.Oy,a.TC,a.xy,a.tt,a.jH],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex:auto;width:85vw;max-width:100%;box-sizing:border-box}[_nghost-%COMP%]     .mat-tab-body-wrapper{flex:auto}[_nghost-%COMP%]     .mat-tab-body-content{display:flex;flex-direction:column}.general-group[_ngcontent-%COMP%]{width:680px}.tab-item[_ngcontent-%COMP%]{display:flex;align-items:center}.tab-item[_ngcontent-%COMP%]   .tab-item_title[_ngcontent-%COMP%]{flex:auto}"]}),o})();var Ye=s(7446),S=s(3489),Ve=s(4107),Ke=s(7531);function $e(o,u){if(1&o&&(e.TgZ(0,"mat-icon"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(null==t.controlProperties?null:t.controlProperties.prefixIcon)}}function We(o,u){if(1&o&&(e.TgZ(0,"mat-icon"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(null==t.controlProperties?null:t.controlProperties.suffixIcon)}}function Xe(o,u){1&o&&(e.TgZ(0,"button",9)(1,"mat-icon"),e._uU(2,"highlight_off"),e.qZA()())}function ze(o,u){if(1&o&&e.GkF(0,10),2&o){e.oxw(2);const t=e.MAs(1);e.Q6J("ngTemplateOutlet",t)}}function et(o,u){if(1&o&&e.GkF(0,11),2&o){e.oxw(2);const t=e.MAs(3);e.Q6J("ngTemplateOutlet",t)}}function tt(o,u){if(1&o&&(e.TgZ(0,"mat-form-field")(1,"mat-label"),e._uU(2),e.qZA(),e._UZ(3,"input",5),e.YNc(4,Xe,3,0,"button",6),e.YNc(5,ze,1,1,"ng-container",7),e.YNc(6,et,1,1,"ng-container",8),e.qZA()),2&o){const t=e.oxw();e.xp6(2),e.Oqu(t.element.label),e.xp6(2),e.Q6J("ngIf",null==t.controlProperties?null:t.controlProperties.clearButton),e.xp6(1),e.Q6J("ngIf",null==t.controlProperties?null:t.controlProperties.usePrefix),e.xp6(1),e.Q6J("ngIf",null==t.controlProperties?null:t.controlProperties.useSuffix)}}function nt(o,u){1&o&&(e.TgZ(0,"button",9)(1,"mat-icon"),e._uU(2,"highlight_off"),e.qZA()())}function ot(o,u){if(1&o&&e.GkF(0,10),2&o){e.oxw(2);const t=e.MAs(1);e.Q6J("ngTemplateOutlet",t)}}function it(o,u){if(1&o&&e.GkF(0,11),2&o){e.oxw(2);const t=e.MAs(3);e.Q6J("ngTemplateOutlet",t)}}function lt(o,u){if(1&o&&(e.TgZ(0,"mat-form-field")(1,"mat-label"),e._uU(2),e.qZA(),e._UZ(3,"mat-select",12),e.YNc(4,nt,3,0,"button",6),e.YNc(5,ot,1,1,"ng-container",7),e.YNc(6,it,1,1,"ng-container",8),e.qZA()),2&o){const t=e.oxw();e.xp6(2),e.Oqu(t.element.label),e.xp6(2),e.Q6J("ngIf",null==t.controlProperties?null:t.controlProperties.clearButton),e.xp6(1),e.Q6J("ngIf",null==t.controlProperties?null:t.controlProperties.usePrefix),e.xp6(1),e.Q6J("ngIf",null==t.controlProperties?null:t.controlProperties.useSuffix)}}function ut(o,u){1&o&&(e.TgZ(0,"button",9)(1,"mat-icon"),e._uU(2,"highlight_off"),e.qZA()())}function rt(o,u){if(1&o&&e.GkF(0,10),2&o){e.oxw(2);const t=e.MAs(1);e.Q6J("ngTemplateOutlet",t)}}function at(o,u){if(1&o&&e.GkF(0,11),2&o){e.oxw(2);const t=e.MAs(3);e.Q6J("ngTemplateOutlet",t)}}function ct(o,u){if(1&o&&(e.TgZ(0,"mat-form-field")(1,"mat-label"),e._uU(2),e.qZA(),e._UZ(3,"input",5),e.TgZ(4,"button",13)(5,"mat-icon"),e._uU(6,"remove"),e.qZA()(),e.TgZ(7,"button",14)(8,"mat-icon"),e._uU(9,"add"),e.qZA()(),e.YNc(10,ut,3,0,"button",6),e.YNc(11,rt,1,1,"ng-container",7),e.YNc(12,at,1,1,"ng-container",8),e.qZA()),2&o){const t=e.oxw();e.xp6(2),e.Oqu(t.element.label),e.xp6(8),e.Q6J("ngIf",null==t.controlProperties?null:t.controlProperties.clearButton),e.xp6(1),e.Q6J("ngIf",null==t.controlProperties?null:t.controlProperties.usePrefix),e.xp6(1),e.Q6J("ngIf",null==t.controlProperties?null:t.controlProperties.useSuffix)}}function st(o,u){1&o&&(e.TgZ(0,"button",9)(1,"mat-icon"),e._uU(2,"highlight_off"),e.qZA()())}function pt(o,u){if(1&o&&e.GkF(0,10),2&o){e.oxw(2);const t=e.MAs(1);e.Q6J("ngTemplateOutlet",t)}}function dt(o,u){if(1&o&&e.GkF(0,11),2&o){e.oxw(2);const t=e.MAs(3);e.Q6J("ngTemplateOutlet",t)}}function mt(o,u){if(1&o&&(e.TgZ(0,"mat-form-field")(1,"mat-label"),e._uU(2),e.qZA(),e._UZ(3,"input",5),e.TgZ(4,"button",14)(5,"mat-icon"),e._uU(6,"date_range"),e.qZA()(),e.YNc(7,st,3,0,"button",6),e.YNc(8,pt,1,1,"ng-container",7),e.YNc(9,dt,1,1,"ng-container",8),e.qZA()),2&o){const t=e.oxw();e.xp6(2),e.Oqu(t.element.label),e.xp6(5),e.Q6J("ngIf",null==t.controlProperties?null:t.controlProperties.clearButton),e.xp6(1),e.Q6J("ngIf",null==t.controlProperties?null:t.controlProperties.usePrefix),e.xp6(1),e.Q6J("ngIf",null==t.controlProperties?null:t.controlProperties.useSuffix)}}function _t(o,u){if(1&o&&e.GkF(0,18),2&o){e.oxw(2);const t=e.MAs(1);e.Q6J("ngTemplateOutlet",t)}}function ft(o,u){if(1&o&&e.GkF(0,18),2&o){e.oxw(2);const t=e.MAs(3);e.Q6J("ngTemplateOutlet",t)}}function gt(o,u){if(1&o&&(e.TgZ(0,"div",15),e.YNc(1,_t,1,1,"ng-container",16),e.TgZ(2,"mat-checkbox",17),e._uU(3),e.qZA(),e.YNc(4,ft,1,1,"ng-container",16),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.controlProperties?null:t.controlProperties.usePrefix),e.xp6(1),e.Q6J("checked",!0),e.xp6(1),e.Oqu(t.element.label),e.xp6(1),e.Q6J("ngIf",null==t.controlProperties?null:t.controlProperties.useSuffix)}}function ht(o,u){if(1&o&&e.GkF(0,18),2&o){e.oxw(2);const t=e.MAs(1);e.Q6J("ngTemplateOutlet",t)}}function Ct(o,u){if(1&o&&e.GkF(0,18),2&o){e.oxw(2);const t=e.MAs(3);e.Q6J("ngTemplateOutlet",t)}}function xt(o,u){if(1&o&&(e.TgZ(0,"div",19)(1,"button",20),e.YNc(2,ht,1,1,"ng-container",16),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.YNc(5,Ct,1,1,"ng-container",16),e.qZA()()),2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",null==t.controlProperties?null:t.controlProperties.usePrefix),e.xp6(2),e.Oqu(t.element.label),e.xp6(1),e.Q6J("ngIf",null==t.controlProperties?null:t.controlProperties.useSuffix)}}let vt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-builder-element-control"]],inputs:{element:"element",controlProperties:"controlProperties"},decls:10,vars:6,consts:[["tplPrefix",""],["tplSuffix",""],[4,"ngIf"],["class","checkbox-container",4,"ngIf"],["class","button-container",4,"ngIf"],["matInput","","type","text","readonly","readonly"],["matSuffix","","mat-icon-button","","color","accent",4,"ngIf"],["matPrefix","",3,"ngTemplateOutlet",4,"ngIf"],["matSuffix","",3,"ngTemplateOutlet",4,"ngIf"],["matSuffix","","mat-icon-button","","color","accent"],["matPrefix","",3,"ngTemplateOutlet"],["matSuffix","",3,"ngTemplateOutlet"],["readonly","readonly"],["matPrefix","","mat-icon-button","","color","primary"],["matSuffix","","mat-icon-button","","color","primary"],[1,"checkbox-container"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"checked"],[3,"ngTemplateOutlet"],[1,"button-container"],["mat-raised-button","","color","primary"]],template:function(t,n){1&t&&(e.YNc(0,$e,2,1,"ng-template",null,0,e.W1O),e.YNc(2,We,2,1,"ng-template",null,1,e.W1O),e.YNc(4,tt,7,4,"mat-form-field",2),e.YNc(5,lt,7,4,"mat-form-field",2),e.YNc(6,ct,13,4,"mat-form-field",2),e.YNc(7,mt,10,4,"mat-form-field",2),e.YNc(8,gt,5,4,"div",3),e.YNc(9,xt,6,3,"div",4)),2&t&&(e.xp6(4),e.Q6J("ngIf","TEXT"===n.element.controlType),e.xp6(1),e.Q6J("ngIf","SELECT"===n.element.controlType),e.xp6(1),e.Q6J("ngIf","NUMBER"===n.element.controlType),e.xp6(1),e.Q6J("ngIf","DATEPICKER"===n.element.controlType),e.xp6(1),e.Q6J("ngIf","CHECKBOX"===n.element.controlType),e.xp6(1),e.Q6J("ngIf","BUTTON"===n.element.controlType))},dependencies:[d.O5,d.tP,C.Hw,Ye.oG,S.KE,S.hX,S.qo,S.R9,Ve.gD,Ke.Nt,v.lW],styles:["[_nghost-%COMP%]{display:flex;width:100%}mat-form-field[_ngcontent-%COMP%], .checkbox-container[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;pointer-events:none;width:100%}.checkbox-container[_ngcontent-%COMP%]{display:flex;align-items:center}.button-container[_ngcontent-%COMP%]{display:flex;align-content:center;align-items:center;flex:auto}.button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .mat-form-field-prefix>.mat-icon, [_nghost-%COMP%]     .mat-form-field-suffix>.mat-icon{top:5px;position:relative}"]}),o})();function Tt(o,u){if(1&o&&(e.TgZ(0,"mat-card-header")(1,"mat-card-title"),e._uU(2),e.qZA()()),2&o){const t=e.oxw();e.xp6(2),e.Oqu(t.element.label)}}function bt(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"div",3)(1,"button",4),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onAddDefControl())}),e._uU(2," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u044d\u043b\u0435\u043c\u0435\u043d\u0442 "),e.qZA()()}}function At(o,u){if(1&o&&e._UZ(0,"app-builder-fb-container",5),2&o){const t=e.oxw();e.Q6J("elementIdx",t.element.idx)("rows",t.element.children)}}let Y=(()=>{class o{constructor(t){this.ufService=t}onAddDefControl(){this.element&&(Array.isArray(this.element.children)||(this.element.children=[]),this.element.children.push(this.ufService.getTemplateRow()),this.ufService.setChangedProject())}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-builder-element-panel"]],inputs:{element:"element"},decls:5,vars:3,consts:[[4,"ngIf"],["class","text-center",4,"ngIf"],[3,"elementIdx","rows",4,"ngIf"],[1,"text-center"],["mat-raised-button","","color","primary",3,"click"],[3,"elementIdx","rows"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-card"),e.YNc(1,Tt,3,1,"mat-card-header",0),e.TgZ(2,"mat-card-content"),e.YNc(3,bt,3,0,"div",1),e.YNc(4,At,1,2,"app-builder-fb-container",2),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngIf",n.element.label),e.xp6(2),e.Q6J("ngIf",!n.element.children||0===n.element.children.length),e.xp6(1),e.Q6J("ngIf",n.element.children&&n.element.children.length>0))},styles:["[_nghost-%COMP%]{display:flex;width:100%}[_nghost-%COMP%] > mat-card[_ngcontent-%COMP%]{width:100%}"]}),o})();function Et(o,u){if(1&o){const t=e.EpF();e._uU(0),e.TgZ(1,"button",5),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().index,l=e.oxw(2);return e.KtG(l.onRemoveTab(i))}),e.TgZ(2,"mat-icon"),e._uU(3,"cancel"),e.qZA()()}if(2&o){const t=e.oxw().$implicit;e.hij(" ",t.label," ")}}function Ft(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"div",6)(1,"button",7),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,l=e.oxw(2);return e.KtG(l.onAddDefControl(i.children))}),e._uU(2," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u044d\u043b\u0435\u043c\u0435\u043d\u0442 "),e.qZA()()}}function Bt(o,u){if(1&o&&e._UZ(0,"app-builder-fb-container",8),2&o){const t=e.oxw().$implicit;e.Q6J("rows",t.children)}}function wt(o,u){if(1&o&&(e.TgZ(0,"mat-tab"),e.YNc(1,Et,4,1,"ng-template",2),e.YNc(2,Ft,3,0,"div",3),e.YNc(3,Bt,1,1,"app-builder-fb-container",4),e.qZA()),2&o){const t=u.$implicit;e.xp6(2),e.Q6J("ngIf",!t.children||0===t.children.length),e.xp6(1),e.Q6J("ngIf",t.children)}}function Zt(o,u){if(1&o&&(e.TgZ(0,"mat-tab-group"),e.YNc(1,wt,4,2,"mat-tab",1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.element.tabs)}}let V=(()=>{class o{constructor(t,n){this.dialogService=t,this.ufService=n}onAddDefControl(t){Array.isArray(t)||(t=[]),t.push(this.ufService.getTemplateRow("PANEL")),this.ufService.setChangedProject()}onRemoveTab(t){this.dialogService.showConfirm("\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u0443 \u0432\u043a\u043b\u0430\u0434\u043a\u0443?").subscribe({next:()=>{var n;null===(n=this.element.tabs)||void 0===n||n.splice(t,1),this.ufService.setChangedProject()},error:()=>{}})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.xA),e.Y36(A))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-builder-element-tabs-container"]],inputs:{element:"element"},decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],["mat-tab-label",""],["class","text-center mt-10",4,"ngIf"],[3,"rows",4,"ngIf"],["mat-icon-button","","color","accent",3,"click"],[1,"text-center","mt-10"],["mat-raised-button","","color","primary",3,"click"],[3,"rows"]],template:function(t,n){1&t&&e.YNc(0,Zt,2,1,"mat-tab-group",0),2&t&&e.Q6J("ngIf",n.element.tabs)},styles:["[_nghost-%COMP%]{display:flex;width:100%}[_nghost-%COMP%] > mat-tab-group[_ngcontent-%COMP%]{width:100%}"]}),o})();function Pt(o,u){if(1&o&&e._UZ(0,"app-builder-element-tabs-container",19),2&o){const t=e.oxw();e.Q6J("element",t.element)}}function yt(o,u){if(1&o&&e._UZ(0,"app-builder-element-panel",19),2&o){const t=e.oxw();e.Q6J("element",t.element)}}function Dt(o,u){if(1&o&&e._UZ(0,"app-builder-element-control",20),2&o){const t=e.oxw();e.Q6J("element",t.element)("controlProperties",t.element.controlProperties)}}function St(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"div",21),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleClearButton())}),e.TgZ(1,"mat-icon"),e._uU(2),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(2),e.Oqu(t.clearButton?"block":"disabled_visible")}}function Ot(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"div",22),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onAddTab())}),e.TgZ(1,"mat-icon"),e._uU(2,"post_add"),e.qZA()()}}function Nt(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.onAddElement("CONTROL","AFTER",l.value))}),e._uU(1),e.qZA()}if(2&o){const t=u.$implicit;e.xp6(1),e.hij(" ",t.title," ")}}function Mt(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.onAddElement("CONTROL","BEFORE",l.value))}),e._uU(1),e.qZA()}if(2&o){const t=u.$implicit;e.xp6(1),e.hij(" ",t.title," ")}}const Jt=["*"];let kt=(()=>{class o{constructor(t,n){this.dialogService=t,this.ufService=n,this.addElementEvent=new e.vpe,this.removeElementEvent=new e.vpe,this.controlTypesList=H}get getAutofill(){return this.element.autofill}get getWidth(){if(!this.element.autofill&&a.ZH.hasValue(this.element.width)&&!isNaN(Number(this.element.width))){const t="percent"===this.element.widthUnit?"%":"px";return`${Number(this.element.width)}${t}`}return null}onDblClick(t){t.stopPropagation(),this.onControlSettings()}get hasAddTab(){return"TABS"===this.element.type}get hasClearButton(){return"CONTROL"===this.element.type&&L.includes(String(this.element.controlType))}get clearButton(){var t,n;return null!==(n=null===(t=this.element.controlProperties)||void 0===t?void 0:t.clearButton)&&void 0!==n&&n}onControlSettings(){this.dialogService.showModal("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430",Ge,{element:this.element},!1,"",!0).subscribe(t=>{null!=t&&t.element&&(Object.keys(t.element).forEach(n=>{this.element[n]=t.element[n]}),this.ufService.setChangedProject())})}onAddTab(){if(this.hasAddTab){const t=this.ufService.getTemplateTab();Array.isArray(this.element.tabs)||(this.element.tabs=[]),this.element.tabs.push(t),this.ufService.setChangedProject()}}onRemoveElement(){this.dialogService.showConfirm("\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u043e\u0442 \u044d\u043b\u0435\u043c\u0435\u043d\u0442?").subscribe({next:()=>{this.removeElementEvent.emit(this.elementIdx)},error:()=>{}})}onAddElement(t,n,i){this.addElementEvent.emit({idx:this.elementIdx,type:t,controlType:i,place:n})}toggleAutofill(){this.element.autofill=!this.element.autofill,this.ufService.setChangedProject()}toggleClearButton(){var t;this.hasClearButton&&void 0!==(null===(t=this.element.controlProperties)||void 0===t?void 0:t.clearButton)&&(this.element.controlProperties.clearButton=!this.element.controlProperties.clearButton,this.ufService.setChangedProject())}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.xA),e.Y36(A))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-builder-element-container"]],hostVars:4,hostBindings:function(t,n){1&t&&e.NdJ("dblclick",function(l){return n.onDblClick(l)}),2&t&&(e.Udp("width",n.getWidth),e.ekj("flex-auto",n.getAutofill))},inputs:{elementIdx:"elementIdx",element:"element"},outputs:{addElementEvent:"addElementEvent",removeElementEvent:"removeElementEvent"},ngContentSelectors:Jt,decls:49,vars:13,consts:[[3,"element",4,"ngIf"],[3,"element","controlProperties",4,"ngIf"],[1,"control-panel"],[1,"flex-row","flex-auto"],["title","\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u044c \u044d\u043b\u0435\u043c\u0435\u043d\u0442",1,"control-button"],["title","\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430",1,"control-button",3,"click"],["title","\u041f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0430\u0432\u0442\u043e\u0448\u0438\u0440\u0438\u043d\u044b \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430",1,"control-button","autofill",3,"click"],["class","control-button","title","\u0421\u043a\u0440\u044b\u0442\u044c/\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043a\u043d\u043e\u043f\u043a\u0443 \u043e\u0447\u0438\u0441\u0442\u043a\u0438",3,"click",4,"ngIf"],["class","control-button","title","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u043a\u043b\u0430\u0434\u043a\u0443",3,"click",4,"ngIf"],["mat-icon-button","","title","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u044d\u043b\u0435\u043c\u0435\u043d\u0442","color","primary",1,"control-button",3,"matMenuTriggerFor"],["title","\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u043b\u0435\u043c\u0435\u043d\u0442",1,"control-button","remove",3,"click"],["addMenu","matMenu"],["mat-menu-item","",3,"matMenuTriggerFor"],["addBeforeMenu","matMenu"],["mat-menu-item","",3,"click"],["addAfterMenu","matMenu"],["controlsAfterMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["controlsBeforeMenu","matMenu"],[3,"element"],[3,"element","controlProperties"],["title","\u0421\u043a\u0440\u044b\u0442\u044c/\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043a\u043d\u043e\u043f\u043a\u0443 \u043e\u0447\u0438\u0441\u0442\u043a\u0438",1,"control-button",3,"click"],["title","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u043a\u043b\u0430\u0434\u043a\u0443",1,"control-button",3,"click"]],template:function(t,n){if(1&t&&(e.F$t(),e.YNc(0,Pt,1,1,"app-builder-element-tabs-container",0),e.YNc(1,yt,1,1,"app-builder-element-panel",0),e.YNc(2,Dt,1,2,"app-builder-element-control",1),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4),e.Hsn(6),e.qZA(),e.TgZ(7,"div",5),e.NdJ("click",function(){return n.onControlSettings()}),e.TgZ(8,"mat-icon"),e._uU(9,"settings"),e.qZA()(),e.TgZ(10,"div",6),e.NdJ("click",function(){return n.toggleAutofill()}),e.TgZ(11,"mat-icon"),e._uU(12),e.qZA()(),e.YNc(13,St,3,1,"div",7),e.YNc(14,Ot,3,0,"div",8),e.qZA(),e.TgZ(15,"bitton",9)(16,"mat-icon"),e._uU(17,"add_circle_outline"),e.qZA()(),e.TgZ(18,"div",10),e.NdJ("click",function(){return n.onRemoveElement()}),e.TgZ(19,"mat-icon"),e._uU(20,"cancel"),e.qZA()()(),e.TgZ(21,"mat-menu",null,11)(23,"button",12),e._uU(24," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u044d\u043b\u0435\u043c\u0435\u043d\u0442 \u0441\u043b\u0435\u0432\u0430 "),e.qZA(),e.TgZ(25,"button",12),e._uU(26," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u044d\u043b\u0435\u043c\u0435\u043d\u0442 \u0441\u043f\u0440\u0430\u0432\u0430 "),e.qZA()(),e.TgZ(27,"mat-menu",null,13)(29,"button",14),e.NdJ("click",function(){return n.onAddElement("TABS","BEFORE")}),e._uU(30," \u0412\u043a\u043b\u0430\u0434\u043a\u0438 "),e.qZA(),e.TgZ(31,"button",14),e.NdJ("click",function(){return n.onAddElement("PANEL","BEFORE")}),e._uU(32," \u041f\u0430\u043d\u0435\u043b\u044c "),e.qZA(),e.TgZ(33,"button",12),e._uU(34," \u041a\u043e\u043d\u0442\u0440\u043e\u043b "),e.qZA()(),e.TgZ(35,"mat-menu",null,15)(37,"button",14),e.NdJ("click",function(){return n.onAddElement("TABS","AFTER")}),e._uU(38,"\u0412\u043a\u043b\u0430\u0434\u043a\u0438"),e.qZA(),e.TgZ(39,"button",14),e.NdJ("click",function(){return n.onAddElement("PANEL","AFTER")}),e._uU(40,"\u041f\u0430\u043d\u0435\u043b\u044c"),e.qZA(),e.TgZ(41,"button",12),e._uU(42,"\u041a\u043e\u043d\u0442\u0440\u043e\u043b"),e.qZA()(),e.TgZ(43,"mat-menu",null,16),e.YNc(45,Nt,2,1,"button",17),e.qZA(),e.TgZ(46,"mat-menu",null,18),e.YNc(48,Mt,2,1,"button",17),e.qZA()),2&t){const i=e.MAs(22),l=e.MAs(28),r=e.MAs(36),c=e.MAs(44),p=e.MAs(47);e.Q6J("ngIf","TABS"===n.element.type),e.xp6(1),e.Q6J("ngIf","PANEL"===n.element.type),e.xp6(1),e.Q6J("ngIf","CONTROL"===n.element.type),e.xp6(10),e.Oqu(n.element.autofill?"compress":"expand"),e.xp6(1),e.Q6J("ngIf",n.hasClearButton),e.xp6(1),e.Q6J("ngIf",n.hasAddTab),e.xp6(1),e.Q6J("matMenuTriggerFor",i),e.xp6(8),e.Q6J("matMenuTriggerFor",l),e.xp6(2),e.Q6J("matMenuTriggerFor",r),e.xp6(8),e.Q6J("matMenuTriggerFor",p),e.xp6(8),e.Q6J("matMenuTriggerFor",c),e.xp6(4),e.Q6J("ngForOf",n.controlTypesList),e.xp6(3),e.Q6J("ngForOf",n.controlTypesList)}},dependencies:[d.sg,d.O5,C.Hw,h.VK,h.OP,h.p6,vt,Y,V],styles:["[_nghost-%COMP%]{display:flex;position:relative;margin:0 3px;border:1px solid transparent}[_nghost-%COMP%]:hover{border:1px solid rgba(0,73,144,.3)}.control-panel[_ngcontent-%COMP%]{opacity:0;align-items:center;position:absolute;left:0;top:0;right:0;height:20px;z-index:1;display:flex;background-color:#0003}.control-panel[_ngcontent-%COMP%]:hover{opacity:1}.control-panel[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]{width:20px;height:20px;line-height:20px;cursor:pointer;color:#004990}.control-panel[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:20px;height:20px;line-height:20px;font-size:20px}.control-panel[_ngcontent-%COMP%]   .control-button.autofill[_ngcontent-%COMP%]{transform:rotate(90deg)}.control-panel[_ngcontent-%COMP%]   .control-button.remove[_ngcontent-%COMP%]{color:#e32636}.control-button[_ngcontent-%COMP%]     .mat-icon{width:20px;height:20px;line-height:20px;font-size:20px}"]}),o})();function Rt(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"app-builder-element-container",12),e.NdJ("addElementEvent",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.onAddElementEvent(i))})("removeElementEvent",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.onRemoveElementEvent(i))}),e.TgZ(1,"mat-icon",13),e._uU(2,"open_with"),e.qZA()()}if(2&o){const t=u.$implicit;e.Q6J("elementIdx",u.index)("element",t)}}function It(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.onAddRow("AFTER","CONTROL",l.value))}),e._uU(1),e.qZA()}if(2&o){const t=u.$implicit;e.xp6(1),e.hij(" ",t.title," ")}}function Ut(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.onAddRow("BEFORE","CONTROL",l.value))}),e._uU(1),e.qZA()}if(2&o){const t=u.$implicit;e.xp6(1),e.hij(" ",t.title," ")}}const qt=["*"];let Qt=(()=>{class o{constructor(t){this.ufService=t,this.addRowEvent=new e.vpe,this.removeRowEvent=new e.vpe,this.controlTypesList=H}getDropListConnectedTo(){return this.ufService.getRowsDropListConnectedTo(this.row.idx)}onDrop(t){t.previousContainer===t.container?(0,_.bA)(t.container.data.children,t.previousIndex,t.currentIndex):((0,_.EA)(t.previousContainer.data.children,t.container.data.children,t.previousIndex,t.currentIndex),0===t.previousContainer.data.children.length&&void 0!==t.previousContainer.data.idx&&this.ufService.removeEmptyRow(t.previousContainer.data.idx)),this.ufService.setChangedProject()}onRemoveElementEvent(t){this.row.children.splice(t,1),0===this.row.children.length&&this.removeRowEvent.emit(this.elementIdx),this.ufService.setChangedProject()}onAddElementEvent(t){let n=null;switch(t.type){case"CONTROL":t.controlType&&(n=this.ufService.getTemplateControl(t.controlType));break;case"PANEL":n=this.ufService.getTemplatePanel();break;case"TABS":n=this.ufService.getTemplateTabs();break;default:return}!n||("BEFORE"===t.place?this.row.children.splice(t.idx,0,n):t.idx===this.row.children.length-1?this.row.children.push(n):this.row.children.splice(t.idx+1,0,n),this.ufService.setChangedProject())}onAddRow(t,n,i){this.addRowEvent.emit({idx:this.elementIdx,type:n,controlType:i,place:t})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-builder-element-row"]],inputs:{elementIdx:"elementIdx",row:"row"},outputs:{addRowEvent:"addRowEvent",removeRowEvent:"removeRowEvent"},ngContentSelectors:qt,decls:35,vars:11,consts:[["cdkDropList","","cdkDropListOrientation","horizontal",1,"flex-row","flex-auto",3,"id","cdkDropListConnectedTo","cdkDropListData","cdkDropListDropped"],["cdkDrag","",3,"elementIdx","element","addElementEvent","removeElementEvent",4,"ngFor","ngForOf"],["title","\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443",1,"control-button","drag-handle"],["title","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443",1,"control-button","add-row",3,"matMenuTriggerFor"],["addMenu","matMenu"],["mat-menu-item","",3,"matMenuTriggerFor"],["addBeforeMenu","matMenu"],["mat-menu-item","",3,"click"],["addAfterMenu","matMenu"],["controlsAfterMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["controlsBeforeMenu","matMenu"],["cdkDrag","",3,"elementIdx","element","addElementEvent","removeElementEvent"],["cdkDragHandle",""]],template:function(t,n){if(1&t&&(e.F$t(),e.TgZ(0,"div",0),e.NdJ("cdkDropListDropped",function(l){return n.onDrop(l)}),e.YNc(1,Rt,3,2,"app-builder-element-container",1),e.qZA(),e.TgZ(2,"div",2),e.Hsn(3),e.qZA(),e.TgZ(4,"div",3)(5,"mat-icon"),e._uU(6,"add_circle_outline"),e.qZA()(),e.TgZ(7,"mat-menu",null,4)(9,"button",5),e._uU(10," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443 \u0434\u043e "),e.qZA(),e.TgZ(11,"button",5),e._uU(12," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443 \u043f\u043e\u0441\u043b\u0435 "),e.qZA()(),e.TgZ(13,"mat-menu",null,6)(15,"button",7),e.NdJ("click",function(){return n.onAddRow("BEFORE","TABS")}),e._uU(16,"\u0412\u043a\u043b\u0430\u0434\u043a\u0438"),e.qZA(),e.TgZ(17,"button",7),e.NdJ("click",function(){return n.onAddRow("BEFORE","PANEL")}),e._uU(18,"\u041f\u0430\u043d\u0435\u043b\u044c"),e.qZA(),e.TgZ(19,"button",5),e._uU(20," \u041a\u043e\u043d\u0442\u0440\u043e\u043b "),e.qZA()(),e.TgZ(21,"mat-menu",null,8)(23,"button",7),e.NdJ("click",function(){return n.onAddRow("AFTER","TABS")}),e._uU(24,"\u0412\u043a\u043b\u0430\u0434\u043a\u0438"),e.qZA(),e.TgZ(25,"button",7),e.NdJ("click",function(){return n.onAddRow("AFTER","PANEL")}),e._uU(26,"\u041f\u0430\u043d\u0435\u043b\u044c"),e.qZA(),e.TgZ(27,"button",5),e._uU(28,"\u041a\u043e\u043d\u0442\u0440\u043e\u043b"),e.qZA()(),e.TgZ(29,"mat-menu",null,9),e.YNc(31,It,2,1,"button",10),e.qZA(),e.TgZ(32,"mat-menu",null,11),e.YNc(34,Ut,2,1,"button",10),e.qZA()),2&t){const i=e.MAs(8),l=e.MAs(14),r=e.MAs(22),c=e.MAs(30),p=e.MAs(33);e.MGl("id","uf-row-",n.row.idx,""),e.Q6J("cdkDropListConnectedTo",n.getDropListConnectedTo())("cdkDropListData",n.row),e.xp6(1),e.Q6J("ngForOf",n.row.children),e.xp6(3),e.Q6J("matMenuTriggerFor",i),e.xp6(5),e.Q6J("matMenuTriggerFor",l),e.xp6(2),e.Q6J("matMenuTriggerFor",r),e.xp6(8),e.Q6J("matMenuTriggerFor",p),e.xp6(8),e.Q6J("matMenuTriggerFor",c),e.xp6(4),e.Q6J("ngForOf",n.controlTypesList),e.xp6(3),e.Q6J("ngForOf",n.controlTypesList)}},dependencies:[d.sg,C.Hw,_.Wj,_.Zt,_.Bh,h.VK,h.OP,h.p6,kt],styles:["[_nghost-%COMP%]{display:flex;align-items:center;min-height:32px;position:relative;margin:3px 0;border:1px solid transparent;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]:hover{border:1px solid rgba(0,73,144,.1)}[_nghost-%COMP%]:hover > .control-button[_ngcontent-%COMP%]{display:block}.control-button[_ngcontent-%COMP%]{width:20px;height:20px;line-height:20px;position:absolute;display:none;cursor:pointer;color:#004990}.control-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:20px;height:20px;line-height:20px;font-size:20px}.control-button.drag-handle[_ngcontent-%COMP%]{left:-10px;top:-10px}.control-button.add-row[_ngcontent-%COMP%]{right:-10px;top:50%;margin-top:-10px}.control-button[_ngcontent-%COMP%]     .mat-icon{width:20px;height:20px;line-height:20px;font-size:20px}"]}),o})();function Lt(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"app-builder-element-row",2),e.NdJ("addRowEvent",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.onAddRowEvent(i))})("removeRowEvent",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.onRemoveRowEvent(i))}),e.TgZ(1,"mat-icon",3),e._uU(2,"open_with"),e.qZA()()}if(2&o){const n=u.index;e.Q6J("row",u.$implicit)("elementIdx",n)}}let k=(()=>{class o{constructor(t,n){this.dialogService=t,this.ufService=n,this.rows=[]}getDropListConnectedTo(){return this.ufService.getContainerDropListConnectedTo()}onDrop(t){t.previousContainer===t.container?(0,_.bA)(t.container.data,t.previousIndex,t.currentIndex):(0,_.EA)(t.previousContainer.data,t.container.data,t.previousIndex,t.currentIndex),this.ufService.setChangedProject()}onRemoveRowEvent(t){this.rows.splice(t,1),this.ufService.isEmptyForm()&&this.dialogService.showMessage("\u0423\u0434\u0430\u043b\u0435\u043d\u044b \u0432\u0441\u0435 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u044b \u0444\u043e\u0440\u043c\u044b!!!<br /> \u0411\u0443\u0434\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0430 \u0444\u043e\u0440\u043c\u0430 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e").subscribe(()=>{this.ufService.setInitialRows(),this.ufService.setChangedProject()})}onAddRowEvent(t){const n=this.ufService.getTemplateRow(t.type,t.controlType);"BEFORE"===t.place?this.rows.splice(t.idx,0,n):t.idx===this.rows.length-1?this.rows.push(n):this.rows.splice(t.idx+1,0,n),this.ufService.setChangedProject()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.xA),e.Y36(A))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-builder-fb-container"]],inputs:{elementIdx:"elementIdx",rows:"rows"},decls:2,vars:4,consts:[["cdkDropList","",1,"flex-col","flex-auto",3,"id","cdkDropListConnectedTo","cdkDropListData","cdkDropListDropped"],["cdkDrag","",3,"row","elementIdx","addRowEvent","removeRowEvent",4,"ngFor","ngForOf"],["cdkDrag","",3,"row","elementIdx","addRowEvent","removeRowEvent"],["cdkDragHandle",""]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.NdJ("cdkDropListDropped",function(l){return n.onDrop(l)}),e.YNc(1,Lt,3,2,"app-builder-element-row",1),e.qZA()),2&t&&(e.MGl("id","uf-container-",n.elementIdx,""),e.Q6J("cdkDropListConnectedTo",n.getDropListConnectedTo())("cdkDropListData",n.rows),e.xp6(1),e.Q6J("ngForOf",n.rows))},dependencies:[d.sg,C.Hw,_.Wj,_.Zt,_.Bh,Qt],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex:auto;padding:10px}"]}),o})();function Ht(o,u){1&o&&e._UZ(0,"app-page-not-found")}function jt(o,u){if(1&o&&e._UZ(0,"app-builder-fb-container",13),2&o){const t=e.oxw();e.Q6J("elementIdx",0)("rows",t.rows)}}function Gt(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"div",14),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onEditProjectName())}),e.TgZ(1,"div"),e._uU(2),e.qZA(),e.TgZ(3,"mat-icon"),e._uU(4,"edit"),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(2),e.Oqu(t.projectName)}}let Yt=(()=>{class o{constructor(t,n,i,l,r,c){this.router=t,this.activatedRoute=n,this.httpClient=i,this.titleService=l,this.dialogService=r,this.ufService=c,this.is404Error=!1,this.stateLoading=!0,this.projectName="\u041f\u0440\u043e\u0435\u043a\u0442 \u0431\u0435\u0437 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f",this.projectSaved=!0,this.ngUnsubscribe=new E.x,this.projectId=null,this.titleService.setTitle(`\u0420\u0435\u0434\u0430\u043a\u0442\u043e\u0440 \u0444\u043e\u0440\u043c\u044b | ${X.X}`)}get hasProjectId(){return null!==this.projectId&&this.projectId>0}ngOnInit(){this.ufService.resetRows$.pipe((0,x.R)(this.ngUnsubscribe)).subscribe(()=>{this.rows=this.ufService.formRows,this.projectSaved=!1}),this.ufService.changeForm$.pipe((0,x.R)(this.ngUnsubscribe)).subscribe(()=>{this.projectSaved=!1}),this.activatedRoute.paramMap.pipe((0,x.R)(this.ngUnsubscribe)).subscribe(t=>{const n=t.get("id");this.stateLoading=!0,n&&["demo-cch","demo-adm-k"].includes(n)?this.loadDemo(n):"new"===n?(this.ufService.setInitialRows(),this.rows=this.ufService.formRows,this.projectName="\u041f\u0440\u043e\u0435\u043a\u0442 \u0431\u0435\u0437 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f",this.projectSaved=!1,this.stateLoading=!1,this.projectId=null):n&&this.loadProject(+n)})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}onPreviewProject(){this.projectSaved&&this.hasProjectId?this.router.navigate([`builder/${this.projectId}/preview`]):this.dialogService.showConfirm("\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442. \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438 \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c?").subscribe({next:()=>{this.saveProject(!1).subscribe(t=>{this.router.navigate([`builder/${t}/preview`])})},error:()=>{}})}onImportProject(){this.dialogService.showConfirm("\u0414\u0430\u043d\u043d\u044b\u0435 \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0431\u0443\u0434\u0443\u0442 \u043f\u043e\u0442\u0435\u0440\u044f\u043d\u044b. \u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c?").subscribe({next:()=>{a.ZH.uploadJson().subscribe(t=>{var n;this.projectName=null!==(n=t.name)&&void 0!==n?n:"\u0418\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442",this.ufService.fromJSON(t.rows)})},error:()=>{}})}onExportProject(){const t={name:this.projectName,rows:this.ufService.toJSON()};a.ZH.downloadJson(t,`${this.projectName}.json`)}onEditProjectName(){this.dialogService.showModal("\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430",W.G,{name:this.projectName}).subscribe(t=>{t&&t.name&&(this.projectName=t.name,this.ufService.setChangedProject())})}onRemoveProject(){!this.projectId||this.dialogService.showConfirm("\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u043e\u0442 \u043f\u0440\u043e\u0435\u043a\u0442?","\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430").subscribe({next:()=>{this.projectId&&this.ufService.removeProject(this.projectId).subscribe(()=>{this.router.navigate(["/"])})},error:()=>{}})}onSaveProject(){this.saveProject().subscribe()}loadProject(t){this.dialogService.showWait("\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043f\u0440\u043e\u0435\u043a\u0442\u0430..."),this.ufService.loadProject(t).subscribe({next:n=>{this.projectId=t,this.projectSaved=!0,this.projectName=n.name,this.rows=this.ufService.formRows,this.stateLoading=!1},error:n=>{this.dialogService.showToastError(n.message)},complete:()=>this.dialogService.hideWait()})}loadDemo(t){this.dialogService.showWait("\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0414\u0415\u041c\u041e \u043f\u0440\u043e\u0435\u043a\u0442\u0430..."),this.httpClient.get(`assets/demo/${t}.json?time=${(new Date).getTime()}`).pipe((0,$.x)(()=>this.dialogService.hideWait())).subscribe(n=>{var i;this.projectName=null!==(i=n.name)&&void 0!==i?i:"\u0418\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442",this.ufService.fromJSON(n.rows),this.projectId=null,this.projectSaved=!0,this.stateLoading=!1})}saveProject(t=!0){return new D.y(n=>{this.dialogService.showWait("\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430..."),this.ufService.saveProject(this.projectName,this.projectId).subscribe({next:i=>{!this.projectId&&t?this.router.navigate(["builder",i]):this.projectSaved=!0,n.next(i),n.complete()},error:i=>{this.dialogService.showToastError(i.message),n.error(i)},complete:()=>this.dialogService.hideWait()})})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(N.F0),e.Y36(N.gz),e.Y36(Q.eN),e.Y36(z.Dx),e.Y36(a.xA),e.Y36(A))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-builder-home"]],decls:32,vars:9,consts:[[4,"ngIf"],[1,"flex-col","flex-auto"],[3,"elementIdx","rows",4,"ngIf"],[1,"sidebar"],[1,"sidebar-sticky"],["class","project-name",3,"click",4,"ngIf"],[1,"sidebar-container"],[1,"flex-row"],["mat-raised-button","","color","success",1,"flex-auto","mat-button-with-icon",3,"disabled","click"],["mat-icon-button","","color","accent","title","\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442",3,"disabled","click"],[1,"flex-col","mt-10"],["mat-raised-button","","color","primary",1,"flex-auto","mat-button-with-icon",3,"click"],["mat-raised-button","","color","primary",1,"flex-auto","mat-button-with-icon","mt-5",3,"click"],[3,"elementIdx","rows"],[1,"project-name",3,"click"]],template:function(t,n){1&t&&(e.YNc(0,Ht,1,0,"app-page-not-found",0),e.TgZ(1,"div",1),e.YNc(2,jt,1,2,"app-builder-fb-container",2),e.qZA(),e.TgZ(3,"div",3)(4,"div",4),e.YNc(5,Gt,5,1,"div",5),e.TgZ(6,"div",6)(7,"div",7)(8,"button",8),e.NdJ("click",function(){return n.onSaveProject()}),e.TgZ(9,"mat-icon"),e._uU(10,"save"),e.qZA(),e.TgZ(11,"span"),e._uU(12,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442"),e.qZA()(),e.TgZ(13,"button",9),e.NdJ("click",function(){return n.onRemoveProject()}),e.TgZ(14,"mat-icon"),e._uU(15,"delete"),e.qZA()()(),e.TgZ(16,"div",10)(17,"button",11),e.NdJ("click",function(){return n.onPreviewProject()}),e.TgZ(18,"mat-icon"),e._uU(19,"remove_red_eye"),e.qZA(),e.TgZ(20,"span"),e._uU(21,"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u044b \u0444\u043e\u0440\u043c\u044b"),e.qZA()(),e.TgZ(22,"button",12),e.NdJ("click",function(){return n.onImportProject()}),e.TgZ(23,"mat-icon"),e._uU(24,"file_upload"),e.qZA(),e.TgZ(25,"span"),e._uU(26,"\u0418\u043c\u043f\u043e\u0440\u0442 \u043f\u0440\u043e\u0435\u043a\u0442\u0430"),e.qZA()(),e.TgZ(27,"button",12),e.NdJ("click",function(){return n.onExportProject()}),e.TgZ(28,"mat-icon"),e._uU(29,"file_download"),e.qZA(),e.TgZ(30,"span"),e._uU(31,"\u042d\u043a\u0441\u043f\u043e\u0440\u0442 \u043f\u0440\u043e\u0435\u043a\u0442\u0430"),e.qZA()()()()()()),2&t&&(e.Q6J("ngIf",n.is404Error),e.xp6(1),e.ekj("loading-skeleton",n.stateLoading),e.xp6(1),e.Q6J("ngIf",!n.stateLoading),e.xp6(1),e.ekj("loading-skeleton",n.stateLoading),e.xp6(2),e.Q6J("ngIf",!n.stateLoading),e.xp6(3),e.Q6J("disabled",n.projectSaved),e.xp6(5),e.Q6J("disabled",!n.hasProjectId))},dependencies:[d.O5,te.r,C.Hw,v.lW,k],styles:["[_nghost-%COMP%]{display:flex;flex:auto}.sidebar[_ngcontent-%COMP%]{width:350px;border-left:1px dotted #004990;box-sizing:border-box;display:flex;flex-direction:column}.sidebar[_ngcontent-%COMP%]:not(.loading-skeleton){background-color:#fff}.sidebar[_ngcontent-%COMP%]   .sidebar-container[_ngcontent-%COMP%]{padding:10px}.sidebar[_ngcontent-%COMP%]   .sidebar-sticky[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:sticky;top:56px}.project-name[_ngcontent-%COMP%]{border-bottom:1px solid #004990;text-align:center;font-size:22px;position:relative;padding:5px 0;cursor:pointer}.project-name[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{position:absolute;right:5px;top:3px;color:#004990;display:none}.project-name[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{display:block}.mt-5[_ngcontent-%COMP%]{margin-top:5px}"]}),o})();var O=s(9224);const Vt=[{path:"",redirectTo:"new",pathMatch:"full"},{path:":id",component:Yt}];let Kt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.ez,m.u5,m.UX,Q.JF,N.Bz.forChild(Vt),K.m,a._R]}),o})();e.B6R(Y,function(){return[d.O5,O.a8,O.dk,O.dn,O.n5,v.lW,k]},[]),e.B6R(V,function(){return[d.sg,d.O5,C.Hw,v.lW,F.SP,F.uD,F.uX,k]},[])}}]);