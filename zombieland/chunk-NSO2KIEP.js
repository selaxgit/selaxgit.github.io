import{E as a,K as i,T as v,X as x}from"./chunk-XGCI2AQE.js";var f={};function _(n,t,r){let e=2166136261;for(let o=0;o<t;o++)e^=n[o].uid,e=Math.imul(e,16777619),e>>>=0;return f[e]||h(n,t,e,r)}function h(n,t,r,e){let o={},c=0;for(let s=0;s<e;s++){let p=s<t?n[s]:i.EMPTY.source;o[c++]=p.source,o[c++]=p.style}let l=new x(o);return f[r]=l,l}var u=class{constructor(t){this._canvasPool=Object.create(null),this.canvasOptions=t||{},this.enableFullScreen=!1}_createCanvasAndContext(t,r){let e=v.get().createCanvas();e.width=t,e.height=r;let o=e.getContext("2d");return{canvas:e,context:o}}getOptimalCanvasAndContext(t,r,e=1){t=Math.ceil(t*e-1e-6),r=Math.ceil(r*e-1e-6),t=a(t),r=a(r);let o=(t<<17)+(r<<1);this._canvasPool[o]||(this._canvasPool[o]=[]);let c=this._canvasPool[o].pop();return c||(c=this._createCanvasAndContext(t,r)),c}returnCanvasAndContext(t){let r=t.canvas,{width:e,height:o}=r,c=(e<<17)+(o<<1);t.context.resetTransform(),t.context.clearRect(0,0,e,o),this._canvasPool[c].push(t)}clear(){this._canvasPool={}}},w=new u;export{_ as a,w as b};
